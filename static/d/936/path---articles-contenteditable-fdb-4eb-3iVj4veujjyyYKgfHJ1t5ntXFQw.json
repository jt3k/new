{"data":{"site":{"siteMetadata":{"title":"Веб-стандарты"}},"markdownRemark":{"id":"11afea1f-f0c4-59ef-822b-ff99e8d88d96","excerpt":"Атрибут contenteditable Джек Осборн  9 марта 2012 Мы уже давно используем различные технологии для редактирования и хранения текста в…","html":"<h1>Атрибут contenteditable</h1>\n<p><a href=\"http://jackosborne.co.uk/\">Джек Осборн</a> 9 марта 2012</p>\n<p>Мы уже давно используем различные технологии для редактирования и хранения текста в браузере. С атрибутом <code>contenteditable</code> это становится намного проще. В этой статье я расскажу для чего этот атрибут, как он работает и куда нам двигаться дальше.</p>\n<h2>Основы</h2>\n<p>Давайте обратимся к спецификации:</p>\n<blockquote>\n<p>Атрибут <code>contenteditable</code> обладает фиксированным набором значений, он может быть пустой строкой, <code>true</code> или <code>false</code>. Пустая строка или <code>true</code> обозначают, что элемент доступен для редактирования. <code>false</code> обозначает, что элемент недоступен для редактирования. Есть еще третье состояние — <code>inherit</code>, это значение атрибута по умолчанию и оно означает, что значение наследуется от родительского элемента.\n<a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#contenteditable\">WHATWG</a></p>\n</blockquote>\n<p>В основном, атрибут <code>contenteditable</code> должен был обеспечивать работу WYSIWYG-редакторов. Скорее всего, вы встречали его в инструментах подобных Symphony или на cайтах вроде Flickr, где вы начинаете редактировать материалы, просто кликнув в определенную область.</p>\n<p>Как упоминалось выше, <code>contenteditable</code> может быть в трёх возможных состояниях:</p>\n<ol>\n<li><code>contenteditable=\"\"</code> или <code>contenteditable=\"true\"</code> означает, что элемент доступен для редактирования</li>\n<li><code>contenteditable=\"false\"</code> означает, что элемент недоступен для редактирования</li>\n<li><code>contenteditable=\"inherit\"</code> означает, что элемент доступен для редактирования в случае, если его непосредственный родитель доступен для редактирования. Это значение атрибута по умолчанию.</li>\n</ol>\n<p>Когда вы добавляете элементу атрибут <code>contenteditable</code>, браузер делает его доступным для редактирования. Кроме того, все потомки этого элемента также становятся доступны для редактирования, если атрибут <code>contenteditable</code> у них явно не установлен в <code>false</code>.</p>\n<h2>Пример кода</h2>\n<pre><code>&#x3C;div id=\"example-one\" contenteditable=\"true\">\n    &#x3C;style scoped>\n        #example-one {\n            margin:12px 0;\n        }\n        #example-one[contenteditable=\"true\"] {\n            padding:10px;\n            outline:3px dashed #CCC;\n        }\n        #example-one[contenteditable=\"true\"]:hover {\n            outline:3px dashed #2B8BAD;\n        }\n    &#x3C;/style>\n    &#x3C;p>Всё что находится в этом блоке, доступно для редактирования в браузерах, поддерживающих &#x3C;code>HTML5&#x3C;/code>. Давайте, попробуйте: кликните для начала редактирования.&#x3C;/p>\n&#x3C;/div>\n</code></pre>\n<h2>Демонстрация</h2>\n<p>Вот два простых примера, показывающие работу <code>contenteditable</code>:</p>\n<h3>Пример №1</h3>\n<div id=\"example-one\" contenteditable=\"true\">\n    <style>\n        #example-one {\n            margin: 12px 0;\n            font-family: Consolas, Monaco, monospace;\n        }\n<pre><code>    #example-one[contenteditable=\"true\"] {\n        padding: 10px;\n        outline: 3px dashed #cccccc;\n    }\n    \n    #example-one[contenteditable=\"true\"]:hover {\n        background: #e4f3f9;\n        outline:3px dashed #2b8bad;\n    }\n&#x3C;/style>\nВсё, что находится в этом блоке, доступно для редактирования в браузерах, поддерживающих HTML5. Давайте, попробуйте: кликните для начала редактирования.\n</code></pre>\n</div>\n<p>Редактирование текста.</p>\n<p>Я использовал CSS для создания оформления, показывающего, что текст доступен для редактирования. Обратите внимание на ориентированное на будущее использование <code>&#x3C;style scoped></code>, которое описано в моей <a href=\"http://html5doctor.com/the-scoped-attribute/\">предыдущей статье</a>.</p>\n<h3>Пример №2</h3>\n<p><a href=\"http://twitter.com/chriscoyier\">Крис Койер</a> рассказывал на CSS-Tricks, что вы можете позволить вашим пользователям <a href=\"http://css-tricks.com/show-and-edit-style-element/\">редактировать CSS в реальном времени</a>, так как <code>&#x3C;style></code> элемент имеет <code>display:none</code> по умолчанию, но ведь значение можно изменить на <code>block</code>.</p>\n<p>Попробуйте отредактировать CSS, приведенный ниже:</p>\n<div id=\"example-two\" contenteditable=\"true\">\n    <style contenteditable=\"true\">\n        #example-two {\n            margin: 12px 0;\n            font-family: Consolas, Monaco, monospace;\n        }\n        \n        #example-two style {\n            display: block;\n            white-space: pre;\n        }\n        \n        #example-two[contenteditable=\"true\"] {\n            padding: 10px;\n            outline: 3px dashed #cccccc;\n        }\n        \n        #example-two[contenteditable=\"true\"]:hover{\n            background: #e4f3f9;\n            outline: 3px dashed #2B8BAD;\n        }\n    </style>\n</div>\n<p>Редактирование таблицы стилей.</p>\n<h2>Поддержка браузерами</h2>\n<p>Поддержка атрибута <code>contenteditable</code> браузерами на удивление хороша:</p>\n<table>\n<thead>\n<tr>\n<th>Браузер</th>\n<th>Версия</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Chrome</td>\n<td>4.0+</td>\n</tr>\n<tr>\n<td>Safari</td>\n<td>3.1+</td>\n</tr>\n<tr>\n<td>Mobile Safari</td>\n<td>5.0+</td>\n</tr>\n<tr>\n<td>Firefox</td>\n<td>3.5+</td>\n</tr>\n<tr>\n<td>Opera</td>\n<td>9.0+</td>\n</tr>\n<tr>\n<td>Opera Mini/Mobile</td>\n<td>Нет</td>\n</tr>\n<tr>\n<td>Internet Explorer</td>\n<td>5.5+</td>\n</tr>\n<tr>\n<td>Android</td>\n<td>3.0+</td>\n</tr>\n</tbody>\n</table>\n<p>Поддержка браузерами свойства <code>contenteditable</code>.</p>\n<p>Должен отметить, что появлением и отличной поддержкой атрибута мы обязаны IE 5.5, хотя на самом деле ранний вариант <code>contenteditable</code> был <a href=\"http://msdn.microsoft.com/en-us/library/ms537837(VS.85).aspx\">разработан и внедрен Microsoft в июле 2000 года</a>.</p>\n<p>Более подробную таблицу совместимости можно увидеть тут: <a href=\"http://caniuse.com/contenteditable\">When Can I Use</a>.</p>\n<h2>Сохранение изменений</h2>\n<p>Для написания этого раздела я обратился за помощью к доктору Реми, так как он гораздо более сведущ во всём, что касается хранения <del>данных</del> всего на свете.</p>\n<blockquote>\n<p>В зависимости от сложности блока ваш код может отлавливать нажатие <kbd>Enter</kbd> (код 13) для сохранения изменения и <kbd>Esc</kbd> (код 27) для их отмены.</p>\n<p>Когда пользователь нажимает <kbd>Enter</kbd> (предполагаем, что редактируем однострочные данные), получаем <code>innerHTML</code> редактируемого блока и посылаем AJAX-запрос с изменениями на сервер.</p>\n<p>Простой пример можно увидеть тут: <a href=\"http://jsbin.com/owavu3\">Сохранение данных из элемента с <code>сontenteditable</code> при помощи AJAX</a>.</p>\n<p><a href=\"http://remysharp.com/\">Реми Шарп</a></p>\n</blockquote>\n<h2>Заключение</h2>\n<p>В своих статьях я неоднократно упоминал этот подход: спецификация наконец-то сделала официальным то, что внедрено в браузерах много лет назад.</p>\n<p>Атрибут <code>contenteditable</code> — один из самых малоизвестных, но могу поспорить, что вы будете использовать его чаще, чем думаете.</p>\n<p>Представьте себе возможность редактирования блока текста после простого клика на него: делать быстрые правки в статьях, редактировать комментарии или даже создавать не завязанные на серверную часть таблицы в веб-приложениях.</p>\n<p>Если у вас есть идеи, как использовать этот атрибут — расскажите нам об этом в комментариях.</p>\n<h2>Читать дальше</h2>\n<ul>\n<li><a href=\"http://blog.whatwg.org/the-road-to-html-5-contenteditable#what\">Что такое contenteditable?</a></li>\n<li><a href=\"http://css-tricks.com/expanding-images-html5/\">Разворачиваем изображения с помощью HTML5 contenteditable</a></li>\n</ul>\n<p>Перевод оригинальной статьи «<a href=\"http://html5doctor.com/the-contenteditable-attribute/\">The contenteditable attribute</a>» <a href=\"http://jackosborne.co.uk/\">Джека Осборна</a> (Jack Osborne), опубликованной на сайте «<a href=\"http://html5doctor.com/\">HTML5 Doctor</a>».</p>\n<p>Перевод выполнил <a href=\"http://twitter.com/silentimp\">Антон Немцев</a> (SilentImp).</p>","frontmatter":{"title":"Атрибут contenteditable","date":"9 марта 2012"}}},"pageContext":{"slug":"/articles/contenteditable/"}}