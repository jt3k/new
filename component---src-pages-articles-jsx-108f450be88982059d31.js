(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{140:function(e,n,t){"use strict";t.r(n);var a=t(167),o=t(0),p=t.n(o),i=t(144),A=t.n(i),c=t(147),r=t(148),s=function(e){e.data;return p.a.createElement(r.b,null,p.a.createElement("h2",null,"Статьи сайта"),p.a.createElement("p",null,p.a.createElement(A.a,{to:"/"},"Вернуться на главную")))};n.default=function(){return p.a.createElement(c.StaticQuery,{query:"1438136063",render:s,data:a})}},145:function(e,n,t){"use strict";var a=t(152),o=t(0),p=t.n(o),i=t(4),A=t.n(i),c=t(155),r=t.n(c),s=t(147),d=t(148),l=(t(153),function(e){var n=e.children;return p.a.createElement(s.StaticQuery,{query:"2905412792",render:function(e){return p.a.createElement(p.a.Fragment,null,p.a.createElement(r.a,{title:e.site.siteMetadata.title,meta:[{name:"description",content:e.site.siteMetadata.description},{name:"keywords",content:e.site.siteMetadata.keywords}]},p.a.createElement("html",{lang:"en"})),p.a.createElement(d.a,{siteTitle:e.site.siteMetadata.title}),p.a.createElement("main",null,n))},data:a})});l.propTypes={children:A.a.node.isRequired};var h=l;t.d(n,"a",function(){return h})},146:function(e,n,t){var a;e.exports=(a=t(149))&&a.default||a},147:function(e,n,t){"use strict";t.r(n),t.d(n,"graphql",function(){return m}),t.d(n,"StaticQueryContext",function(){return h}),t.d(n,"StaticQuery",function(){return x});var a=t(0),o=t.n(a),p=t(4),i=t.n(p),A=t(144),c=t.n(A);t.d(n,"Link",function(){return c.a}),t.d(n,"withPrefix",function(){return A.withPrefix}),t.d(n,"navigate",function(){return A.navigate}),t.d(n,"push",function(){return A.push}),t.d(n,"replace",function(){return A.replace}),t.d(n,"navigateTo",function(){return A.navigateTo});var r=t(27);t.d(n,"waitForRouteChange",function(){return r.c});var s=t(146),d=t.n(s);t.d(n,"PageRenderer",function(){return d.a});var l=t(38);t.d(n,"parsePath",function(){return l.a});var h=o.a.createContext({}),x=function(e){return o.a.createElement(h.Consumer,null,function(n){return e.data||n[e.query]&&n[e.query].data?(e.render||e.children)(e.data?e.data.data:n[e.query].data):o.a.createElement("div",null,"Loading (StaticQuery)")})};function m(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}x.propTypes={data:i.a.object,query:i.a.string.isRequired,render:i.a.func,children:i.a.func}},148:function(e,n,t){"use strict";var a=t(0),o=t.n(a),p=t(4),i=t.n(p),A=(t(150),function(e){var n=e.siteTitle;return o.a.createElement("h1",{className:"header"},n)});A.propTypes={siteTitle:i.a.string.isRequired};var c=A,r=t(145);t.d(n,"a",function(){return c}),t.d(n,"b",function(){return r.a})},149:function(e,n,t){"use strict";t.r(n);t(39);var a=t(0),o=t.n(a),p=t(4),i=t.n(p),A=t(52),c=t(1),r=function(e){var n=e.location,t=c.default.getResourcesForPathnameSync(n.pathname);return o.a.createElement(A.a,Object.assign({key:n.pathname,location:n,pageResources:t},t.json))};r.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},n.default=r},150:function(e,n,t){},152:function(e){e.exports={data:{site:{siteMetadata:{title:"Веб-стандарты",description:"Сообщество разработчиков «Веб-стандарты»",keywords:"web standards"}}}}},153:function(e,n,t){},167:function(e){e.exports={data:{allMarkdownRemark:{edges:[{node:{html:'<h1>О доступности интерфейсов из первых уст</h1>\n<p>Уже не первый год мы в «Студии 15» занимаемся доступностью сайтов для людей с ограниченными возможностями. Чтобы делать эту работу качественнее и быстрее разрабатываем опенсорсную <a href="https://github.com/15web/web-accessibility">библиотеку интерфейсных решений</a>.</p>\n<p>Недавно мы <a href="http://www.15web.ru/blog/duma_accessibility">рассказывали о запуске</a> специальной версии сайта Законодательной Думы Томской области. Сайт мы тестировали на реальной целевой аудитории: позвали супругов Максима и Ольгу.</p>\n<p>Максим потерял зрение в последнем классе школы из-за осложнения после болезни. Он кандидат психологических наук, доцент, преподает в <a href="https://tusur.ru/">ТУСУРе</a> психологию и занимается социальной работой с людьми имеющими ограниченные возможности здоровья.</p>\n<p>Ольга частично потеряла зрение уже будучи взрослой. Она может различать только некоторые силуэты и отличать свет от темноты. Занимается частной психологической практикой.</p>\n<p>Мы взяли у Максима с Ольгой интервью и расспросили об их опыте пользования сайтами.</p>\n<p><strong>Как вы работаете с компьютером, какие программы используете, какие бывают проблемы с ними?</strong></p>\n<p><strong>Ольга:</strong> Я научилась работать на компьютере еще когда была зрячая, то есть на момент потери зрения уже была знакома с основными принципами взаимодействия с ПК. После потери зрения пришлось осваивать специальные инструменты — скринридеры. Самой удобной на тот момент была программа JAWS для Windows. Мне ее установил один слепой парень-программист и научил пользоваться. Да и вообще он меня многому научил, прежде чем я сама смогла уверенно использовать компьютер. Сложнее всего было научиться работать используя только клавиатуру. Слепые не могут нормально использовать мышь и все основные команды подают через неё. Также приходилось заново учиться пользоваться ранее знакомым интерфейсом. Если раньше можно было просто кликнуть на иконку печати и готово — документ уходил в печать, то теперь это уже было невозможно.</p>\n<p><strong>Максим:</strong> Особенность восприятия тех, кто работает со скринридерами в том, что здесь идет последовательная передача информации. Те, кто пользуется и зрением, и слухом могут быстро охватить всю информацию, а те кто используют скринридер должны пройти полностью всю страницу, чтобы найти то, что их интересует.</p>\n<p><strong>Скринридеры сильно отличаются друг от друга? Когда мы проводили тестирование, то столкнулись с различиями.</strong></p>\n<p><strong>Максим:</strong> Мы хорошо знакомы только с двумя скринридерами JAWS и NVDA. В основном используем JAWS, он платный, но имеет больше функциональных возможностей. NVDA мне нужен чаще всего, если на компьютере нет JAWS или он сбоит и необходимо наладить его работу.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.609375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3l3WjiRf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECERL/2gAIAQEAAQUCIrUUtURyz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAABEQAP/aAAgBAQAGPwKmVn//xAAZEAEBAAMBAAAAAAAAAAAAAAARAQAQITH/2gAIAQEAAT8hudIs6Hul0YrSXX//2gAMAwEAAgADAAAAEL8P/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgIDAQEAAAAAAAAAAAAAAREhQQAQMWHR/9oACAEBAAE/EDPADNrmEIKpkzRb97qSDWKwpv6YQv7r/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x43E;&#x43F;&#x443;&#x43B;&#x44F;&#x440;&#x43D;&#x44B;&#x435; &#x43F;&#x440;&#x43E;&#x433;&#x440;&#x430;&#x43C;&#x43C;&#x44B; &#x434;&#x43B;&#x44F; &#x447;&#x442;&#x435;&#x43D;&#x438;&#x44F; &#x441; &#x44D;&#x43A;&#x440;&#x430;&#x43D;&#x430;." title="" src="/static/screen-readers-b472d3f481e4e23be84aba4b8361018f-cb685.jpg" srcset="/static/screen-readers-b472d3f481e4e23be84aba4b8361018f-94a32.jpg 163w,\n/static/screen-readers-b472d3f481e4e23be84aba4b8361018f-09a61.jpg 325w,\n/static/screen-readers-b472d3f481e4e23be84aba4b8361018f-cb685.jpg 650w,\n/static/screen-readers-b472d3f481e4e23be84aba4b8361018f-eab17.jpg 975w,\n/static/screen-readers-b472d3f481e4e23be84aba4b8361018f-577a3.jpg 1280w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x43E;&#x43F;&#x443;&#x43B;&#x44F;&#x440;&#x43D;&#x44B;&#x435; &#x43F;&#x440;&#x43E;&#x433;&#x440;&#x430;&#x43C;&#x43C;&#x44B; &#x434;&#x43B;&#x44F; &#x447;&#x442;&#x435;&#x43D;&#x438;&#x44F; &#x441; &#x44D;&#x43A;&#x440;&#x430;&#x43D;&#x430;.</figcaption>\n</figure>\n<p><strong>Какая версия JAWS у вас сейчас установлена?</strong></p>\n<p><strong>Максим:</strong> Мы используем 15 версию, установленную под Windows 7 на одном компьютере и 11 версию под Windows XP на другом.</p>\n<p><strong>Каким браузером удобнее пользоваться при работе со скринридером?</strong></p>\n<p><strong>Ольга:</strong> В основном, Internet Explorer. Opera не озвучивается, а Chrome в большей степени графический браузер. И вот эту графику скринридеры не озвучивают. Когда я устанавливал Chrome, он у меня вообще молчал.</p>\n<p><strong>Мы тестировали оба скринридера на Chrome и они читали всю необходимую информацию.</strong></p>\n<p><strong>Максим:</strong> Видимо сейчас что-то изменилось. Когда я попробовал его использовать, у меня это не получилось и на этом мы оставили попытки.</p>\n<p><em>Сегодня все основные браузеры корректно работают со скринридерами. В том числе Chrome, Opera, Internet Explorer и Firefox — прим. автора.</em></p>\n<p><strong>Какая конкретно версия Internet Explorer у вас установлена?</strong></p>\n<p><strong>Максим:</strong> Мы используем 10 версию. А ещё на нашем ноутбуке установлена лицензионная операционная система и мы не стали её обновлять до Windows 10. Причина в том, что уже привыкли к этой версии и заново переучиваться на новую слишком трудозатратно. Кстати, важная для нас проблема, связанная с современными программными продуктами. Каждый раз, когда происходит обновление до новой версии, все старые функции меняют своё местоположение и приходится заново запоминать, где они находятся. Люди вообще склонны выполнять привычные действия.</p>\n<p><strong>С какими проблемами вы часто сталкиваете на сайтах?</strong></p>\n<p><strong>Максим:</strong> Основная проблема — это графика, которую скринридеры не воспроизводят. Например есть графическая иконка без подписи и мне абсолютно непонятно, что она означает. На портале <a href="https://tusur.ru/">ТУСУРа</a>, чтобы войти в личный кабинет нужно кликнуть на графическое изображение этой ссылки без каких-либо буквенных пояснений. Я с трудом нашёл эту иконку методом тыка. Ещё большой проблемой для слабовидящих, работающих без присутствия зрячих являются капчи, где для обеспечения безопасности пользователю необходимо ввести код с картинки в специальное поле. Раньше был сервис «Web of Visio» куда можно было отправлять отсканированную капчу и результат сразу копировался в буфер обмена. С его помощью работа с капчами была возможна, хоть и не всегда — сильно зашумленные картинки могли не распознаваться.</p>\n<p><strong>Ольга:</strong> Ещё мы сталкиваемся со сложностями при работе с выпадающими списками. Например, когда нужно выбрать правильную дату рождения, скринридер не озвучивает пункты списка и нет никакой возможности по нему ориентироваться. Помимо этого, большим неудобством может стать автоматическое обновление страницы, при котором фокус скринридера меняет своё местоположение. Бывает сложно сориентироваться когда ты выполняешь какую-то деятельность в одной точке страницы, а потом внезапно фокус переносится в другую. Могу добавить, что для слабовидящих очень важно иметь специальную навигацию на странице, иначе очень усложняется работа с сайтом. Например в социальной сети «Одноклассники» на страницах вообще нет заголовков. Чтобы дойти до нужной части страницы — необходимо пройти курсором всю страницу, это требует много времени.</p>\n<p><strong>Максим:</strong> Я часто сталкиваюсь с некорректным воспроизведением таблиц, расположенных на страницах сайта. Скринридер читает таблицу по HTML-коду: сначала название столбцов, потом в этом же порядке ячейки в строках. Например, при чтении таблицы с расписанием пар в университете сперва читаются все дни недели и только потом все пары. Непонятно, что к чему относится. Нужно это учитывать при помещении таблиц на страницу сайта.</p>\n<p><strong>Кроме полной потери зрения, бывает неполная, какие-то патологии. Какие проблемы есть у таких пользователей?</strong></p>\n<p><strong>Ольга:</strong> Важно понимать, что у всех людей, имеющих нарушения зрения, проблемы самые разные. У одних просто снижена острота зрения, у других цветовая аномалия, у третьих суженное зрение. И тут встает вопрос о том, как покрывать все эти аномалии в рамках одной версии для слабовидящих.</p>\n<p><strong>Получается, какое бы нарушение зрения у человека не было, скринридер универсальный инструмент?</strong></p>\n<p><strong>Ольга:</strong> Совсем нет, и не потому что скринридер — плохой инструмент. Понимаете, пока человек имеет хоть какое-то остаточное зрение, он не станет пользоваться скринридером точно также как не станет ходить с тростью. Он будет всегда ориентироваться на то зрение, что у него осталось. Даже вот у меня есть какой-то остаток и я всю жизнь пытаюсь им что-то увидеть. Я не ориентируюсь, как полностью слепые, тотально только на слух. Большая часть слабовидящих людей вместо использования скринридера будут увеличивать, растягивать экран, делать все что угодно, но пользоваться глазами, насколько это возможно. Тут психологический момент срабатывает, что использование скринридера — это все равно что быть слепым и ходить с тростью.</p>\n<p><strong>В Томске существуют организации, где незрячих людей учат пользоваться компьютерами?</strong></p>\n<p><strong>Ольга:</strong> В Пушкинской библиотеке есть отдел «Обслуживания инвалидов по зрению». У них там были специальные курсы, обучающие слепых работе на компьютере. Есть Бийский центр реабилитации, у них там специальные курсы, как профессиональная реабилитация. А вообще очень многие люди самоучки, каждый приспосабливается сам, как может. Часто им в этом помогают специальные пособия по работе с компьютером для слепых.</p>\n<h3><strong>Заключение</strong></h3>\n<p>Общение с реальными людьми, которым предстоит пользоваться нашей работой было очень полезным. Это помогло нам открыть множество нюансов, которых не найти в интернете. Еще болеё важным оказалось тестирование сайта. Обязательно расскажем про детали этого процесса в следующих материалах.</p>',headings:[{depth:1,value:"О доступности интерфейсов из первых уст"},{depth:3,value:"Заключение"}],frontmatter:{title:"О доступности интерфейсов из первых уст"}}},{node:{html:'<h1>Избегаем популярных ошибок в HTML5</h1>\n<p><a href="http://richclarkdesign.com/">Ричард Кларк</a> 27 июля 2011</p>\n<p>Разбирая сайты для <a href="http://html5gallery.com/">Галереи HTML5</a> и отвечая на вопросы читателей на сайте <a href="http://html5doctor.com/">Доктор HTML5</a>, я вынужден просматривать целую кучу страниц на HTML5 и, конечно же, их исходный код. В этой статье я расскажу вам об ошибках и сомнительной разметке, которые мне частенько приходится видеть, и объясню, как их избежать.</p>\n<h2>Не используйте <code>&#x3C;section></code> как обёртку для оформления</h2>\n<p>Одна из самых распространённых проблем, которую я часто вижу в разметке сайтов — это произвольная замена элементов <code>&#x3C;div></code> структурными элементами из HTML5, особенно замена оформительской обёртки на <code>&#x3C;section></code>. В XHTML или HTML4 я бы увидел что-нибудь такое:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;div id="wrapper">\n    &#x3C;div id="header">  \n        &#x3C;h1>Моя супер-пупер страница&#x3C;/h1>\n        &#x3C;!-- Содержимое шапки --\x3e\n    &#x3C;/div>\n    &#x3C;div id="main">\n        &#x3C;!-- Содержимое страницы --\x3e\n    &#x3C;/div>\n    &#x3C;div id="secondary">\n        &#x3C;!-- Вторичное содержимое --\x3e\n    &#x3C;/div>\n    &#x3C;div id="footer">\n        &#x3C;!-- Содержимое подвала --\x3e\n    &#x3C;/div>\n&#x3C;/div>\n</code></pre>\n<p>Вместо этого я вижу следующее:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;section id="wrapper">\n    &#x3C;header>  \n        &#x3C;h1>Моя супер-пупер страница&#x3C;/h1>\n        &#x3C;!-- Содержимое шапки --\x3e\n    &#x3C;/header>\n    &#x3C;div id="main">\n        &#x3C;!-- Содержимое страницы --\x3e\n    &#x3C;/div>\n    &#x3C;section id="secondary">\n        &#x3C;!-- Вторичное содержимое --\x3e\n    &#x3C;/section>\n    &#x3C;footer>\n        &#x3C;!-- Содержимое подвала --\x3e\n    &#x3C;/footer>\n&#x3C;/section>\n</code></pre>\n<p>Честно говоря, это неправильно: <code>&#x3C;section></code> — это <strong>не обёртка.</strong> <a href="http://html5doctor.com/section">Элемент <code>&#x3C;section></code></a> определяет смысловую секцию содержимого для создания <a href="http://html5doctor.com/outline">структуры документа</a>. Он должен содержать заголовок. Если вы ищете элемент для того чтобы обернуть в него всю страницу (в стиле HTML или XHTML), подумайте, не применить ли стили непосредственно к элементу <code>&#x3C;body></code>, <a href="http://camendesign.com/code/developpeurs_sans_frontieres">как описано у Крока Кеймена</a>. Если же вам всё ещё нужна дополнительная обёртка, используйте <code>&#x3C;div></code>. Раз уж <a href="http://html5doctor.com/div">Доктор Майк объясняет, что <code>&#x3C;div></code> не мёртв</a>, а вам не удаётся найти ничего более удачного, пожалуй, этот элемент будет самым подходящим для создания оформительской обёртки.</p>\n<p>Таким образом, корректной разметкой для упомянутого выше примера с использованием HTML5 и пары ролей ARIA будет следующий код. Обратите внимание, что вам, в зависимости от дизайна, всё ещё могут понадобится экстра-элементы <code>&#x3C;div></code>.</p>\n<pre><code>&#x3C;body>\n    &#x3C;header>  \n        &#x3C;h1>Моя супер-пупер страница&#x3C;/h1>\n        &#x3C;!-- Содержимое шапки --\x3e\n    &#x3C;/header>\n    &#x3C;div role="main">\n        &#x3C;!-- Содержимое страницы --\x3e\n    &#x3C;/div>\n    &#x3C;aside role="complementary">\n        &#x3C;!-- Вторичное содержимое --\x3e\n    &#x3C;/aside>\n    &#x3C;footer>\n        &#x3C;!-- Содержимое подвала --\x3e\n    &#x3C;/footer>\n&#x3C;/body>\n</code></pre>\n<p>Если вы не уверены, какие элементы использовать, я рекомендую вам обратиться к нашей <a href="http://html5doctor.com/happy-1st-birthday-us/#flowchart">пошаговой схеме выбора HTML5-элементов</a> для разметки содержимого.</p>\n<h2>Используйте <code>&#x3C;header></code> и <code>&#x3C;hgroup></code> осознанно</h2>\n<p>Элемент <code>&#x3C;hgroup></code> удалён из спецификации HTML5 и не рекомендован к использованию, <em>прим. редактора.</em></p>\n<p>Нет смысла писать разметку, если этого можно не делать, так ведь? К сожалению, я часто вижу элементы <code>&#x3C;header></code> и <code>&#x3C;hgroup></code> там, где они совсем не нужны. Вы можете узнать все подробности в наших статьях, посвящённых <a href="http://html5doctor.com/header">элементу <code>&#x3C;header></code></a> и <a href="http://html5doctor.com/hgroup">элементу <code>&#x3C;hgroup></code></a>, но я коротко резюмирую:</p>\n<ul>\n<li>Элемент <code>&#x3C;header></code> представляет собой группу вводного содержимого или навигационных средств и обычно содержит структурный заголовок.</li>\n<li>Элемент <code>&#x3C;hgroup></code> группирует набор элементов от <code>&#x3C;h1></code> до <code>&#x3C;h6></code>, представляя собой структурный заголовок в случае, когда заглавие имеет несколько уровней, вроде подзаголовков, альтернативных названий или слоганов.</li>\n</ul>\n<h3>Злоупотребление <code>&#x3C;header></code></h3>\n<p>Думаю, что вы в курсе, что <code>&#x3C;header></code> можно использовать в документе несколько раз. Но эта возможность привела к следующим ошибкам:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;article>\n    &#x3C;header>  \n        &#x3C;h1>Мой лучший пост&#x3C;/h1>\n    &#x3C;/header>\n    &#x3C;!-- Содержимое записи --\x3e\n&#x3C;/article>\n</code></pre>\n<p>Если ваш <code>&#x3C;header></code> содержит единственный заголовок, избавьтесь от ненужного <code>&#x3C;header></code>. Элемент <code>&#x3C;article></code> в любом случае гарантирует, что заголовок войдёт в смысловую структуру документа. И поскольку <code>&#x3C;header></code> не содержит нескольких элементов, как указано в его описании, зачем вам код, который, в общем-то, не нужен? Будьте проще:</p>\n<pre><code>&#x3C;article>\n    &#x3C;h1>Мой лучший пост&#x3C;/h1>\n    &#x3C;!-- Содержимое записи --\x3e\n&#x3C;/article>\n</code></pre>\n<h3>Неправильное использование <code>&#x3C;hgroup></code></h3>\n<p>Раз уж зашла речь о заголовках — я часто вижу неправильное использование <code>&#x3C;hgroup></code>. Не следует использовать <code>&#x3C;hgroup></code> в сочетании с <code>&#x3C;header></code> в случае, когда:</p>\n<ul>\n<li>дочерний заголовок всего один или</li>\n<li>элемента <code>&#x3C;hgroup></code> будет достаточно и без <code>&#x3C;header></code>.</li>\n</ul>\n<p>Первая проблема выглядит так:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;header>\n    &#x3C;hgroup>  \n        &#x3C;h1>Мой лучший пост&#x3C;/h1>\n    &#x3C;/hgroup>\n    &#x3C;p>Ричард Кларк&#x3C;/p>\n&#x3C;/header>\n</code></pre>\n<p>В этом случае стоит избавиться от <code>&#x3C;hgroup></code> и оставить только заголовок:</p>\n<pre><code>&#x3C;header>\n    &#x3C;h1>Мой лучший пост&#x3C;/h1>\n    &#x3C;p>Ричард Кларк&#x3C;/p>\n&#x3C;/header>\n</code></pre>\n<p>Следующая проблема состоит в очередном использовании элементов там, где они необязательны:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;header>\n    &#x3C;hgroup>  \n        &#x3C;h1>Моя компания&#x3C;/h1>\n        &#x3C;h2>Основана в 1893 году&#x3C;/h2>\n    &#x3C;/hgroup>\n&#x3C;/header>\n</code></pre>\n<p>Когда <code>&#x3C;hgroup></code> — это единственный дочерний элемент <code>&#x3C;header></code>, то какой смысл в этом <code>&#x3C;header></code>? Если в нём нет дополнительных элементов, соседствующих с <code>&#x3C;hgroup></code>, смело избавляйтесь от <code>&#x3C;header></code>.</p>\n<pre><code>&#x3C;hgroup>  \n    &#x3C;h1>Моя компания&#x3C;/h1>\n    &#x3C;h2>Основана в 1893 году&#x3C;/h2>\n&#x3C;/hgroup>\n</code></pre>\n<p>Больше примеров использования <code>&#x3C;hgroup></code> вы можете найти <a href="http://html5doctor.com/hgroup">в отдельной, более подробной статье</a>.</p>\n<h2>Не оборачивайте все списки ссылок в <code>&#x3C;nav></code></h2>\n<p>На момент написания статьи существует <a href="http://dev.w3.org/html5/html4-differences/#new-elements">более 30-ти новых элементов</a> и неудивительно, что у нас разбегаются глаза, когда дело доходит до создания осмысленной структурной разметки. Поэтому не стоит злоупортреблять всеми доступными сейчас суперсемантическими элементами. Что, к сожалению, часто происходит с элементом <code>&#x3C;nav></code>. Спецификация определяет роль <code>&#x3C;nav></code> следующим образом:</p>\n<blockquote>\n<p>Элемент <code>&#x3C;nav></code> представляет собой часть страницы, которая ссылается на другие страницы или части текущей, то есть раздел с навигационными ссылками.</p>\n<p>Замечание: не все группы ссылок на странице должны быть обёрнуты в элемент <code>&#x3C;nav></code> — этот элемент, главным образом, предназначен для группировки главных навигационных блоков. В частности, в подвалах часто содержатся короткие списки ссылок на различные части сайта, вроде правил использования сервиса, домашней страницы и копирайтов. Элемента <code>&#x3C;footer></code> вполне достаточно для группировки такого рода ссылок; и несмотря на то, что элемент <code>&#x3C;nav></code> может быть использован в таких случаях, обычно в этом нет необходимости.</p>\n<p><a href="http://www.whatwg.org/specs/web-apps/current-work/complete/sections.html#the-nav-element">Спецификация WHATWG HTML</a></p>\n</blockquote>\n<p>Ключевая фраза — «главных навигационных блоков». Мы можем дискутировать весь день о значении слова «главный», но для меня это значит:</p>\n<ul>\n<li>Самая главная навигация;</li>\n<li>Поиск по сайту;</li>\n<li>Вторичная навигация (что спорно);</li>\n<li>Внутренняя навигация (по длинной статье, например).</li>\n</ul>\n<p>И хотя здесь не может быть «правильного» или «неправильного» использования, поверхностный опрос вкупе с моей собственной интерпретацией говорят, что следующие случаи не подходят для использования <code>&#x3C;nav></code>:</p>\n<ul>\n<li>Постраничная навигация;</li>\n<li>Социальные ссылки, за исключением тех случаев, когда такие ссылки являются основной навигацией, к примеру, на сайтах <a href="http://about.me/">About Me</a> и <a href="http://flavours.me/">Flavours</a>;</li>\n<li>Тэги к записи в блоге;</li>\n<li>Категории записи;</li>\n<li>Навигация третьего уровня;</li>\n<li>Подвалы, набитые ссылками.</li>\n</ul>\n<p>Если вы не уверены, стоит ли оборачивать список ссылок в <code>&#x3C;nav></code>, просто спросите у себя: «главная ли это навигация?» Чтобы было легче ответить на этот вопрос, обратитесь к следующим правилам:</p>\n<ul>\n<li>«Не используйте <code>&#x3C;nav></code>, если кажется, что в этом случае может подойти и <code>&#x3C;section></code> с заголовком <code>&#x3C;hx></code>», — <a href="http://krijnhoetmer.nl/irc-logs/whatwg/20091209#l-480">Ян Хиксон, IRC</a>.</li>\n<li>Добавите ли вы этот блок в список ссылок «перейти» для улучшения доступности?</li>\n</ul>\n<p>Если ответ на оба эти вопроса «нет», то, скорее всего, это не <code>&#x3C;nav></code>.</p>\n<h2>Общие ошибки с элементом <code>&#x3C;figure></code></h2>\n<p>Ах, <code>&#x3C;figure></code>. Правильным использованием этого элемента вместе с подельником <code>&#x3C;figcaption></code> не так-то просто овладеть. Рассмотрим некоторые общие проблемы, которые я вижу при использовании <code>&#x3C;figure></code>.</p>\n<h3>Не каждая картинка это <code>&#x3C;figure></code></h3>\n<p>Ранее я советовал вам не писать лишний код там, где этого не требуется. Та же ошибка и здесь. Я видел сайты, где каждая картинка была обёрнута в <code>&#x3C;figure></code>. Нет никакой необходимости в добавлении экстра-разметки вокруг картинок только ради самого процесса. Вы просто делаете лишнюю работу и нисколько не улучшаете описание содержимого страницы.</p>\n<p>Спецификация обозначает <code>&#x3C;figure></code> как «содержимое в потоке, с необязательным заглавием, самодостаточное, обычно упоминаемое в качестве смысловой единицы в основном тексте». Как раз в этом состоит вся красота элемента <code>&#x3C;figure></code>, который может быть перемещён из основного содержимого, скажем, в колонку, что никак не повлияет на основной поток документа.</p>\n<p>Если это исключительно оформительская картинка, никаким образом не упомянутая в основном документе, то это точно не <code>&#x3C;figure></code>. Есть и другие варианты использования, но просто спросите себя: «Нужна ли эта картинка для лучшего понимания контекста?» Если нет, то это вероятно не <code>&#x3C;figure></code>, а, возможно, <code>&#x3C;aside></code>. Если да, спросите себя: «Можно ли переместить эту картинку в примечания к тексту?» Если ответ на оба вопроса «да», то это, вероятнее всего, <code>&#x3C;figure></code>.</p>\n<h3>Ваш логотип — это не <code>&#x3C;figure></code></h3>\n<p>Плавно переходим к следующей проблеме, вышеупомянутые правила применимы и к ней. Вот пара регулярно встречающихся примеров:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;header>\n    &#x3C;h1>\n        &#x3C;figure>\n            &#x3C;img src="logo.png" alt="Моя компания">\n        &#x3C;/figure>\n        Название компании\n    &#x3C;/h1>\n&#x3C;/header>\n\n&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;header>  \n    &#x3C;figure>\n        &#x3C;img src="logo.png" alt="Моя компания">\n    &#x3C;/figure>\n&#x3C;/header>\n</code></pre>\n<p>Добавить здесь нечего: это совсем неправильно. Мы можем спорить до посинения насчёт того, должно ли лого находиться внутри <code>&#x3C;h1></code>, но мы здесь не за этим. Настоящая проблема — в неправильном употреблении <code>&#x3C;figure></code>. Этот элемент должен использоваться, только если он упоминается в документе или контексте общего структурного элемента. Будет честным признать, что ваш логотип вряд ли будет упомянут подобным образом. Просто не делайте так. Всё, что вам нужно, это:</p>\n<pre><code>&#x3C;header>\n    &#x3C;h1>Название компании&#x3C;/h1>\n    &#x3C;!-- и всё остальное здесь --\x3e\n&#x3C;/header>\n</code></pre>\n<h3>Элемент <code>&#x3C;figure></code> — это не только картинки</h3>\n<p>Другое распространённое заблуждение насчёт <code>&#x3C;figure></code> — что он может быть использован только для картинок. Это не так. Элемент <code>&#x3C;figure></code> может быть видео, аудио, графиком (на SVG, к примеру), цитатой, таблицей, блоком кода, фрагментом текста или любой комбинацией этих и многих других элементов. Не ограничивайте использование <code>&#x3C;figure></code> только картинками. Наша работа, как энтузиастов от веб-стандартов, заключается в том, чтобы максимально точно описывать содержимое при помощи разметки.</p>\n<p>Некоторое время назад я <a href="http://html5doctor.com/figure">писал про <code>&#x3C;figure></code> детальнее</a>. Рекомендую почитать, если вам интересно узнать подробности или просто освежить знания.</p>\n<h2>Не используйте ненужные атрибуты <code>type</code></h2>\n<p>Эта проблема, пожалуй, является самой распространённой среди заявок в Галерею HTML5. И хотя это, по сути, не ошибка, мне кажется, что правильнее будет её избегать.</p>\n<p>Дело в том, что в HTML5 не нужно добавлять атрибут <code>type</code> для элементов <code>&#x3C;script></code> и <code>&#x3C;style></code>. Если эти элементы автоматически добавляются вашей CMS, то избавиться от них может быть непросто, но если вы пишете код руками или полностью контролируете шаблоны, то нет никакого смысла писать избыточные атрибуты. Поскольку все браузеры ожидают, что скриптами будет JavaScript, а стилями CSS, вам это совсем не нужно:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;link type="text/css" rel="stylesheet" href="styles.css">\n&#x3C;script type="text/javascript" src="scripts">&#x3C;/script>\n</code></pre>\n<p>Вместо этого просто напишите:</p>\n<pre><code>&#x3C;link rel="stylesheet" href="styles.css">\n&#x3C;script src="scripts">&#x3C;/script>\n</code></pre>\n<p>Кроме того, вы можете уменьшить объём кода, который пишете для задания кодировки документа и других вещей. Глава про семантику в «<a href="http://diveintohtml5.org/semantics.html">Погружении в HTML5</a>» Марка Пилгрима объясняет всё.</p>\n<h2>Неправильное использование атрибутов форм</h2>\n<p>Вы, должно быть, знаете, что HTML5 предложил набор новых атрибутов для элементов форм. Мы расскажем о них подробнее в ближайшие месяцы, а пока я покажу вам некоторые вещи, которые делать не стоит.</p>\n<h3>Одиночные атрибуты</h3>\n<p>Некоторые новые атрибуты для элементов форм являются одиночными, и только одно их присутствие в разметке обеспечивает смену поведения. Эти атрибуты включают:</p>\n<pre><code>autofocus\nautocomplete\nrequired\n</code></pre>\n<p>Надо признаться, я нечасто встречал подобное, но если в качестве примера взять атрибут <code>required</code>, то попадалось следующее:</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;input type="email" name="email" required="true">\n&#x3C;!-- Ещё один плохой пример --\x3e\n&#x3C;input type="email" name="email" required="1">\n</code></pre>\n<p>В конечном счёте это никому не вредит. HTML-парсер видит атрибут <code>required</code> в разметке, поэтому требуемая функциональность будет включена. Но что, если поставить код вверх ногами и написать <code>required="false"</code>?</p>\n<pre><code>&#x3C;!-- Не копируйте этот код! Он неправильный! --\x3e\n&#x3C;input type="email" name="email" required="false">\n</code></pre>\n<p>Парсер по-прежнему увидит атрибут <code>required</code> и применит поведение, несмотря на то, что вы пытались сказать ему не делать этого. Явно не то, что вам было нужно.</p>\n<p>Существует три правильных способа задания одиночных атрибутов, второй и третий из которых нужны только если вы пишете XHTML:</p>\n<pre><code>required\nrequired=""\nrequired="required"\n</code></pre>\n<p>Если применить эту запись к нашему примеру (в HTML), получится следующее:</p>\n<pre><code>&#x3C;input type="email" name="email" required>\n</code></pre>\n<h2>Резюме</h2>\n<p>Было бы просто невозможным перечислить здесь все странные приёмы и образцы разметки, с которыми мне довелось столкнуться, но эти — одни из самых часто встречавшихся. А какие ещё ошибки разметки бросались вам в глаза? Расскажите в комментариях.</p>\n<p>Перевод оригинальной статьи «<a href="http://html5doctor.com/avoiding-common-html5-mistakes/">Avoiding common HTML5 mistakes</a>» <a href="http://richclarkdesign.com/">Ричарда Кларка</a> (Richard Clark), опубликованной на сайте <a href="http://html5doctor.com/">HTML5Doctor.com</a>.</p>',headings:[{depth:1,value:"Избегаем популярных ошибок в HTML5"},{depth:2,value:"Не используйте "},{depth:2,value:"Используйте "},{depth:3,value:"Злоупотребление "},{depth:3,value:"Неправильное использование "},{depth:2,value:"Не оборачивайте все списки ссылок в "},{depth:2,value:"Общие ошибки с элементом "},{depth:3,value:"Не каждая картинка это "},{depth:3,value:"Ваш логотип — это не "},{depth:3,value:"Элемент "},{depth:2,value:"Не используйте ненужные атрибуты "},{depth:2,value:"Неправильное использование атрибутов форм"},{depth:3,value:"Одиночные атрибуты"},{depth:2,value:"Резюме"}],frontmatter:{title:"Избегаем популярных ошибок в HTML5"}}},{node:{html:'<h1>Исследуем большие экраны</h1>\n<p><a href="http://alistapart.com/author/mikepick">Майк Пик</a> 24 ноября 2014</p>\n<p>Прошло больше трёх лет с тех пор, как <a href="http://alistapart.com/article/responsive-web-design">адаптивный веб-дизайн</a> начал появляться в наших портфолио. Сегодня мы имеем солидный набор решений для создания сайтов, достойно отображающихся на маленьких устройствах. А как насчёт больших экранов?</p>\n<p>Для сайтов гибкий дизайн стал привычным. Мы растягиваем или сужаем содержимое страницы, чтобы как можно лучше заполнить доступную ширину экрана. Однако многие из таких сайтов ограничены максимальной шириной в 960 пикселей, из-за чего на современных широких экранах остается много пустого пространства.</p>\n<p>Проектирование дизайна сайтов для больших экранов — дело непростое: отрицательные отступы, масштабирование, плотность пикселей и раскладки для различных устройств — сетки, модули и колонки — всё это может изменить акценты и усложнить страницы.</p>\n<p>Плюс к этому, большие экраны обычно имеют горизонтальную ориентацию, которая плохо подходит для вертикально-ориентированных веб-страниц. Как у маленьких, так и у больших экранов есть свои диапазоны размеров и разрешений, но в случае с большими экранами разница будет более ощутима: от 11-дюймовых ноутбуков до огромных 30-дюймовых мониторов.</p>\n<p>Учитывая эти сложности, неудивительно, что многие сайты, даже сайт, на котором вы читаете статью <em>— (речь идет о сайте <a href="http://alistapart.com/">alistapart.com</a> — прим. ред.)</em> спроектированы под разрешение 1024×768. Но время, когда сайты были вынуждены вписываться в наиболее популярное разрешение экрана, прошло. Сегодня <a href="http://gs.statcounter.com/#resolution-ww-monthly-201311-201411">большинство пользователей имеют экраны гораздо шире 1024 пикселей</a>, и раскрытое на всю ширину окно браузера превращает тщательно продуманный сайт, дизайн которого ограничен шириной 960 пикселей, в <a href="http://www.tcm.com/mediaroom/video/474162/2001-A-Space-Odyssey-Movie-Clip-Monolith.html">монолитный памятник</a> посреди чистого поля.</p>\n<p>С каждым годом всё больше пользователей <a href="http://gs.statcounter.com/#mobile_vs_desktop-ww-monthly-201311-201411">выходят в интернет с мобильных устройств</a>, и, естественно, имеет смысл прилагать усилия к созданию сайта, которым было бы удобно пользоваться на маленьких экранах. Более того, мобильными раскладками можно прекрасно пользоваться и на любых устройствах, в том числе с большими экранами. А вот сказать тоже самое про десктопные раскладки, просматриваемые на экранах мобильных, нельзя.</p>\n<p>Проектируя дизайн, адаптированный к показу на больших экранах, дизайнеры имеют возможность работать с большим пространством, показывать больше содержимого при меньшей вертикальной прокрутке, делая, таким образом, посещение сайта значительно удобней. А используя те же приемы, с помощью которых мы адаптируем сайты для мобильных устройств, нам не придется увеличивать стоимость разработки или тратить на это больше времени.</p>\n<h2>Испытание содержимым</h2>\n<p>Как и в работе с любым другим дизайном, главное внимание при адаптации дизайна сайтов для больших экранов уделяется содержимому. Длинные или короткие тексты, фотографии, товары интернет-магазинов, видео или веб-приложения могут быть по-разному представлены на экранах разной ширины.</p>\n<p>Фотографии, результаты поиска и другое содержимое, вписывающийся в сетку, прекрасно подходят для широких экранов. Одновременный показ как можно большего количества содержимого позволяет пользователю быстро просматривать и сравнивать результаты поиска.</p>\n<p>А вот длинные тексты могут стать серьезным испытанием при адаптации сайтов к широким экранам. Если строки слишком длинные, чтение становится неудобным, а если слишком короткие — может возникнуть ощущение нервозности и ускорения, и как следствие — нарушится комфортный ритм восприятия текста.</p>\n<p>Чтение должно быть удобным. Для этого дизайнеру необходимо сбалансировать ширину текста (<a href="http://en.wikipedia.org/wiki/Measure_(typography)">длину строки</a>) исходя из размера и межстрочного интервала каждой строки. Известно, что классическая длина одной строки текста 7–10 слов (<a href="http://www.amazon.com/Systems-Graphic-Systeme-Visuele-Gestaltung/dp/3721201450">по Йозефу Мюллеру-Брокману</a>) или 45–75 символов (<a href="http://www.amazon.com/Elements-Typographic-Style-Version-Anniversary/dp/0881792128/">по Роберту Брингхёрсту</a>). Просто для информации: Брингхёрст также подмечает, что строка в традиционной книжной колонке должна быть примерно в 30 раз больше, чем используемый размер шрифта, но это число может варьироваться от 20 до 40.</p>\n<p>Чем шире текст, тем больший межстрочный интервал можно использовать. Это делает более удобным перемещение от строки к строке. Но слишком большой межстрочный интервал может привести к тому, что излишне разреженный текст станет напоминать студенческую работу. При этом надо понимать, что, когда размер текста увеличивается, число строк, помещающихся на экране, уменьшается, вынуждая постоянно прокручивать и мешая «погружению» читателя. Простое масштабирование текста — не самое удачное решение для широких экранов.</p>\n<h2>Работа с длинными текстами</h2>\n<p>Сайт <a href="http://thegreatdiscontent.com/">The Great Discontent</a> демонстрирует достаточно искусную адаптацию к широкому экрану, без фанатичного стремления заполнить каждый пиксель в окне браузера. Первая картинка в статье растягивается на всю доступную ширину, создавая ощущение визуальной целостности страницы. Содержимое статьи центрировано и ограничено сравнительно узкой шириной, а дополнительная информация, цитаты и картинки выносятся уже за пределы содержимого. Такой вынос содержимого создает асимметрию, которая дополняет растянутую на всю ширину картинку на первом экране — создавая иллюзию полноэкранного представления без ущерба для читаемости. Но не забывайте, что такие большие картинки, как эта, могут быть дорогими с точки зрения быстродействия, поэтому обязательно учитывайте баланс между качеством картинки и <a href="http://alistapart.com/article/improving-ux-through-front-end-performance">допустимым весом страницы</a>.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 71.12597547380156%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGLa1ZibAr/xAAZEAEAAwEBAAAAAAAAAAAAAAACAQMEExL/2gAIAQEAAQUCdtnvu+Oe1oLMZU5TIqzkH//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAECERIhMSL/2gAIAQEABj8Cl7fR3KV3pjuTexvJmOcu2UpM/8QAGhABAAIDAQAAAAAAAAAAAAAAAQARITFBUf/aAAgBAQABPyEQFIuyh9Is3Eh70xYZ1dECYBwIoRtvJP/aAAwDAQACAAMAAAAQrw//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QKOs//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EGJhP//EABsQAQEBAAMBAQAAAAAAAAAAAAERACExwUGB/9oACAEBAAE/EC5wgOpXQcCBzSdfnuAqGD8IYpFYCArm7VB6KRMKFqQOYHm//9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x430;&#x439;&#x442; The Great Discontent." title="" src="/static/great-discontent-bb8310fc66c2b25351b92f448372d1fc-cb685.jpg" srcset="/static/great-discontent-bb8310fc66c2b25351b92f448372d1fc-94a32.jpg 163w,\n/static/great-discontent-bb8310fc66c2b25351b92f448372d1fc-09a61.jpg 325w,\n/static/great-discontent-bb8310fc66c2b25351b92f448372d1fc-cb685.jpg 650w,\n/static/great-discontent-bb8310fc66c2b25351b92f448372d1fc-bee45.jpg 897w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>The Great Discontent &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x435;&#x442; &#x431;&#x43E;&#x43B;&#x44C;&#x448;&#x438;&#x435; &#x43A;&#x430;&#x440;&#x442;&#x438;&#x43D;&#x43A;&#x438; &#x432;&#xA0;&#x43D;&#x430;&#x447;&#x430;&#x43B;&#x435; &#x43A;&#x430;&#x436;&#x434;&#x43E;&#x439; &#x441;&#x442;&#x430;&#x442;&#x44C;&#x438;.</figcaption>\n</figure>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB6KaExUYD/8QAGRAAAwEBAQAAAAAAAAAAAAAAAQIDEQQS/9oACAEBAAEFAqWEyOlSUOoyIz0mviWiX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAIBBQEAAAAAAAAAAAAAAAABAhESITFBUf/aAAgBAQAGPwLVcHUJ5LpKo7IpS9Ip7R//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFh/9oACAEBAAE/IWQ4WmiNqoLjLdF72EEIK+RJeOpyFBsKWf/aAAwDAQACAAMAAAAQSO//xAAWEQADAAAAAAAAAAAAAAAAAAABEGH/2gAIAQMBAT8QFX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEBAAIBBQAAAAAAAAAAAAABEQAxIUFhgZHx/9oACAEBAAE/EHKoJ1b8yIQYAplxFE6kNusyeEwXuNecb1uZeV36uAMBBpc//9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x430;&#x439;&#x442; &#x420;&#x43E;&#x434;&#x436;&#x435;&#x440;&#x430; &#x42D;&#x431;&#x435;&#x440;&#x442;&#x430;." title="" src="/static/roger-ebert-204c0c4076110d0ec6d5455ad6b7b202-cb685.jpg" srcset="/static/roger-ebert-204c0c4076110d0ec6d5455ad6b7b202-94a32.jpg 163w,\n/static/roger-ebert-204c0c4076110d0ec6d5455ad6b7b202-09a61.jpg 325w,\n/static/roger-ebert-204c0c4076110d0ec6d5455ad6b7b202-cb685.jpg 650w,\n/static/roger-ebert-204c0c4076110d0ec6d5455ad6b7b202-bee45.jpg 897w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x421;&#x430;&#x439;&#x442; &#x420;&#x43E;&#x434;&#x436;&#x435;&#x440;&#x430; &#x42D;&#x431;&#x435;&#x440;&#x442;&#x430; &#x43C;&#x430;&#x441;&#x448;&#x442;&#x430;&#x431;&#x438;&#x440;&#x443;&#x435;&#x442; &#x431;&#x43E;&#x43B;&#x44C;&#x448;&#x438;&#x43D;&#x441;&#x442;&#x432;&#x43E; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x43E;&#x432; &#x43D;&#x430;&#xA0;&#x441;&#x442;&#x440;&#x430;&#x43D;&#x438;&#x446;&#x435;, &#x443;&#x432;&#x435;&#x43B;&#x438;&#x447;&#x438;&#x432;&#x430;&#x44F; &#x438;&#x445;&#xA0;&#x438;&#xA0;&#x441;&#x43E;&#x43A;&#x440;&#x430;&#x449;&#x430;&#x44F; &#x432;&#x438;&#x434;&#x438;&#x43C;&#x443;&#x44E; &#x447;&#x430;&#x441;&#x442;&#x44C; &#x441;&#x43E;&#x434;&#x435;&#x440;&#x436;&#x438;&#x43C;&#x43E;&#x433;&#x43E;.</figcaption>\n</figure>\n<p>Недавно обновившийся сайт Роджера Эберта (Roger Ebert) справляется с адаптацией к широким экранам, увеличивая максимальную ширину страниц и увеличивая элементы пропорционально ей. Вообще, в теории это могло бы сработать. Но на практике получилось не очень. Например, заголовки увеличиваются не только по горизонтали, но и по вертикали, а это означает, что количество видимого содержимого резко уменьшается. Странно и то, что главное содержимое не увеличивается пропорционально другим элементам страницы, и выглядит карликом по сравнению с ними, имея, вдобавок, слишком маленькую ширину для основного содержимого.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7ee6pQUX/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAECAxIRIv/aAAgBAQABBQJrzXXKLNGjp//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AYf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAACAAMRIHH/2gAIAQEABj8CUk4RbX//xAAZEAADAQEBAAAAAAAAAAAAAAAAARFRIWH/2gAIAQEAAT8hu6XHpJgwPwayRiTDo//aAAwDAQACAAMAAAAQPM//xAAWEQEBAQAAAAAAAAAAAAAAAAABERD/2gAIAQMBAT8Qabn/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAGxABAAMBAAMAAAAAAAAAAAAAAQARITFBYYH/2gAIAQEAAT8QuSqYHSPQYo8Z86+2Es4EhW7DIV75AkQSs2f/2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x430;&#x439;&#x442; Medium." title="" src="/static/medium-f9fbb04000a4fa5828f7dbcc67858c7c-cb685.jpg" srcset="/static/medium-f9fbb04000a4fa5828f7dbcc67858c7c-94a32.jpg 163w,\n/static/medium-f9fbb04000a4fa5828f7dbcc67858c7c-09a61.jpg 325w,\n/static/medium-f9fbb04000a4fa5828f7dbcc67858c7c-cb685.jpg 650w,\n/static/medium-f9fbb04000a4fa5828f7dbcc67858c7c-bee45.jpg 897w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>Medium &#x440;&#x430;&#x441;&#x43F;&#x43E;&#x43B;&#x430;&#x433;&#x430;&#x435;&#x442; &#x43A;&#x43E;&#x43C;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x440;&#x438;&#x438; &#x440;&#x44F;&#x434;&#x43E;&#x43C; &#x441;&#xA0;&#x442;&#x435;&#x43A;&#x441;&#x442;&#x43E;&#x43C; &#x43D;&#x430;&#xA0;&#x441;&#x432;&#x43E;&#x431;&#x43E;&#x434;&#x43D;&#x44B;&#x445; &#x43F;&#x43E;&#x43B;&#x44F;&#x445;.</figcaption>\n</figure>\n<p>Показывать на полях связанное или дополняющее содержимое (например, комментарии на сайте <a href="https://medium.com/thoughts-on-creativity/bad7c34842a2">Medium</a>) — хорошая идея для отображения длинных текстов на больших экранах. Если экран недостаточно широкий, текст статей растягивается на всю ширину и сдвигается в сторону, если пользователь читает комментарии. Если же места на экране достаточно — комментарии просто занимают доступное пространство на полях.</p>\n<p>Мне всегда нравилось, как сайт <a href="http://www.grantland.com/story/_/id/9973203/the-colorado-avalanche-edmonton-oilers-rebuilds">Grantland</a> использует правую колонку для пометок. Пометки, с одной стороны, используют преимущество больших экранов, и в то же время фокусируют внимание на центральной колонке. Фотографии, врезки, дополнения, цитаты и другое связанное содержимое на широких экранах может быть вынесен на поля. Это позволит дизайнеру как расширить вертикальную сетку за счет внешних полей, так и создать визуальное разнообразие, сохранив при этом расположение основного содержимого.</p>\n<p>Такие новые возможности CSS, как <a href="http://dev.w3.org/csswg/css-multicol/">мультиколонки</a> и <a href="http://html.adobe.com/webplatform/layout/regions/">регионы</a>, могут сделать чтение длинных текстов на широких экранах удобнее. Мультиколонки поддерживаются большинством современных браузеров. Их можно использовать внутри статей, с одной стороны, максимально заполняя доступное пространство экрана, а с другой — оставляя текст читабельным. Если у вас большой экран, посмотрите <a href="http://d.alistapart.com/386/surveying_the_big_screen/demo/">мой пример с колонками</a> на основе этой статьи.</p>\n<p>Что до прогрессивного улучшения, то старые браузеры, не поддерживающие эти свойства, просто покажут единственную колонку соответствующей ширины.</p>\n<h2>Разделение содержимого на части</h2>\n<p>Деление содержимого на части позволяет сделать взаимодействие пользователя с информацией на насыщенных содержимым страницах быстрым и эффективным. Это очень естественно вписывается в концепцию адаптивности дизайна, так как позволяет варьировать, показывается ли содержимое целиком или же разбивается на столбцы в зависимости от размеров экрана.</p>\n<p>На больших экранах преимущество этой техники состоит в том, что блок содержимого или группа блоков могут быть представлены по-разному на экранах разной ширины. Что позволяет улучшить читаемость и создать нужное эмоциональное воздействие. Хороший пример применения этого метода — сайт <a href="http://www.manchester.gov.uk/">Manchester City Council</a>. Он использует ограниченные по ширине группы модулей и врезки фотографий, занимающие всю доступную ширину. Страница плавно адаптируется к различным размерам экрана, подстраивая ширину и сетку каждой части содержимого.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAbrqYmaA/8QAGBAAAwEBAAAAAAAAAAAAAAAAAQIDABH/2gAIAQEAAQUCaVeidciOARxjgN//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAdEAACAQQDAAAAAAAAAAAAAAAAAREDEBIhJDE0/9oACAEBAAY/AnyIPSbrZDcI6t//xAAbEAEBAQACAwAAAAAAAAAAAAABEQAhMVFxgf/aAAgBAQABPyFbElsvWq4v7nnMW26KMvnelN3QDf/aAAwDAQACAAMAAAAQJA//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCH/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EFyf/8QAHhABAAICAQUAAAAAAAAAAAAAAREhADFBUWGBofD/2gAIAQEAAT8QRUqJaTreX5Q4UkeXA/UIqIK+64FCMraO2QtlOFiPWAiAnWf/2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x430;&#x439;&#x442; Manchester City Council." title="" src="/static/manchester-0d19c319be22880fe60b301916fbc593-cb685.jpg" srcset="/static/manchester-0d19c319be22880fe60b301916fbc593-94a32.jpg 163w,\n/static/manchester-0d19c319be22880fe60b301916fbc593-09a61.jpg 325w,\n/static/manchester-0d19c319be22880fe60b301916fbc593-cb685.jpg 650w,\n/static/manchester-0d19c319be22880fe60b301916fbc593-bee45.jpg 897w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x421;&#x430;&#x439;&#x442; Manchester City Council &#x438;&#xA0;&#x440;&#x430;&#x437;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; &#x441;&#x43E;&#x434;&#x435;&#x440;&#x436;&#x438;&#x43C;&#x43E;&#x433;&#x43E; &#x43D;&#x430;&#xA0;&#x447;&#x430;&#x441;&#x442;&#x438;.</figcaption>\n</figure>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBP/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAHpZdTZyzP/xAAaEAACAgMAAAAAAAAAAAAAAAABAgASESEx/9oACAEBAAEFArG6qWUKRMCDQ7P/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEv/aAAgBAwEBPwGj/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBIh/9oACAECAQE/AVo//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAIBETEDEBIygf/aAAgBAQAGPwJo5NVlxqOd29MFRjb/xAAbEAEBAAIDAQAAAAAAAAAAAAABEQAhEEFRYf/aAAgBAQABPyGTIovmAoDu4XFMN2jfzGFpHQcP/9oADAMBAAIAAwAAABC4D//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QeIin/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAgEBPxAel5Zf/8QAGxABAQEBAAMBAAAAAAAAAAAAAREhADFRYXH/2gAIAQEAAT8QfDFMiVtn50OzRBnzr163Wnzk1aty198GEkAhffaltfFcvf/Z&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x430;&#x439;&#x442; Juliana Bicycles." title="" src="/static/juliana-c01c05ac90bd135280a0b1b8736be31b-cb685.jpg" srcset="/static/juliana-c01c05ac90bd135280a0b1b8736be31b-94a32.jpg 163w,\n/static/juliana-c01c05ac90bd135280a0b1b8736be31b-09a61.jpg 325w,\n/static/juliana-c01c05ac90bd135280a0b1b8736be31b-cb685.jpg 650w,\n/static/juliana-c01c05ac90bd135280a0b1b8736be31b-bee45.jpg 897w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x421;&#x430;&#x439;&#x442; Juliana Bicycles &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x435;&#x442; &#x43F;&#x440;&#x438;&#x435;&#x43C; &#x440;&#x430;&#x437;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x44F; &#x441;&#x43E;&#x434;&#x435;&#x440;&#x436;&#x438;&#x43C;&#x43E;&#x433;&#x43E; &#x431;&#x43E;&#x43B;&#x435;&#x435; &#x438;&#x437;&#x44F;&#x449;&#x43D;&#x43E;.</figcaption>\n</figure>\n<p>Сайт <a href="http://www.julianabicycles.com/">Juliana Bicycles</a> использует более изящный подход к делению содержимого на части. Он комбинирует большие горизонтальные блоки во весь экран с группами разделенного на небольшие части содержимого. Главная навигация сайта представлена в виде полноэкранной карусели с насыщенными графическим фоном. Содержимое разделено на небольшие блоки, у которых есть поля. При просмотре с планшета или мобильного устройства эти поля исчезают. Бумажная текстура в фоне заполняет пространство между модулями, а на широких экранах и все доступное пространство. Конечно, большие изображения могут дорого обойтись при загрузке страницы, но это отличный способ зацепить пользователя. Способ показывать, а не рассказывать.</p>\n<h2>Плиточное расположение содержимого</h2>\n<p>Очевидное преимущество большого экрана — возможность увидеть много содержимого одновременно.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB6ziE3EL/AP/EABkQAAIDAQAAAAAAAAAAAAAAAAERAhAhQf/aAAgBAQABBQJ666i44P/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQEABj8CNjv/xAAcEAACAgIDAAAAAAAAAAAAAAABEQAhMUFRYYH/2gAIAQEAAT8hrbmgoyQVAXtxLsMzAaOnAoD9Ln//2gAMAwEAAgADAAAAEFcP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHhABAQABAwUAAAAAAAAAAAAAAREAIUFhMVFxgZH/2gAIAQEAAT8QGghGINfdxnhBUgrxbklD4aTjrgtZKIGNrSFqRO22HUYO6vrn/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x412;&#x44B;&#x434;&#x430;&#x447;&#x430; Google Images." title="" src="/static/google-images-930c9b53f354ff7769833e9f0016ba22-cb685.jpg" srcset="/static/google-images-930c9b53f354ff7769833e9f0016ba22-94a32.jpg 163w,\n/static/google-images-930c9b53f354ff7769833e9f0016ba22-09a61.jpg 325w,\n/static/google-images-930c9b53f354ff7769833e9f0016ba22-cb685.jpg 650w,\n/static/google-images-930c9b53f354ff7769833e9f0016ba22-eab17.jpg 975w,\n/static/google-images-930c9b53f354ff7769833e9f0016ba22-7a98f.jpg 1300w,\n/static/google-images-930c9b53f354ff7769833e9f0016ba22-c5379.jpg 1794w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>Google Images &#x43F;&#x43E;&#x43A;&#x430;&#x437;&#x44B;&#x432;&#x430;&#x435;&#x442; &#x441;&#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x43A;&#x430;&#x440;&#x442;&#x438;&#x43D;&#x43E;&#x43A;, &#x441;&#x43A;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x432;&#x43C;&#x435;&#x449;&#x430;&#x435;&#x442; &#x43E;&#x43A;&#x43D;&#x43E;.</figcaption>\n</figure>\n<p>С содержимым, напоминающим коллекцию, например фотографиями, расположение плитками помогает эффективно использовать большой экран. Мы ежедневно наблюдаем это, когда <a href="http://www.google.com/search?q=responsive&#x26;um=1&#x26;ie=UTF-8&#x26;hl=en&#x26;tbm=isch&#x26;source=og&#x26;sa=N&#x26;tab=wi">ищем картинки в Google</a> — результаты заполняют весь экран, предоставляя широкий выбор уже при первом просмотре.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.87072808320951%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAerK1xqKlf/EABkQAAMAAwAAAAAAAAAAAAAAAAECESEiMf/aAAgBAQABBQIlqGwLLGK7Jz//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAeEAABAwQDAAAAAAAAAAAAAAAAERIhAQIQIjKRof/aAAgBAQAGPwLiKhMFdfRzru8f/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFRQXGB/9oACAEBAAE/IRYWO3EaGjqotC3I6h7MmGrd5WZef1uf/9oADAMBAAIAAwAAABCMz//EABYRAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxChf//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxCBf//EAB4QAQEAAgICAwAAAAAAAAAAAAERAFEhQTGhcZGx/9oACAEBAAE/EIpb8kcG5g9GFA7X8nvGBTYa4F4Vg4+QmISgCJ4b69Ymm219wz//2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x430;&#x439;&#x442; Pinterest." title="" src="/static/pinterest-b22e85653ddba514ba0a3de91b49a633-cb685.jpg" srcset="/static/pinterest-b22e85653ddba514ba0a3de91b49a633-94a32.jpg 163w,\n/static/pinterest-b22e85653ddba514ba0a3de91b49a633-09a61.jpg 325w,\n/static/pinterest-b22e85653ddba514ba0a3de91b49a633-cb685.jpg 650w,\n/static/pinterest-b22e85653ddba514ba0a3de91b49a633-eab17.jpg 975w,\n/static/pinterest-b22e85653ddba514ba0a3de91b49a633-7a98f.jpg 1300w,\n/static/pinterest-b22e85653ddba514ba0a3de91b49a633-5852c.jpg 1346w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x41F;&#x43B;&#x438;&#x442;&#x43E;&#x447;&#x43D;&#x43E;&#x435; &#x440;&#x430;&#x441;&#x43F;&#x43E;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x435; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x43E;&#x432; &#x43D;&#x430;&#xA0;Pinterest &#x43E;&#x431;&#x44B;&#x433;&#x440;&#x44B;&#x432;&#x430;&#x435;&#x442; &#x438;&#x434;&#x435;&#x44E; &#x441;&#x43A;&#x440;&#x430;&#x43F;&#x431;&#x443;&#x43A;&#x438;&#x43D;&#x433;&#x430; &#x438;&#x43B;&#x438; &#x43A;&#x43E;&#x43B;&#x43B;&#x435;&#x43A;&#x446;&#x438;&#x43E;&#x43D;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44F;.</figcaption>\n</figure>\n<p><a href="http://www.pinterest.com/itscolossal/colossal/">Pinterest</a> использует плиточную раскладку для изображений с подписями. Пространство между плитками позволяет смягчить чрезмерно перегруженную страницу. На больших экранах блоки с картинками выглядят уходящими в бесконечность. На сайте, где поведение пользователя сводится к быстрому созданию своей подборки, заполнение экрана небольшими изображениями как раз и позволяет пробежать глазами по всей коллекции и получить удовлетворение от завершенности картины.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdgnRWIP/8QAGhABAAIDAQAAAAAAAAAAAAAAAQIRABASQf/aAAgBAQABBQL1rXATINmf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgEEAwAAAAAAAAAAAAAAAAECEBExMlFxgf/aAAgBAQAGPwLbw3sckpLLE3Lun//EABwQAAEEAwEAAAAAAAAAAAAAAAEAESFBMVFxYf/aAAgBAQABPyGA5oF+k7NFFAaKASpN8QpyWw3CPPV//9oADAMBAAIAAwAAABA3D//EABYRAQEBAAAAAAAAAAAAAAAAAAABMf/aAAgBAwEBPxDVf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB4QAQABBAMBAQAAAAAAAAAAAAERACExYUFRgXGh/9oACAEBAAE/EGSDIEBRJy46jdZuCUIBhZ3ifKIEslJ61UDBUq+1jx/N0KDY8F4SOLpRxbaafK//2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x430;&#x439;&#x442; Uniqlo." title="" src="/static/uniqlo-558a6c12976eaa0e6627318f50a12f15-cb685.jpg" srcset="/static/uniqlo-558a6c12976eaa0e6627318f50a12f15-94a32.jpg 163w,\n/static/uniqlo-558a6c12976eaa0e6627318f50a12f15-09a61.jpg 325w,\n/static/uniqlo-558a6c12976eaa0e6627318f50a12f15-cb685.jpg 650w,\n/static/uniqlo-558a6c12976eaa0e6627318f50a12f15-eab17.jpg 975w,\n/static/uniqlo-558a6c12976eaa0e6627318f50a12f15-7a98f.jpg 1300w,\n/static/uniqlo-558a6c12976eaa0e6627318f50a12f15-c5379.jpg 1794w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x428;&#x438;&#x440;&#x43E;&#x43A;&#x43E;&#x44D;&#x43A;&#x440;&#x430;&#x43D;&#x43D;&#x430;&#x44F; &#x432;&#x435;&#x440;&#x441;&#x438;&#x44F; &#x441;&#x430;&#x439;&#x442;&#x430; Uniqlo &#x43F;&#x43E;&#x437;&#x432;&#x43E;&#x43B;&#x44F;&#x435;&#x442; &#x43F;&#x43E;&#x43A;&#x443;&#x43F;&#x430;&#x442;&#x435;&#x43B;&#x44F;&#x43C; &#x441;&#x440;&#x430;&#x432;&#x43D;&#x438;&#x432;&#x430;&#x442;&#x44C; &#x442;&#x43E;&#x432;&#x430;&#x440;&#x44B; &#x432;&#x438;&#x437;&#x443;&#x430;&#x43B;&#x44C;&#x43D;&#x43E;.</figcaption>\n</figure>\n<p>Сайт <a href="http://uniqlo.com/">Uniqlo</a> использует широкую раскладку, заполненную картинками, хорошо продуманную и достаточно воздушную. Товары разделены на группы большими заголовками, которые выступают разделителями между наборами товаров и добавляют в раскладку «воздуха». Расположение продуктов широкими рядами позволяет покупателям быстро сравнивать товары. В то же время, пустые пространства, фото моделей и различные размеры блоков добавляют изысканности внешнему виду и восприятию и помогают усилить впечатление, что дизайн — важное отличие продуктов Uniqlo.</p>\n<p>Ни Pinterest, ни Google не являются адаптивными сайтами — у них есть отдельные версии для пользователей мобильных устройств. Сайт Uniqlo также адаптирован только для больших экранов, маленькие устройства получают самый узкий вариант десктопной раскладки. Так что пока эти сайты не могут быть идеальными примерами отзывчивого дизайна, но мы можем использовать их как образцы применения хороших практик.</p>\n<h2>Графические техники</h2>\n<p>Другая интересная техника для адаптации сайтов к широким экранам скорее основана на классическом печатном дизайне, чем на реструктуризации и манипуляции содержимым.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAHSVZwVhlz/AP/EABgQAAMBAQAAAAAAAAAAAAAAAAABEQIS/9oACAEBAAEFAmy4OYOET3af/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/AYV//8QAFxEBAQEBAAAAAAAAAAAAAAAAAgEQIf/aAAgBAgEBPwElRduf/8QAHRAAAQIHAAAAAAAAAAAAAAAAAAEQAhESIjFxkf/aAAgBAQAGPwIujWezK9apv//EABwQAAIBBQEAAAAAAAAAAAAAAAERABAhMUFRkf/aAAgBAQABPyEwx3pgBikbB4lnqUctIxQQ0lQ//9oADAMBAAIAAwAAABD0z//EABcRAAMBAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QoDkX/8QAGBEAAgMAAAAAAAAAAAAAAAAAARARITH/2gAIAQIBAT8QBjLtL//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQXFhgfH/2gAIAQEAAT8QW7L+04EUA71QQxS85UumlXtVnxEFMDDZu77gMgfc/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="Institut Choiseul." title="" src="/static/choiseul-72a68a8a04da4a3fe4a451ef50aeb42d-cb685.jpg" srcset="/static/choiseul-72a68a8a04da4a3fe4a451ef50aeb42d-94a32.jpg 163w,\n/static/choiseul-72a68a8a04da4a3fe4a451ef50aeb42d-09a61.jpg 325w,\n/static/choiseul-72a68a8a04da4a3fe4a451ef50aeb42d-cb685.jpg 650w,\n/static/choiseul-72a68a8a04da4a3fe4a451ef50aeb42d-bee45.jpg 897w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x42D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x44B; &#x441;&#x435;&#x442;&#x43A;&#x438; &#x440;&#x430;&#x441;&#x442;&#x44F;&#x433;&#x438;&#x432;&#x430;&#x44E;&#x442;&#x441;&#x44F; &#x43A;&#xA0;&#x433;&#x440;&#x430;&#x43D;&#x438;&#x446;&#x430;&#x43C; &#x43E;&#x43A;&#x43D;&#x430; &#x43D;&#x430;&#xA0;&#x441;&#x430;&#x439;&#x442;&#x435; Institut Choiseul.</figcaption>\n</figure>\n<p>Сайт <a href="http://choiseul.info/">Institut Choiseul</a> ограничивает содержимое страниц центрированной структурированной сеткой, но эффектно обыгрывает пустое пространство возникновением цветных полей, уходящих из центральной колонки к краям экрана. Ссылка «наверх» возникает в нижнем левом углу при прокрутке — маленький штрих, подчеркивающий целостность окна. Жесткая сетка и большие цветные поля придают сайту спокойный солидный тон, напоминающий швейцарский стиль в типографике 50х-60х гг.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 68.89632107023411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABY6jHMxQT/8QAGhABAAMAAwAAAAAAAAAAAAAAAgABAxESI//aAAgBAQABBQL1tp6GstmqtOd3Ab4//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/ARF//8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/AWqQ/8QAGxAAAwACAwAAAAAAAAAAAAAAAAERAiEQQUL/2gAIAQEABj8Ce8pTSo6jo88f/8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITEQUf/aAAgBAQABPyEEWtil7E9BuE5ZBWGNEZfEwzZ//9oADAMBAAIAAwAAABDf7//EABURAQEAAAAAAAAAAAAAAAAAAAEA/9oACAEDAQE/EEQW/8QAFREBAQAAAAAAAAAAAAAAAAAAAQD/2gAIAQIBAT8QRSL/xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMWFBUYH/2gAIAQEAAT8QV49jQq8qBB0Va1fGDVZABlHt7hQjGLHw5NuMdMAi2U8z/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="Kanselarij der Nederlandse Orden." title="" src="/static/lintjes-11192572ea8470e7079b6e38e8ea5408-cb685.jpg" srcset="/static/lintjes-11192572ea8470e7079b6e38e8ea5408-94a32.jpg 163w,\n/static/lintjes-11192572ea8470e7079b6e38e8ea5408-09a61.jpg 325w,\n/static/lintjes-11192572ea8470e7079b6e38e8ea5408-cb685.jpg 650w,\n/static/lintjes-11192572ea8470e7079b6e38e8ea5408-bee45.jpg 897w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x421;&#x430;&#x439;&#x442; Kanselarij der Nederlandse Orden &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x435;&#x442; &#x442;&#x44F;&#x43D;&#x443;&#x449;&#x443;&#x44E;&#x441;&#x44F; &#x446;&#x435;&#x43D;&#x442;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x43D;&#x443;&#x44E; &#x441;&#x435;&#x442;&#x43A;&#x443; &#x438;&#xA0;&#x430;&#x441;&#x438;&#x43C;&#x43C;&#x435;&#x442;&#x440;&#x438;&#x447;&#x43D;&#x44B;&#x435; &#x446;&#x432;&#x435;&#x442;&#x43E;&#x432;&#x44B;&#x435; &#x432;&#x441;&#x442;&#x430;&#x432;&#x43A;&#x438;</figcaption>\n</figure>\n<p>Сайт <a href="http://lintjes.nl/">Kanselarij der Nederlandse Orden</a> имеет похожий стиль с асимметричным цветовыми полями, которые растянуты от края окна до противоположного края колонки с содержимым. Поскольку сетка расширяется пропорционально общей ширине экрана, содержимое постепенно заполняет все больше пространства, но прямоугольные цветовые поля делают эту довольно обычную раскладку интереснее.</p>\n<p>Такие простые приемы, как цвет или текстура на фоне, или «вытягивание» блоков к краям экрана помогают создать чувство целостности дизайна даже на очень широких экранах. Творческое использование асимметрии вместо вытянутых, башенных раскладок помогает уберечь читателя от блуждания в пустых пространствах.</p>\n<h2>В заключение</h2>\n<p>Расширив известные нам техники адаптации содержимого для маленьких устройств, мы вполне можем применить их при адаптации сайтов к большим экранам. Сайтам с хорошо структурированной сеткой будет проще подстроиться, просто потому, что у такой сетки не будет проблем при растягивании в ширину.</p>\n<p>Очевидно, что самое важное в любом дизайне — это содержимое, поэтому именно с него надо начинать подготовку дизайна для широких экранов. Для полнотекстовых статей очень важно создать хороший ритм и поток. Текст должен выглядеть так, чтобы можно было его читать, не отвлекаясь. В случае с фотографиями и графикой очень влияют на восприятие пространство и масштаб. Правительственные порталы и сайты, ориентированные на предоставление услуг, должны предоставлять удобный доступ как к самим услугам, так и информации. Коммерческие сайты должны быть простыми. Пользователям должно быть удобно выбирать товары и делать покупки. Плотность раскладки должна соответствовать назначению сайта: для сайтов с высокой пользовательской активностью плотность должна быть выше, на сайтах, которыми пользуются вдумчиво и не спеша — более разреженной. Подобно рамке для фотографии, плотное заполнение окна может сделать дизайн крупнее и тяжелее, в то время как добавление свободных пространств сделает его более элегантным и утонченным.</p>\n<p>Конечно, десктопные пользователи, в отличие от пользователей мобильных устройств, могут позволить себе роскошь изменить размер окна браузера, если им мешают пустые пространства. Так же, вероятно, не все пользователи с большими экранами используют браузеры в полноэкранном режиме. Но, как и с мобильными, мы не должны строить предположений, на каких устройствах смотрят наше содержимое, и особенно не стоит строить догадок относительно будущего. Большие экраны могут предоставлять больше возможностей пользователям, так же как они открывают новые возможности для дизайнеров. И мы должны воспользоваться преимуществом расширения этих границ уже сейчас.</p>\n<p>Перевод оригинальной статьи «<a href="http://alistapart.com/article/surveying-the-big-screen">Surveying the Big Screen</a>» Майка Пика (Mike Pick), опубликованной на сайте <a href="http://alistapart.com/">A List Apart</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнили: <a href="http://twitter.com/n_snork">Наташа Арефьева</a> и <a href="https://twitter.com/yoksel">Юлия Бухвалова</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a> и <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Исследуем большие экраны"},{depth:2,value:"Испытание содержимым"},{depth:2,value:"Работа с длинными текстами"},{depth:2,value:"Разделение содержимого на части"},{depth:2,value:"Плиточное расположение содержимого"},{depth:2,value:"Графические техники"},{depth:2,value:"В заключение"}],frontmatter:{title:"Исследуем большие экраны"}}},{node:{html:'<h1>Как я научился любить скучные мелочи CSS</h1>\n<p><a href="http://www.broken-links.com">Питер Гастон</a> 21 августа 2012</p>\n<p>В будущем CSS есть много того, чего нам стоит ожидать с нетерпением: с одной стороны, там будет целый спектр новых методов, которые произведут революцию в вёрстке; с другой стороны — новый набор графических эффектов, которые позволят создавать на лету фильтры и шейдеры. Людям всё это страшно нравится, в журналах и блогах пишется огромное количество статей об этих нововведениях.</p>\n<p>Но если эти инструменты можно назвать выставочными лошадками CSS, тогда, думается мне, стоит обратить немного внимания и на рабочих лошадей: на те компоненты языка, которые являются его составными частями: селекторы, единицы измерения, функции. Я частенько называю их «скучными мелочами» — хотя на самом деле я это говорю с большой теплотой, и вам стоит, мне кажется, разделить моё доброе к ним отношение.</p>\n<p>Почему? Давайте пробежимся по парочке лучших нововведений в CSS из разряда скучных мелочей — тех мелочей, над которыми работали в плохо освещенных лабораториях, вдали от блеска новых глянцевых штучек на витринах. Некоторые из этих мелочей уже какое-то время с нами, но заслуживают того, чтобы больше людей о них знали; другие, напротив, только начинают появляться в браузерах. Но тем не менее они произведут революцию в том, как мы работаем — причем тихо, скромно и без претензий.</p>\n<h2>Относительные единицы измерения</h2>\n<p>Скорее всего, вы, умный и предусмотрительный веб-разработчик, работаете с относительными единицами измерения — то есть с <code>em</code> или процентами — так что эта проблема вам должна быть знакома: вам наверняка приходится сидеть за калькулятором, чтобы вычислить размеры — из-за наследования. Например, сейчас вполне обычный прием — установить базовый размер шрифта для документа, а потом использовать относительные единицы, чтобы установить размер шрифта для всех остальных элементов на странице. В CSS это выглядит примерно так:</p>\n<pre><code>html { font-size: 10px; }\np { font-size: 1.4em; }\n</code></pre>\n<p>Здесь всё отлично, и никакой проблемы нет, пока у вас не появляется дочерний элемент, которому вы хотите установить какой-нибудь другой размер шрифта. Например, в такой разметке:</p>\n<pre><code>А и Б сидели на &#x3C;span>трубе&#x3C;/span>.\n</code></pre>\n<p>Если вы хотите, чтобы этот <code>&#x3C;span></code> было меньшего размера шрифта, например, <code>1.2em</code>, то что вам делать? Берите калькулятор и считайте, сколько будет 1,2 поделить на 1,4, и в итоге у вас получится:</p>\n<pre><code>p span { font-size: 0.85714em; }\n</code></pre>\n<p>И проблема не ограничивается использованием <code>em</code>. Если вы разрабатываете тянущийся сайт с использованием ширин в процентах, то знаете, что эти проценты соотносятся с размерами контейнера элемента, так что если у вас есть элемент, которому вы хотите поставить ширину в 40% от его родительского элемента, ширина которого — 75%, тогда придется устанавливать ширину этого элемента в 53,33333%.</p>\n<p>Мягко говоря, не идеально.</p>\n<h2>Размеры относительно корневого элемента</h2>\n<p>Чтобы побороть эту проблему с размерами шрифтов, теперь нам доступна новая единица измерения — <code>rem</code> (корневой <code>em</code>). Это всё ещё относительная единица измерения, но она всегда соотносится с фиксированным базовым значением, а именно — с размером шрифта корневого элемента документа (в случае HTML это всегда элемент <code>&#x3C;html></code>). Если предположить, что мы используем тот же самый размер шрифта для корневого элемента, что и в прошлый раз (<code>10px</code>), то нам потребуются для этого случая следующие CSS-правила:</p>\n<pre><code>p { font-size: 1.4rem; }\np span { font-size: 1.2rem; }\n</code></pre>\n<p>Теперь оба правила соотносятся с размером шрифта корневого элемента — это куда более элегантно, да и работать с этим удобнее, особенно если у вас простое базовое значение, например, <code>10px</code> или <code>12px</code>. Это как если вернуться назад и использовать значения в пикселях, только с возможностью их масштабировать.</p>\n<p>Это одна из функций, перечисленных в этой статье, которая поддерживается браузерами очень хорошо: все современные браузеры, включая IE9, поддерживают эту единицу, <a href="http://caniuse.com/#feat=rem">нет её пока только в Opera Mobile</a>.</p>\n<h2>Размеры относительно вьюпорта</h2>\n<p>Если вам кажется, что единица <code>rem</code> — крутая (а я так думаю!), то вы будете в восторге от того, что узнаете, что существует ещё и новый набор единиц измерения, который поможет победить проблему с процентами. Эти единицы работают примерно так же, как <code>rem</code>, за исключением того, что они соотносятся не с установленным пользователем значением на корневом элементе документа, а с самим вьюпортом, или областью просмотра устройства.</p>\n<p>Две базовых единицы здесь — <code>vh</code> и <code>vw</code>; они соотносятся (соответственно) с высотой и шириной вьюпорта. Каждая единица является числом, и это число равняется соответствующему проценту от указанного измерения (ширины или высоты). Пока я ещё помню уроки в школе сценаристов, давайте я лучше не буду объяснять, а покажу:</p>\n<pre><code>div { height: 50vh; }\n</code></pre>\n<p>В этом примере высота блока будет равна точно половине высоты вьюпорта; <code>1vh</code> — это 1% от высоты вьюпорта, так что равенство <code>50vh</code> = 50% от этой высоты выглядит вполне логичным.</p>\n<p>Если размер окна просмотра изменяется, то изменяется и значение соответствующих единиц, и при этом вам не нужно беспокоиться о вложенных элементах: элемент с шириной <code>10vw</code> всегда будет этой ширины, вне зависимости от ширины его родительского элемента.</p>\n<p>Также есть единица <code>vmin</code>, которая соответствует меньшему значению — <code>vh</code> или <code>vw</code>; кроме того, недавно стало известно, что в спецификацию добавится и соответствующая единица <code>vmax</code> (хотя на момент написания статьи этого пока не случилось).</p>\n<p>Сейчас эти единицы поддерживаются в IE9+, Chrome и Safari 6.</p>\n<h2>Рассчитываемые значения</h2>\n<p>Если вы будете работать с тянущимся или адаптивным дизайном, вы, без сомнения, столкнетесь с проблемой смешивания единиц измерения — когда вы хотите, чтобы у вас на странице была сетка, ширина у которой задается в процентах, но при этом с фиксированными полями. Например:</p>\n<pre><code>div {\n    margin: 0 20px;\n    width: 33%; \n}\n</code></pre>\n<p>Если в вашей верстке указаны только <code>padding</code> и <code>border</code>, тогда, в приницпе, можно решить проблему с помощью <code>box-sizing</code>, но с <code>margin</code> это не поможет. Есть лучший и более гибкий подход — использовать для значения функцию <code>calc()</code>, которая позволяет вам производить математические действия с разными единицами, скажем:</p>\n<pre><code>div {\n    margin: 0 20px;\n    width: calc(33% - 40px);\n}\n</code></pre>\n<p>Вы можете применяться её где угодно, не только для ширин, но и везде, где вам нужны единицы изменения. А если вы хотите зайти совсем далеко, то вы тоже можете даже использовать <code>calc()</code> внутри <code>calc()</code>.</p>\n<p>В IE9+ эта функция поддерживается без префикса(!), в Firefox — с префиксом <code>-moz-</code> (в релизе 16 или 17 он должен быть отброшен), а в Chrome и Safari — с префиксом <code>-webkit-</code>. <a href="http://caniuse.com/#feat=calc">В мобильный Webkit он, увы, пока не включен.</a></p>\n<h2>Загрузка подмножества символов</h2>\n<p>Быстрая загрузка веб-страниц всегда была важна — но сейчас, с появлением на рынке широкого спектра мобильных устройств (с каждым из которых понятие «скорость соединения» становится всё более изменчивым и неопределенным) это, пожалуй, особенно важно. Один из способов ускорить загрузку страницы — сократить размер внешних подгружаемых файлов, и поэтому новое свойство внутри <code>@font-face</code>, которое позволяет делать именно это, — весьма полезное добавление.</p>\n<p>Свойство, о котором идет речь — <code>unicode-range</code>, и в качестве значения оно принимает набор ссылок на юникод-символы. При загрузке внешних ресурсов из файла шрифта будут загружаться только эти символы, а не все символы, присутствующие в шрифте. Приведенный код показывает, как загрузить только три символа из файла foo.ttf:</p>\n<pre><code>@font-face {\n    font-family: foo;\n    src: url(\'foo.ttf\');\n    unicode-range: U+31-33;\n}\n</code></pre>\n<p>Особенно это полезно в том случае, если вы используете <a href="http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-ever-thought-about-using-font-face-for-icons/">иконки внутри шрифта</a> и хотите показывать на конкретной странице не все из них, а только конкретные. В одном тесте, который я провел, использование <code>unicode-range</code> сократило общее время загрузки файла шрифта в среднем на 0,85 секунды — а это вполне существенно. Конечно, у вас могут получиться и другие цифры.</p>\n<p>Это свойство на данный момент поддерживается в IE9+ и браузерах на движке Webkit: Chrome и Safari.</p>\n<h2>Новые псевдоклассы</h2>\n<p>Единицы измерения и значения — это всё прекрасно, но особенно меня радуют селекторы и псевдоклассы. Когда у меня получается выдумать замысловатый селектор, даже если он в итоге будет запрятан там, где только немногие избранные смогут его найти, я всегда чувствовую себя мастером своего дела. <a href="http://hbr.org/2012/04/the-real-leadership-lessons-of-steve-jobs/">Перифразируя отца Стива Джобса</a>: ты должен сделать так, чтобы забор со стороны твоего дома выглядел так же хорошо, как со стороны улицы, даже если больше никто не будет знать, что это так — ведь ты будешь.</p>\n<p>Для меня стало откровением, когда я впервые использовал <code>:nth-of-type()</code>, это было словно я вышиб ногой двери восприятия... Окей, я чуть-чуть преувеличиваю. Но есть несколько новых CSS-псевдоклассов, относительно которых действительно стоит испытывать энтузиазм.</p>\n<h2>Псевдокласс отрицания</h2>\n<p>Вы наверняка не поймете, насколько в действительности полезен новый (относительно) псевдокласс отрицания <code>:not()</code>, пока сами его не попробуете. В качестве аргумента <code>:not()</code> передается простой, а не составной селектор. Когда список элементов создается селектором, включающим <code>:not()</code>, все элементы, которые соответствуют аргументу, исключаются из этого списка. Знаю, звучит сложно, мне тоже так кажется. Но на самом деле всё довольно просто.</p>\n<p>Представьте себе: у вас есть список, и вы хотите применить правило ко всем нечётным элементам в списке, но не к последнему. Вам придётся написать что-то вроде такого:</p>\n<pre><code>li { color: #00F; }\nli:nth-child(odd) { color: #F00; }\nli:last-child { color: #00F; }\n</code></pre>\n<p>С псевдоклассом отрицания вы можете исключить последний элемент из списка, используя в качестве аргумента <code>:last-child</code>. Таким образом количество правил уменьшится, и с кодом станет легче работать:</p>\n<pre><code>li { color: #00F; }\nli:nth-child(odd):not(:last-child) { color: #F00; }\n</code></pre>\n<p>Ничего принципиально нового здесь нет, и, как я показал, вполне можно работать и без него, но — это довольно-таки полезно. У меня была возможность применить этот псевдокласс в проекте, где использовался встроенный Webkit, и я раз за разом убеждался в его пользе. Честно, это один из моих любимых псевдоклассов.</p>\n<p>Всё верно, у меня есть любимые псевдоклассы.</p>\n<p>Из всех функций, рассмотренных в этой статье, это самая широко поддерживамая; её поддерживают IE9+ и все современные браузеры — без префикса. Если вы работаете с jQuery, вполне возможно, что вы уже привыкли использовать этот синтаксис — в jQuery он есть начиная с версии 1.0, как и метод <code>not()</code>, который делает то же самое.</p>\n<h2>Псевдокласс соответствия</h2>\n<p>Псевдокласс соответствия <code>:matches()</code> принимает в качестве аргумента простой селектор, составной селектор, список, разделенный запятой, или любую комбинацию этих пунктов. Отлично! Но что же он делает?</p>\n<p>Лучше всего он подходит для того, чтобы срезать лишнее с повторяющихся селекторов. В качестве сценария использования представьте себе, что у вас есть несколько элементов <code>&#x3C;p></code> в разных контейнерах, но вы хотите выбрать только некоторые из них; тогда правило в стилях будет выглядеть примерно так:</p>\n<pre><code>.home header p,\n.home footer p,\n.home aside p {\n    color: #F00;\n}\n</code></pre>\n<p>С селектором <code>:matches()</code> вы можете значительно сократить его, найдя сходство в селекторах; в нашем примере у нас везде в начале стоит <code>.home</code>, а конце — <code>p</code>, так что мы можем использовать <code>:matches()</code> для того чтобы собрать все элементы между ними. Непонятно? Это выглядит вот так:</p>\n<pre><code>.home :matches(header,footer,aside) p { color: #F00; }\n</code></pre>\n<p>В действительности это уже часть CSS4 (если быть совсем точными, спецификации CSS-селекторов уровня 4), и ещё в этой спецификации сказано, что вы сможете использовать такой же синтаксис — составные селекторы, разделенные запятой — в будущих версиях <code>:not()</code>. Здорово-то как!</p>\n<p>На сегодняшний день <code>:matches()</code> есть в Chrome и Safari с префиксом <code>-webkit-</code>, а в Firefox он проходит под своим старым названием, <code>:any()</code>, с префиксом <code>-moz-</code>.</p>\n<h2>Ну как, уже полюбили рабочих лошадок?</h2>\n<p>Самое лучшее во всех этих новых возможностях — они решают совершенно реальные проблемы, от маленького, но раздражающего повторения селекторов до новых и появляющихся в настоящее время сложных задач, связанных с разработкой высокопроизводительных адаптивных сайтов. На самом деле, я могу легко представить, что регулярно использую каждое из этих нововведений.</p>\n<p>Может быть, про новые возможности вроде фильтров больше пишут, но вы с гораздо большей вероятностью обнаружите, что именно те мелочи, которые представлены в этой статье, будут вам полезны в разработке.</p>\n<p>Каждая из них сделает вашу профессиональную жизнь немножко проще, и в то же время расширит пространство ваших возможностей — а в этом ничего скучного, поверьте, нет.</p>\n<p>Перевод оригинальной записи «<a href="http://www.alistapart.com/articles/love-the-boring-bits-of-css/">Learning to Love the Boring Bits of CSS</a>» Питера Гастона (Peter Gasston), опубликованной на сайте <a href="http://www.alistapart.com">A List Apart</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="http://www.facebook.com/vlad.andersen">Влад Андерсен</a>.</p>',headings:[{depth:1,value:"Как я научился любить скучные мелочи CSS"},{depth:2,value:"Относительные единицы измерения"},{depth:2,value:"Размеры относительно корневого элемента"},{depth:2,value:"Размеры относительно вьюпорта"},{depth:2,value:"Рассчитываемые значения"},{depth:2,value:"Загрузка подмножества символов"},{depth:2,value:"Новые псевдоклассы"},{depth:2,value:"Псевдокласс отрицания"},{depth:2,value:"Псевдокласс соответствия"},{depth:2,value:"Ну как, уже полюбили рабочих лошадок?"}],frontmatter:{title:"Как я научился любить скучные мелочи CSS"}}},{node:{html:'<h1>Размеры блоков, или Назад в будущее</h1>\n<p><a href="http://generatedcontent.org/">Дэвид Стори</a> 23 января 2013</p>\n<p>Технологии разработки сайтов меняются в корне. XHTML (Strict — мы так гордились своей работой) уступил место более свободному HTML5. Нарезанные картинки и div-обёртки заменяются гораздо более разумными (и, если повезет, семантичными) средствами HTML и CSS3, такими как <code>border-radius</code>, <code>box-shadow</code> и градиенты. Резиновая раскладка превращается в отзывчивый дизайн на медиа-выражениях. JavaScript — уже не просто игрушка, и занимает положенное место в триумвирате с HTML и CSS. Может быть, мы уже близки к получению реального инструмента разметки с помощью Flexbox. Может быть, даже почтенные единицы <code>em</code> будут забыты, и их заменят более предсказуемые <a href="http://generatedcontent.org/post/11933972962/css3values"><code>rem</code></a>, а также <a href="http://generatedcontent.org/post/21279324555/viewportunits">гибкие единицы <code>vw</code> и <code>vh</code></a>.</p>\n<p>Мы стоим на пороге третьей эры Открытого веба (век таблиц и однопиксельных гифов уже не более, чем история), и наши инструменты и процессы развиваются, начиная походить на инструменты обычных программистов — это <a href="http://rmurphey.com/blog/2012/04/12/a-baseline-for-front-end-developers/">скрипты сборки, препроцессоры, линтеры (при некотором приближении, напоминающие компиляторы), автоматическое тестирование и контроль версий</a>.</p>\n<p>Но есть кое-что гораздо менее заметное, о чём бы я хотел поговорить сегодня, тоже способное по-своему изменить разработку сайтов. Это <a href="http://www.w3.org/TR/css3-ui/#box-sizing0">CSS-свойство <code>box-sizing</code></a>.</p>\n<p>Те из вас, кто помнит тяжелые старые времена, помнит и неправильную блочную модель, которую IE использовал вместо стандартной модели W3C. В этой модели рамка (<code>border</code>) и отступ (<code>padding</code>) считались частью ширины (<code>width</code>) и высоты (<code>height</code>) блока, в то время как в модели W3C отступ и рамка прибавлялись к ширине и высоте при расчёте конечных размеров блока. В модели IE свойство <code>width</code> отражало конечную ширину блока, в то время как в модели W3C оно отражало ширину контентной части блока (то есть части блока, в которой находится непосредственно его содержимое). Чтобы заставить IE играть по правилам, мы должны были использовать <a href="http://tantek.com/CSS/Examples/boxmodelhack.html">хак блочной модели Тантека Челика</a>.</p>\n<p>CSS-свойство <code>box-sizing</code> существует уже некоторое время и дает нам возможность переключаться между стандартной блочной моделью <code>box-sizing:content-box</code> и старой блочной моделью IE <code>box-sizing:border-box</code>. Недавний всплеск интереса к использованию этого забытого свойства связан с выходом статьи Пола Айриша <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/">* { <code>box-sizing:border-box</code> } FTW</a>.</p>\n<h2>Пора переключиться на border-box?</h2>\n<p>Если вы хотите перейти сразу к делу, пожалуйста, <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">поучаствуйте в опросе</a> о <code>box-sizing</code>, а если нет — просто читайте дальше.</p>\n<p>Использование <code>border-box</code> по умолчанию никогда не будет включено в стандарт, так как это скажется на отображении слишком большого количества сайтов, но не пришло ли время переключиться на использование его для всех элементов на всех проектах с помощью универсального селектора, как предлагает Пол? Об этом я думал в последнее время.</p>\n<p>Если дело касается только моих собственных проектов или проектов с небольшими командами разработчиков, которых я знаю и с которыми могу общаться непосредственно, я думаю, сказал бы — да, это стоит сделать. Но когда речь идет о руководстве для многих разработчиков, проектах с открытым исходным кодом или демо-материалах, доступных для просмотра большому количеству пользователей, с которыми я никогда не общался, я всё ещё сомневаюсь.</p>\n<h2>За и против</h2>\n<p>Определенно, в лагере профессионалов есть несколько наиболее известных разработчиков. Пол Айриш, несомненно, фанат своего дела. Он подытоживает разочарование от текущей модели:</p>\n<blockquote>\n<p>Уф. Если я говорю, что ширина блока должна быть 200 пикселей, то блок должен занимать 200 пикселей по ширине, даже если у него есть отступы по 20 пикселей.</p>\n</blockquote>\n<p><a href="http://blog.joelambert.co.uk/">Джоу Ламберт</a> соглашается с Полом <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/#comment-111776">в комментарии</a>:</p>\n<blockquote>\n<p>Я большой фанат этой техники, я использовал ее в некоторых мобильных веб-приложениях и все больше использую в веб-проектах.</p>\n</blockquote>\n<p><a href="http://adactio.com/">Джереми Кит</a> просто <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/#comment-111784">называет её</a> «очень крутой». В то же время, <a href="https://twitter.com/stefsull">Стефани Рюис</a> в удивляется <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/#comment-111772">в комментарии</a>:</p>\n<blockquote>\n<p>Мы должны лоббировать смену модели W3C. Я постоянно слышу, что разработчики разочарованы.</p>\n</blockquote>\n<p><a href="http://tjkdesign.com/">Терри Кобленц</a> предупреждает:</p>\n<blockquote>\n<p>К слову о «неправильной блочной модели», как мы привыкли её называть. Я думаю, проблема в том, что вы не можете управлять контентной областью блока, и любое изменение отступа или рамки окажет на нее влияние. Я понимаю, что людям может быть проще оформлять блоки таким способом, но это не волшебная палочка, и вам придется смириться с другими сложностями«.</p>\n</blockquote>\n<p><a href="http://weblogs.mozillazine.org/bz/">Борис Збарский</a> из Mozilla <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=243412#c21">говорит</a>:</p>\n<blockquote>\n<p>Спецификация недостаточно подробно описывает, как это должно работать, чтобы реализовать это при помощи CSS3 Box, вот что я могу сказать.</p>\n</blockquote>\n<p>В то время как <a href="http://dbaron.org/">Дэвид Барон</a> (тоже представитель Mozilla, а также рабочей группы CSS) заявляет:</p>\n<blockquote>\n<p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=308801#c31"><code>box-sizing</code> — это слабо проработанное свойство, предназначенное только для обратной совместимости с Quirks Mode</a>.</p>\n</blockquote>\n<p>Насколько я вижу, «за» и «против» таковы:</p>\n<h3>За</h3>\n<ul>\n<li>Гораздо проще рассчитывать размер элемента. Это тот размер, который я задаю, вне зависимости от того, какую толщину рамки или какой отступ я указываю.</li>\n<li>Мы можем указывать ширину блока в процентах для тянущихся макетов, продолжая использовать <code>em</code> или <code>px</code> для указания размеров полей. При использовании традиционной модели нам понадобится свойство <code>calc</code> для решения этой проблемы. Читайте <a href="http://css-tricks.com/box-sizing/">отличный пост Криса Койера</a> о <code>box-sizing</code> с описанием этого случая.</li>\n<li>Если вы собаку съели, разрабатывая под IE, то вы уже знаете, как использовать такую модель.</li>\n</ul>\n<h3>Против</h3>\n<ul>\n<li>Если вам требуется поддерживать IE7 и ниже, то у вас нет другого варианта, кроме как использовать специальные библиотеки или переводить IE в Quirks Mode (не лучшая идея). Firefox потребует использования префиксов, и вам потребуется префикс <code>-webkit</code>, если вы заботитесь об относительно свежих версиях Webkit. Смотрите <a href="http://caniuse.com/#search=box-sizing">список браузеров, поддерживающих свойство <code>box-sizing</code></a>.</li>\n<li>Всё ещё есть баги в поведении Firefox, особенно при работе с <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=308801"><code>min-</code> и <code>max-width/height</code></a> <em>(к счастью, уже исправленные — прим. редактора)</em>.</li>\n<li>Вы теряете контроль над размерами контентной области блока, что может привести к непредсказуемым последствиям. Например, что будет, если размер поля равен или больше ширины или высоты блока? (Самые дотошные могут открыть спецификацию и поискать правильный ответ).</li>\n<li>Пожалуй, наибольшая проблема для меня — ожидания разработчиков. Если я использую <code>* { box-sizing:border-box; }</code> в коде, который должен использоваться и расширяться другими разработчиками, я уверен, что они с большей вероятностью будут ожидать блочной модели W3C, и их стили будут вести себя не так, как они ожидают. Более того, если речь идет о разработчиках-новичках, то они могут быть вообще незнакомы с моделью IE, что потребует от них изучения дополнительных материалов перед началом работы, даже если они поймут причину такого поведения.</li>\n</ul>\n<h2>Что вы думаете?</h2>\n<p>С учетом всего сказанного и других причин, которые, я уверен, найдутся, — что вы думаете по этому поводу? Если бы вы участвовали в проектах, где другие разработчики будут работать с вашим кодом, вы бы использовали <code>box-sizing:border-box</code>? Я создал <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">опрос</a>, так что вы можете дать мне об этом знать, и после получения результатов я сделаю отчет о том, что выбирают люди.</p>\n<p>Через неделю в блоге появилась еще одна запись, уже с результатами оригинального опроса. Мы решили опубликовать перевод записи с результатами здесь же.</p>\n<h2>Результаты опроса</h2>\n<p>Прошла неделя с того дня, как я создал <a href="http://generatedcontent.org/post/25832131984/box-sizing">опрос об использовании <code>box-sizing:border-box</code></a>. За это время <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">форму</a> заполнили 256 человек. Результаты оказались такими:</p>\n<table>\n<thead>\n<tr>\n<th>Используете или будете использовать <code>box-sizing: border-box</code>?</th>\n<th>Да</th>\n<th>Нет</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>В текущем личном проекте</td>\n<td>71%</td>\n<td>29%</td>\n</tr>\n<tr>\n<td>В будущем личном проекте</td>\n<td>88%</td>\n<td>12%</td>\n</tr>\n<tr>\n<td>В будущем командном проекте</td>\n<td>85%</td>\n<td>15%</td>\n</tr>\n<tr>\n<td>В будущем «публичном» проекте</td>\n<td>60%</td>\n<td>40%</td>\n</tr>\n</tbody>\n</table>\n<p>В приведённой таблице под «командным проектом» понимается проект, в котором разработчики знакомы с человеком, принимающем решение об использовании модели <code>border-box</code> — например, группа разработчиков в одной компании или группа друзей, с которыми вы близко общаетесь в ходе работы. Под «публичным проектом» понимается проект, в котором разработчиком может быть кто угодно, с кем вы, вероятно, не можете лично согласовать выбор модели — проект с открытым исходным кодом или публичное API.</p>\n<p>Хотя это не окончательные результаты голосования, есть признаки того, что разработчики комфортно чувствуют себя при использовании модели <code>border-box</code> (или планируют её использовать) и рады использовать ее в «командных проектах». Меня немного удивило количество разработчиков, уже использующих эту модель. Число разработчиков, предпочитающих применять модель <code>border-box</code> в «публичных проектах» ниже, но все равно на 20% выше, чем число тех, кто не планирует этого делать. Если результаты опроса что-то значат, не удивляйтесь, если встретите все больше проектов, использующих модель, формально считающуюся неправильной.</p>\n<p>Хотя разработчики в большинстве своем предпочитают использовать <code>box-sizing:border-box</code>, многие заявили, что будут делать это только при необходимости, не применяя его ко всем элементам с помощью универсального селектора. Многие обратили внимание, что использование может нарушить работу некоторых jQuery-плагинов, и это способно ограничить применимость модели на сайтах, активно использующих jQuery. Другие сообщили, что применяли бы эту модель, если бы она была документирована, как это было с <a href="http://warpspire.com/kss/">KSS-комментариями</a> (это хороший подход при работе в команде или даже в личных проектах, если вам требуется затем поддерживать собственный код).</p>\n<p>Я оставлю <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">опрос открытым</a> в надежде собрать больше ответов. Но поскольку соотношение результатов в <code>box-sizing:border-box;</code> составило 60 к 40 в течение недели, я не жду, что результат значительно изменится.</p>\n<p>Вы все еще можете принять участие в опросе. К сожалению, результаты опроса сейчас скрыты. Но это только подогревает наше любопытство. Расскажите: а что вы думаете о возможности выбора блочной модели? Используете box-sizing:border-box; в текущих проектах? Планируете использовать?</p>\n<p>Перевод оригинальных записей «<a href="http://generatedcontent.org/post/25832131984/box-sizing">Sizing Boxes (Back to the Future)</a>» и «<a href="http://generatedcontent.org/post/26334712021/box-sizing-results">Box-sizing: border-box; the results are in</a>» Дэвида Стори (David Storey), опубликованных на сайте <a href="http://generatedcontent.org/">Genetated Content</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="https://twitter.com/smolnikov">Сергей Смольников</a>.</p>',headings:[{depth:1,value:"Размеры блоков, или Назад в будущее"},{depth:2,value:"Пора переключиться на border-box?"},{depth:2,value:"За и против"},{depth:3,value:"За"},{depth:3,value:"Против"},{depth:2,value:"Что вы думаете?"},{depth:2,value:"Результаты опроса"}],frontmatter:{title:"Размеры блоков, или Назад в будущее"}}},{node:{html:'<h1>Невыполненные обещания веб-компонентов</h1>\n<p>Перевод «<a href="https://dmitriid.com/blog/2017/03/the-broken-promise-of-web-components/">The broken promise of Web Components</a>» Дмитрия Диманта.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 38.55243722304284%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECA//EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAYzCgP/EABkQAAIDAQAAAAAAAAAAAAAAAAABAgMSEf/aAAgBAQABBQKcsp2dNn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAARD/2gAIAQEABj8CFP/EABgQAQADAQAAAAAAAAAAAAAAAAEAESEx/9oACAEBAAE/IXsBuDymMn//2gAMAwEAAgADAAAAEAAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARMSGx/9oACAEBAAE/ELhXAo7Ww2hztewFwCDtz//Z&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="cover" title="" src="/static/cover-dd4fa34e727a3ba59577092fd984ec6d-cb685.jpg" srcset="/static/cover-dd4fa34e727a3ba59577092fd984ec6d-94a32.jpg 163w,\n/static/cover-dd4fa34e727a3ba59577092fd984ec6d-09a61.jpg 325w,\n/static/cover-dd4fa34e727a3ba59577092fd984ec6d-cb685.jpg 650w,\n/static/cover-dd4fa34e727a3ba59577092fd984ec6d-eab17.jpg 975w,\n/static/cover-dd4fa34e727a3ba59577092fd984ec6d-7a98f.jpg 1300w,\n/static/cover-dd4fa34e727a3ba59577092fd984ec6d-4d550.jpg 1950w,\n/static/cover-dd4fa34e727a3ba59577092fd984ec6d-26c5f.jpg 2031w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n</figure>\n<p><strong>Дисклеймер:</strong> в статье я часто говорю о React, но вы можете понимать под ним любую библиотеку на JavaScript: Inferno, Preact, Vue, Snabbdom, Virtual DOM или без него: Elm, Om и другие. Точно так же под Polymer можно иметь в виду Vaadin или X-Tag, или…</p>\n<p>Кроме того, прочитайте <a href="https://medium.com/p/385d63de4959">великолепный ответ</a> Роба Додсона.</p>\n<h2>Короткая, неполная и часто неточная история веб-компонентов</h2>\n<h3>Древность</h3>\n<p>В 2011 интернет сделал прорыв. Со всеми его фейсбуками, гмейлами, гугл-доками и массой других <em>онлайн-вещиц</em>, которые уже нельзя было называть сайтами. Во всех смыслах это были полноценные приложения — одностраничные веб-приложения, или SPA (Single Page Application). Так просто.</p>\n<p>Но их разработчикам приходилось непросто…</p>\n<p>Уровень развития веб-интерфейсов в то время подразумевал использование шаблонизаторов, основанных на симбиозе серверной логики или клиентских библиотек: <a href="http://backbonejs.org/">Backbone</a> — для тех, кому повезло больше, <a href="http://jqueryui.com/">jQuery UI</a> или <a href="https://www.sencha.com/products/extjs/">Sencha/ExtJs</a> — если в вас был дух энтерпрайза.</p>\n<p>Это было неудобно. Это было негибко. Прототипировать быстро и легко — невозможно. UI-библиотеки накладывали свои ограничения. Список проблем можно продолжить.</p>\n<p>Это при том, что в нашем распоряжении был набор всё тех же HTML-элементов: <code>&#x3C;div></code>, <code>&#x3C;p></code>, <code>&#x3C;form></code>…</p>\n<p>И вот, в 2011 Алекс Рассел предложил <a href="https://fronteers.nl/congres/2011/sessions/web-components-and-model-driven-views-alex-russell">свое видение будущего</a> (акценты в тексте — мои):</p>\n<blockquote>\n<p>Мне кажется, сегодня мы застряли в ловушке расширяемости. Мы зацикливаемся на JavaScript, так как это базовый язык нашей экосистемы. Он один выручает нас, когда CSS и HTML не справляются. И вот мы набиваемся в спасательную шлюпку под названием JavaScript. Мы снова и снова делаем это.\nВчера Брюс указал на случай с пустым <code>&#x3C;body></code> как примером того самого патологического желания запихнуть всё в JavaScript. Вы цепляетесь за него, пытаясь с его помощью воссоздать всё, что браузер и сам в общем-то способен сделать: передаете по цепочке скрипта кусок разметки, чтобы в конце концов получить тот же результат, как если бы добавили его сразу в HTML. Но есть причина. Gmail содержит пустой <code>&#x3C;body></code> не потому, что он сделан глупо. Он содержит пустой <code>&#x3C;body></code>, потому что это одновременно выразительный, надёжный и легко поддерживаемый способ реализовать нужную функциональность. А вы пытаетесь сыграть ва-банк, положить все яйца в одну корзину под названием JavaScript.\nБраузерам требуется время, чтобы внедрить новые «фичи». Нам нужно сначала выпустить их для пользователей, те должны начать их использовать, после этого можно замерить аудиторию и только тогда сказать «классно, можно использовать эту фичу, теперь она будет полезна».\nЭто то, от чего выигрывают разработчики. Чем раньше возникнет интерес, тем больше шансов увидеть новинки на рынке и начать их использовать. Тогда все скажут: «да, это классная фича».\n<strong>Таким образом, мы скованы невысказанной дилеммой между глубоким прагматизмом и стремлением к платоновскому идеалу.</strong> Но нам не хватает правильной модели, чтобы осмыслить это.\nЧем больше функциональности или поведения [привычных разработчикам и реализованных в браузерах] мы забираем на себя, чем больше мы пытаемся сделать «руками» на JavaScript, тем дальше отходим от той идеи негласной договоренности, на которой держится весь мир.\n<strong>Мы намерены поддерживать прогресс.</strong> На мой взгляд, мы застряли на обсуждении HTML5, и уже хватит.</p>\n</blockquote>\n<p>Дальше он показывает демо и рассказывает о веб-компонентах, под которыми в то время подразумевали три разные вещи: инкапсуляцию CSS, Shadow DOM и веб-компоненты. (Я тоже, в целом, рекомендую его доклад).</p>\n<p>Но потом случился <em><a href="https://www.w3.org/">W3C</a></em>. В лучших традициях он взял инициативу в свои руки и потратил следующие пять лет на поиск того самого платоновского идеала, позабыв о практическом результате.</p>\n<h3>Революция Facebook</h3>\n<p><em>Facebook</em> — это сложно устроенное приложение. Возможно, это не очевидно, но это так. Эти маленькие разбросанные по странице блоки—полноценные компоненты. Они должны <em>реиспользоваться, настраиваться и адаптироваться</em> под разный контекст. Разработка с ними должна строиться буквально так: взять элемент <code>box</code>, вставить его в <em>этом месте</em> на странице, применить какие-то стили и при этом не сломать отображение других элементов.</p>\n<p>И это должно работать относительно быстро, так как известно: <em>DOM</em> обновляется медленно. Есть бесчисленное количество статей, объясняющих, что минимальное количество обращений к <em>DOM — абсолютная необходимость</em>.</p>\n<p>Печально, что <code>innerHTML</code> (признак дурного кода) по скорости работы — <a href="http://andrew.hedges.name/experiments/innerhtml/">на одном уровне или быстрее</a> функций управления <em>DOM</em>.</p>\n<p>И что же придумал <em>Facebook</em>? Всё просто: они просто написали собственную реализацию веб-компонентов полностью на <em>JavaScript</em>. C <em>XML-подобным</em> синтаксисом внутри. Его назвали <a href="https://facebook.github.io/react/">React</a> и показали миру в 2013 году.</p>\n<p>Reaсt позволяет следующее:</p>\n<ul>\n<li>создавать собственные кастомные элементы на основе HTML-подобного синтаксиса;</li>\n<li>вставлять их в DOM;</li>\n<li>использовать виртуальный DOM, сводя к минимуму работу напрямую с DOM браузера;</li>\n<li>имеет всего несколько ограничений по работе с компонентами и внутри них (так как всё в React — JavaScript, его DSL лишь обертка над небольшим количеством функций).</li>\n</ul>\n<p>Не удивительно, что React стремительно завоевал свое место в мире веба. Кто не использовал библиотеку — обязательно говорил о ней. Очень быстро появились похожие и конкурирующие инструменты (<a href="https://infernojs.org/">Inferno</a>, <a href="https://preactjs.com/">Preact</a>) или некоторые части для работы с виртуальным DOM (<a href="https://github.com/snabbdom/snabbdom">Snabbdom</a>, <a href="https://github.com/Matt-Esch/virtual-dom">Virtual DOM</a> и другие).</p>\n<h3>2017</h3>\n<p>К 2017 React смог реализовать всё то, что ждали от спецификации веб-компонентов. Он позволяет создавать независимые реиспользуемые компоненты и работает практически во всех поддерживающих JavaScript браузерах (не поддерживается в IE &#x3C; 9).</p>\n<p>Расцвет экосистемы пошёл дальше идеи веб-компонентов. Если я не ошибаюсь, <a href="https://github.com/css-modules/css-modules">CSS-модули</a> впервые реализовали в React и для React.</p>\n<p>В 2017 спецификация веб-компонентов всё ещё <a href="http://caniuse.com/#search=web%20components">в разработке</a>, и это несмотря на выход двух версий для каждого из двух базовых стандартов. На момент написания статьи (март 2017) ситуация с поддержкой такая:</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.13875598086125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAMB/9oADAMBAAIQAxAAAAHVsCkil//EABYQAQEBAAAAAAAAAAAAAAAAAAASEf/aAAgBAQABBQKlNf/EABcRAAMBAAAAAAAAAAAAAAAAAAAREiH/2gAIAQMBAT8BnUM//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPwG6Jn//xAAVEAEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAQAGPwKP/8QAGRABAAIDAAAAAAAAAAAAAAAAAQARECEx/9oACAEBAAE/IXYDcodw/9oADAMBAAIAAwAAABAP3//EABgRAQEAAwAAAAAAAAAAAAAAAAEAEUHw/9oACAEDAQE/EEB5uyv/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAECAQE/EF8Spt//xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMVFx/9oACAEBAAE/EBtKtSw3ElL6JizoPu//2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="caniuse" title="" src="/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-cb685.jpg" srcset="/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-94a32.jpg 163w,\n/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-09a61.jpg 325w,\n/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-cb685.jpg 650w,\n/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-eab17.jpg 975w,\n/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-7a98f.jpg 1300w,\n/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-4d550.jpg 1950w,\n/static/caniuse-63498ec233e0fb966094a6406f0c7dd4-a73c8.jpg 2090w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n<h2>Так о каких невыполненных обещаниях идёт речь?</h2>\n<p>Ну, первый провал очевиден: что-то их нигде нет. Обещание «поддерживать прогресс» не выполнено. За шесть лет веб-компоненты породили шесть стандартов. Два из них успели устареть. Только один из основных браузеров вкладывается в поддержку (прости Opera, но ты больше не входишь в их число и к тому же работаешь на основе Chromium).</p>\n<p>Другое невыполненное обещание, его сегодня много обсуждают в интернетах — зависимость от сторонних библиотек. И это вынуждает оставить здесь этот излишне длинный кусочек размышлений вслух. Потому, что есть <a href="https://www.polymer-project.org/">Polymer</a>.</p>\n<p>Polymer — это попытка Google создать совместимую с веб-компонентами реализацию:</p>\n<blockquote>\n<p><strong>Откройте возможности веб-компонентов.</strong> Polymer — JavaScript-библиотека, которая помогает создавать кастомные реиспользуемые HTML-элементы для быстрых и простых в поддержке приложений.</p>\n</blockquote>\n<p>Polymer демонстрирует главный минус веб-компонентов — DOM.</p>\n<h3>DOM</h3>\n<p>Разберём следующий код на React:</p>\n<pre><code>&#x3C;MyComponent style={{border: \'1px solid gray\'}}>\n  {\n    [\'Hello\', \'world\'].map((text) => &#x3C;p>{text}&#x3C;/p>)\n  }\n&#x3C;/MyComponent>\n</code></pre>\n<p>Перед нами кастомный компонент. Его стили определены в формате JavaScript-объекта. Его дочерние элементы — результат исполнения метода map и, одновременно, ещё один компонент. В данном случае, это <code>&#x3C;p></code>, но могло быть что угодно. Внутри— текущее значение элемента массива.</p>\n<p>Этот XML-подобный DSL напрямую <a href="https://babeljs.io/repl/#?babili=false&#x26;evaluate=true&#x26;lineWrap=false&#x26;presets=react%2Cstage-2&#x26;targets=&#x26;browsers=&#x26;builtIns=false&#x26;code=%3CMyComponent%20style%3D%7B%7Bborder%3A%20&#x27;1px%20solid%20gray&#x27;%7D%7D%3E%0A%20%20%7B%0A%20%20%20%20%20%5B&#x27;Hello&#x27;%2C%20&#x27;world&#x27;%5D.map((text)%20%3D%3E%20%3Cp%3E%7Btext%7D%3C%2Fp%3E)%0A%20%20%7D%0A%3C%2FMyComponent%3E&#x26;#babili=false">транслируется в JavaScript</a>:</p>\n<pre><code>React.createElement(\n  MyComponent,\n  { style: { border: \'1px solid gray\' } },\n  [\'Hello\', \'world\'].map(text => React.createElement(\n    \'p\',\n    null,\n    text\n  ))\n);\n</code></pre>\n<p>А как бы выглядел тот же трюк на веб-компонентах? Ну…</p>\n<p>Если взять HTML как контрпример для JSX, то ничего не выйдет:</p>\n<pre><code>&#x3C;my-component style="только строки для атрибутов">\n  … здесь ничего …\n  здесь можно использовать только другой компонент или текст\n&#x3C;/my-component>\n</code></pre>\n<p>Ну а что с JS API? Помните, я говорил, что веб-компоненты — это DOM?</p>\n<pre><code>const MyComponent = document.createElement(\'my-component\')\nMyComponent.style.border = \'1px solid gray\'\n\n[\'Hello\', \'world\'].forEach((\'text\') => {\n  const p = document.createElement(\'p\')\n  p.textContent(text)\n\n  MyComponent.appendChild(p)\n})\n</code></pre>\n<p>Код компонента будет неуклонно расти при усложнении каждого элемента. Представьте, мы хотим обернуть text внутри p в span?</p>\n<p>Сделать это на React? Раз плюнуть. Просто добавляем:</p>\n<pre><code>[\'Hello\', \'world\'].map((text) => {\n  return &#x3C;p>&#x3C;span>{text}&#x3C;/span>&#x3C;/p>\n})\n</code></pre>\n<p>А на веб-компонентах:</p>\n<pre><code>[\'Hello\', \'world\'].forEach((\'text\') => {\n  const p = document.createElement(\'p\')\n  const span = document.createElement(\'span\')\n  span.textContent(text)\n  p.appendChild(span)\n\n  MyComponent.appendChild(p)\n})\n</code></pre>\n<p>Ad infinitum.</p>\n<h3>Ломаем совместимость</h3>\n<p>Итак, представим, как описанные выше проблемы с самого начала возникли на пути Polymer. Что делать? Ну, можно создать что-то вроде собственного языка: «не-совсем-но-типа-джаваскрипт», чтобы и разметку умел и немного логики. И чтобы в виде строк.</p>\n<p>Чтобы разобраться, пройдитесь по <a href="https://www.polymer-project.org/2.0/docs/devguide/data-system">data system</a> из Polymer. Здесь я покажу только несколько примеров:</p>\n<p><strong>Обратите внимание:</strong> [[]], {{}}, $= и другие — не являются частью спецификации веб-компонентов.</p>\n<pre><code>&#x3C;template>\n  &#x3C;div>[[name.first]] [[name.last]]\n  &#x3C;/div>\n&#x3C;/template>\n\n&#x3C;my-input value="{{name}}">&#x3C;/my-input>\n\nstatic get properties() {\n  return {\n    active: {\n      type: Boolean,\n      observer: \'userListChanged(users.*, filter)\'\n    }\n  }\n}\n\n&#x3C;div>[[_formatName(first, last, title)]]&#x3C;/div>\n\n&#x3C;a href$="{{hostProperty}}">\n</code></pre>\n<p>И так далее. А вот <a href="https://www.polymer-project.org/2.0/docs/devguide/data-binding#annotated-computed">моё любимое</a>:</p>\n<blockquote>\n<p><strong>Запятая внутри строки:</strong> каждая запятая внутри строки <strong>должна</strong> обязательно экранироваться символом <code>\\</code>.</p>\n</blockquote>\n<pre><code>&#x3C;dom-module id="x-custom">\n  &#x3C;template>\n    &#x3C;span>\n      {{translate(\'Hello\\, nice to meet you\', first, last)}}\n    &#x3C;/span>\n  &#x3C;/template>\n&#x3C;/dom-module>\n</code></pre>\n<p>Ну то есть, <a href="https://www.destroyallsoftware.com/talks/wat">wat</a>.</p>\n<h2>Ну серьёзно</h2>\n<p>А теперь серьёзно. Едва ли можно сказать, что веб-компоненты реализовали хотя бы часть возлагавшихся на них надежд. Едва ли они смогли ответить на стоявшие перед ними вызовы.</p>\n<p>Спецификации зависят от JavaScript:</p>\n<ul>\n<li>кастомные элементы <a href="https://html.spec.whatwg.org/multipage/scripting.html#custom-elements">работают на JS</a>;</li>\n<li>HTML-шаблоны существует только для <a href="https://html.spec.whatwg.org/multipage/scripting.html#the-template-element">обработки скриптом</a>;</li>\n<li>я вообще не уверен, может ли <a href="https://www.w3.org/TR/shadow-dom/">Shadow DOM</a> работать без JavaScript;</li>\n<li>и только <a href="http://w3c.github.io/webcomponents/spec/imports/">HTML-импорты</a> не нуждаются в JS.</li>\n</ul>\n<p>Веб-компоненты — это DOM, поэтому:</p>\n<ul>\n<li><a href="https://html.spec.whatwg.org/#attributes">атрибуты</a> — только строчные значения;</li>\n<li><a href="https://html.spec.whatwg.org/#kinds-of-content">типизация содержимого</a> непонятная—нужно ещё посмотреть, как такая модель <a href="https://html.spec.whatwg.org/multipage/scripting.html#custom-elements-autonomous-drawbacks">будет работать</a> для структур с большой вложенностью.</li>\n</ul>\n<p>Чтобы работать с ограничениями (вроде строчных атрибутов) библиотекам придётся (а куда деваться?) изобретать различные несовместимые друг с другом способы передачи параметров:</p>\n<ul>\n<li>Разве <code>attr$=\'{{user.name}}\'</code> из Polymer лучше или совместимее, чем <code>item-label-path="name.first"</code> из Vaadin или <code>&#x3C;div *ngFor="let hero of heroes">{{hero.name}}&#x3C;/div></code> из Angular?</li>\n<li>Где и какую мне нужно импортировать библиотеку Икс, чтобы справиться с их странными способами обхода ограничений DOM, если я имею дело с несколькими вложенными компонентами?</li>\n<li>DOM API ужасны. Они неудобные, негибкие и неэффективные. Polymer сотоварищи делают отважные попытки работать с ним напрямую, но всё же обращаются к <code>innerHTML</code> в случаях, когда это не так принципиально (например, в <a href="https://github.com/Polymer/polymer/search?utf8=%E2%9C%93&#x26;q=innerHTML">тестах</a>). Если веб-компоненты укоренятся, интернет будет заполнен неэффективным <code>innerHTML</code> и, вероятно, новыми вариациями Snabbdom и Virtual-DOM.</li>\n<li>Как это поможет интеграции и преодолению зависимости от инструментов или библиотек, если каждый использует свою?</li>\n</ul>\n<p>Изоляция стилей…</p>\n<ul>\n<li>CSS-модули. Мне продолжать?</li>\n</ul>\n<p>Всё это — только часть проблем. Те из них, которые в первую очередь приходят мне в голову. И я не встречал их серьезного обсуждения сообществом.</p>\n<p>Команда React и вовсе <a href="https://docs.google.com/document/d/1QZxArgMwidgCrAbuSikcB2iBxkffH6w0YB0C1qCsuH0/edit">заявила</a>:</p>\n<blockquote>\n<p>Мы не собираемся использовать веб-компоненты на Facebook. У нас нет планов интегрировать их с React, так как существует большая разница на уровне самих моделей — императивной в веб-компонентах и декларативной в React. В веб-компонентах нет нормального способа идиоматически описать вещи, вроде того, куда идут события. Как вы передадите данные, если все описано строками? Мы рассматриваем их больше как слой, помогающий различным фреймворкам взаимодействовать друг с другом.</p>\n</blockquote>\n<p>Сейчас React позволяет использовать их в качестве <a href="https://www.youtube.com/watch?t=124&#x26;v=g0TD0efcwVg">конечных узлов</a> дерева компонента, так как любой компонент с именем, начинающимся со строчной буквы, React интерпретирует как DOM-элемент.</p>\n<p>Цитирую Пита Ханта:</p>\n<blockquote>\n<p>В веб-компонентах много приятного. Например, возможность кастомизировать <code>&#x3C;select></code>. Так что в них много хорошего, однако они не годятся для структурирования приложений. React же нацелен на решение таких задач: создание структуры и управление DOM. Веб-компоненты — продолжение обычного DOM API. Я придерживаюсь такого мнения: эта спека стандартизирует худшие практики.</p>\n</blockquote>\n<p>Все эти вопросы поднимаются крайне редко, если не брать в расчет комментарии к <a href="http://2ality.com/2015/08/web-component-status.html">некоторым статьям</a> и обсуждения в Твиттере. Складывается ощущение, будто все согласны, что «веб-компоненты — это славное общедоступное и скорое будущее».</p>\n<p>Так ли это?</p>\n<h2>Примечание</h2>\n<ul>\n<li>Изображение: <a href="https://www.flickr.com/photos/yoorock/29946893014/">Nobody Home Yet</a> Рика Херрмана, <a href="https://creativecommons.org/licenses/by-nc-nd/2.0/">CC BY-NC-ND 2.0</a></li>\n<li>Ссылки на некоторые материалы были взяты из <a href="http://2ality.com/2015/08/web-component-status.html">статьи</a> Акселя Раушмайера.</li>\n</ul>\n<p>Перевод «<a href="https://dmitriid.com/blog/2017/03/the-broken-promise-of-web-components/">The broken promise of Web Components</a>» Дмитрия Диманта. Перевод <a href="https://medium.com/@vlad_poe">Владислава Почепцова</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</p>',headings:[{depth:1,value:"Невыполненные обещания веб-компонентов"},{depth:2,value:"Короткая, неполная и часто неточная история веб-компонентов"},{depth:3,value:"Древность"},{depth:3,value:"Революция Facebook"},{depth:3,value:"2017"},{depth:2,value:"Так о каких невыполненных обещаниях идёт речь?"},{depth:3,value:"DOM"},{depth:3,value:"Ломаем совместимость"},{depth:2,value:"Ну серьёзно"},{depth:2,value:"Примечание"}],frontmatter:{title:"Невыполненные обещания веб-компонентов"}}},{node:{html:'<h1>Культ карго CSS</h1>\n<p><a href="http://kapowaz.net">Бен Дарлоу</a> 19 февраля 2014</p>\n<p>Все согласны с тем, что лучше иметь какую-то методологию для написания и поддержки CSS, чем не иметь никакой вовсе. Тем не менее, некоторые популярные среди разработчиков практики ухудшают как семантику кода, так и возможность его долгосрочной поддержки. Я хотел бы рассказать о проблемах с «методологиями фреймворков» CSS, и о том, как мы, веб-разработчики, можем разрешить эти проблемы.</p>\n<p>Самая популярная фреймворк-методология для разработки CSS сегодня — <a href="https://github.com/stubbornella/oocss/wiki/faq">OOCSS</a>, хотя существуют и другие похожие техники, например, <a href="http://bem.info/method/definitions/">БЭМ</a>. Эти методологии пытаются применить к CSS принципы объектно-ориентированного программирования. Даже если не обращать внимания на различные концептуальные несоответствия между <em>декларативным языком</em>, на котором пишутся стили, и <em>объектно-ориентированными принципами</em> организации программ, использование этих методологий приводит к сложностям, которые не будут с первого взгляда очевидны начинающим разработчикам. Самое печальное, что эти методологии распространяются крайне широко — в первую очередь благодаря популярным блоггерам, рекламирующим их использование как передовую практику. То, что никаких реальных доказательств заявленных преимуществ этих методологий не приводится (за исключением очень малого числа избранных высоконагруженных сайтов), согласуется с моей точкой зрения: эти методологии — вредный и вводящий в заблуждение <a href="http://ru.wikipedia.org/wiki/%D0%9A%D1%83%D0%BB%D1%8C%D1%82_%D0%BA%D0%B0%D1%80%D0%B3%D0%BE">культ карго</a>.</p>\n<h2>Семантика</h2>\n<blockquote>\n<p>В программировании есть две сложных вещи: инвалидация кэша и выбор, как правильно что-нибудь назвать.\nФил Карлтон</p>\n</blockquote>\n<p>Веб в первую очередь — <em>семантическая среда</em>. Это ключевая функция платформы, которая предназначена для использования людьми, разговаривающими на разных языках, принадлежащими к разным культурам, разного пола и возраста, с абсолютно разными физическими и когнитивными способностями. Для того чтобы быть доступным для всех настолько разных людей, у веба есть невероятный по широте спектр различных технологий. Нет никакой единственно верной точки зрения на то, каким должен быть веб или как он должен выглядеть. Но в том случае, когда вы разрабатываете продукт с хотя бы относительно широкой сферой применения, в основе всего, что вы делаете как веб-разработчик, должен лежать семантический подход.</p>\n<p>При написании HTML выразить семантику содержимого или интерфейса сайта/приложения можно тремя основными способами: с помощью <em>типа элементов</em>, из которых состоит разметка; <code>id</code>, которые используется для того, чтобы указать <em>особый, индивидуальный элемент</em> — и <em>имен классов</em>, которые нужны, чтобы описать набор элементов.</p>\n<p>Из этих трех вариантов именно имена классов чаще всего используются для того, чтобы привязать особенности отображения к HTML-документу. Важно отметить, что в последней версии рекомендации HTML 5 по версии W3C в описании имен классов сказано:</p>\n<blockquote>\n<p>Дополнительных ограничений по тем данным, которые авторы документов могут использовать внутри атрибута <code>class</code>, нет, но авторам рекомендуется использовать значения, которые описывают суть содержимого элемента, а не желаемое отображение этого содержимого.</p>\n</blockquote>\n<p>Нигде в спецификации атрибута <code>class</code> не сказано, для чего <em>предназначен</em> этот атрибут, кроме рекомендации, что его следует использовать для описания семантики содержимого. Несмотря на это, для веб-разработчиков стало совершенно обычным делом описывать атрибут <code>class</code> как «класс CSS» и т.п. Как замечает Тантек Челик:</p>\n<blockquote>\n<p>Употребляя фразу «CSS-класс» или «имя CSS-класса», вы не просто неточно (неверно!) выражаетесь, а привязываете контекст отображения и саму структуру CSS к именам классов, что предполагает и поощряет использование неверного приема, когда названия классов становятся зависимыми от предполагаемого отображения.</p>\n</blockquote>\n<p>Поскольку эта рекомендация совершенно несовместима с методологиями фреймворков, они просто решили ее игнорировать. Поскольку в этой методологии имена классов <em>должны</em> описывать отображение элементов, они по определению не являются семантическими — <a href="http://nicolasgallagher.com/about-html-semantics-front-end-architecture/">как бы это ни пытались оспорить</a>. Но почему семантические имена классов вообще имеют такое значение? На самом базовом уровне суть в том, что нужно поддерживать независимый от платформы, всесторонний принцип, который Тим Бернерс-Ли назвал «<a href="http://www.scientificamerican.com/article.cfm?id=long-live-the-web">универсальностью веба</a>». А еще дело в том, что мы не можем предсказать, каким образом будущие технологические инновации будут использовать код, который мы разрабатываем сейчас.</p>\n<blockquote>\n<p>Быстрый тест на то, является ли ваш HTML-код семантическим: можно ли использовать его в качестве публичного API?\nАлекс Гейнор, <a href="https://twitter.com/alex_gaynor/statuses/389502802265133056">@alex_gaynor</a></p>\n</blockquote>\n<p>Отличный пример: <a href="http://microformats.org/about">микроформаты</a>. Единственная причина, по которой они возникли, в том, что создатели документов использовали <em>семантические имена классов</em>, чтобы разметить часто встречающиеся структуры: адреса или записи в календаре. За счет кодификации договоренностей, которые использовались для описания таких данных, разметка стала полезной не только для посетителей сайтов, но и для автоматических систем: программы смогли понимать и использовать эти данные так, как никто и не мог себе представить. Микроформаты демонстрируют всю пользу от семантических имен классов, так что печально, что на них иногда смотрят свысока.</p>\n<blockquote>\n<p>Имена классов не передают (или передают очень мало) семантической информации машинам или пользователям, за исключением тех случаев, когда они входят в небольшой набор договоренностей об именах (которые могут быть прочитаны машиной) — микроформатов.\nНиколас Галлахер</p>\n</blockquote>\n<p>Это совершенно произвольное разделение между «небольшим набором договоренностей об именах» и возможными способами будущего использования контента, который разрабатывается и публикуется в данный момент, имеет свой причиной исключительно потребность в оправдании идеологии CSS-фреймворков. Если мы разрешаем использовать несемантические имена классов, то структура и контент документа начинают контролироваться его презентацией — что является четким нарушением принципа <a href="http://en.wikipedia.org/wiki/Law_of_Demeter">разделения ответственности</a>.</p>\n<h2>Поддержка</h2>\n<p>При разработке сайтов мы должны обеспечить, чтобы наш продукт в достаточной мере смотрел в будущее, чтобы его можно было легко поддерживать и адаптировать на протяжении всего его существования. Современные сайты и приложения во все большей мере создаются большими командами фронтенд-разработчиков. В этой среде очень важно, чтобы методология, которая используется при написании CSS, успешно принималась всей командой (и теми, кто работает над проектом только на нескольких этапах его развития, и теми, кто присоединился к нему уже после начала разработки). В такой среде возникает множество проблем с написанием CSS, например:</p>\n<ul>\n<li>Повторение/дублирование кода</li>\n<li>Постоянство кода в продукте</li>\n<li>Производительность</li>\n</ul>\n<p>Пожалуй, самая серьезная причина озаботиться методологией CSS-фреймворка — это дать фронтенд-разработчикам возможность решить первую из этих проблем: дублирование CSS-кода сайта. Если использовать короткие селекторы по имени класса, разработчик может сделать селектор более полезным: так, чтобы его правила распространялись на большое количество элементов. Вот пример такого класса, который дает соответствующим элементам одинаковую границу, поля и параметры шрифта:</p>\n<pre><code>.box-standard {\n    color: blue;\n    border: 2px solid blue;\n    border-radius: 5px;\n    padding: 20px;\n    font-family: Helvetica, Arial, sans-serif;\n    font-weight: normal;\n    font-size: 1rem;\n    line-height: 1.4;\n}\n</code></pre>\n<p>Разработчик может применить этот класс к любому числу элементов, и для всех них будет действовать этот стиль. Кроме того, другие элементы могут использовать не весь набор стилей, а переопределять конкретные свойства по мере необходимости, объявив отдельный класс ниже в коде CSS. Поскольку у обоих классов один и тот же уровень специфичности, более позднее определение получит приоритет.</p>\n<pre><code>.box-special {\n    color: red;\n    border-color: red;\n    font-weight: bold;\n}\n\n&#x3C;div class="box-standard box-special">\n    Особенный квадратик!\n&#x3C;/div>\n</code></pre>\n<p>Конечно, всем хочется уменьшить дублирование кода, но если писать классы таким образом, разметка оказывается навсегда привязанной к присутствию обоих этих классов, ни один из которых не передает какое-то особенное семантическое значение.</p>\n<p>Что действительно нужно здесь разработчику — это комбинация примесей и расширений, которые существуют в различных CSS-препроцессорах: например, <a href="http://lesscss.org/">LESS</a> и <a href="http://sass-lang.com/">SASS</a>. Набор связанных свойств можно сгруппировать как <a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html#mixins">примесь</a> или <a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html#placeholders">шаблон @extend</a>, которым можно без проблем дать полностью презентационное название: он не проявляется нигде в сгенерированном коде (если вы не захотите, конечно — например, для отладки) и может быть встроен в любой CSS-селектор. Вот простой пример примеси в <a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html">синтаксисе SCSS</a>:</p>\n<pre><code>@mixin news-item($color) {\n    border: 2px solid $color;\n    border-radius: 5px;\n    padding: 20px;\n    font-family: Helvetica, Arial, sans-serif;\n    font-weight: normal;\n    font-size: 1rem;\n    line-height: 1.4;\n}\ndiv.news {\n    @include news-item(blue);\n}\ndiv.breaking {\n    @include news-item(red);\n    font-weight: bold;\n}\n\n&#x3C;div class="news">\n    Вот это новость!\n&#x3C;/div>\n&#x3C;div class="breaking">\n    Вот это важная новость!\n&#x3C;/div>\n</code></pre>\n<p>Изменения в определениях стиля в примеси обязательно дойдут до селектора <code>div.breaking</code>, а разметка стала настолько гибко связанной, насколько вообще реально. Конечно, возможности писать примеси напрямую в CSS очень не хватает (к счастью, наконец она проходит <a href="http://lists.w3.org/Archives/Public/www-style/2011Mar/0478.html">процесс формализации</a>), но если вы профессионально пишете CSS, нет никаких причин не использовать CSS-препроцессор.</p>\n<p>Эта гибкая связь (она же <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">разделение ответственности</a>) невероятно важна для будущей поддержки проекта: если разметка и CSS будут связаны слишком плотно, это может увеличить стоимость будущих изменений. В раннюю пору жизни CSS обилие WYSIWYG-инструментов для веб-разработки (Dreamweaver, Frontpage и т.п.) привело к большому количеству сайтов, код которых выглядел как-то так:</p>\n<pre><code>&#x3C;span style="display: block; font-family: Arial, sans-serif; font-size: 11px; color: blue; border-style: solid; border-color: blue; border-width: 2px; padding: 20px;">\n    Квадратик!\n&#x3C;/span>\n&#x3C;span style="display: block; font-family: Arial, sans-serif; font-size: 11px; color: blue; border-style: solid; border-color: blue; border-width: 2px; padding: 20px;">\n    Ещё квадратик.\n&#x3C;/span>\n&#x3C;span style="display: block; font-family: Arial, sans-serif; font-size: 11px; color: blue; border-style: solid; border-color: blue; border-width: 2px; padding: 20px;">\n    И еще квадратик. Однако, тенденция?\n&#x3C;/span>\n</code></pre>\n<p>Эта разметка с построчными стилями не сильно продвинулась по сравнению с «супом тегов», который отравлял жизнь вебу в конце 90-х. Когда нужно было изменить дизайн, приходилось отслеживать и заменять все вхождения этих внутренних стилей. Мы выбрались из этого ада для разработчиков, но меня очень печалит, когда я вижу, что уроки тех дней оказались забыты — и мы по-прежнему встречаем примерно такой код:</p>\n<pre><code>&#x3C;span class="display-block blue-box font-arial color-blue solid-blue-border padding-20">\n    Танцуем, как в 90-е!\n&#x3C;/span>\n&#x3C;span class="display-block blue-box font-arial color-blue solid-blue-border padding-20">\n    Давно не заходили на K10K.net?\n&#x3C;/span>\n&#x3C;span class="display-block blue-box font-arial color-blue solid-blue-border padding-20">\n    Аааааааа!\n&#x3C;/span>\n</code></pre>\n<p>Может быть, это и экстремальный пример, но по сути это логический апофеоз методологии CSS-фреймворков, которая в погоне за «модульностью» отказывается от семантических имен классов и селекторов. Да, нам удается избежать дублирования кода внутри CSS, но дублирование переносится в разметку, и в процессе случаются побочные эффекты, обусловленные чересчур тесной связью элементов.</p>\n<p>Еще одна цель этой методологии — обеспечить высокую производительность. Это зависит от многих факторов: какой клиент заходит на веб-страницу, какая у него скорость соединения, был ли контент закэширован и т.п. На базовом уровне сильнее всего влияют на производительность CSS три фактора:</p>\n<ul>\n<li>Количество HTTP-запросов</li>\n<li>Статус кэширования</li>\n<li>Размер документа</li>\n</ul>\n<p>Первые два фактора, как считается, выходят за рамки методологии CSS-фреймворка, а вот третья проблема решается за счет повторного использования имен классов: смысл в том, что если объявить как можно меньше свойств стилей, CSS будет настолько маленьким, насколько возможно.</p>\n<p>Однако отдавать на выходе такой CSS-документ не вполне верно: если вы используете маленькие селекторы с меньшим количеством правил, а привязки в большей степени выводите в разметку (с большим количеством более длинных имен классов) — то количество передаваемых данных не идет вниз, а наоборот смещается из CSS-файла (который обычно агрессивно кэшируется и отдается через CDN) внутрь документа, который, как правило, не кэшируется совсем.</p>\n<p>Сторонники методологий CSS-фреймворков часто говорят, что если оставлять селекторы короткими, это хорошо влияет на производительность. <a href="http://calendar.perfplanet.com/2011/css-selector-performance-has-changed-for-the-better/">Этот тезис давно опровергнут</a>: современные движки браузеров достаточно эффективны, и практически во всех сложных случаях (за исключением разве что самых экстремальных) выигрыш в скорости от переписывания селекторов пренебрежительно мал. Хотя фронтенд-производительность при этом безусловно важно иметь в виду:</p>\n<blockquote>\n<p>Чего многие люди, кажется, не понимают (или просто не говорят об этом) — это того, что у высокой производительности есть вполне реальная и ощутимая цена — бо́льшие проблемы с поддержкой.</p>\n<p>Нильс Маттейс</p>\n</blockquote>\n<p>Наиболее серьезные проблемы с методологией CSS-фреймворка возникают тогда, когда вам нужно вернуться к старому коду, или когда к проекту присоединяется новый член команды. В первую очередь, это следствие неочевидности подобных подходов. В своей статье о фронтенд-архитектуре Николас Галлахер говорит: «Имена классов должны передавать разработчикам полезную информацию». Я бы пошел дальше: <em>селекторы</em> должны передавать разработчикам полезную информацию. Смысл здесь тот же самый — <em>объясните мне, где используется это правило</em> — но селектор гораздо более информативен для разработчика, потому что он передает <em>контекст</em>. Гораздо проще понять принцип, лежащий за правилом, если селектор подсказывает вам, что он применяется только к элементам <em>внутри каких-то рамок</em>. Например, сравните два возможных способа применить стили к ссылке внутри списка имен членов общества:</p>\n<pre><code>.list-link {\n    font-weight: bold;\n    text-decoration: none;\n}\n</code></pre>\n<p>или:</p>\n<pre><code>ul.members li a {\n    font-weight: bold;\n    text-decoration: none;\n}\n</code></pre>\n<p>Второй пример гораздо быстрее будет понят кем-то, кто не знаком с кодом: будь это потому, что они никогда над ним раньше не работали или потому, что давно к нему не притрагивались. По самой своей природе он более очевиден: новый разработчик в принципе не может знать, есть ли уже в коде какие-то подходящие правила, не прочитав (и не запомнив) всю базу кода по проекту. Это нереалистичное и непрактичное ожидание от разработчика — и со всей вероятностью разработчик просто создаст еще одно правило, которое делает то же самое: тем самым смысл сокращения повторов будет полностью утерян.</p>\n<blockquote>\n<p>Красивый код правилен не только в том смысле, что не содержит ошибок, — но и в плане прозрачности. Он не просто передает алгоритм компьютеру, но еще дает понимание человеку, который его читает. Делая наш код более красивым, мы его улучшаем. Научиться писать прозрачный код — это первый из многих шагов к пониманию того, как писать красивый код. А когда мы делаем код очевидным, мы учимся тому, как делать его прозрачным. Красивый код одновременно прозрачный и очевидный.</p>\n<p>Эрик Рэймонд</p>\n</blockquote>\n<p>Таким образом, из-за проблем с очевидностью фреймворк-методология закладывает семена для разбухания кода продукта. Если мы пишем специфические селекторы, мы даем разработчикам, помимо всего прочего, информацию для определения, необходимы они или нет. Вернемся к примеру выше: если список членов общества удаляется с сайта, то весь блок CSS можно удалить, в то время как гибкие селекторы, основанные на именах классов, могут теоретически использоваться где угодно, и без более серьезных усилий по очистке может быть неясно сразу, можно ли удалить правило, ничего не сломав, или нет.</p>\n<p>Я оставлю последнее слово о производительности за Мэттом Уилкоксом, который безупречно выражает свою мысль:</p>\n<blockquote>\n<p>Производительность — проблема на уровне браузера, а не что-то, чем должны заниматься (или обходить стороной) разработчики HTML и CSS. Если мы пишем валидный и вменяемый HTML или CSS, мы не должны опускаться до смехотворных правил только для того, чтобы увеличить скорость, с которой загружается данная конкретная страница. И мы действительно не должны: ведь с каждым релизом браузеры становятся быстрее. О производительности стоит больше всего волноваться тем ребятам, которые занимаются JS. А если вы хотите оптимизировать свою связку HTML и CSS — делайте это в соответствии с передовыми практиками, а не для лучшей производительности. «Плохая» производительность починится сама, когда выйдут новые браузеры, а низкокачественный, непонятный и сложный для поддержки код — нет.</p>\n</blockquote>\n<h2>Что же мы можем сделать?</h2>\n<p>Фронтенд-разработчики тихо и с успехом в течение многих лет разрабатывали крупные веб-проекты <em>без</em> использования методологий CSS-фреймворков. Тот простой факт, что эти крупные проекты обошлись без использования OOCSS, БЭМ и других методологий, показывает, что можно вполне эффективно работать и без них. Вот несколько рекомендаций от людей, с которыми я обсуждал написание CSS, а также — несколько предложений, основанных на моем личном опыте.</p>\n<p>Ради всего святого, используйте <code>id</code>!</p>\n<p>В ряде методологий CSS-фреймворков <a href="http://csslint.net/about.html">считается, что использовать <code>id</code> в CSS</a> — плохая идея. Объяснение этого следующее: <code>id</code> обладают большой специфичностью, поэтому переопределить правила, описанные для <code>id</code>, можно только с помощью (презираемого) модификатора <code>!important</code>. Я абсолютно не согласен с этим: <a href="http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/">цитируя Ангуса Кролла</a>, «стратегия избегания беспокоит меня тем, что нельзя освоить язык, не зная его с ног до головы, а страх и уклонение — враги знания». Если уж вы профессиональный веб-разработчик, вы должны понимать, как работает специфичность и как она влияет на селекторы, которые вы пишете. Кроме того, <code>id</code> — совершенно полноправная часть структуры документа, и у них есть <a href="http://www.webdirections.org/blog/in-defense-of-the-humble-id-attribute/">очень полезные функциональные и семантические свойства</a>.</p>\n<p>Пишите селекторы так, чтобы они были настолько специфическими и настолько описательными, насколько это нужно: ни больше, ни меньше.</p>\n<p>Если вы пишете CSS для элемента, который может появляться где угодно в документе, используйте соответствующий селектор. Если же этот CSS применяется только в очень специфических условиях, сделайте так, чтобы написанный вами селектор отражал именно это. Во всяком случае, не делайте ваши селекторы настолько краткими, что люди, которые будут читать ваш код через полгода, вообще не поймут, зачем они нужны.</p>\n<p>Не существует модулей для повторного использования (до того, как они действительно не станут повторно использоваться); делайте рефакторинг, переписывайте, выбрасывайте лишний код каждый день.</p>\n<p>Страх написать слишком специфичный CSS по сути является преждевременной оптимизацией. Пишите ровно тот CSS, который требуется для наличествующей задачи: когда станет очевидно, что его нужно использовать в другом месте, сделайте рефакторинг и разбейте его на примеси — но только в этот момент, ни минутой раньше! Может быть, на следующей неделе ваши приоритеты изменятся, и всю эту функцию вообще придется выбросить? Вы совсем не хотите, чтобы через полгода вы оказались лицом к лицу с пачкой ненужных селекторов из имен классов, смысла которых никто не понимает, равно как и того, что случится, если их удалить.</p>\n<p>Много файлов и процесс сборки.</p>\n<p>Черт возьми, вы же профессиональный веб-разработчик. Вы не пишете код в «Блокноте» — нет никакого повода не использовать в своей работе лучшие из существующих инструментов. На каком бы фреймворке или платформе вы ни разрабатывали, всегда есть возможность пользоваться CSS-препроцессорами! Есть много <a href="https://github.com/alphagov/govuk_frontend_toolkit">отличных примеров</a> эффективного повторного использования CSS в разных проектах. Почитайте и посмотрите, как это делают другие люди — расширяйте свои знания.</p>\n<p>Разрабатывайте статические прототипы. Делайте скриншоты всего, чего можно.</p>\n<p>Сайты и приложения обычно формируются из набора общих шаблонов: форма с подписями и полями ввода, список ссылок внутри элемента <code>&#x3C;nav></code>, список описаний и значений и т.п. Когда вы беретесь разрабатывать какой-то новый элемент функциональности, начните с того, чтобы сделать разметку, которая адекватно описывает нужную вам структуру как статический HTML. Это послужит вам не только как предмет для будущего тестирования, не ломается ли ваш код, но и для того, чтобы новые члены команды сразу видели, что уже есть и чем можно пользоваться. Если делать скриншоты этих страниц или всего приложения (вручную или с помощью автоматического набора тестов), это может быть полезным для определения ошибок с помощью методики постоянной интеграции.</p>\n<p>Сделать хорошую архитектуру CSS в комплексном веб-приложении непросто (и, в конце концов, именно поэтому на хороших фронтенд-разработчиков такой спрос), но это не значит, что мы должны осложнять жизнь новичкам и себе самим, накладывая на себя обязанность подчиняться произвольным «правилам», которые в конце концов приносят с собой лишнее усложнение и увеличение трудозатрат на поддержку.</p>\n<p>Анализируя цель, которой служит ваш продукт, вы сможете принять более верные решения относительно того, как структурировать все его аспекты, а не только внешний вид. Веб — это семантическая среда: следуйте этому принципу.</p>\n<blockquote>\n<p>Вот всепроникающий закон всех вещей: органических и неорганических, физических и метафизических, человеческих и сверхчеловеческих, всех истинных проявлений ума, сердца, души — жизнь узнается по тому, как она выражена, форма всегда следует за функцией. Это закон.\nЛуис Салливен</p>\n</blockquote>\n<h2>Благодарности</h2>\n<p>Пока я писал эту статью, мне очень помогали своим советом <a href="http://twitter.com/cackhanded">Марк Норман Фрэнсис</a>, <a href="http://twitter.com/intranation">Брэд Райт</a>, <a href="http://twitter.com/rossbruniges">Росс Бранигес</a>, <a href="http://twitter.com/jaffathecake">Джейк Арчибальд</a> и <a href="http://twitter.com/ptg">Патрик Гриффитс</a>.</p>\n<h2>Ссылки</h2>\n<ul>\n<li><a href="http://martinfowler.com/bliki/TwoHardThings.html">Две сложности</a></li>\n<li><a href="http://www.w3.org/TR/html5/dom.html#classes">W3C: Семантика, структура и API HTML-документов</a></li>\n<li><a href="http://tantek.com/2012/353/b1/why-html-classes-css-class-selectors">Почему правильно говорить: «HTML-классы», «CSS-селекторы класса» и «CSS-псевдоклассы», а «CSS-классы» — нет</a></li>\n<li><a href="http://nicolasgallagher.com/about-html-semantics-front-end-architecture/">О семантике HTML и фронтенд-архитектуре</a></li>\n<li><a href="http://www.onderhond.com/blog/work/cost-of-performance-css-selector-rewriting">Цена производительности</a></li>\n<li><a href="http://www.faqs.org/docs/artu/transparencychapter.html">Искусство программирования в Unix</a></li>\n<li><a href="http://2002-2012.mattwilcox.net/archive/entry/id/1054/">CSS Lint — зло</a></li>\n<li><a href="http://en.wikipedia.org/wiki/Form_follows_function">Wikipedia: форма следует за функцией</a></li>\n</ul>\n<p>Перевод оригинальной записи «<a href="http://www.kapowaz.net/articles/cargo-cult-css">Cargo Cult CSS</a>» Бена Дарлоу (Ben Darlow), опубликованной <a href="http://kapowaz.net">в авторском блоге</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод <a href="http://www.facebook.com/vlad.andersen">Влада Андерсена</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a> и <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Культ карго CSS"},{depth:2,value:"Семантика"},{depth:2,value:"Поддержка"},{depth:2,value:"Что же мы можем сделать?"},{depth:2,value:"Благодарности"},{depth:2,value:"Ссылки"}],frontmatter:{title:"Культ карго CSS"}}},{node:{html:'<h1>Не проверив HTML5-кода, не суйся в воду — с Майком™ Смитом</h1>\n<p><a href="https://twitter.com/stevefaulkner">Стив Фолкнер</a> 26 декабря 2014</p>\n<p><a href="http://people.w3.org/mike/">Майк™ Смит</a> (известный как <a href="https://twitter.com/sideshowbarker">@sideshowbarker</a>) из W3C — человек, с головой увязший в исходном коде инструмента W3C для <em>проверки <del>валидности</del> разметки</em>; эта <em>магия</em> работает именно благодаря ему. Вопросы были заданы на радость и в назидание читателю сайта.</p>\n<p><strong>Во-первых, расскажите нам немного о том, чем вы занимаетесь и над чем работаете</strong></p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 300px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 99%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQCAf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAZ5+bC0QYC0H/8QAGhABAAIDAQAAAAAAAAAAAAAAAQACAxESIf/aAAgBAQABBQJYh0blvbctLcVJlmNd7Wf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAgEBPwFj/8QAGxAAAgEFAAAAAAAAAAAAAAAAASEAEBESIDH/2gAIAQEABj8CcRvUZjsen//EABsQAAMBAAMBAAAAAAAAAAAAAAABESExQVFx/9oACAEBAAE/IYKNEZU/oyLaO2xYJwgg2I2/TMaLu3OzmNn/2gAMAwEAAgADAAAAEIgIAP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAECAQE/EEEf/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFRQf/aAAgBAQABPxAdCffD2NQhc5lMLbeLDNENbHWGKKuj45GPU3UF8C2L7AAoNa1lxR0M/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41C;&#x430;&#x439;&#x43A;&#x2122; &#x421;&#x43C;&#x438;&#x442;" title="" src="/static/mike-89b55bd9180ad5e5682118ec12ac6fbf-6a284.jpg" srcset="/static/mike-89b55bd9180ad5e5682118ec12ac6fbf-626c7.jpg 163w,\n/static/mike-89b55bd9180ad5e5682118ec12ac6fbf-6a284.jpg 300w" sizes="(max-width: 300px) 100vw, 300px">\n    </span>\n  </span>\n  \n\t<figcaption>&#x41C;&#x430;&#x439;&#x43A;&#x2122; &#x421;&#x43C;&#x438;&#x442;&#xA0;&#x2014; &#x437;&#x430;&#x43C;&#x435;&#x441;&#x442;&#x438;&#x442;&#x435;&#x43B;&#x44C; &#x434;&#x438;&#x440;&#x435;&#x43A;&#x442;&#x43E;&#x440;&#x430; @W3C: &#x432;&#x430;&#x440;&#x438;&#x430;&#x43D;&#x442; &#x43B;&#x438;&#x431;&#x435;&#x440;&#x430;&#x43B;&#x44C;&#x43D;&#x43E;&#x433;&#x43E; &#x43F;&#x43E;&#x434;&#x445;&#x43E;&#x434;&#x430; &#x43A;&#xA0;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x435;</figcaption>\n</figure>\n<p>Я не работаю. Я — старосветский <em>бонвиван</em>. Я пью чай, изящно отставив мизинец, и трачу силы только на то, что меня забавляет. Последние несколько лет меня забавляло тратить время на работу над программой, помогающей людям проверить, соответствуют ли их документы определённым требованиям в спецификации HTML.</p>\n<figure>\n\t<a href="http://validator.w3.org/nu/">\n\t\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 19.44990176817289%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0klEQVQI12PYf+Z+96IjE5Yd61t6tH/pMTDjWP+yY71LjvQtOQphT1h2HMjuWXwEjroWHZ604jhDw8x91omzQ8pWeOQstE+dG1C8NKhkuV/hUresBe7ZCwOLl3nmLgIybJJmizp3SLp2Srh2Srp1ijq3q/j3M5y9/nTJtvMb9l9dt/fK2j2XgeT6fVfWQ0gQurp2z5XVuy+t2XN55a5LK3dehKAVOy4ApRj+//vz//+f/39//v/7C8z49f/fz///f///9xtJ6ieIARQBkv//whj/AFl0qMzcJiYBAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41D;&#x43E;&#x432;&#x430;&#x44F; &#x43F;&#x440;&#x43E;&#x432;&#x435;&#x440;&#x43A;&#x430; &#x440;&#x430;&#x437;&#x43C;&#x435;&#x442;&#x43A;&#x438;" title="" src="/static/nu-markup-5f6487eb962a7b6c43cce2ad0ce9f6ed-ce0d4.png" srcset="/static/nu-markup-5f6487eb962a7b6c43cce2ad0ce9f6ed-a6060.png 163w,\n/static/nu-markup-5f6487eb962a7b6c43cce2ad0ce9f6ed-1a895.png 325w,\n/static/nu-markup-5f6487eb962a7b6c43cce2ad0ce9f6ed-ce0d4.png 650w,\n/static/nu-markup-5f6487eb962a7b6c43cce2ad0ce9f6ed-63d2a.png 975w,\n/static/nu-markup-5f6487eb962a7b6c43cce2ad0ce9f6ed-e7187.png 1018w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t</a>\n\t<figcaption>&#x41D;&#x43E;&#x432;&#x430;&#x44F; &#x43F;&#x440;&#x43E;&#x432;&#x435;&#x440;&#x43A;&#x430; &#x440;&#x430;&#x437;&#x43C;&#x435;&#x442;&#x43A;&#x438;.</figcaption>\n</figure>\n<p><strong>Какая разница между DTD и проверкой, основанной на схеме?</strong></p>\n<p>DTD-шки высечены на каменных плитах. И поэтому для обработки они требуют целой кучи камнерезных инструментов. Однако, увы, веб не был построен на обработке каменных плит, поэтому нам пришлось искать другие решения. Для проверки документа на соответствие мы решили использовать такие вещи, как схемы RelaxNG, которые, хоть и не дотягивают до DTD-шной утонченности, представляют собой гораздо более мощные средства для выражения определённых требований соответствия документа. Так что это компромисс.</p>\n<figure>\n\t<a href="http://validator.w3.org/">\n\t\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 17.96875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6klEQVQI12NYu/fqoi3nFm0+PXnF8Z7FRzrmH2qff6hz4eHOBYeA7I4FIC5IZAGIDZHtXnSkec7+ZdsvMrRuuDB368lbt+8lNq4PKlkWX7cmvm6td/7i8IqVUdWro6pWxdauiaxaFViyLKxiJZANlA0rX+FftDS6ejXDpB1XV+y/9OTpy4TG9U4Z8yKqVnvnL/HKW+xftMwzb1FQ6fKAomVA0j1noUvmfKDpQHGfgiUumQuApjCs23t14eazi7ecnbLyRP/SY0DUu+TohGXHwOyjQAT0C5Ddt+Ro96LDEMGJy491LTy8YuclADdsjlcjrHPhAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x412;&#x430;&#x43B;&#x438;&#x434;&#x430;&#x442;&#x43E;&#x440; W3C" title="" src="/static/w3c-validator-444f48dd08ed8c04985c576908523115-ce0d4.png" srcset="/static/w3c-validator-444f48dd08ed8c04985c576908523115-a6060.png 163w,\n/static/w3c-validator-444f48dd08ed8c04985c576908523115-1a895.png 325w,\n/static/w3c-validator-444f48dd08ed8c04985c576908523115-ce0d4.png 650w,\n/static/w3c-validator-444f48dd08ed8c04985c576908523115-63d2a.png 975w,\n/static/w3c-validator-444f48dd08ed8c04985c576908523115-8e6c5.png 1024w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t</a>\n\t<figcaption>&#x412;&#x430;&#x43B;&#x438;&#x434;&#x430;&#x442;&#x43E;&#x440; W3C.</figcaption>\n</figure>\n<p><strong>В чём разница между проверкой на соответствие и валидацией?</strong></p>\n<p><em>Валидация</em> — это что-то из старого мышления. Используйте это слово, когда хотите заставить людей думать, что вы — ископаемое или пережиток прошлого. Это что-то вроде слов <em>«ништяк»</em> или <em>«XHTML»</em>.</p>\n<p>Многие люди не знают этого, но этимология слова «валидация» тянется еще с тех времен, когда наши предки были, в основном, свинокрадами, и их награждали значком за правильное написание своих имён, да ещё похлопывали по спине: «Молодец»!</p>\n<p><em>Проверка соответствия документа</em> — хороший, современный, одобренный сообществом способ говорить о поиске проблем в HTML-документах. И заметьте, что мы называем это соответствием <strong>документа</strong>, а не процесса его создания, и мы говорим о требованиях соответствия для <strong>документов</strong>, а не для их создателей. Это потому что вы, автор — человек; техническая спецификация не может содержать требования к вам, она может содержать требования к документу, который вы создаёте. Инструменты для подобной проверки не оценивают, насколько вы, как человек, соблюдаете технологии; вместо этого они лишь оценивают создаваемые вами документы.</p>\n<p>Впрочем, словосочетание <em>проверка соответствия документа</em> имеет и противную уродскую часть: <em>соответствие</em> — действительно оскорбительное слово. Но вы не должны обращать на него внимания! Уделяйте внимание только слову <em>«проверка»</em> — веселому и полезному.</p>\n<p>Именно поэтому я называю инструмент по адресу <a href="http://validator.w3.org/nu">validator.w3.org/nu</a> <em>«Новая проверка разметки»</em>, а не <em>«Бла-бла-валидатор»</em> — я хочу делиться радостью слова «проверка». Проверка — это что-то, реально приносящее людям пользу, а не просто похлопывающее их по спине. Это штука, которая проверяет ваши документы автоматически и избавляет вас от нудной необходимости делать это вручную. Она помогает вам. Возможно, ее следовало бы назвать <em>«Новая проверка-и-помощь»</em>.</p>\n<p>Что касается самой проверки, она ищет случайные ошибки, которые вы могли допустить: неправильно написанные названия элементов или значения атрибутов, в которые случайно влез какой-то «левый» символ. В общем, такого рода вещи. И она сообщает вам о таких штуках, чтобы вы могли исправить их.</p>\n<p>Инструмент проверяет и другие виды требований, заданных в спецификации HTML. Это требования, которые помогут вам избежать создания кривых HTML-документов и веб-приложений, не работающих как надо или еще как-нибудь ухудшающих удобство для пользователей. Некоторые из этих требований можно назвать делом вкуса, но все равно полезно иметь подобный общий набор — что-то вроде отправной точки, реально закрепленной в спецификации.</p>\n<p>Другие названия для того, что умеет этот инструмент, пока еще не одобрены сообществом — это <em>«линтинг»</em> или <em>«статический анализ»</em>. Но отличие той штуковины, над которой я работаю, в том, что правила линтинга для нее на самом деле определены в спецификации, а не являются чем-то таким, что, скажем, Дуг Крокфорд (пример навскидку) как-то утром взял и вытащил из шляпы.</p>\n<p><strong>Какая разница между ошибками и предупреждениями?</strong></p>\n<p>Ошибка — это какой-то явный ляп, например, опечатка в названии элемента, или какие-то дикие нечитаемые символы в значении атрибута, или непонятно что, непонятно откуда взявшееся и явно ненужное.</p>\n<p>Но ошибкой называются также вещи, про которые спецификация просто говорит, мол, это должно считаться ошибкой. Спецификация объясняет: подобные вещи называются ошибками, поскольку они могут создать определённые проблемы, которые не всегда легко предвидеть.</p>\n<p>Существует длинный перечень тех вариантов проблем, которые определены как ошибки. Но в некоторых примерах к ним — образцы разметки, ужасные с точки зрения доступности, удобства, совместимости, безопасности или поддержки, приводящие к низкой производительности или к трудноотлаживаемым глюкам ваших скриптов.</p>\n<p>Наряду с вышеописанными случаями бывают и другие, которые тоже считаются ошибками, потому что из-за них вы можете наткнуться на странности при HTML-парсинге и обработке ошибок и в итоге получить неинтуитивный и неожиданный результат в DOM.</p>\n<p>Наконец, существует еще один вид ошибок: для разметки, которая не несёт в себе никакого смысла и скорее всего была использована по недоразумению, или для случаев, идущих вразрез с поведением стилей по умолчанию.</p>\n<p>Предупреждения, с другой стороны, нужны для вещей, которые спецификация не определяет, как прямые ошибки, но которые всё же могут вызывать проблемы. Иногда предупреждения добавляются к проверке экспериментально, в качестве способа проверить, будут ли они полезны для вас или нет. (Это одна из причин, по которой проверка все еще помечена как <em>экспериментальная</em>.)</p>\n<p><strong>Есть ли смысл в использовании доктайпов HTML4 или XHTML?</strong></p>\n<p>Нет абсолютно никакой причины для использования доктайпа HTML4. Просто вставьте доктайп <code>&#x3C;!DOCTYPE HTML></code> в ваши HTML-документы, убедитесь, что они отдаются как <code>text/html</code>, и всё. Живите вашей обычной жизнью. Но если по какой-то причине вы непременно хотите отдавать документы в <code>application/xhtml+xml</code>, то вам не придётся использовать для них доктайп XHTML, т.к. и в этом случае вы можете спокойно использовать <code>&#x3C;!DOCTYPE HTML></code>. (Но, вероятно, вы не захотите использовать <code>application/xhtml+xml</code> и XHTML в любом случае. Смените же наконец прическу! Сколько можно жить в прошлом, целый огромный мир ждет вас.)</p>\n<p><strong>Какие подводные камни поджидают пользователей HTML-проверки и инструментов валидации?</strong></p>\n<p>Я полагаю, те же подводные камни, на которые вы наткнетесь, если обратитесь к какому-нибудь разумному человеку, по-настоящему готовому вам помочь: он действительно попытается это сделать, а не просто отмахнётся или даст вам значок «этот свинокрад может написать своё имя». Его помощь может не всегда оказаться тем, что вы хотели услышать, или это могут быть уже известные вам советы, которые вы спокойно можете игнорировать. Такова жизнь.</p>\n<p><strong>Какие плюсы?</strong></p>\n<p>Плюсы в том, что вы ловите ошибки, которые в противном случае вы могли бы пропустить.</p>\n<p><strong>Как так получилось, что между правилами соответствия W3C HTML и WHATWG HTML есть различия?</strong></p>\n<p>Некоторые вещи, определённые как ошибки — дело вкуса. Спецификации пишутся людьми, а не машинами. Разные люди могут рассуждать по-разному — «разумные люди могут не соглашаться друг к другом», или как бы еще не так банально выразить эту мысль. Если вы пойдете по свету, ожидая от человечества полного согласия, в какой-то момент вы будете серьезно разочарованы.</p>\n<p><strong>А что, если я найду ошибку в валидаторе или проверке W3C HTML?</strong></p>\n<p>Сообщите об этом на <a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=Nu%20Markup%20Checker">w3.org/Bugs/Public</a>, или на <a href="https://bugzilla.validator.nu/">bugzilla.validator.nu</a>, или на <a href="https://github.com/validator/validator/issues">github.com/validator/validator/issues</a>.</p>\n<p><strong>Могу ли я запустить локальную копию проверки соответствия W3C HTML?</strong></p>\n<p>Да. Лучший способ сделать это — <a href="https://github.com/validator/validator/releases">скачать релиз</a> и <a href="https://validator.github.io/validator/#web-based-checking">следовать инструкциям</a>. А если вы используете grunt, попробуйте плагин <a href="https://github.com/jzaefferer/grunt-html">grunt-html</a> для проверки HTML, основанный на коде валидатора.</p>\n<p><strong>Какие-либо советы или подсказки по разумному использованию инструментов проверки соответствия HTML?</strong></p>\n<p>Это какой-то вопрос с подвохом? Пожалуй, единственное, что я мог бы посоветовать — не стоит забывать, что инструменты — это машины, а вы — не машина (предполагаю, что этот вопрос задан не машиной). Поэтому, оценивая любые сообщения об ошибках и предупреждениях от любого средства проверки HTML, полагайтесь на собственный здравый смысл. И если здравый смысл подсказывает вам, что какое-то сообщение на самом деле не помогает вам, просто игнорируйте его. Это не конкурс популярности, вы не заденете ничьи чувства.</p>\n<p>А ещё лучше, если у вас найдется время, — воспользуйтесь функцией «Фильтрация сообщений» на <a href="http://validator.w3.org/nu">validator.w3.org/nu</a>, которая позволит вам постоянно игнорировать любые сообщения, которые вы сочтёте бесполезными, надоедливыми или которые вы просто больше не желаете видеть.</p>\n<p><strong>Сейчас инструмент проверки W3C HTML не проверяет и не показывает ошибки для SVG1.1 и некоторых атрибутов веб-компонентов, планируете ли добавить поддержку этого?</strong></p>\n<p>Да. Эти вещи добавлены в мой список задач. В конечном итоге я доберусь до них.</p>\n<p><strong>В чём история с ошибками из-за неизвестных атрибутов? Их используют многие JS-библиотеки, что делать разработчикам?</strong></p>\n<p>Проблема в том, что проверка — машина, и она недостаточно умна, чтобы понять разницу между какими-то атрибутами с неизвестным названием, которые вы используете умышленно, и атрибутами, название которых вы случайно написали с ошибкой. Если мы просто прикажем сервису пропускать все неизвестные названия атрибутов без проверки, мы не сможем помочь вам выловить случаи, когда вы по ошибке написали что-нибудь неправильно.</p>\n<p>Временное решение — если вы намеренно используете какое-то неизвестное имя атрибута, задействуйте галочку в «Фильтрации сообщений» на <a href="http://validator.w3.org/nu">validator.w3.org/nu</a>. Это укажет проверке, что вы не желаете видеть сообщения об этом конкретном атрибуте, и они больше не будут вас беспокоить.</p>\n<p><strong>Есть ли в валидаторе функция для проверки использования ARIA? Если да, то что это за проверка?</strong></p>\n<p>Да, он проверяет ошибки в использовании разметки ARIA в HTML-документах, а теперь еще и находит некоторые ошибки ARIA как в элементах SVG внутри HTML-документов, так и в отдельных SVG-документах.</p>\n<p>Для HTML-элементов это проверка на соответствие требованиям не только спецификации HTML, но и появившемуся сейчас самостоятельному документу <a href="https://specs.webplatform.org/html-aria/webspecs/master/">ARIA в HTML</a>. Планируется, что спецификация HTML вскоре будет обновлена, чтобы просто ссылаться на требования ARIA в этом документе.</p>\n<p>Что касается SVG-элементов, у меня в планах вскоре обновить проверку, чтобы она следовала аналогичным самостоятельным документам в «<a href="https://specs.webplatform.org/SVG1.1-ARIA/webspecs/master/">Web developer rules for use of ARIA attributes on SVG1.1 elements</a>»</p>\n<p><strong>А что насчёт проверки ARIA в документах по спецификациям до HTML5? Будет ли это сделано?</strong></p>\n<p>Ни один человек не должен пользоваться чем-то, кроме HTML5, и не нужно пытаться помогать ему в этом. HTML5 — это просто HTML. Мы уже давно переросли всё связанное с версиями. <code>&#x3C;!DOCTYPE HTML></code> скоро исполнится 10 лет. Здравый смысл победил. В нашем XXI веке нам нечем толком помочь человеку, который прописывает в новом документе HTML4 или какой-то другой древний доктайп. Это гиблое дело. Мы никоим образом не помогли бы, если бы дали какую-то возможность сделать это и вписать разметку ARIA в такие документы, а потом сказали бы, что всё в порядке. Это называется попустительство.</p>\n<p><strong>При использовании HTML-валидатора W3C для проверки моего HTML5 я вижу следующее: «Валидатор проверил ваш документ с помощью экспериментальной функции: проверка соответствия HTML5…» — значит ли это, что есть более стабильный инструмент валидации, который мне следовало бы использовать?</strong></p>\n<p>Понятие «стабильный» здесь не очень применимо. Но да, существует другой инструмент, которым вам следовало бы пользоваться. Это <a href="http://validator.w3.org/nu">validator.w3.org/nu</a>. У него больше возможностей и он лучше по всем статьям.</p>\n<p>Это — инструмент экспериментальный, но в хорошем смысле. Планируется, что он всегда останется таким. Страница <a href="http://validator.w3.org/nu/about.html">validator.w3.org/nu/about.html</a> пытается задать правильные ожидания насчет того, в чем цель и что означает экспериментальный:</p>\n<blockquote>\n<p>Новая проверка разметки — экспериментальный инструмент, и его поведение ещё может измениться. В частности потому, что в него продолжают добавляться новые типы проверок на ошибки, и нельзя гарантировать, что, если в один момент времени проверка конкретного документа показывает ноль ошибок, она покажет ноль ошибок и в более поздний момент.</p>\n<p>Не нужно пытаться применить Новую проверку разметки как средство, чтобы заставить людей сверять документы с какой-либо спецификацией на «соответствует или не соответствует»; инструмент задуман исключительно как средство проверки, а не как механизм для выдачи сертификатов соответствия.</p>\n</blockquote>\n<p><strong>Что насчёт проверки веб-компонентов?</strong></p>\n<p>Если вы имеете в виду проверку нестандартных (custom) элементов, то мой ответ — нестандартные элементы пока недостаточно широко поддерживаются в разных браузерных движках, так что не думаю, что мне или еще кому-то стоит тратить слишком много времени и сил на размышления, как проверке вести себя с документами, в которых они есть.</p>\n<p>Когда и если нестандартные элементы всё-таки начнут широко поддерживаться большинством браузерных движков, вот тогда мы и должны будем выяснять, как проверке вести себя с ними. Это, конечно, будет сложно и запутанно — но так обстоят дела со многими вещами в веб-разработке, и я уверен, что мы вместе придумаем что-то, с чем можно будет жить, — точно так же, как мы не раз делали для многих других сложных вещей.</p>\n<p><strong>В чём разница между валидатором W3C и Новой проверкой разметки?</strong></p>\n<p>Старый W3C-валидатор находится на <a href="http://validator.w3.org/">validator.w3.org</a>, и его ядро основано на таких древних вещах, как Perl, DTD-шки, SGML и старые спецификации из XX века, типа HTML4. Никто в данный момент активно не поддерживает его код. Единственная хорошая новость на этот счёт — для проверки любых документов с современным доктайпом <code>&#x3C;!DOCTYPE html></code> он фактически использует движок Новой проверки разметки, а затем просто возвращает все сообщения оттуда.</p>\n<p>Новая проверка разметки находится по адресу <a href="http://validator.w3.org/nu">validator.w3.org/nu</a>. Она основана на чуть более новых вещах типа Java и RelaxNG и на спецификациях из нынешнего века, таких как HTML5, а также имеет большое преимущество в виде фактической активной поддержки. К тому же у нее больше возможностей, напр., функция «Фильтрация сообщений», позволяющая отфильтровать сообщения, которые вы не хотите видеть.</p>\n<p><strong>Что лучше — проверка исходного кода или реального вывода HTML DOM? Известные проблемы?</strong></p>\n<p>Я полагаю, что для обоих случаев есть хорошие варианты. Ограничение проверки DOM заключается в невозможности сделать так, чтобы <a href="http://validator.w3.org/nu">validator.w3.org/nu</a> сам забрал DOM какого-то произвольного документа в сети, а потом проверил. Где-то между должен быть браузерный движок, который реально распарсит документ в DOM-представление в памяти, выполнит ваши скрипты, а затем преобразует итоговую DOM обратно в текстовое представление, которое вы можете «скормить» проверке. Но если у вас есть HTML-документ, который вы хотите проверить, и вы уже открыли его в браузере, вы можете использовать <a href="http://codepen.io/stevef/full/LasCJ/">что-то типа букмарклета</a>, чтобы отправить строковое представление DOM этого документа в <a href="http://validator.w3.org/nu">validator.w3.org/nu</a> для проверки.</p>\n<h2>Дополнительные вопросы</h2>\n<p><strong>Стоит ли помечать предупреждениями в W3C-валидаторе доктайпы, которые были до HTML5, ведь HTML5 теперь рекомендация?</strong></p>\n<p>Не знаю, может быть. С одной стороны, существует огромное количество документов со старыми доктайпами, которые прекрасно работают такими как есть, поэтому нет причины посылать их к чёрту. С другой стороны, если кто-то всё же удосужился пропустить один из этих документов через проверку HTML, скорее всего, у него есть на это веская причина. И, вероятно, оповестив его об устаревшем доктайпе, мы бы помогли — он смог бы обновить его.</p>\n<p><strong>В HTML5 элементу <code>&#x3C;a></code> разрешено содержать блочное или потоковое содержимое, что поменялось (если вообще поменялось) в браузерах?</strong></p>\n<p>В браузерах ничего не изменилось. Браузеры всегда это поддерживали, и это не вызывает никаких проблем, и мы никому бы не помогли, выдавая это за ошибку. Так что мы сделали это не-ошибкой.</p>\n<h3>Критерий обработки для WCAG 2.0</h3>\n<p><strong>Консультант по доступности нашего клиента говорит ему, что для совместимости с WCAG 2.0 у них должен быть валидный HTML. Это правда?</strong></p>\n<p>Без понятия. Я не эксперт в WCAG и никогда даже не читал спецификацию WCAG 2.0. И HTML-проверка — не WCAG-проверка. Или, по меньшей мере, она не претендует на это.</p>\n<p>У WCAG 2.0 есть критерий успеха, который требует, <a href="http://www.w3.org/TR/WCAG20/#ensure-compat-parses">чтобы в разметке документов не было ошибок парсинга</a>. <a href="http://validator.w3.org/nu">Новая проверка разметки</a> отмечает ошибки парсинга наряду с другими машинно проверяемыми <a href="http://www.w3.org/TR/html/introduction.html#conformance-requirements-for-authors">критериями соответствия HTML</a>. Мы создали <a href="http://validator.w3.org/nu/about.html#extras">букмарклет ошибок парсинга для WCAG 2.0</a>, который фильтрует результаты, полученные из Новой проверки разметки, чтобы отобразить только ошибки или предупреждения парсинга.</p>\n<p><strong>Примечание</strong>: этот букмарклет — экспериментальный, это не закон, и даже после фильтрации некоторые выводимые ошибки/предупреждения могут не вызывать каких-либо практических негативных эффектов для доступности документа. Он служит исключительно вспомогательным средством для фильтрации некоторых неактуальных (для WCAG) проблем. Мы с Майком говорили о том, чтобы сделать фильтр встроенной функцией <a href="http://validator.w3.org/nu">Новой проверки разметки</a>, надеюсь, что моими стараниями это случится.</p>\n<p><strong>Спасибо, Майк!</strong></p>\n<figure>\n\t<iframe width="510" height="383" src="images/https://www.youtube.com/embed/FVbVCZw5BPQ" allowfullscreen></iframe>\n\t<figcaption>Полезный совет — всегда <a href="http://validator.w3.org/nu">проверяй свой HTML</a> под <a href="http://youtu.be/FVbVCZw5BPQ">рок-н-ролл</a>, играющий… ГРОМКО!</figcaption>\n</figure>\n<p>Перевод оригинального интервью «<a href="http://html5doctor.com/html5-check-it-before-you-wreck-it-with-miketm-smith/">HTML5 — Check it Before you Wreck it with Mike™ Smith</a>» Стива Фолкнера, опубликованного на сайте <a href="http://html5doctor.com/">HTML5 Doctor</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнили: <a href="https://twitter.com/psyw">Максим Усачёв</a> и <a href="https://twitter.com/SelenIT2">Илья Стрельцын</a> из команды <a href="http://css-live.ru/">CSS Live</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a> и <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Не проверив HTML5-кода, не суйся в воду — с Майком™ Смитом"},{depth:2,value:"Дополнительные вопросы"},{depth:3,value:"Критерий обработки для WCAG 2.0"}],frontmatter:{title:"Не проверив HTML5-кода, не суйся в воду — с Майком™ Смитом"}}},{node:{html:'<h1>Сite и blockquote: перезагрузка</h1>\n<p><a href="http://blog.paciellogroup.com/author/admin/">Стив Фолкнер</a> 11 ноября 2013</p>\n<p>Недавно в <a href="http://www.w3.org/html/wg/drafts/html/master/">спецификации HTML</a> было изменено определение элементов <code>&#x3C;blockquote></code> и <code>&#x3C;cite></code>. В статье рассказывается, что это значит для разработчиков.</p>\n<h2>Изменения в определении <code>&#x3C;blockquote></code></h2>\n<blockquote>\n<p>Элемент <code>&#x3C;blockquote></code> представляет контент, являющийся цитатой из другого источника, <strong>возможно</strong>, включающим упоминание этого источника, которое <strong>должно быть</strong> размещено внутри элементов <code>&#x3C;footer></code> или <code>&#x3C;cite></code>, и, <strong>возможно</strong>, содержащий примечания и сокращения.\nКонтент внутри элемента <code>&#x3C;blockquote></code>, за исключением отсылки к источнику и изменений в тексте, <strong>должен быть</strong> точной цитатой из другого источника, адрес которого, если таковой имеется, <strong>может быть</strong> указан в атрибуте <code>cite</code>.\n<a href="http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-blockquote-element">4.51 the Blockquote element</a>, Роберт Бержон и соавторы, 2013</p>\n</blockquote>\n<p>Выделение в цитате авторское, прим. редактора.</p>\n<h3>Что изменения в <code>&#x3C;blockquote></code> значат для разработчиков</h3>\n<p><a href="http://www.w3.org/TR/html5/">Прежде в HTML5</a> не было принято включать упоминание источника внутрь элемента <code>&#x3C;blockquote></code>. Сейчас ситуация изменилась, при условии, что упоминание источника находится внутри элемента <code>&#x3C;cite></code> или <code>&#x3C;footer></code>. Упоминание источника внутри цитаты — распространенный кейс (данные показывают, что приблизительно в <a href="http://lists.w3.org/Archives/Public/public-html/2013Aug/0100.html">60% случаев <code>&#x3C;blockquote></code></a> содержит упоминание источника), изменения в <a href="http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-blockquote-element">спецификации HTML</a> подтверждают это и обеспечивают семантический механизм дифференциации контента цитаты от упоминания ее источника.</p>\n<p>Пример использования элементов <code>&#x3C;footer></code> и <code>&#x3C;cite></code> внутри <code>&#x3C;blockquote></code>:</p>\n<pre><code>&#x3C;blockquote>\n    &#x3C;p>\n        As my fellow HTML5 Doctor, Oli Studholme has showed,\n        people seldom quote exactly – so sacrosanctity of the quoted\n        text isn’t a useful ideal – and in print etc, citations almost\n        always appear as part of the quotation –\n        it’s highly conventional.\n    &#x3C;/p>\n    &#x3C;footer>\n        — &#x3C;cite>&#x3C;a href="http://brucelawson.co.uk/2013/on-citing-\n        quotations-again/">Bruce Lawson&#x3C;/a>&#x3C;/cite>\n    &#x3C;/footer>\n&#x3C;/blockquote>\n</code></pre>\n<p>Пример выше показывает, что авторы спецификации, вместо того, чтобы следовать <a href="http://www.w3.org/TR/html-design-principles/#priority-of-constituencies">теоретической чистоте</a>, которая, в данном случае, не имеет практического смысла, предпочли изменить определение, чтобы <a href="http://www.w3.org/TR/html-design-principles/#solve-real-problems">решить реальную проблему</a> используя существующие возможности HTML, а не <a href="http://www.w3.org/TR/html-design-principles/#do-not-reinvent-the-wheel">изобретать колесо</a>.</p>\n<h3>Редкий случай</h3>\n<p>Один из аргументов против использования cite и footer внутри blockquote для указания источника цитат состоит в том, что цитируемый контент сам по себе может содержать цитаты и ссылки на источники. Мы можем отбросить этот аргумент по той причине, что такие случаи крайне редки. Отказ от использования <code>&#x3C;cite></code> и <code>&#x3C;footer></code> ради такого редкого кейса — другой пример <a href="http://ln.hixie.ch/?start=1154950069&#x26;count=1">теоретической чистоты</a>, которая не будет служить практическим целям.</p>\n<p>Но если у вас возник такой случай, в настоящее время <a href="http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-blockquote-element">спецификация HTML</a> предлагает вам просто закомментировать указание источника в коде цитаты. (Вопрос все еще <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23175">открыт</a> и этот совет может измениться):</p>\n<p><em>(Добавлено 6.11.13, прим. редактора.)</em> В ответ на отзывы, мы решили изменить наше предложение для спецификации так, чтобы использовать атрибут <code>class</code> (который <a href="http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#extensibility">может использоваться для расширения</a>) элемента <code>&#x3C;cite></code> для обозначения, что это часть источника цитаты.</p>\n<pre><code>&#x3C;blockquote>\n    &#x3C;p>\n        My favorite book is\n        &#x3C;cite class="from-quote">At Swim-Two-Birds&#x3C;/cite>\n    &#x3C;/p>\n    &#x3C;footer>\n        — &#x3C;cite>Mike[tm]Smith&#x3C;/cite>\n    &#x3C;/footer>\n&#x3C;/blockquote>\n</code></pre>\n<h2>Изменения в определении <code>&#x3C;cite></code></h2>\n<blockquote>\n<p><a href="http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-cite-element">Элемент <code>&#x3C;cite></code></a> <a href="http://www.w3.org/html/wg/drafts/html/master/dom.html#represents">представляет</a> отсылку к оригинальной работе. Он <strong>должен</strong> включать название работы или имя автора (персоналию, группу лиц или организацию), или ссылку, которые <strong>могут быть</strong> в представлены сокращенном виде в соответствии с соглашениями, принятыми при цитировании.\n<a href="http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-cite-element">4.51 the Cite element</a>, Роберт Бержон и соавторы, 2013</p>\n</blockquote>\n<h3>Что изменения в <code>&#x3C;cite></code> значат для разработчиков</h3>\n<p><a href="http://www.w3.org/TR/html5/">Ранее в HTML5</a> не было принято упоминать автора источника по имени или заключать другую информацию об источнике в элемент <code>&#x3C;cite></code>. Применение <code>&#x3C;cite></code> было зарезервировано (теоретически) для названия источника. Это было попыткой пересмотреть определение элемента, <a href="http://www.w3.org/TR/REC-html40/">не менявшееся 14 лет</a>.</p>\n<p>Разработчики выступали против изменений в определении:</p>\n<blockquote>\n<p>Присоединяйтесь к кампании гражданского неповиновения против излишне ограничительных, обратно-несовместимых изменений элемента <code>&#x3C;cite></code>. Начните использовать HTML5, но начните использовать его разумно. Давайте посмотрим, как плохой совет канет в лету.\n<a href="http://24ways.org/2009/incite-a-riot/">Джереми Кит, 2009</a></p>\n</blockquote>\n<p>Они также приводили <a href="http://wiki.whatwg.org/wiki/Cite_element">абстрактные</a> и <a href="http://oli.jp/example/blockquote-metadata/">реальные примеры</a> указания источника. Сейчас, в результате <a href="https://dl.dropboxusercontent.com/u/377471/cite1.html">исследований</a>, <a href="http://lists.w3.org/Archives/Public/public-html/2013Aug/0100.html">анализа данных</a> и <a href="http://www.w3.org/Search/Mail/Public/search?keywords=%3Cblockquote%3E+%3Ccite%3E&#x26;hdr-1-name=subject&#x26;hdr-1-query=&#x26;index-grp=Public_FULL&#x26;index-type=t&#x26;type-index=public-html">дискуссий</a>, разработчики могут вновь использовать <code>&#x3C;cite></code> для того, чтобы разными способами сослаться на источник: например, указать <q>название работы, имя автора или ссылку на источник</q>. Мы теряем в теоретической чистоте, но выигрываем в удобстве использования:</p>\n<blockquote>\n<p>Сколько раз в день тег <code>&#x3C;cite></code>, содержащий гиперссылку, опубликуется на веб-страницах? По меньшей мере, 70 миллиардов раз, т.е. примерно в 10 ссылках на странице результатов поиска Google.\nОдна из причин, почему элемент <code>&#x3C;cite></code> теперь можно использовать для гиперссылок (даже не упоминая про идентичную ситуацию с Bing).\nСтив Фолкнер, <a href="https://twitter.com/stevefaulkner/statuses/392645777874370560">22 октября 2013</a></p>\n</blockquote>\n<h3>Что вы думаете?</h3>\n<p>Пожалуйста, прочитайте определения в спецификации HTML 5.1, нам интересно ваше мнение!</p>\n<ul>\n<li><a href="http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-cite-element">4.6.6 Элемент <code>&#x3C;cite></code></a></li>\n<li><a href="http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-blockquote-element">4.5.4 Элемент <code>&#x3C;blockquote></code></a></li>\n</ul>\n<p>Огромное спасибо «доктору» Оли, чье <a href="http://oli.jp/2011/blockquote/">исследование</a> помогло подготовить изменения, произошедшие с элементами <code>&#x3C;cite></code> и <code>&#x3C;blockquote></code>. И «доктору» Брюсу за то, что <a href="http://www.brucelawson.co.uk/2013/on-citing-quotations-again/">настаивал</a> на своем праве цитировать свою маму.</p>\n<p>Перевод оригинальной статьи «<a href="http://html5doctor.com/cite-and-blockquote-reloaded/">Cite and blockquote — reloaded</a>» Стива Фолкнера (Steve Faulkner), опубликованной на сайте <a href="http://html5doctor.com/">HTML5Doctor.com</a>.</p>\n<p>Перевод выполнили: <a href="http://twitter.com/n_snork">Наташа Арефьева</a> и <a href="https://twitter.com/yoksel">Юлия Бухвалова</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a> и <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Сite и blockquote: перезагрузка"},{depth:2,value:"Изменения в определении "},{depth:3,value:"Что изменения в "},{depth:3,value:"Редкий случай"},{depth:2,value:"Изменения в определении "},{depth:3,value:"Что изменения в "},{depth:3,value:"Что вы думаете?"}],frontmatter:{title:"Сite и blockquote: перезагрузка"}}},{node:{html:'<h1>Как воспитать дизайнера</h1>\n<p><a href="http://engelside.net">Ольга Алексашенко</a> 22 июня 2010</p>\n<p>От автора, 2010-й год. С момента написания этой статьи прошло три года, и сейчас я понимаю, что во многом была слишком категорична, во многом — наивна, но в общем и целом — права. Нижеприведенные рекомендации по-прежнему актуальны. Читайте, фильтруйте, отсеивайте, пользуйтесь.</p>\n<p>За несколько лет профессиональной деятельности мне довелось повидать огромное количество макетов сайтов. Среди них были хорошие, плохие и совершенно ужасные, но не было ни одного идеального.</p>\n<p>Можно довольно долго рассуждать о том, почему дизайнеры в огромном количестве гонят некачественный продукт. Мне кажется, основная проблема в том, что на веб-дизайнера нигде не учат. Более того, сейчас в Рунете каждый второй считает себя веб-дизайнером. «Умеешь рисовать в фотошопе скруглённые уголки, градиенты и отражения? Отлично, значит, и разработать интерфейс огромного информационного портала тоже сможешь», — такое чувство, что так рассуждает большинство нанимателей этих самых дизайнеров. И очень жаль. Поскольку для комфортной работы с дизайнером он должен иметь представление об информационной архитектуре, юзабилити, веб-технологиях — программировании и вёрстке, чтобы не рисовать заведомо то, что невозможно или очень сложно реализовать. Однако на деле получается, что скруглённые уголки круче всех.</p>\n<p>Поскольку у меня по ходу работы всё время возникает масса проблем с дизайнерами, я решила написать некоторые рекомендации, способные серьёзно упростить работу верстальщику. Эта статья адресована мудрым начальникам, которые хотят улучшить работу в своей команде, а также дизайнерам, которые не хотят заработать диарею в результате постоянных проклятий.</p>\n<h2>Правило № 1. Макет сайта — в PSD</h2>\n<p>Некоторые дизайнеры почему-то очень любят использовать для создания макетов Adobe Illustrator. Это очень крутая программа, но предназначение у неё совершенно иное, для верстальщика ее инструменты неудобны. В результате всё равно приходится экспортировать макет в Photoshop, что частенько сопровождается массой ошибок. Ещё одна модная нынче фишка — Fireworks. Да, это уже гораздо лучше, чем Иллюстратор, но всё равно плохо, потому что традиционно верстальщики учатся работать с Photoshop, и когда дизайнер присылает им файл в формате PNG, они просто-таки не знают, что с ним делать. Про макеты в JPG и прочих подобных форматах я вообще молчу. Да, такое тоже бывает! Фактически, формат PSD уже стал неким негласным стандартом для макетов сайтов. Так что если вы любите рисовать макеты в нестандартной программе — не поленитесь, сделайте экспорт в PSD и проверьте, чтобы ничего не сломалось. Верстальщик будет вам благодарен.</p>\n<h2>Правило № 2. Аккуратные слои</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 180px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 151.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdlXXMh0BETWR4sX/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAExAgMREhNB/9oACAEBAAEFAuVs40Ds0niFChIUZMmx/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8BKf/EABcQAAMBAAAAAAAAAAAAAAAAAAAwMTL/2gAIAQEABj8CyRf/xAAeEAACAwABBQAAAAAAAAAAAAAAAREhMRBBUXGh8f/aAAgBAQABPyFs2Hg6yoIukKIWY4Ejs9CNhcFFgofRRWH/2gAMAwEAAgADAAAAEPv38P/EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/ECU//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREP/aAAgBAgEBPxCMpWf/xAAeEAACAgMAAwEAAAAAAAAAAAABEQAhMUFRYXGx8f/aAAgBAQABPxADRtW/kbRvTz8iAUDxBCgM1+e5RTS7MUAMBsDQPfNwUAAHoCmKIsUAO4Bijy23AiBfO/M//9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x43B;&#x43E;&#x438; &#x432; &#x424;&#x43E;&#x442;&#x43E;&#x448;&#x43E;&#x43F;&#x435;." title="" src="/static/layers-21dc602bc215f552f9968755d12876d8-d5ad7.jpg" srcset="/static/layers-21dc602bc215f552f9968755d12876d8-15f46.jpg 163w,\n/static/layers-21dc602bc215f552f9968755d12876d8-d5ad7.jpg 180w" sizes="(max-width: 180px) 100vw, 180px">\n    </span>\n  </span>\n  \n<p>В Photoshop существует очень удобный механизм группировки слоёв. Это очень полезное свойство: гораздо легче разобраться в макете, если слои сгруппированы по элементам (например, шапка-контент-подвал). Также следует уделить внимание осмысленному именованию слоёв и групп, причём, желательно использовать английский язык — верстальщик всё равно именует элементы по-английски. Слои, которые не используются в макете, необходимо удалять, а не оставлять отключёнными — верстальщик в процессе работы отключает разные слои, а потом включает всё сразу и может сильно испугаться. Иногда в одном макете помещают группы или слои для всех разновидностей данного типа страницы: например, форма регистрации и страница о том, что регистрация прошла успешно. В таком случае, отключённую группу или слой нужно помечать цветом, чтобы верстальщик её не пропустил.</p>\n<h2>Правило № 3. Модульная сетка</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.21568627450981%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABw93aE4ojf//EABsQAAEEAwAAAAAAAAAAAAAAAAMAAQIREBMh/9oACAEBAAEFAmY01pMojNQOK8f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAdEAACAAcBAAAAAAAAAAAAAAAAAgEQEiExMlFx/9oACAEBAAY/AmobEemxdh/Z/wD/xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMUHR/9oACAEBAAE/IXNGjIwW6esC3HexM3Cn/9oADAMBAAIAAwAAABD83//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EEf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFBUZH/2gAIAQEAAT8QwuFpQdqZRLxdEItt9DBIlyv1Lg1TLHk//9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41D;&#x430;&#x43F;&#x440;&#x430;&#x432;&#x43B;&#x44F;&#x44E;&#x449;&#x438;&#x435; &#x432; &#x424;&#x43E;&#x442;&#x43E;&#x448;&#x43E;&#x43F;&#x435;." title="" src="/static/guides-a070c26c6fed281b225603d6c8e2b575-3ecdc.jpg" srcset="/static/guides-a070c26c6fed281b225603d6c8e2b575-5cba7.jpg 163w,\n/static/guides-a070c26c6fed281b225603d6c8e2b575-cf009.jpg 325w,\n/static/guides-a070c26c6fed281b225603d6c8e2b575-3ecdc.jpg 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Хороший дизайнер создаёт макет сайта по модульной сетке. Благодаря её присутствию в файле верстальщику гораздо проще высчитать размеры каких-либо элементов. Поэтому, призыв к дизайнерам: оставляйте в макете сетку, по которой работали. Ну, и призыв к тем, кто сетку не использует: немедленно изучите эту основу композиции, пока вас не засмеяли. Все вспомогательные, неиспользуемые линейки необходимо удалять.</p>\n<h2>Правило № 4. «Липкие листочки»</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.21568627450981%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHottBCgf/EABoQAAMAAwEAAAAAAAAAAAAAAAABAhAREiH/2gAIAQEAAQUCiU04OSPDeP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAARISD/2gAIAQEABj8CpFn/xAAbEAACAwADAAAAAAAAAAAAAAAAAREhMWFxgf/aAAgBAQABPyHQsETZO5EsYn6yiODaULRn/9oADAMBAAIAAwAAABBAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EIr/xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMUFRcaH/2gAIAQEAAT8QJKahdZwBnjb4krbR2lD62OkbR5ilNGO4qcCf/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41B;&#x438;&#x43F;&#x43A;&#x438;&#x435; &#x43B;&#x438;&#x441;&#x442;&#x43E;&#x447;&#x43A;&#x438; &#x432; &#x424;&#x43E;&#x442;&#x43E;&#x448;&#x43E;&#x43F;&#x435;." title="" src="/static/stickers-57aff9cd44a25f4378e30425c833de66-3ecdc.jpg" srcset="/static/stickers-57aff9cd44a25f4378e30425c833de66-5cba7.jpg 163w,\n/static/stickers-57aff9cd44a25f4378e30425c833de66-cf009.jpg 325w,\n/static/stickers-57aff9cd44a25f4378e30425c833de66-3ecdc.jpg 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>В фотошопе есть такой замечательный инструмент, как «липкие листочки» — специально для заметок на каком-либо элементе дизайна. Не ленитесь комментировать свой макет — как любят говорить на Вебмасконе, все телепаты ушли в отпуск: зачастую очень сложно догадаться, является ли какой-нибудь элемент активным, и какие в макетах существуют скрытые закономерности.</p>\n<h2>Правило № 5. Помните о динамике</h2>\n<p>В отличие от картины, сайт — это динамическая система, в которой есть активные элементы, в которой постоянно что-то происходит и изменяется. Всю динамику поведения активных элементов должен придумать дизайнер, создав дополнительные слои: например, ссылка, ссылка при наведении, посещённая ссылка. Очень часто дизайнеры почему-то не придают значения такому важному аспекту веб-дизайна. Также необходимо описывать, что должно происходить при изменении размеров экрана или при переполнении каких-либо элементов.</p>\n<h2>Правило № 6. «Рыба» и типографика</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.21568627450981%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAetqyVD/xAAYEAADAQEAAAAAAAAAAAAAAAAAERIBEP/aAAgBAQABBQKScJHxn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAADEAIP/aAAgBAQAGPwIiMf/EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhMf/aAAgBAQABPyGgyDRcQwN1D//aAAwDAQACAAMAAAAQc+//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhYaH/2gAIAQEAAT8QHBj5odmruFH7qYEzA97qQYb/2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x420;&#x44B;&#x431;&#x430;." title="" src="/static/fish-9381d4c54a18c12adaac83d662e308ce-3ecdc.jpg" srcset="/static/fish-9381d4c54a18c12adaac83d662e308ce-5cba7.jpg 163w,\n/static/fish-9381d4c54a18c12adaac83d662e308ce-cf009.jpg 325w,\n/static/fish-9381d4c54a18c12adaac83d662e308ce-3ecdc.jpg 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Совершенно естественно, что при разработке сайта почти никогда не используется тот контент, который там будет — зачастую, это контента ещё просто не существует. Поэтому дизайнеры, да и верстальщики используют «рыбу» — произвольный текст, который вписывается в контентные блоки. Но, к сожалению, делается это зачастую без проблеска мысли — например, на русскоязычном сайте везде используется популярная рыба латиницей  — «Lorem Ipsum...», которая не даёт представления, как будет выглядеть этот текст, набранный кириллическим шрифтом. Используйте подходящие к случаю рыбы!</p>\n<p>Что касается типографики, то тут я убеждена: дизайнер просто обязан знать основы типографического искусства: осмысленно задавать интерлиньяж, размеры и семейства шрифтов, отступы и поля. А то как-то был у меня случай: прислали макет, в котором достаточно значимые подписи были исполнены шестым кеглем. А когда же я изменила размер шрифта на более читабельный, дизайнер капризно заныл, что у него на макете всё по-другому!</p>\n<h2>Правило № 7. Шрифты</h2>\n<p>О шрифтах нужно сказать отдельно. Почему-то каждый дизайнер, купивший на Горбушке диск с двумя тысячами бесплатных шрифтов, считает своим долгом тут же эти шрифты засунуть куда только можно. Я даже не знаю, может быть, это последствия непросвещённости? Что ж, просвещаю: на компьютере пользователя, который зайдёт на ваш сайт, в 99% случаев есть только системные шрифты, и в 99.9% — это стандартные шрифты Windows. Поэтому, как ни старайся, милый сердцу маковода Lucida Grande увидит, дай бог, 1% пользователей, а все остальные всё равно увидят Arial. Конечно, в небольших объёмах оригинальные шрифты более чем уместны: это касается логотипов, статичных заголовков и прочих подобных вещей. Но фигачить напропалую весь текст на сайте каким-нибудь Neo Sans Pro, а потом ругаться, что всё не так, как на макете — подвергать себя опасности быть укушенным взбесившимся верстальщиком.</p>\n<p>Если вы всё же используете нестандартные шрифты, присылайте их верстальщику вместе с макетом, иначе он не сможет нормально измерить кегль и начертание. За растрированные же текстовые блоки вам вообще могут оторвать голову! Так что будьте осторожны и внимательны.</p>\n<h2>Правило № 8. Техническое задание</h2>\n<p>Перед тем как приступить к созданию макета, обязательно прочтите техническое задание: что будет на этом сайте, как он должен работать, какую именно интерактивность иметь... Если же в вашей компании экономят на техническом писателе, попытайтесь хотя бы в устной форме ознакомиться с требованиями к сайту. А то очень часто случается ситуация, когда дизайнер нарисовал красивый макет, верстальщик его заверстал, а потом оказывается, что, к примеру, настоящая флэшка, которая должна быть центральным элементом сайта, шире нарисованной на 10 пикселов. Сколько времени и сил впустую! А ещё кошмарнее, когда дизайнер не понимает, что возможно реализовать при помощи веб-технологий, а что нельзя. И в результате на свет появляются блоки с аудио-плеером, в которых по ходу прослушивания радиопередачи должен плавно пролистываться текст этой самой передачи! Нет, это, конечно, реализуемо, но такие задачи должны осмысленно закладываться в планируемое время разработки, чего обычно не происходит.</p>\n<h2>Правило № 9. Цветовая гамма</h2>\n<p>Милый дизайнер! Я очень рада, что на твоём столе стоит тридцатидюймовый дорогущий монитор с отличной матрицей. Но ты должен понять, что ты пока — в меньшинстве, а большинство пользователей сайта, который ты рисуешь, пользуются обычным ноутбуком или монитором с разрешением 1280 на сколько-нибудь там и не супер-качественной матрицей. Поэтому не нужно рисовать макет в 3000 пикселов шириной. Всё равно обычный пользователь не оценит всей красоты огромной подложки, но может очень рассердиться, когда поймет, что ему пришлось загрузить лишние пол-мегабайта картинки. И воздержись, пожалуйста, от использования очень светлых тонов вроде <code>#F1F1F1</code>. Доказано, что подобные оттенки не воспринимаются на сознательном уровне, однако, создают «шум» в глазах пользователя, который мешает ему сосредоточиться на полезных частях сайта. И ещё: постарайся не пользоваться цветовыми профилями. Обычно это заканчивается тем, что после вёрстки кто-нибудь обязательно начнёт вопить, что в макете-то цвета другие! Побереги нервы: свои и верстальщика.</p>\n<h2>Правило № 10. Системные контролы</h2>\n<p>Это немного спорная тема, но я всё же её коснусь. Ни для кого не секрет, что дизайнеры очень любят рисовать кастомные элементы форм. В чём-то они правы: в Windows, особенно в стандартной теме, далеко не самые красивые контролы, и они действительно могут испортить внешний вид сайта. Однако, во-первых, все эти красивые скруглённые штучки с градиентами довольно слабо реализуемы на кроссбраузерном уровне, а во-вторых, среднестатистический пользователь потратит куда больше мозговых усилий на то, чтобы понять, куда ему ввести своё имя, если перед ним что-то очень красивое, но абсолютно непохожее на стандартные контролы его операционной системы, к которым он привык. А заставлять пользователей задумываться над интерфейсом — значит, потерять какую-то особо нетерпеливую часть аудитории.</p>\n<h2>Правило № 11. Продумайте всё</h2>\n<p>Когда я пришла на работу в компанию, которая занималась разработкой сайтов для T-Mobile, первое, что мне пришлось сделать — это прочитать Style Guide. Он представлял собой папку А4, толщиной примерно сантиметров в двадцать, в которой были описаны все цвета, шрифты, размеры и тому подобные вещи, которые можно применять в оформлении каких-либо материалов для T-Mobile. При помощи этого стайлгайда наши дизайнеры рисовали макеты, уделяя внимание всем деталям. Кажется, это были лучшие макеты, с которыми мне доводилось работать. Я веду свою мысль к следующему: не ленитесь отрисовывать все элементы, которые могут встретиться на странице. Все заголовки, абзацы, подписи к картинкам, цитаты, врезки и так далее и тому подобное. Потому что чаще всего, если верстальщик сам берётся додумать недостающие элементы, это заканчивается истерикой у дизайнера. Позаботьтесь обо всём сразу.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 59.21568627450981%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeuUS0H/xAAYEAEBAQEBAAAAAAAAAAAAAAABABESIf/aAAgBAQABBQIC5LIbfb//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAxACD/2gAIAQEABj8CIjH/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMUH/2gAIAQEAAT8hi4HhgjxCDLwU/9oADAMBAAIAAwAAABAzD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQADAQEBAAAAAAAAAAAAAAEAESFBMVH/2gAIAQEAAT8QRpM7Aqqv5Hq4lAGkUNCvIx//2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x422;&#x438;&#x43F;&#x43E;&#x432;&#x44B;&#x435; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x44B; &#x43D;&#x430; &#x43C;&#x430;&#x43A;&#x435;&#x442;&#x435;." title="" src="/static/details-e04976dfb5b6a653ff2bc0a3b77a32b7-3ecdc.jpg" srcset="/static/details-e04976dfb5b6a653ff2bc0a3b77a32b7-5cba7.jpg 163w,\n/static/details-e04976dfb5b6a653ff2bc0a3b77a32b7-cf009.jpg 325w,\n/static/details-e04976dfb5b6a653ff2bc0a3b77a32b7-3ecdc.jpg 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Резюмируя всё вышесказанное — дизайнер должен уметь не только обосновать, что эти три колонки цветов «вырви глаз» символизируют собой российский флаг, но и тщательно продумать, спроектировать свою работу, аккуратно и дотошно её выполнить, не забывая при том, что с макетом в дальнейшем будут иметь дело ещё несколько человек. Работайте профессионально. Это приятно и полезно.</p>\n<p><a href="/example-c1cbcb367714e7db78909d5f2abb827a.zip">Пример хорошо сделанного макета сайта</a> (PSD 3,1 МБ). Дизайнер — М. Нозик.</p>',headings:[{depth:1,value:"Как воспитать дизайнера"},{depth:2,value:"Правило № 1. Макет сайта — в PSD"},{depth:2,value:"Правило № 2. Аккуратные слои"},{depth:2,value:"Правило № 3. Модульная сетка"},{depth:2,value:"Правило № 4. «Липкие листочки»"},{depth:2,value:"Правило № 5. Помните о динамике"},{depth:2,value:"Правило № 6. «Рыба» и типографика"},{depth:2,value:"Правило № 7. Шрифты"},{depth:2,value:"Правило № 8. Техническое задание"},{depth:2,value:"Правило № 9. Цветовая гамма"},{depth:2,value:"Правило № 10. Системные контролы"},{depth:2,value:"Правило № 11. Продумайте всё"}],frontmatter:{title:"Как воспитать дизайнера"}}},{node:{html:'<h1>Атрибут contenteditable</h1>\n<p><a href="http://jackosborne.co.uk/">Джек Осборн</a> 9 марта 2012</p>\n<p>Мы уже давно используем различные технологии для редактирования и хранения текста в браузере. С атрибутом <code>contenteditable</code> это становится намного проще. В этой статье я расскажу для чего этот атрибут, как он работает и куда нам двигаться дальше.</p>\n<h2>Основы</h2>\n<p>Давайте обратимся к спецификации:</p>\n<blockquote>\n<p>Атрибут <code>contenteditable</code> обладает фиксированным набором значений, он может быть пустой строкой, <code>true</code> или <code>false</code>. Пустая строка или <code>true</code> обозначают, что элемент доступен для редактирования. <code>false</code> обозначает, что элемент недоступен для редактирования. Есть еще третье состояние — <code>inherit</code>, это значение атрибута по умолчанию и оно означает, что значение наследуется от родительского элемента.\n<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#contenteditable">WHATWG</a></p>\n</blockquote>\n<p>В основном, атрибут <code>contenteditable</code> должен был обеспечивать работу WYSIWYG-редакторов. Скорее всего, вы встречали его в инструментах подобных Symphony или на cайтах вроде Flickr, где вы начинаете редактировать материалы, просто кликнув в определенную область.</p>\n<p>Как упоминалось выше, <code>contenteditable</code> может быть в трёх возможных состояниях:</p>\n<ol>\n<li><code>contenteditable=""</code> или <code>contenteditable="true"</code> означает, что элемент доступен для редактирования</li>\n<li><code>contenteditable="false"</code> означает, что элемент недоступен для редактирования</li>\n<li><code>contenteditable="inherit"</code> означает, что элемент доступен для редактирования в случае, если его непосредственный родитель доступен для редактирования. Это значение атрибута по умолчанию.</li>\n</ol>\n<p>Когда вы добавляете элементу атрибут <code>contenteditable</code>, браузер делает его доступным для редактирования. Кроме того, все потомки этого элемента также становятся доступны для редактирования, если атрибут <code>contenteditable</code> у них явно не установлен в <code>false</code>.</p>\n<h2>Пример кода</h2>\n<pre><code>&#x3C;div id="example-one" contenteditable="true">\n    &#x3C;style scoped>\n        #example-one {\n            margin:12px 0;\n        }\n        #example-one[contenteditable="true"] {\n            padding:10px;\n            outline:3px dashed #CCC;\n        }\n        #example-one[contenteditable="true"]:hover {\n            outline:3px dashed #2B8BAD;\n        }\n    &#x3C;/style>\n    &#x3C;p>Всё что находится в этом блоке, доступно для редактирования в браузерах, поддерживающих &#x3C;code>HTML5&#x3C;/code>. Давайте, попробуйте: кликните для начала редактирования.&#x3C;/p>\n&#x3C;/div>\n</code></pre>\n<h2>Демонстрация</h2>\n<p>Вот два простых примера, показывающие работу <code>contenteditable</code>:</p>\n<h3>Пример №1</h3>\n<div id="example-one" contenteditable="true">\n    <style>\n        #example-one {\n            margin: 12px 0;\n            font-family: Consolas, Monaco, monospace;\n        }\n<pre><code>    #example-one[contenteditable="true"] {\n        padding: 10px;\n        outline: 3px dashed #cccccc;\n    }\n    \n    #example-one[contenteditable="true"]:hover {\n        background: #e4f3f9;\n        outline:3px dashed #2b8bad;\n    }\n&#x3C;/style>\nВсё, что находится в этом блоке, доступно для редактирования в браузерах, поддерживающих HTML5. Давайте, попробуйте: кликните для начала редактирования.\n</code></pre>\n</div>\n<p>Редактирование текста.</p>\n<p>Я использовал CSS для создания оформления, показывающего, что текст доступен для редактирования. Обратите внимание на ориентированное на будущее использование <code>&#x3C;style scoped></code>, которое описано в моей <a href="http://html5doctor.com/the-scoped-attribute/">предыдущей статье</a>.</p>\n<h3>Пример №2</h3>\n<p><a href="http://twitter.com/chriscoyier">Крис Койер</a> рассказывал на CSS-Tricks, что вы можете позволить вашим пользователям <a href="http://css-tricks.com/show-and-edit-style-element/">редактировать CSS в реальном времени</a>, так как <code>&#x3C;style></code> элемент имеет <code>display:none</code> по умолчанию, но ведь значение можно изменить на <code>block</code>.</p>\n<p>Попробуйте отредактировать CSS, приведенный ниже:</p>\n<div id="example-two" contenteditable="true">\n    <style contenteditable="true">\n        #example-two {\n            margin: 12px 0;\n            font-family: Consolas, Monaco, monospace;\n        }\n        \n        #example-two style {\n            display: block;\n            white-space: pre;\n        }\n        \n        #example-two[contenteditable="true"] {\n            padding: 10px;\n            outline: 3px dashed #cccccc;\n        }\n        \n        #example-two[contenteditable="true"]:hover{\n            background: #e4f3f9;\n            outline: 3px dashed #2B8BAD;\n        }\n    </style>\n</div>\n<p>Редактирование таблицы стилей.</p>\n<h2>Поддержка браузерами</h2>\n<p>Поддержка атрибута <code>contenteditable</code> браузерами на удивление хороша:</p>\n<table>\n<thead>\n<tr>\n<th>Браузер</th>\n<th>Версия</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Chrome</td>\n<td>4.0+</td>\n</tr>\n<tr>\n<td>Safari</td>\n<td>3.1+</td>\n</tr>\n<tr>\n<td>Mobile Safari</td>\n<td>5.0+</td>\n</tr>\n<tr>\n<td>Firefox</td>\n<td>3.5+</td>\n</tr>\n<tr>\n<td>Opera</td>\n<td>9.0+</td>\n</tr>\n<tr>\n<td>Opera Mini/Mobile</td>\n<td>Нет</td>\n</tr>\n<tr>\n<td>Internet Explorer</td>\n<td>5.5+</td>\n</tr>\n<tr>\n<td>Android</td>\n<td>3.0+</td>\n</tr>\n</tbody>\n</table>\n<p>Поддержка браузерами свойства <code>contenteditable</code>.</p>\n<p>Должен отметить, что появлением и отличной поддержкой атрибута мы обязаны IE 5.5, хотя на самом деле ранний вариант <code>contenteditable</code> был <a href="http://msdn.microsoft.com/en-us/library/ms537837(VS.85).aspx">разработан и внедрен Microsoft в июле 2000 года</a>.</p>\n<p>Более подробную таблицу совместимости можно увидеть тут: <a href="http://caniuse.com/contenteditable">When Can I Use</a>.</p>\n<h2>Сохранение изменений</h2>\n<p>Для написания этого раздела я обратился за помощью к доктору Реми, так как он гораздо более сведущ во всём, что касается хранения <del>данных</del> всего на свете.</p>\n<blockquote>\n<p>В зависимости от сложности блока ваш код может отлавливать нажатие <kbd>Enter</kbd> (код 13) для сохранения изменения и <kbd>Esc</kbd> (код 27) для их отмены.</p>\n<p>Когда пользователь нажимает <kbd>Enter</kbd> (предполагаем, что редактируем однострочные данные), получаем <code>innerHTML</code> редактируемого блока и посылаем AJAX-запрос с изменениями на сервер.</p>\n<p>Простой пример можно увидеть тут: <a href="http://jsbin.com/owavu3">Сохранение данных из элемента с <code>сontenteditable</code> при помощи AJAX</a>.</p>\n<p><a href="http://remysharp.com/">Реми Шарп</a></p>\n</blockquote>\n<h2>Заключение</h2>\n<p>В своих статьях я неоднократно упоминал этот подход: спецификация наконец-то сделала официальным то, что внедрено в браузерах много лет назад.</p>\n<p>Атрибут <code>contenteditable</code> — один из самых малоизвестных, но могу поспорить, что вы будете использовать его чаще, чем думаете.</p>\n<p>Представьте себе возможность редактирования блока текста после простого клика на него: делать быстрые правки в статьях, редактировать комментарии или даже создавать не завязанные на серверную часть таблицы в веб-приложениях.</p>\n<p>Если у вас есть идеи, как использовать этот атрибут — расскажите нам об этом в комментариях.</p>\n<h2>Читать дальше</h2>\n<ul>\n<li><a href="http://blog.whatwg.org/the-road-to-html-5-contenteditable#what">Что такое contenteditable?</a></li>\n<li><a href="http://css-tricks.com/expanding-images-html5/">Разворачиваем изображения с помощью HTML5 contenteditable</a></li>\n</ul>\n<p>Перевод оригинальной статьи «<a href="http://html5doctor.com/the-contenteditable-attribute/">The contenteditable attribute</a>» <a href="http://jackosborne.co.uk/">Джека Осборна</a> (Jack Osborne), опубликованной на сайте «<a href="http://html5doctor.com/">HTML5 Doctor</a>».</p>\n<p>Перевод выполнил <a href="http://twitter.com/silentimp">Антон Немцев</a> (SilentImp).</p>',headings:[{depth:1,value:"Атрибут contenteditable"},{depth:2,value:"Основы"},{depth:2,value:"Пример кода"},{depth:2,value:"Демонстрация"},{depth:3,value:"Пример №1"},{depth:3,value:"Пример №2"},{depth:2,value:"Поддержка браузерами"},{depth:2,value:"Сохранение изменений"},{depth:2,value:"Заключение"},{depth:2,value:"Читать дальше"}],frontmatter:{title:"Атрибут contenteditable"}}},{node:{html:'<h1>Критический CSS + прогрессивный CSS = ?</h1>\n<p>Однажды я прочел статью на Хабре о результатах, полученных при проведении ребятами из Google различных тестов. Они выяснили, что в большинстве сценариев встраивание стилей в HTML приводит к более быстрой загрузке страницы, чем подключение стилей одним файлом. Тем не менее, такой трюк я не применял, за одним исключением: в одном проекте, в котором я принимал участие, было реализовано встраивание стилей на страницу сгенерированного лендинга, что действительно немного ускоряло загрузку. При разработке обычных сайтов заморачиваться с загрузкой стилей не обязательно, но есть и такие проекты, где необходимо показать страницу пользователю как можно скорее, ведь это может улучшить аудиторные показатели. Для этого существуют, как минимум, две практики: «критический CSS» и «прогрессивный CSS».</p>\n<h2>Критический CSS</h2>\n<p>Основной принцип в обеих практиках заключается в том, что стили загружаются постепенно, а не все сразу. Критический CSS — это стили, которые необходимы для отрисовки первой видимой части страницы. Выделить такие стили автоматически вы можете с помощью пакета <a href="https://github.com/filamentgroup/criticalCSS">CriticalCSS</a>. Для моментальной отрисовки критический CSS встраивают в HTML, все остальные стили загружаются отдельным файлом асинхронно.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*cf_FIrLnoSWAo_n65Cb3BA.gif" alt="*Обычная загрузка в head*"><strong>Обычная загрузка в head</strong></p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*FNMTHC_4hViET7UcChQ8zw.gif" alt="Critical CSS"><em>Critical CSS</em></p>\n<p>При отрисовке HTML, как только браузер встречает <script> или <link>, он останавливается и ждёт, пока JS- или CSS-файл загрузится, и только после этого идет дальше. При использовании <script> с атрибутами async и defer, мы можем попросить браузер загружать скрипт асинхронно, без блокировки рендеринга страницы, но у <link> таких атрибутов нет. Из этой ситуации нас спасёт функция <a href="https://github.com/filamentgroup/loadCSS">loadCSS</a> — её использование позволит вашей странице отрисоваться с критическим CSS и не ждать полной загрузки остальных стилей.</p>\n<pre><code>&#x3C;!DOCTYPE html>\n&#x3C;html>\n    &#x3C;head>\n        &#x3C;script>\n            // loadCSS.js\n        &#x3C;/script>\n        &#x3C;style>\n            /* Критические стили */\n            .article,\n            .comments,\n            .about,\n            .footer {\n                display: none;\n            }\n        &#x3C;/style>\n        &#x3C;script>\n            /* Остальные стили */\n            loadCSS(\'style.css\');\n        &#x3C;/script>\n    &#x3C;/head>\n    &#x3C;body>\n        ...\n    &#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<p>Как это работает? Если коротко, то эта функция создает <link rel="stylesheet"> с атрибутом media="only x". Таким образом, браузер загружает стили, при этом не блокируя рендеринг страницы. После того, как стили загружены, атрибуту задается значение media="all". В современных браузерах, поддерживающих rel="preload" для <link>, можно обойтись без loadCSS.</p>\n<pre><code>&#x3C;link rel="preload" href="/style.css"\n      as="style" onload="this.rel=\'stylesheet\'">\n&#x3C;noscript>\n    &#x3C;link rel="stylesheet" href="style.css">\n&#x3C;/noscript>\n</code></pre>\n<p>С media="only x" такой трюк не сработает: разные браузеры загружают CSS по-разному, loadCSS учитывает все эти нюансы.</p>\n<h2>Прогрессивный CSS</h2>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*CmWVzKAJvO289yxtOJcQnw.gif"></p>\n<p>Прогрессивный CSS предполагает создание отдельного CSS-файла для каждой части страницы: перед каждой вставляется <link rel="stylesheet"> со стилем только этой части. Благодаря тому, что <link rel="stylesheet"> блокирует рендеринг до окончания загрузки стилей, страница будет загружаться последовательно по частях. В этом сценарии выгоднее всего использовать HTTP/2, он хорошо работает с одновременными запросами.</p>\n<pre><code>&#x3C;!DOCTYPE html>\n&#x3C;html>\n    &#x3C;head>\n    &#x3C;/head>\n    &#x3C;body>\n        &#x3C;link rel="stylesheet" href="header.css">\n        &#x3C;header class="header">...&#x3C;/header>\n\n        &#x3C;link rel="stylesheet" href="article.css">\n        &#x3C;main class="article">&#x3C;/main>\n\n        &#x3C;link rel="stylesheet" href="comments.css">\n        &#x3C;section class="comments">...&#x3C;/section>\n\n        &#x3C;link rel="stylesheet" href="about.css">\n        &#x3C;section class="about">&#x3C;/section>\n\n        &#x3C;link rel="stylesheet" href="footer.css">\n        &#x3C;footer class="footer">&#x3C;/footer>\n    &#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<p>Пришла пора признаться, что прогрессивный CSS это скорее концепт, чем что-то применимое на практике: в <a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">спецификации HTML</a> никак не объяснено, как рендеринг страницы должен блокироваться загрузкой CSS и как должен вести себя <link rel="stylesheet"> в <body>, поэтому все браузеры обрабатывают эту ситуацию по-своему. Можно выделить два основных поведения браузеров:</p>\n<ol>\n<li>\n<p>Встретил <link rel="stylesheet">;</p>\n</li>\n<li>\n<p>Дождался загрузки;</p>\n</li>\n<li>\n<p>Рендерит дальше.</p>\n</li>\n</ol>\n<p>Или:</p>\n<ol>\n<li>\n<p>Встретил <link rel="stylesheet">;</p>\n</li>\n<li>\n<p>Дождался загрузки <strong>всех</strong> обнаруженных стилей;</p>\n</li>\n<li>\n<p>Рендерит дальше.</p>\n</li>\n</ol>\n<p>Подробнее про поведение каждого браузера можно <a href="https://jakearchibald.com/2016/link-in-body/#changes-to-chrome">почитать у Джейка Арчибальда</a>. На реальных проектах прогрессивный CSS в полной мере не применить, но сама концепция выглядит очень интересно.</p>\n<h2>Gulp в помощь</h2>\n<p>Чтобы с лёгкостью применять критический и прогрессивный CSS вместе во всех браузерах, я написал плагин <a href="https://www.npmjs.com/package/gulp-progressive-css">gulp-progressive-css</a>. Этот плагин обрабатывает HTML-файлы и добавляет возможность использовать атрибуты priority="critical", priority="queued" и priority="async" у элемента <link rel="stylesheet">.</p>\n<pre><code>&#x3C;!DOCTYPE html>\n&#x3C;html>\n    &#x3C;head>\n        &#x3C;link rel="stylesheet"\n              priority="async" href="/font.css">\n\n        &#x3C;link rel="stylesheet"\n              priority="critical" href="/header.css">\n\n        &#x3C;link rel="stylesheet"\n              priority="queued" href="/article.css">\n\n        &#x3C;link rel="stylesheet"\n              priority="queued" href="/comments.css">\n\n        &#x3C;link rel="stylesheet"\n              priority="queued" href="/about.css">\n\n        &#x3C;link rel="stylesheet"\n              priority="queued" href="/footer.css">\n    &#x3C;/head>\n    &#x3C;body>\n        &#x3C;header class="header">&#x3C;/header>\n        &#x3C;main class="article">&#x3C;/main>\n        &#x3C;section class="comments">&#x3C;/section>\n        &#x3C;section class="about">&#x3C;/section>\n        &#x3C;footer class="footer">&#x3C;/footer>\n    &#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<p>Стили, подключенные с атрибутом priority="critical", будут встроены в HTML-файл, а стили с атрибутом priority="queued" или priority="async" будут загружены асинхронно с помощью функции importCSS. Это <a href="https://github.com/TrigenSoftware/import-css/blob/master/src/link-in-body-async.js">вариация функции</a> loadCSS, её особенность в том, что загрузка стилей начинатся одновременно, но стили с priority="queued" будут применяться в том порядке, в котором они были указаны в HTML-файле. Чтобы загрузка стилей работала одинаково во всех браузерах, подключение стилей переносится в конец <body>. Также добавляется <link rel="preload"> в <head> для каждого файла стилей, чтобы в браузерах, которые поддерживают rel="preload", загрузка начиналась еще при обработке <head>.</p>\n<pre><code>&#x3C;!DOCTYPE html>\n&#x3C;html>\n    &#x3C;head>\n        &#x3C;style>/* header.css */&#x3C;/style>\n        &#x3C;link rel="preload" as="style" href="font.css">\n        &#x3C;link rel="preload" as="style" href="article.css">\n        &#x3C;link rel="preload" as="style" href="comments.css">\n        &#x3C;link rel="preload" as="style" href="about.css">\n        &#x3C;link rel="preload" as="style" href="footer.css">\n        &#x3C;noscript>\n            &#x3C;link rel="stylesheet" href="font.css">\n            &#x3C;link rel="stylesheet" href="article.css">\n            &#x3C;link rel="stylesheet" href="comments.css">\n            &#x3C;link rel="stylesheet" href="about.css">\n            &#x3C;link rel="stylesheet" href="footer.css">\n        &#x3C;/noscript>\n    &#x3C;/head>\n    &#x3C;body>\n        &#x3C;header class="header">&#x3C;/header>\n        &#x3C;main class="article">&#x3C;/main>\n        &#x3C;section class="comments">&#x3C;/section>\n        &#x3C;section class="about">&#x3C;/section>\n        &#x3C;footer class="footer">&#x3C;/footer>\n        &#x3C;script>\n            importCSS(\'font.css\', 0, true);\n            importCSS(\'article.css\');\n            importCSS(\'comments.css\');\n            importCSS(\'about.css\');\n            importCSS(\'footer.css\');\n        &#x3C;/script>\n    &#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<h2>Результаты применения</h2>\n<p>Я решил взять один из лендингов, который однажды верстал, и на его примере продемонстрировать пользу применения асинхронной загрузки стилей.</p>\n<p>Тестируем изначальный вариант лендинга на <a href="https://developers.google.com/speed/pagespeed/insights">PageSpeed Insights</a>:</p>\n<p><img src="https://cdn-images-1.medium.com/max/2704/1*jd_lhPJSnP53YL9bT2tSIg.jpeg" alt="PageSpeed: 74 балла из 100."><em>PageSpeed: 74 балла из 100.</em></p>\n<p>По результатам тестирования видно, что стили шрифтов и основные стили блокируют рендеринг страницы. Применив прогрессивную загрузку на стили сайта, мы будем иметь те же 74 из 100 баллов, но если сделать загрузку шрифтов асинхронной, то результат уже совсем другой:</p>\n<p><img src="https://cdn-images-1.medium.com/max/2704/1*60RoxNGHPg14S7azV2A9hw.jpeg" alt="PageSpeed: 98 баллов из 100."><em>PageSpeed: 98 баллов из 100.</em></p>\n<p>При сравнении трёх вариантов страницы на <a href="https://www.webpagetest.org/">WebPageTest</a>:</p>\n<ol>\n<li>\n<p>Обычный;</p>\n</li>\n<li>\n<p>Прогрессивная загрузка;</p>\n</li>\n<li>\n<p>Прогрессивная загрузка и асинхронная загрузка шрифтов;</p>\n</li>\n</ol>\n<p>Можно увидеть, что второй вариант отображает первый кадр раньше, чем первый, при этом третий вариант делает это еще раньше со значительным отрывом.</p>\n<p><img src="https://cdn-images-1.medium.com/max/8680/1*XBOQZo9twVP_TXBaYVtD8w.jpeg" alt="Сравнение подходов к загрузке на WebPageTest."><em>Сравнение подходов к загрузке на WebPageTest.</em></p>\n<p>На этом примере становится понятно, что небольшому лендингу основное ускорение придает асинхронная загрузка шрифтов, а не прогрессивная загрузка стилей. Так происходит из-за слишком малого размера файла стилей. Прогрессивная загрузка будет давать ощутимую пользу только полноценным сайтам, у которых размер стилей больше в несколько раз.</p>\n<h3>Источники</h3>\n<ul>\n<li>\n<p><a href="https://habrahabr.ru/company/badoo/blog/320558/">33 способа ускорить ваш фронтенд в 2017 году</a>, Александр Гутников</p>\n</li>\n<li>\n<p><a href="https://jakearchibald.com/2016/link-in-body/">The future of loading CSS</a>, Джейк Арчибальд</p>\n</li>\n<li>\n<p><a href="http://habrahabr.net/thread/8679">Ускорение Lenta.ru: 3 человека, 2 недели, улучшение глубины просмотра на 27%</a>, Денис Паращий</p>\n</li>\n</ul>\n<p><em>Автор <a href="https://trigen.pro/">Даниил Оношко</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</em></p>',headings:[{depth:1,value:"Критический CSS + прогрессивный CSS = ?"},{depth:2,value:"Критический CSS"},{depth:2,value:"Прогрессивный CSS"},{depth:2,value:"Gulp в помощь"},{depth:2,value:"Результаты применения"},{depth:3,value:"Источники"}],frontmatter:{title:"Критический CSS + прогрессивный CSS = ?"}}},{node:{html:'<h1>Кроссбраузерные закруглённые уголки</h1>\n<p><a href="http://my.opera.com/GreLI/blog/">Лев Солнцев</a> 28 июня 2010</p>\n<p>Согласно как древнему учению фен-шуй, так и последним медицинским исследованиям, прямые углы вредно влияют на человека. Издавна дизайнеры всего мира стараются скруглять углы чтобы уменьшить вред и сделать свою работу красивее. Это коснулось и области веб-дизайна.</p>\n<p>В свою очередь, должно быть, все верстальщики решают техническую проблему оформления сайтов закруглёнными уголками, требуемыми дизайнерами.</p>\n<h2>Существующие решения</h2>\n<p>Самым очевидным и простым способом сделать это ещё с ранних версий HTML являются картинки. Увы, самой простой способ не всегда самый лучший или подходящий. Например, можно просто наложить уголки с цветом фона на элемент, но такой способ не годится, когда, оставшаяся за скруглением, часть должна быть прозрачной.</p>\n<p>И, конечно же, хочется уменьшить число запросов к серверу, чтобы страница сразу показывалась в задуманном виде без лишних задержек.</p>\n<p>Кроме того, что прозрачные картинки усложняют вёрстку, дизайнеры ещё и хотят видеть их сглаженными, а с полупрозрачными картинками есть немалые <a href="http://www.google.ru/search?q=IE6+png">сложности</a> в Internet Explorer 6. Их можно решить через фильтры, но ценой этого будет сильное проседание производительности. Пожалуй, мало кто захочет чтобы с их сайта уходили клиенты, не дождавшиеся загрузки. Но не все об этом подозревают.</p>\n<p>Для облегчения работы (и снижения стоимости создания решений, основанных на веб-стандартах) было придумано и реализовано современными браузерами <a href="http://www.w3.org/TR/css3-background/#the-border-radius">CSS-свойство <code>border-radius</code></a>, которое позволяет закруглить уголки прямо средствами браузера без каких-либо дополнительных усилий.</p>\n<p>Так же в старых версиях браузера Opera (начиная с 9.5) существует ещё одно <a href="http://dev.opera.com/articles/view/new-development-techniques-using-opera-k/">обходное решение</a>: использовать векторную графику <a href="http://www.w3.org/TR/SVG/">SVG</a> в качестве фона.</p>\n<h2>А что же Internet Explorer?</h2>\n<p>Однако, пока ещё самым распространённым в мире браузером является Internet Explorer, не поддерживающий решение ни через CSS, ни через SVG. Тем не менее, в Internet Explorer есть ещё одна малоизученная (как мы увидим дальше) возможность: один из предков SVG — векторная графика <a href="http://msdn.microsoft.com/en-us/library/bb250524(VS.85).aspx">VML</a>.</p>\n<p>В VML есть предопределённая фигура: прямоугольник с закруглёнными углами <code>roundrect</code>. Решение на её основе уже <a href="http://snook.ca/archives/html_and_css/rounded_corners_experiment_ie/">давно предложено</a>, и даже есть <a href="http://www.dillerdesign.com/experiment/DD_roundies/">подключаемый компонент</a>, который с помощью скриптов создаёт закруглённые углы похожим образом. Но у этой фигуры есть один значительный недостаток: радиус кривизны задаётся через отношение к большей стороне, что делает результат непредсказуемым и неподходящим для многих случаев. Кроме автоматизации работы именно для обхода этой особенности используются скрипты в подключаемом компоненте.</p>\n<p>Обычно же требуется какой-то зафиксированный радиус скругления, например, 8 пикселов. Возможно ли так сделать в Internet Explorer, не выполняя работу браузера вместо него самого?</p>\n<p>Оказывается, да.</p>\n<h2>Изучаем VML</h2>\n<p>Для начала, нам надо определить свою фигуру. Пусть это будет простой прямоугольник:</p>\n<p><a href="/1-vml-0a23aa5d931de2c36956152daba65a10.html">Пример 1. VML</a> (только IE8 и ниже).</p>\n<pre><code>&#x3C;!DOCTYPE HTML>\n&#x3C;xml:namespace ns="urn:schemas-microsoft-com:vml" prefix="v"/>\n&#x3C;head>\n    &#x3C;title>Пример: VML&#x3C;/title>\n    &#x3C;meta charset="utf-8">\n    &#x3C;style>\n        v\\:shape {\n            behavior:url(#default#VML);\n            display:inline-block;\n            width:100px;\n            height:20px;\n    }\n    &#x3C;/style>\n&#x3C;/head>\n&#x3C;body>\n    &#x3C;v:shape stroked="false" fillcolor="#EEE"\n        coordorigin="0 0" coordsize="1000 1000"\n        path="m 0,0 l 1000,0, 1000,1000, 0,1000 x e">\n    &#x3C;/v:shape>\n&#x3C;/body>\n</code></pre>\n<p>Для запуска VML в IE нужно несколько условий.</p>\n<ol>\n<li>Объявление XML-документа, с подключенным пространством имён VML, в любом месте документа. Это делает вторая строчка. Указание префикса <code>v</code> говорит, что тэги VML будут записаны с этим префиксом. В примере элемент таким образом обозначен <code>&#x3C;v:shape></code>. В скриптах (например, для подгружаемого содержимого) объявление можно сделать с помощью команды <code>document.namespaces.add(\'v\', \'urn:schemas-microsoft-com:vml\')</code></li>\n<li>Далее надо указать, чтобы элементы вели себя как VML. Это делает CSS-свойство <code>behavior:url(#default#VML)</code></li>\n<li>Отображаемые элементы VML должны быть в <code>&#x3C;body></code>. Опускать его нельзя.</li>\n<li>Для отображаемого элемента должны быть указаны размеры. Для это нужно задать свойство <code>display</code>, не равное <code>inline</code> (оно стоит по умолчанию): <code>display:inline-block</code> или <code>display:block</code> и, конечно же, надо указать сами размеры.</li>\n</ol>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 180px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAAC/ElEQVQ4y+WTS0wTQRyH1xqNMSpnE8+e1ESMB43GqIlGDxpFL2r0oFLkZXxAEGuVQtGSFK2KqCExIQYiUJFHLAFsoEqlhRaBre1un9vuVuhjd2enLdvn2ionHxHO/vLLZGaSL/9k8g2y/Qa5sYLJu8quvMytKuRWF4I1YiC6xK27AvJKwIYSsL4Y5Muiu+piW+/APfdj+TULu6WB0xXGvSUzyJoDk8oOo7jRtOM6tf+Wd0sZubmYOiEj1p+lkJMUUkCtPUNdVMFjNbFT8oCqmy96kWhv6BDaJGpxBbLiiKvo8eTxBvu2yvC+at/x+m9bbnGH5aFN5ZzoQlR0jhedTxy6Fz2miOyshgVyuPNeXFGtDssKn5yTIAdv+h/0spIOeLcrIlNHZB2M9A1T1RauVTOKHlDfTdd1BVXdlLIdl7ZMN/VQLRrmdfPAq9ahF50EUvPSJwiA8tl1w+8+aXvtFoMgMNiszqDr+/Th7cRYvwfTZ+IUPW+1mIeEZJBPCgPPpXq0EvACUvnYAWkbbkdNpo/j41qLxUgQFsw2qdcPjoz0GQ3DX6ZGCfcU6Z2mfNOhOUc4JmgnDHGyMwwySHG9mZ1HXS4sO9xPOnxenHDbvB5b9viNcpI+O/njxuOyul1fCQ/m92JByuF2WVF0Bil9MCsIiVRaWHpSqVRgzm13upByBSoIcRZACLl/luNAIpFIp9MLMdo/F0DKcjAfCNLhJSQYDC4s8JlMRhDSNIgtwsEQQy8hoVCI53/CSZqN/Mfw8l87C0cXYZrhwBLCsmw8Hk+nU1mvwgxEynKGJZdlWFYSlplzE76snjPZbxSLRiFkI5CFHAtzKwMhyO1/L2QBCJM+mxXDkOqnHiM61j866nagmM2M20wO3OTETdhXg8tu/mOduJlwmmZnJ5DG9nnxw6dXlErrF41O2zmkadUOtmr6WtCp95m4MxHFkjH8lyaieIbH/OQ0crTUXNUwcE0+LH9ulDXp76p0t5Va6aPR2qaxumf6v7W++bPk4efvoeFEDSA+uc0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 1. Internet Explorer 6." title="" src="/static/1-shot-3fa21fa0dbe73af54f8b385f14744a5e-3cfde.png" srcset="/static/1-shot-3fa21fa0dbe73af54f8b385f14744a5e-ff448.png 163w,\n/static/1-shot-3fa21fa0dbe73af54f8b385f14744a5e-3cfde.png 180w" sizes="(max-width: 180px) 100vw, 180px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 1. Internet Explorer 6.</figcaption>\n</figure>\n<p>Можно ещё отметить, что двоеточие имеет специальный смысл в CSS, и поэтому должно быть экранировано в селекторе с помощью обратного слэша. Также популярный ранее селектор <code>v\\:*</code> не работает в Internet Explorer 8, из-за чего нужно либо перечислять все элементы, либо использовать дополнительный класс. Я предпочёл первое, так как в таком случае в итоге выходит меньше кода.</p>\n<p>Элемент <a href="http://www.w3.org/TR/NOTE-VML#_Toc416858386"><code>shape</code></a> задаёт произвольную фигуру. При этом использованы следующие параметры:</p>\n<ul>\n<li><code>coordorigin="0 0"</code> задаёт начало координат в положении <code>(0, 0)</code></li>\n<li><code>coordsize="1000 1000"</code> задаёт размеры «холста» (за них можно выходить, но в некоторых, не связанных с VML, случаях картинка может быть обрезана)</li>\n<li><code>path="m 0,0 l 1000,0, 1000,1000, 0,1000 x e"</code> рисует сам прямоугольник. Использован следующий синтаксис: <code>m</code> — передвигает в начало координат, <code>l</code> рисует прямые линии через ряд координат <code>(x, y)</code>, перечисленные через запятую, <code>x</code> замыкает контур, и <code>e</code> заканчивает рисование;</li>\n<li><code>fillcolor="#CCC"</code> заполняет элемент светло-серым цветом, чтобы мы его смогли увидеть. Следует отметить, что, заданный через CSS, фон у VML-элементов должен быть отключен. Иначе он будет нарисован прямоугольником под фигурой, что лишит нас преимуществ.</li>\n<li><code>stroked="false"</code> указывает, что нам не нужна рамка. (По умолчанию рисуется тонкая.)</li>\n</ul>\n<h3>Сложности</h3>\n<p>Как можно было заметить, все фигуры задаются в неком пространстве со своей координатной сеткой. Главной же в данном случае проблемой является то, что мы не можем так просто задать координаты в точках на экране. Надо каким-то образом связать координаты VML с пикселями, и определить свою фигуру, которая будет обладать требуемыми свойствами.</p>\n<p>Как это сделать?</p>\n<h3>Формулы</h3>\n<p>VML имеет возможность задавать, считать и использовать <a href="http://www.w3.org/TR/NOTE-VML#_Toc416858392">определённые соотношения</a>. Простой пример, пока ещё без вычислений:</p>\n<p><a href="/2-vml-formulas-50bfb7bf0b0808993a0f601fc1b39ccd.html">Пример 2. Формулы в VML</a> (только IE8 и ниже).</p>\n<pre><code>&#x3C;v:shape coordorigin="0 0" coordsize="1000 1000"\n    path="m 0,0 l @0,0, @0,@1, 0,@1 x e"\n    fillcolor="#EEE" stroked="false">\n    &#x3C;v:formulas>\n        &#x3C;v:f eqn="val width"/>\n        &#x3C;v:f eqn="val height"/>\n    &#x3C;/v:formulas>\n&#x3C;/v:shape>\n</code></pre>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 180px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAAC/ElEQVQ4y+WTS0wTQRyH1xqNMSpnE8+e1ESMB43GqIlGDxpFL2r0oFLkZXxAEGuVQtGSFK2KqCExIQYiUJFHLAFsoEqlhRaBre1un9vuVuhjd2enLdvn2ionHxHO/vLLZGaSL/9k8g2y/Qa5sYLJu8quvMytKuRWF4I1YiC6xK27AvJKwIYSsL4Y5Muiu+piW+/APfdj+TULu6WB0xXGvSUzyJoDk8oOo7jRtOM6tf+Wd0sZubmYOiEj1p+lkJMUUkCtPUNdVMFjNbFT8oCqmy96kWhv6BDaJGpxBbLiiKvo8eTxBvu2yvC+at/x+m9bbnGH5aFN5ZzoQlR0jhedTxy6Fz2miOyshgVyuPNeXFGtDssKn5yTIAdv+h/0spIOeLcrIlNHZB2M9A1T1RauVTOKHlDfTdd1BVXdlLIdl7ZMN/VQLRrmdfPAq9ahF50EUvPSJwiA8tl1w+8+aXvtFoMgMNiszqDr+/Th7cRYvwfTZ+IUPW+1mIeEZJBPCgPPpXq0EvACUvnYAWkbbkdNpo/j41qLxUgQFsw2qdcPjoz0GQ3DX6ZGCfcU6Z2mfNOhOUc4JmgnDHGyMwwySHG9mZ1HXS4sO9xPOnxenHDbvB5b9viNcpI+O/njxuOyul1fCQ/m92JByuF2WVF0Bil9MCsIiVRaWHpSqVRgzm13upByBSoIcRZACLl/luNAIpFIp9MLMdo/F0DKcjAfCNLhJSQYDC4s8JlMRhDSNIgtwsEQQy8hoVCI53/CSZqN/Mfw8l87C0cXYZrhwBLCsmw8Hk+nU1mvwgxEynKGJZdlWFYSlplzE76snjPZbxSLRiFkI5CFHAtzKwMhyO1/L2QBCJM+mxXDkOqnHiM61j866nagmM2M20wO3OTETdhXg8tu/mOduJlwmmZnJ5DG9nnxw6dXlErrF41O2zmkadUOtmr6WtCp95m4MxHFkjH8lyaieIbH/OQ0crTUXNUwcE0+LH9ulDXp76p0t5Va6aPR2qaxumf6v7W++bPk4efvoeFEDSA+uc0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 2. Internet Explorer 6." title="" src="/static/1-shot-3fa21fa0dbe73af54f8b385f14744a5e-3cfde.png" srcset="/static/1-shot-3fa21fa0dbe73af54f8b385f14744a5e-ff448.png 163w,\n/static/1-shot-3fa21fa0dbe73af54f8b385f14744a5e-3cfde.png 180w" sizes="(max-width: 180px) 100vw, 180px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 2. Internet Explorer 6.</figcaption>\n</figure>\n<p>Этот пример выглядит точно так же как первый, что показывает работоспособность формул. Элемент <code>formulas</code> содержит в себе список формул, в атрибуте <code>eqn</code> у каждого <code>f</code> содержатся сами формулы. На результат каждого элемента <code>f</code> можно ссылаться через запись вида <code>@№</code>, где <code>№</code> — номер выражения (перечисление начинается с нуля). Сами формулы также могут ссылаться на результат предыдущих вычислений. Но обо всём по порядку.</p>\n<p>Выражение <code>val</code> позволяет ссылаться на определённое значение. Оно может быть задано непосредственно, либо можно использовать какое-то ключевое слово. В данном случае это размеры «холста» (те, что задаются с помощью <code>coordsize</code>).</p>\n<p>Также у фигур может быть задан параметр <code>adj</code>, на который можно ссылаться как <code>#0</code> (и далее по счёту). Он пригодится нам в дальнейшем, чтобы задавать радиус кривизны уголков. К тому же нам пригодится то, что его можно переназначать для повторно используемой фигуры.</p>\n<h3>Приступаем к главному</h3>\n<p>Главное, что нам пригодится в формулах кроме самих вычислений — это возможность использовать в них размер фигуры в пикселах с помощью ключевых слов <code>pixelwidth</code> и <code>pixelheight</code>. Используя это, определим требуюмую фигуру:</p>\n<p><a href="/3-vml-pixels-c7b9a278f0422bf9371ed061cbaffe3d.html">Пример 3. VML и пикселы</a> (только IE8 и ниже).</p>\n<pre><code>&#x3C;v:shape adj="8" stroked="false" fillcolor="#CCC"\n    coordorigin="0 0" coordsize="1000000 1000000"\n    path="m @6,0 l @8,0 qx @0,@7 l @0,@9 qy @8,@1\n          l @6,@1 qx 0,@9 l 0,@7 qy @6,0 x e">\n    &#x3C;v:formulas>\n        &#x3C;v:f eqn="val width"/>\n        &#x3C;v:f eqn="val height"/>\n        &#x3C;v:f eqn="prod @0 1 pixelwidth"/>\n        &#x3C;v:f eqn="prod @1 1 pixelheight"/>\n        &#x3C;v:f eqn="sum pixelwidth 0 #0"/>\n        &#x3C;v:f eqn="sum pixelheight 0 #0"/>\n        &#x3C;v:f eqn="prod #0 @2 1"/>\n        &#x3C;v:f eqn="prod #0 @3 1"/>\n        &#x3C;v:f eqn="prod @4 @2 1"/>\n        &#x3C;v:f eqn="prod @5 @3 1"/>\n    &#x3C;/v:formulas>\n&#x3C;/v:shape>\n</code></pre>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 47.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7klEQVQoz4WR22rEMAxE8///V0qhLHRzs+V14ots+ZI4VfJY2NQc/GBmNBrc+UCB8nEc2nqh13a0um3bvv9hby3l0stXKlWtVhnHso5yGWEBFz4GGAwqTPAOTz/afk16WvwA2vjQOYzSBogVqLzSpm5hAcuA6hKIl+16qT9HBbE8TZh9ukH4NHnqWYZ5NNha67gOhKSoznje93CGuGSAV/J3Lx7K8Otgo8B8g8TMAaOLImThwmkupT5g5WG8koyFp8j3sG0+ZRXclSy1URa5D4+UodzD+ROXxxRzPc2rQ/ZTqQuSo/wvJvJ/b8d1fgH+pgE5qsCGFAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x438;&#x441;&#x442;&#x435;&#x43C;&#x430; &#x43A;&#x43E;&#x43E;&#x440;&#x434;&#x438;&#x43D;&#x430;&#x442;." title="" src="/static/coordinates-a64d32c1b4e7a8c6f7296d30d682e5c8-fa387.png" srcset="/static/coordinates-a64d32c1b4e7a8c6f7296d30d682e5c8-844a8.png 163w,\n/static/coordinates-a64d32c1b4e7a8c6f7296d30d682e5c8-fe46c.png 325w,\n/static/coordinates-a64d32c1b4e7a8c6f7296d30d682e5c8-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 180px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQ4y81TS0wTURR9wWiMEV2buHalJmJcaDRGTTS6wCi6UaMLFRRE4wciiBUqBUpSFRV/ITESIwkfDWKEADZQben0MwidoTPT77QzpS30M51O6X98fFxoFNGVJyd3cZNzT+5954Et15l1ZaG1V7hl5yPLCyMrCrmVRVzOucjqi9zaEm5NCZdbzOVJhe21sU23+Z31sbyamR0S//Ey3a4SE1i516Bo1xXdM269xu6poDeWMhuK2SNSOvckC46yoIBddYI928Tn1wjHZFNN7+IXnifbGtvFN1VdRWUAHLRfeGQ83GjdXB7YXek+XDe5sSJyQDa9/nIk54yQczKeczq5v1rIl0e3VUYLZPy26oS8snNaWvjwVBXYd8PT8D5c1c5Xd0alXVFpR0jSHqp4E6jtCsm7ufp3QVknNPQo2ihJy3hzN9vSG3r9tO/lq4HnHTSoeeEWRY51W1SD3V+U7y04Iooh0qRCVD1fPr3Vqz84SU02wQZ9ZhwdEFNTiZTY90yiwcq5uAjKH1r5IEFZMKPxs1arxHEdTeMkYdBo+oeGenTI4NfRYdoxyrjGWPfYtNcaiIlKPZJgOgJcFhTXoWEfZreTjIuC/i6apB1m2kkwbouHscIK+7DjtE84bDjtIFgXOcVaHXYzho2DSw0mUUymM+LSkU6nfV47ZbODUjkGxU6aIQiC+hMsFsvMTDyTzczEgh6vH1xuxEUxqkUMCILoFoVer1er1T6fb94+yMUWxHrDqNFgMC4KFEWhgd/vnxOnguHoglinR+Fgw6KAeq1W+935vxDDnQ3/vDO8NpyKLAp4cHhtr9f7XSzMv3PcanPiOG5eAgRByGZhpJKBEA9KZxOW+quEZTKZcGjSQbtgPMfhN4oJUZ4PR/kwHwlH5io/X39kZK7PcQHGTUyQJKh85NRh6g/Dww4rRhAoRRht1CzJCcRuQX9JG4XSNqPJpAf32nxF9x9fVCjMX3tVyo6B3lZlf2tvTws2+jGbsCUFMhWjfmJSoLJx0sOMgUOX0JuNfVdlg7JnOmmz5k6T6pZCKXkwfLdZXftE8zvWPR2puj/yDTgzE1ZdL7xTAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 3. Internet Explorer 6." title="" src="/static/3-shot-41e0c373f06623af7e4acb61c82be8aa-3cfde.png" srcset="/static/3-shot-41e0c373f06623af7e4acb61c82be8aa-ff448.png 163w,\n/static/3-shot-41e0c373f06623af7e4acb61c82be8aa-3cfde.png 180w" sizes="(max-width: 180px) 100vw, 180px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 3. Internet Explorer 6.</figcaption>\n</figure>\n<p>Теперь появились закруглённые уголки. Выражения формулы имеют следующий формат: «операция значение параметр1 параметр2». Над указанным значением производится какая-то операция, использующая указанные параметры. Для суммы <code>sum</code> вычисление будет «значение + параметр1 − параметр2», для умножения <code>prod</code> — «значение × параметр1 / параметр2».</p>\n<p>В этом примере первые две формулы дают ссылку на размеры фигуры, как и в предыдущем.</p>\n<p>В следующих двух считается отношение размеров в координатах VML к их пиксельным значениям, то есть фактически определяется сколько точек VML приходится на один пиксел по горизонтали и вертикали. Большие значения размера «холста» <code>coordsize</code> заданы для того, чтобы вычисления проводились с достаточной высокой точностью</p>\n<p>Далее, из размеров в пикселах вычитается размер закругления, указанный в <code>adj</code>. Наконец, координаты, где закончиваются уголки, пересчитываются в координаты VML и используются при задании формы фигуры.</p>\n<p>Для скругления использованы довольно простые команды рисования четверти эллипса <code>qx</code> и <code>qy</code>. <code>qx</code> начинает рисование с горизонтальной черты, а <code>qy</code> — с вертикальной.</p>\n<h3>Позиционирование</h3>\n<p>Итак, фигура определена. Теперь нам нужно сделать так, чтобы она отображалась в нужном месте. Сделаем пример, более похожий на настоящий, и добавим код для остальных браузеров:</p>\n<p><a href="/4.1-vml-pos-ib-148e54efd10d4fded80e22e4c176fd15.html">Пример 4.1. VML и содержимое страницы</a>.</p>\n<pre><code>&#x3C;style>\n    .round {\n        display:inline-block;\n        padding:10px;\n        -webkit-border-radius:8px;\n        -moz-border-radius:8px;\n        border-radius:8px;\n        background:#CCC;\n}\n&#x3C;/style>\n&#x3C;!--[if VML&#x26;(lt IE 9)]>\n&#x3C;style>\n    .round {\n        background:none!important;\n        padding:0!important;\n}\n    .round-vml {\n        position:relative;\n        padding:11px 9px 9px 11px;\n        height:100%;\n}\n    v\\:shape,\n    v\\:formulas,\n    v\\:f { behavior:url(#default#VML) }\n    v\\:shape { display:inline-block }\n&#x3C;/style>\n&#x3C;xml:namespace ns="urn:schemas-microsoft-com:vml" prefix="v"/>\n&#x3C;![endif]--\x3e\n\n&#x3C;div class="round">\n&#x3C;!--[if VML&#x26;(lt IE 9)]>\n    &#x3C;v:shape adj="8" class="round-vml"\n        stroked="false" fillcolor="#CCC"\n        coordorigin="0 0" coordsize="1000000 1000000"\n        path="m @6,0 l @8,0 qx @0,@7 l @0,@9 qy @8,@1\n              l @6,@1 qx 0,@9 l 0,@7 qy @6,0 x e">\n        &#x3C;v:formulas>\n            &#x3C;v:f eqn="val width"/>\n            &#x3C;v:f eqn="val height"/>\n            &#x3C;v:f eqn="prod @0 1 pixelwidth"/>\n            &#x3C;v:f eqn="prod @1 1 pixelheight"/>\n            &#x3C;v:f eqn="sum pixelwidth 0 #0"/>\n            &#x3C;v:f eqn="sum pixelheight 0 #0"/>\n            &#x3C;v:f eqn="prod #0 @2 1"/>\n            &#x3C;v:f eqn="prod #0 @3 1"/>\n            &#x3C;v:f eqn="prod @4 @2 1"/>\n            &#x3C;v:f eqn="prod @5 @3 1"/>\n        &#x3C;/v:formulas>\n&#x3C;![endif]--\x3e\n    Закруглённые уголки — это реальность!\n&#x3C;!--[if VML&#x26;(lt IE 9)]>\n    &#x3C;/v:shape>\n&#x3C;![endif]--\x3e\n&#x3C;/div>\n</code></pre>\n<p>Размеры элемента можно изменять. Радиус закругления от этого не меняется.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 180px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAAEAklEQVQ4y42TW0wjZRTHR6JmY1z32cRnn1YfMPug0Rg10awPu9HVF9fogwq7sKzxAlkQESplF5LuygIukBIikG0olKVbsEBLgdILvczQ0pm2M70x0GFboJdpOy1tacez7aKGYOI/JyffnPl+3znnmzNI5Q/BF+tjZ75ln/4m8UxV4tkq9lQ1W/F14vmr7Jla9oVa9nQNWyngXm9Pv/Jz8s2b6cq2zBstu5/Wm9+qdSCn3rWKpObq29hr3zPvNNJn64Iv1zAfCejTlxnkYwa5xDz3GfNVd/JCG/eJcK/7wcGVgZykS8rfb5ZV1yNPnfdf6UEvdnlebYi83RS82PHo7I3EB8L9l64nKr7kKi4fVHyRe7+Vu9CZOteUuiRMnmvNdjZN7guq7n7ejLz3486th/FmabJ1MiWQpQQTsRZprPF+pF0W65SzNx9EhZOQcEckoVrEG31yRqyMjd2bG/5DNTBBI22D2zzPMtserVqu0zz0ECaej5EOrUmr0C1OWfQzm6ShmGWiYReBqfj8XjbPz/W3GPAGNssjDXe9yaib8uAourq2piEIM00TpNtqMCwsLyvMJrVtfYUOrAe37My2fT/kjaR5jcWUDU5E2CJS04HFw7jfTwa3KMi/RZN0wEVvuoPbnp2gFzzEIbLpdwZ8BB1wM1vkHuMN+F04voFcu+Xg+dxhgf//Ojw8DIf8lM+P1HXiAG/SQZJ0+3w+6kiex6L+JbIUpDKZTKFYyKSjO6Fd5HoXwfMpkxldW1tbWFgAbzKZjEajwWAwlgSPEDSXBMFwOFxOH2XTT2CLdd1isYyPj4tEop6enqGhIbFYPDAw0N/fPzo6Cr63t1ehUFit1iM4H42nnsBmCwYwnK1Wq+fn51dXV/V6vVar1Wg0yyUtLi6WqzgJtq4DCalkMlk51eDgoEqlUiqVgI2MjEilUp1OB3tOgKFsaAy2wtlLS0vQPJSAoqjNZsMwDNZQQvk6ToCtqA1Oha4gg0QimZ6enpqaksvls7OzUAt4uCq73Q7w7u7uMTgJPUOTY2NjAA8PD0tKAnhmZgZg8JAWbgvaDoVCRzBX/s4ZB+6C8nDc4XQSLpfLWRJB4CCCIBwOh60k2BOPx3m+CKMRiSWRuscTls/lYW4KMDr5/D/2t0rrQtkgaaFQiMceBegtGM8N+I0yaS6VYjkuAT6VZJNJlkuV1scMXiXiLBsJbrudJIk09myacf3Myorf63C7MMpt9VKol0RJp8nvwU40H4XRPtThsCC3JeHqO71XRSKXTanVTKiUI5qFEaVCjK//Wcz6chyZT1PHLMdRxQNyJ2hHPryG3eia+06oFvabBX2GX7q1P4k0Lb+t/Nqnb//d8F/Wcc/YfMf4FzRr/mfzhEWgAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 4. &#x423;&#x437;&#x43A;&#x43E;&#x435; &#x43E;&#x43A;&#x43D;&#x43E; Internet Explorer 6." title="" src="/static/4.1-ie-shot-9fe53890692b42e6ed58a26ae3df332a-3cfde.png" srcset="/static/4.1-ie-shot-9fe53890692b42e6ed58a26ae3df332a-ff448.png 163w,\n/static/4.1-ie-shot-9fe53890692b42e6ed58a26ae3df332a-3cfde.png 180w" sizes="(max-width: 180px) 100vw, 180px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 4. &#x423;&#x437;&#x43A;&#x43E;&#x435; &#x43E;&#x43A;&#x43D;&#x43E; Internet Explorer 6.</figcaption>\n</figure>\n<p>Оказывается, что фигуры VML удачно встают на место существующих элементов, при этом очень ценно то, что для них можно (и нужно) указать стопроцентную высоту, которая будет работать. Ширину, указывать не стоит — элемент «вылезет» из-за того, что по стандартам задаётся ширина содержимого без отступов, к тому же она и так отрабатывается автоматически. В зависимости от задачи: блочный элемент или ширина по содержимому, следует использовать <code>display:block</code> — <a href="/4.2-vml-pos-b-fe9f949aed8307f7dbd46b1a8010e718.html">пример 4.2</a> или <code>display:inline-block</code> — <a href="/4.1-vml-pos-ib-148e54efd10d4fded80e22e4c176fd15.html">пример 4.1</a>. Открывающий и закрывающий тэги должны находится в начале и в конце соответственно.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 180px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 85%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsSAAALEgHS3X78AAACw0lEQVQ4y41T+0/aUBjt/58szGzEzOdQNwhZ2AIuOHkULBQpbQFpy0N59La3ty0oqFNB9sNOURf3w5KdnH75vvO9em+BWywWLvN96nv+xPcnrjd2XR+WuV6gjC89b0wZc5gLMtdnzIPiev7DwwPnMi8nnX1SlCyvZgpqRe5VlYuKfF5VL3LFRoZXiqLWbDuqZtV1u1ofKC2z1hxK9QGxKEcIPSqICSGfSBbXwh/fvt/djx6G3u18+ZY7iH1fC0f2PiflM3LMK3y5lSkoJxX9R15C2B8QziRWVe4oSk/VRrXGuXI2UFsjqR44DZ00DNLQTbnZh6i2hnXNhAML5aI/5Ch1mH9DveuhNbbZlDhXFpvaAWeOd3M+cEB3cjeZzsdXD0+E71/eW5bN2Ta9MCcY/2btA+aZzl2x3BRrRp9cNQ1yEP2WSp8M7es+mQ6s2R8ia5oWZ9lU1Yh8ZuKSVM3G8ZSWJTdHSotIjWH863FeaDYMp9l2XxPKcESw2badMbE9cETcIWGwIKE+yLypRccW9WFRBlorS9klIRbnBmDtttFpG+0Vu5124Bugruvas0Vs6PDh6JrmOA7aON/3dd1IJpPFYvHkRMCTzeZ4vlAoBIIglCCKFTHP8wghQUcOLYy5HH4v3W43Ho+HQqFwOLy1tbW5ubm9vQ27vr4eiUQgHh4e7uzsRKNR6BsbG6hBC2MsaO71epVKpSpJoiiWy+XqC05PT6HD1mo1hLIso6BUKgmC0Ol0mOs+NyORzeFt+VQqtbu7i1XYs7+/j1XYs7dCIpFAKhaLSZIUND9t7nS7GCmsgPPwwfGK6XQ6k8mkVzg6OspmsxAzuI98viKKumEEmzFgOp0RXPzfoJTiI9JXgGivYJrmbDbDhQfNs9n18tcS/83F4+PiBfPFP/G4XN7e/sQ4bj6fY+RoNBr8N1BsmuTu7v43v4VNG6/17KYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 4. &#x421;&#x43E;&#x432;&#x440;&#x435;&#x43C;&#x435;&#x43D;&#x43D;&#x44B;&#x439; &#x431;&#x440;&#x430;&#x443;&#x437;&#x435;&#x440;." title="" src="/static/4.1-modern-shot-44527e8c73da73783c3070cc0798b361-3cfde.png" srcset="/static/4.1-modern-shot-44527e8c73da73783c3070cc0798b361-ff448.png 163w,\n/static/4.1-modern-shot-44527e8c73da73783c3070cc0798b361-3cfde.png 180w" sizes="(max-width: 180px) 100vw, 180px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 4. &#x421;&#x43E;&#x432;&#x440;&#x435;&#x43C;&#x435;&#x43D;&#x43D;&#x44B;&#x439; &#x431;&#x440;&#x430;&#x443;&#x437;&#x435;&#x440;.</figcaption>\n</figure>\n<p>Нижний правый угол начинает обрезаться из-за наличия <code>hasLayout</code> на родительском элементе, поэтому нужен <code>position:relative</code>. На этом этапе уже становятся заметными особенности отображения VML. Края выглядят размытыми, а отступы надо подбирать вручную, не забывая перед этим убрать отступ и фон у родительского элемента, а в дальнейшем и рамку.</p>\n<h3>Завершающие штрихи</h3>\n<p>VML позволяет создавать заготовки, чтобы ссылаться на них при дальнейшем использовании. Это позволяет уменьшить размер страницы благодаря повторному использованию кода. Сделаем это, а заодно и соберём разные примеры использования на одной странице. Также укажем неоднородный фон, чтобы были видны основные преимущества:</p>\n<p><a href="/5-vml-roundies-3611ff747a10f88c2707ba8af69ed72e.html">Пример 5. Закруглённые уголки в VML</a>.</p>\n<pre><code>&#x3C;div class="round">\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>\n    &#x3C;v:shape type="#vml-round" class="round-vml"\n        stroked="false" fillcolor="#FFF">\n    &#x3C;![endif]--\x3e\n        Простые закруглённые уголки\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>&#x3C;/v:shape>&#x3C;![endif]--\x3e\n&#x3C;/div>\n&#x3C;div class="round border">\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>\n    &#x3C;v:shape type="#vml-round"\n        class="round-vml border-vml" adj="13"\n        fillcolor="#FFF" strokeweight="6px" strokecolor="#BADBAD">\n    &#x3C;![endif]--\x3e\n        Закруглённые уголки с рамкой\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>&#x3C;/v:shape>&#x3C;![endif]--\x3e\n&#x3C;/div>\n&#x3C;div class="round inline">\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>\n    &#x3C;v:shape type="#vml-round" class="round-vml inline-vml"\n        stroked="false" fillcolor="#FFF">\n    &#x3C;![endif]--\x3e\n        Простые закруглённые уголки в строку\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>&#x3C;/v:shape>&#x3C;![endif]--\x3e\n&#x3C;/div>\n&#x3C;div class="round inline border">\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>\n    &#x3C;v:shape type="#vml-round"\n        class="round-vml inline-vml border-vml" adj="13"\n        fillcolor="#FFF" strokeweight="6px" strokecolor="#BADBAD">\n    &#x3C;![endif]--\x3e\n        Закруглённые уголки с рамкой в строку\n    &#x3C;!--[if VML&#x26;(lt IE 9)]>&#x3C;/v:shape>&#x3C;![endif]--\x3e\n&#x3C;/div>\n</code></pre>\n<p>Теперь всё выглядит примерно так:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 36.407766990291265%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABpklEQVQY0x2KXU/TUACG+8+cP0GBqBdeeOuNFyZyZcKImoDDwfjoZt0yoWQbUsdWGX4McHQTBvtg55yWrd05p+162tO58BucJE+ePMn7Ck/j7mzMe7TizcW8h8uj2fejB0vuzLLzOM6exL2ZGLsXDe4vBpEoi0T9O3uRhdGzrbGY/C38PDrGxlW/d2nprT5omqhF+h1stD2MAsdgBHkY+ARyR/cpZAQw0vMpIEbLNjtCqaj6nmWZaHBzTYa665g8sENuh6HDuTMO3ZA7UwJGx/9N2Gg4XekQ2hYUypUjGyPLhJQYlgmwBQOf3L0xD+i0fYbD0Oaccp9O/rLJhN3ectcd2AQK+Z086mqg0wDdRveqBtqafn1eUdLwpmlRaBIwwL2ho9vM7KF6bjO6J76V1xaSiy9Q81QoZD6jxq/6YVH7plxW1fqh8qdSVLOr2rGiVYsXNfX8tFz7vlevHpz9yGffvNx+90pempdeP9ebJ4KYyCjSh/30enknpcqpfWn1y6c1dffjwfZWSU4qmfWcGMuJK0o68TW7WZA2ClKitCuV5VT74uwf3P456nmpUwIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 5. Internet Explorer 6." title="" src="/static/5-shot-b098a67df042a9d70dcbf49c174f2874-ce0d4.png" srcset="/static/5-shot-b098a67df042a9d70dcbf49c174f2874-a6060.png 163w,\n/static/5-shot-b098a67df042a9d70dcbf49c174f2874-1a895.png 325w,\n/static/5-shot-b098a67df042a9d70dcbf49c174f2874-ce0d4.png 650w,\n/static/5-shot-b098a67df042a9d70dcbf49c174f2874-55c08.png 824w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; 5. Internet Explorer 6.</figcaption>\n</figure>\n<p>Фигура задаётся с помощью <code>shapetype</code>, затем конкретные применения ссылаются на её с помощью <code>type="#vml-round"</code>.</p>\n<p>Радиус закругление задаётся с помощью параметра <code>adj</code>. Можно определить в заготовке значение по умолчанию и переопределять его по мере необходимости. Толщина и цвет обрамления задаются с помощью <code>strokeweight</code> и <code>strokecolor</code> соответственно.</p>\n<p>Здесь во всей красе видны недостатки подхода. Способ достаточно трудоёмкий, особенно при эмуляции рамки. VML требует отдельного прописывания свойств, которые обычно задаются через CSS: цвет фона, параметры рамки, радиус закругления. В версии CSS для Internet Explorer надо отдельно переназначать и подгонять значения отступов. Механизм отрисовки элемента с рамкой отличается от обычного CSS, из-за чего и нужно вручную подбирать параметры.</p>\n<p>Вдобавок, в 6 и 7 версии IE при использовании блочных вариантов, появляется горизонтальная полоса прокрутки, с которой, видимо, надо бороться отдельно — в примере по ссылке для этого используется обрамляющий элемент.</p>\n<p>VML позволяет <a href="http://msdn.microsoft.com/en-us/library/bb264134(v=VS.85).aspx">определённые действия над рамками</a>, но если вы захотите сделать неоднородную рамку, то придётся повозиться отдельно. В текущей предварительной версии IE9 пример не работает в режиме совместимости со старыми браузерами.</p>\n<p>Тем не менее этот способ позволяет решить вопрос создания закруглённых уголков на произвольном фоне без использования картинок, а также при определённой доработке способен в перспективе решить более сложные вопросы: такие как использование градиентов и теней.</p>\n<p>Производительность и потребление ресурсов на глаз лучше, чем при использовании фильтров.</p>',headings:[{depth:1,value:"Кроссбраузерные закруглённые уголки"},{depth:2,value:"Существующие решения"},{depth:2,value:"А что же Internet Explorer?"},{depth:2,value:"Изучаем VML"},{depth:3,value:"Сложности"},{depth:3,value:"Формулы"},{depth:3,value:"Приступаем к главному"},{depth:3,value:"Позиционирование"},{depth:3,value:"Завершающие штрихи"}],frontmatter:{title:"Кроссбраузерные закруглённые уголки"}}},{node:{html:'<h1>Архитектура CSS</h1>\n<p><a href="http://philipwalton.com">Филип Уолтон</a> 20 февраля 2014</p>\n<p>Мерой хорошего знания CSS для многих веб-разработчиков является то, насколько идеально ты можешь воссоздать в коде данный тебе макет. Ты не используешь таблицы и гордишься собой, когда сводишь к минимуму графику. Если ты действительно хорош, то работаешь с самыми новыми и лучшими техниками — вроде медиавыражений, переходов и трансформаций. Это правда, хорошие CSS-разработчики действительно всё это умеют. Однако существует совсем другая сторона CSS, которая редко упоминается, когда речь заходит об оценке чьих-то способностей.</p>\n<p>Что интересно, обычно мы не упускаем из вида эту сторону, когда дело касается других языков. Разработчик на Rails не считается хорошим только потому, что его код работает по спецификации. Это считается базовым уровнем. Конечно, он должен работать по спецификации, но его качество измеряется другим: насколько код читаемый, легко ли его изменить или расширить, достаточно ли он отделён от других частей приложения, будет ли он масштабироваться?</p>\n<p>Эти вопросы вполне естественны при оценке кода, и CSS здесь не должен быть исключением. Сегодняшние веб-приложения становятся всё более крупными, поэтому слабая и прямолинейная архитектура CSS может сильно усложнить разработку. Пришло время отнестись к CSS так же, как мы относимся ко всем другим частям наших приложений. Это не та вещь, которая может быть оставлена на потом или сброшена со счетов как «дизайнерская проблема».</p>\n<h2>Принципы хорошей архитектуры CSS</h2>\n<p>CSS-сообществу редко удаётся прийти к договорённости, что и как нужно делать. Даже если взглянуть только на <a href="http://news.ycombinator.com/item?id=2658948">комментарии с Hacker News</a> или на <a href="http://2002-2012.mattwilcox.net/archive/entry/id/1054/">реакцию разработчиков</a> на выход <a href="http://csslint.net/">CSS Lint</a>, станет ясно, что многие не согласны друг с другом даже по поводу самых базовых вещей, которые стоит или не стоит делать при разработке.</p>\n<p>Поэтому вместо того, чтобы разворачивать перед вами мой собственный список правил, я скажу, что нам стоит определиться с принципами. Если мы сможем договориться о принципах, возможно, мы начнем замечать плохой CSS не только потому, что он нарушает наши принципы и убеждения о том, что есть хорошо, но и потому, что он на самом деле усложняет процесс разработки.</p>\n<p>Мне кажется, что принципы хорошей архитектуры CSS не сильно отличаются от целей разработки хорошего ПО. Я хочу, чтобы мой CSS был предсказуемым, его можно было использовать повторно, легко поддерживать и масштабировать.</p>\n<h3>Предсказуемость</h3>\n<p>Предсказуемость для CSS означает, что ваши правила ведут себя ожидаемо. Когда вы добавляете или изменяете какое-то правило, оно не должно влиять на части сайта, которые вы не собирались менять.</p>\n<p>Это вряд ли необходимо маленьким сайтам, которые редко изменяются, но для больших сайтов с десятками или сотнями страниц предсказуемый CSS необходим.</p>\n<h3>Повторное использование</h3>\n<p>CSS-правила должны быть достаточно абстрактны и независимы, чтобы можно было быстро создать новые компоненты из существующих частей без необходимости что-то переписывать или снова бороться с уже решёнными проблемами.</p>\n<h3>Поддержка</h3>\n<p>Когда нужно добавить или изменить новые компоненты или возможности, это не должно приводить к рефакторингу существующего CSS. Добавление компонента А на страницу не должно своим появлением ломать компонент Б.</p>\n<h3>Масштабируемость</h3>\n<p>Растущий в размерах и сложности сайт обычно требует для поддержки большего числа разработчиков. Масштабируемость для CSS означает, что он с лёгкостью может поддерживаться как одним человеком, так и большой командой разработчиков. Также это значит, что архитектура CSS вашего сайта достаточно доступна и не требует чрезмерных усилий для понимания. То, что вы сегодня единственный разработчик, имеющий дело с CSS, не значит, что так будет всегда.</p>\n<h2>Распространённые ошибки</h2>\n<p>Прежде чем перейти к способам соответствия нашим принципам с помощью хорошей архитектуры CSS, мне кажется, будет полезно взглянуть на распространённые ошибки, которые противоречат этим принципам. Часто бывает, что только через повторение ошибок мы можем прийти к пониманию альтернативного пути.</p>\n<p>Следующие примеры обобщают код, который я писал сам. Технически они верны, но каждый из них привёл к проблемам и головной боли. Несмотря на мои самые лучшие намерения и обещания себе, что на этот раз всё будет по-другому, описанные подходы снова приводили к неприятностям.</p>\n<h3>Изменение компонентов в зависимости от родителя</h3>\n<p>Почти на каждом сайте в сети найдётся определённый визуальный элемент, который выглядит одинаково во всех случаях, кроме одного. Встречаясь с такой исключительной ситуацией, почти каждый новичок в CSS (и даже опытные разработчики) поступают одинаково. Они выясняют некоторого уникального родителя исключительно для этого случая (или создают такого) и пишут нужный селектор.</p>\n<pre><code>.widget {\n    background: yellow;\n    border: 1px solid black;\n    color: black;\n    width: 50%;\n}\n\n#sidebar .widget {\n    width: 200px;\n}\n\nbody.homepage .widget {\n    background: white;\n}\n</code></pre>\n<p>На первый взгляд этот код выглядит вполне безобидно, но давайте проверим его на соответствие принципам, которые мы определили выше.</p>\n<p>Во-первых, виджет в этом примере непредсказуем. Разработчик, уже сделавший несколько таких виджетов, ожидает, что они будут выглядеть определённым образом, однако в боковой колонке и на главной странице они будут выглядеть иначе, несмотря на одинаковую разметку.</p>\n<p>Также этот блок плохо масштабируется и не слишком подходит для повторного использования. Что случится, когда его вид на главной понадобится на какой-нибудь другой странице? Придётся добавить новый селектор.</p>\n<p>Наконец, этот блок сложен в поддержке потому, что если дизайн виджета изменится, это потребует обновления стилей в нескольких местах. И в отличие от примера выше, правила, приводящие к подобным проблемам, редко так же следуют друг за другом.</p>\n<p>Представьте, если бы такой код был написан на любом другом языке. Вы создаёте обычное определение класса и потом, в другой части кода, берёте это определение класса и меняете его для определённого случая. Это прямо противоречит принципу <a href="http://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF_%D0%BE%D1%82%D0%BA%D1%80%D1%8B%D1%82%D0%BE%D1%81%D1%82%D0%B8/%D0%B7%D0%B0%D0%BA%D1%80%D1%8B%D1%82%D0%BE%D1%81%D1%82%D0%B8">открытости и закрытости</a> для разработки ПО:</p>\n<blockquote>\n<p>Части ПО (классы, модули, функции и т.п.) должны быть открыты для расширения, но закрыты для изменения.</p>\n</blockquote>\n<p>Далее в статье мы рассмотрим, как изменять компоненты, не опираясь на родительский селектор.</p>\n<h3>Слишком сложные селекторы</h3>\n<p>Удивительно, но эта статья обойдёт стороной демонстрацию всей мощи CSS-селекторов и не расскажет о том, как оформить целый сайт, не используя ни единого класса или ID.</p>\n<p>Технически это возможно, но чем больше я работаю с CSS, тем больше стараюсь держаться подальше от сложных селекторов. Чем сложнее селектор, тем больше он привязан к HTML. Опираясь на HTML-теги и комбинаторы в селекторе, вы, может быть, и получите чистый до блеска HTML, но CSS от этого станет грязным и раздутым.</p>\n<pre><code>#main-nav ul li ul li div { }\n#content article h1:first-child { }\n#sidebar > div > h3 + p { }\n</code></pre>\n<p>Все эти примеры логически верны. Первый, по-видимому, оформляет выпадающее меню, второй говорит, что заголовок в <code>&#x3C;article></code> должен выглядеть иначе, чем остальные элементы <code>&#x3C;h1></code>, а последний пример, скорее всего, добавляет отступ к первому абзацу в блоках боковой колонки.</p>\n<p>Если бы этот HTML никогда не изменился, можно было бы согласиться с таким подходом. Но насколько реалистичным будет предположить, что HTML никогда не изменится? Чересчур сложные селекторы могут выглядеть впечатляюще и даже помогут обойтись без презентационной разметки в HTML, но вряд ли они помогут соответствовать нашим принципам хорошей архитектуры CSS.</p>\n<p>Упомянутые примеры совсем не готовы для повторного использования. Поскольку селектор указывает на очень конкретную часть разметки, то как может другой компонент с иной структурой HTML использовать эти стили? Возьмём для примера первый селектор (выпадающее меню) — что, если похожее меню понадобится на другой странице, на которой не будет элемента <code>#main-nav</code>? Тогда вам придётся повторить все стили.</p>\n<p>Эти селекторы также очень непредсказуемы в случае, когда меняется оригинальный HTML. Представим, что разработчик решил поменять тег <code>&#x3C;div></code> в третьем примере на <code>&#x3C;section></code> — в результате весь селектор развалится.</p>\n<p>И наконец: поскольку эти селекторы работают, только когда HTML остаётся неизменным, они по определению не поддерживаемы и не масштабируемы.</p>\n<p>В больших веб-приложениях приходится идти на уступки и компромиссы. Цена хрупких и сложных селекторов неоправданно высока, чтобы использовать их во имя чистого HTML.</p>\n<h3>Слишком общие имена классов</h3>\n<p>При создании повторно используемых компонентов зачастую принято ограничивать область действия (ага, если бы) вложенных элементов в рамках имени класса компонента. Например:</p>\n<pre><code>&#x3C;div class="widget">\n    &#x3C;h3 class="title">…&#x3C;/h3>\n    &#x3C;div class="contents">\n        Лорем ипсум…\n        &#x3C;button class="action">Жми сюда!&#x3C;/button>\n    &#x3C;/div>\n&#x3C;/div>\n\n.widget {}\n.widget .title {}\n.widget .contents {}\n.widget .action {}\n</code></pre>\n<p>Идея состоит в том, что классы вложенных элементов <code>.title</code>, <code>.contents</code> и <code>.action</code> можно безопасно оформить, не боясь, что стили повлияют на элементы с такими же классами. Это, конечно, так, но совсем не значит, что эти стили не повлияют на элементы с таким же классом, которые могут оказаться внутри.</p>\n<p>На больших проектах высока вероятность того, что имя класса, скажем, <code>.title</code> будет использовано в другом контексте или даже само по себе. Если такое произойдёт, то заголовок виджета вдруг станет выглядеть иначе.</p>\n<p>Слишком общие имена классов приводят к непредсказуемому CSS.</p>\n<h3>Когда правило делает слишком много</h3>\n<p>Однажды вы создаёте визуальный компонент, который должен отстоять на 20 пикселей от верхнего левого угла блока на вашем сайте:</p>\n<pre><code>.widget {\n    position: absolute;\n    top: 20px;\n    left: 20px;\n    background-color: red;\n    font-size: 1.5em;\n    text-transform: uppercase;\n}\n</code></pre>\n<p>И тут по ходу дела обнаруживается, что вам нужен такой же компонент, но в другом месте. CSS выше не справится с такой ситуацией потому, что он не готов к повторному использованию.</p>\n<p>Проблема в том, что вы делаете с помощью одного селектора сразу слишком многое. Вы описываете внешний вид блока вместе с раскладкой и позиционированием в одном правиле. Внешний вид можно использовать повторно, раскладку и позиционирование — нет. И поскольку они описаны вместе, всё правило скомпрометировано.</p>\n<p>На первый взгляд это кажется безобидным, но часто приводит к копированию кода из одного места в другое, особенно менее опытными разработчиками. Если новый член команды захочет сделать что-то похожее на конкретный компонент, скажем <code>.infobox</code>, вероятнее всего, он начнёт с того, что применит этот класс. Но если это не сработает из-за того, что в других условиях этот блок спозиционируется совсем не так, как нужно, то что он скорее всего сделает? По моему опыту, большинство молодых разработчиков не разобьют правило на удобные для повторного использования части. Вместо этого они просто скопируют строки кода, необходимые для этого конкретного случая, в новый селектор, дублируя код без необходимости.</p>\n<h2>Причина</h2>\n<p>Упомянутые выше проблемные примеры объединяет одна особенность: все они слишком полагаются на оформление CSS.</p>\n<p>Это заявление может прозвучать странно. В конце концов, это же стили. Разве не должны они нести большую (если не всю) нагрузку для оформления? Не этого ли мы хотим?</p>\n<p>Простой ответ на этот вопрос «да», но, как обычно, всё не так просто. Разделять содержимое и представление хорошо, но содержимое не отделяется от представления только потому, что ваш CSS отделён от HTML. Скажем иначе: вы не достигнете цели, если просто уберёте всё представление из HTML, но при этом для работы вашего CSS потребуется подробнейшее знание структуры HTML.</p>\n<p>Более того, HTML редко состоит только из содержимого, почти всегда в нём есть и структура. И часто эта структура состоит из контейнеров, единственной задачей которых является объединение некоторой группы элементов для работы CSS. Даже без презентационных классов такие структуры добавляют представление в HTML-код. Но действительно ли это смешивает содержимое с представлением?</p>\n<p>Я уверен, что на текущем уровне развития HTML и CSS необходимо и зачастую разумно использовать HTML и CSS в качестве единого слоя представления. Слой содержимого в таком случае может быть отделён с помощью шаблонизаторов или подключаемых фрагментов (как partials в Ruby).</p>\n<h2>Решение</h2>\n<p>Если HTML и CSS будут работать одним слоем для создания представления вашего веб-приложения, они должны делать это так, чтобы соответствовать всем принципам хорошей архитектуры CSS.</p>\n<p>Лучший подход, который мне удалось найти, состоит в том, чтобы как можно меньше опираться на структуру HTML в CSS. CSS должен определять как выглядит набор визуальных элементов. Для минимизации влияния HTML эти элементы должны выглядеть ровно так, как они описаны, независимо от того, где они находятся в HTML. Если некоторые компоненты должны выглядеть по-разному в разных ситуациях, они должны быть вызваны по-другому, и отвечать за этот вызов должен HTML.</p>\n<p>Например, в CSS с помощью класса <code>.button</code> описан компонент кнопки. Если в HTML понадобится конкретный элемент, который выглядит как кнопка, то нужно использовать этот класс. Если в другой ситуации этой кнопке понадобится выглядеть иначе (скажем, больше и в полную ширину), в CSS нужно определить этот новый вид, также с помощью класса, и тогда его можно будет добавить в HTML для достижения нужного вида.</p>\n<p>CSS определяет, как выглядит ваш компонент, а HTML применяет этот вид к элементам на странице. Чем меньше CSS «знает» про структуру HTML, тем лучше.</p>\n<p>Большой плюс указания всего, что нужно, прямо в HTML в том, что это позволяет другим разработчикам, глядя на разметку, точно понимать, как должен выглядеть этот элемент. Мотивы здесь очевидны. Без этого подхода невозможно сказать, является ли вид элемента намеренным или случайным, что приводит к непониманию в команде разработчиков.</p>\n<p>Дополнительные усилия для написания классов в разметке обычно становятся главным аргументом против. Одно правило в CSS может быть направлено на тысячи экземпляров конкретного компонента. Действительно ли стоит писать эти классы тысячу раз только для того, чтобы явно их указать в разметке?</p>\n<p>Несмотря на то, что эти сомнения справедливы, они могут привести к ошибочным выводам. Вывод такой: либо вы используете родительский селектор в CSS, либо вам придётся написать этот HTML-класс тысячу раз руками. Но, очевидно, есть и другие варианты. Уровень абстракции компонентов в Rails и других фреймворках легко позволяет явно описывать внешний вид прямо в HTML без необходимости снова и снова писать один и тот же класс.</p>\n<h2>Правильный подход</h2>\n<p>Совершив описанные выше ошибки снова и снова, заплатив позднее за их последствия, я пришёл к некоторым принципам. Не претендуя не всеобъемлемость, мой опыт показывает, что эти принципы помогут достичь хорошей архитектуры CSS.</p>\n<h3>Будьте точнее</h3>\n<p>Лучший способ добиться того, чтобы ваши селекторы не влияли на ненужные элементы — это не дать им такой возможности. Со временем вы можете обнаружить, что селектор вроде <code>#main-nav ul li ul li div</code> применяется уже совсем не к тому элементу из-за изменившейся разметки. Класс <code>.subnav</code>, напротив, имеет очень мало шансов быть случайно применённым не к тому элементу. Назначать классы прямо элементам, которые вы хотите оформить — лучший способ сохранить ваш CSS предсказуемым.</p>\n<pre><code>/* Граната */\n#main-nav ul li ul { }\n\n/* Снайперская винтовка */\n.subnav { }\n</code></pre>\n<p>Если взять два примера выше, то первый больше напоминает гранату, а второй снайперскую винтовку. Граната может прекрасно сработать сегодня, но кто может гарантировать, что завтра в радиус поражения не попадёт невинный гражданский?</p>\n<h3>Разделяйте ответственность</h3>\n<p>Я уже упоминал, что хорошо организованный компонентный слой может уменьшить зависимость CSS от структуры HTML. Помимо этого, сами компоненты должны быть модульными. Компоненты должны знать только, как оформить себя, и делать это хорошо. Но они совсем не должны отвечать за раскладку, позиционирование или делать слишком много предположений насчёт того, в каком окружении они будут располагаться.</p>\n<p>В общем случае компоненты должны определять свой внешний вид, а не раскладку и позиционирование. Будьте осторожны, когда видите свойства вроде <code>background</code>, <code>color</code> и <code>font</code> в одном правиле с <code>position</code>, <code>width</code>, <code>height</code> и <code>margin</code>.</p>\n<p>Раскладку и позиционирование стоит задавать либо отдельным классом для раскладки, либо использовать для этого отдельный элемент. (Помните, что для эффективного разделения содержимого и представления часто необходимо отделить содержимое от его контейнера).</p>\n<h3>Задайте пространство имён</h3>\n<p>Мы уже выяснили, почему родительские селекторы не всегда на 100% эффективны для ограничения действия и пересечения стилей. Гораздо лучший подход — добавить пространство имён к самим классам. Если элемент является частью визуального компонента, то каждый из классов его вложенных элементов должен использовать имя класса базового компонента в качестве пространства имён.</p>\n<pre><code>/* Высокий риск пересечения имён классов */\n.widget { }\n.widget .title { }\n\n/* Низкий риск пересечения имён классов */\n.widget { }\n.widget-title { }\n</code></pre>\n<p>Добавление пространства имён к классам делает ваши компоненты самодостаточными и модульными. Это также уменьшает вероятность конфликтов с уже существующими классами и снижает специфичность, необходимую для оформления дочерних элементов.</p>\n<h3>Расширяйте компоненты модификаторами классов</h3>\n<p>Когда существующий компонент должен выглядеть чуть иначе в некотором контексте, создайте модификатор класса, чтобы расширить его.</p>\n<pre><code>/* Плохо */\n.widget { }\n#sidebar .widget { }\n\n/* Хорошо */\n.widget { }\n.widget-sidebar { }\n</code></pre>\n<p>Мы уже рассмотрели все недостатки изменения компонентов на основе их родительских элементов, но для закрепления: модификатор класса может использоваться где угодно, переопределение на основе вложенности — только в конкретной ситуации. Модификатор класса также может использоваться сколько угодно раз. Наконец, модификаторы класса очень ясно выражают намерения разработчика прямо в HTML. Классы, основанные на вложенности, напротив, полностью скрыты для разработчика, который смотрит только на HTML, что сильно увеличивает вероятность, что они от него ускользнут.</p>\n<h3>Организуйте CSS в логическую структуру</h3>\n<p><a href="http://snook.ca/">Джонатан Снук</a> в своей замечательной книге <a href="http://smacss.com/">SMACSS</a> убеждает разделять CSS-правила на четыре отдельные категории: базовые, раскладку, модули и состояния. Базовые состоят из сбросов и умолчаний для элементов. Раскладка — для расположения глобальных элементов сайта, а также общих вспомогательных вещей вроде модульных сеток. Модули — это визуальные элементы для повторного использования и стили состояний для оформления того, что можно включить или выключить с помощью JavaScript.</p>\n<p>В системе SMACSS модули (эквивалентные тому, что я называю компонентами) составляют большинство от всех правил в CSS, поэтому я часто прихожу к необходимости разбить их ещё больше, отделив абстрактные шаблоны.</p>\n<p>Компоненты — это отдельные визуальные элементы. Шаблоны, напротив, скорее строительные блоки. Шаблоны не живут сами по себе и редко описывают внешний вид. Они являются одиночными повторяемыми элементами, из которых можно собрать компонент.</p>\n<p>Приведём конкретный пример: компонент может быть модальным диалоговым окном. Это окно может иметь специальный для этого сайта градиент в заголовке, какую-то тень вокруг, кнопку закрытия в правом верхнем углу, а также фиксированное положение и выравнивание в центре по вертикали и горизонтали. Все четыре свойства этого окна могут быть повторно использованы по всему сайту, поскольку вы вряд ли захотите описывать эти свойства снова и снова. Таким образом, все они являются шаблонами, которые вместе образуют компонент диалогового окна.</p>\n<p>Обычно я не использую классы шаблонов прямо в HTML, если для этого нет веских причин. Вместо этого я использую препроцессоры для включения стилей шаблона в описание компонента. Далее мы обсудим подробнее этот подход и мои причины для его использования.</p>\n<h3>Используйте классы строго для оформления</h3>\n<p>Каждый, кто работал с большим проектом, когда-нибудь сталкивался с HTML-элементом, имеющим класс, назначение которого остаётся загадкой. Вам хочется удалить его, но вы сомневаетесь, потому что у него может оказаться применение, о котором вы не знаете. И когда это случается снова и снова, ваш HTML заполняется классами, которые не несут никакой пользы, — только потому, что члены команды боятся их удалить.</p>\n<p>Проблема в том, что во фронтенд-разработке принято наделять классы слишком многими ролями. Они оформляют HTML, на них опирается JavaScript, их добавляют в HTML для определения поддержки возможностей, используют для автоматических тестов и т.д.</p>\n<p>Это проблема. Когда к классам обращаются слишком многие составляющие приложения, становится страшно удалять их из HTML.</p>\n<p>Тем не менее, устоявшиеся договорённости помогут полностью избежать этой проблемы. Когда вы видите класс в HTML, вы должны быть способны чётко сказать, для чего он предназначен. Мой совет — добавлять префикс ко всем неоформительским классам. Я использую <code>.js-</code> для JavaScript и <code>.supports-</code> для классов Modernizr. Все классы без префикса — для оформления и только для оформления.</p>\n<p>Это позволяет искать неиспользуемые классы и удалять их из HTML простым поиском по папке со стилями. Вы можете даже автоматизировать этот процесс с помощью JavaScript, сравнивая классы в HTML с классами в объекте <code>document.styleSheets</code>. Классы, которых нет в <code>document.styleSheets</code>, можно безопасно удалять.</p>\n<p>Итак, полезно разделять содержимое и представление, и столь же важно отделять представление от поведения. Использование классов с оформлением в качестве основы для JavaScript так сильно связывает CSS с JavaScript, что становится сложно или даже невозможно обновить оформление некоторых элементов, не сломав их поведение.</p>\n<h3>Логическая структура в именах классов</h3>\n<p>Сегодня большинство пишет CSS с дефисами в качестве разделителя для слов. Но только дефисов обычно недостаточно, чтобы различать между собой разные типы классов.</p>\n<p><a href="http://nicolasgallagher.com">Николас Галлахер</a> недавно написал <a href="http://nicolasgallagher.com/about-html-semantics-front-end-architecture/">о своем решении этой проблемы</a>, которое я тоже (с некоторыми изменениями) с большим успехом применил. Чтобы проиллюстрировать необходимость в договорённости об именовании, рассмотрим следующий пример:</p>\n<pre><code>/* Компонент */\n.button-group { }\n\n/* Модификатор компонента (изменяющий .button) */\n.button-primary { }\n\n/* Вложенный объект (находится внутри .button) */\n.button-icon { }\n\n/* Это класс компонента или раскладки? */\n.header { }\n</code></pre>\n<p>Глядя на классы выше, нельзя сказать, к какому типу правил они применяются. Это не только добавляет путаницы при разработке, но и усложняет автоматическое тестирование вашего HTML и CSS. Структурированная договорённость об именовании позволяет с первого взгляда на имя класса точно понять, в каких отношениях он состоит с другими классами и в каком месте HTML должен располагаться — что, в отличие от обычной практики, упрощает именование и делает возможным тестирование.</p>\n<pre><code>/* Правила шаблонов (с использованием Sass) */\n%template-name\n%template-name--modifier-name\n%template-name__sub-object\n%template-name__sub-object--modifier-name\n\n/* Правила компонентов */\n.component-name\n.component-name--modifier-name\n.component-name__sub-object\n.component-name__sub-object--modifier-name\n\n/* Правила для раскладки */\n.l-layout-method\n.grid\n\n/* Правила состояний */\n.is-state-type\n\n/* Классы для JavaScript без оформления */\n.js-action-name\n</code></pre>\n<p>Переработанный первый пример:</p>\n<pre><code>/* Компонент */\n.button-group { }\n\n/* Модификатор компонента (изменяющий .button) */\n.button--primary { }\n\n/* Вложенный объект (находится внутри .button) */\n.button__icon { }\n\n/* Класс раскладки */\n.l-header { }\n</code></pre>\n<h2>Инструменты</h2>\n<p>Поддержка эффективной и хорошо организованной архитектуры CSS может быть очень сложной, особенно в больших командах. Несколько плохих правил здесь, несколько там — и снежный ком неразрешимых проблем уже покатился. Когда CSS вашего приложения уже дошел до войн за специфичность и сомнительных побед за счёт <code>!important</code>, может оказаться, что пути назад уже нет, разве что переписать всё с нуля.</p>\n<p>К счастью, есть инструменты, которые позволят гораздо проще контролировать архитектуру CSS вашего сайта.</p>\n<h3>Препроцессоры</h3>\n<p>Сегодня сложно говорить про инструменты для CSS и не упомянуть препроцессоры, и эта статья не будет исключением. Но прежде чем я воспою их ценность, мне следует коротко предостеречь вас.</p>\n<p>Препроцессоры помогают писать CSS быстрее, но не качественнее. В конце концов код превращается в обычный CSS, к которому применяются все те же правила. Если препроцессор помогает вам писать CSS быстрее, он так же помогает быстрее писать плохой CSS, поэтому важно понимать, что такое хорошая архитектура CSS, а не просто думать, что препроцессор решит все ваши проблемы.</p>\n<p>Некоторые так называемые «фичи» препроцессоров на самом деле могут навредить архитектуре CSS. Следующих возможностей я категорически стараюсь избегать (хотя основная идея применима ко всем препроцессорам, эти правила относятся в большей степени к Sass):</p>\n<ul>\n<li>Никогда не вкладывайте правила только для организации кода. Вкладывайте только тогда, когда это нужно в CSS на выходе.</li>\n<li>Никогда не используйте примеси (mixin), если не передаёте аргумент. Примеси без аргументов гораздо лучше использовать в качестве шаблонов, которые можно расширить.</li>\n<li>Никогда не используйте <code>@extend</code> для селектора, который не является одиночным классом. Это не имеет смысла с точки зрения дизайна и раздувает скомпилированный CSS.</li>\n<li>Никогда не используйте <code>@extend</code> для компонентов интерфейса в модификаторе компонента, иначе вы нарушаете цепь наследования (подробнее об этом дальше).</li>\n</ul>\n<p>Лучшая часть препроцессоров — это функции, вроде <a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend"><code>@extend</code></a> и <a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#placeholder_selectors_"><code>%placeholder</code></a>. Обе они позволяют просто управлять абстракциями в CSS, при этом не раздувая код и обходясь без добавления в HTML огромного количества базовых классов, с которыми потом очень сложно управиться.</p>\n<p><code>@extend</code> нужно использовать с осторожностью, потому что иногда эти классы будут нужны в HTML. Например, когда вы впервые узнаёте про <code>@extend</code>, то его сразу хочется применить ко всем классам-модификаторам как-то так:</p>\n<pre><code>.button {\n    /* Стили кнопки */\n}\n\n/* Плохо */\n.button--primary {\n    @extend .button;\n    /* Стили модификатора */\n}\n</code></pre>\n<p>Проблема с этим подходом в том, что вы теряете цепь наследования в HTML. Теперь довольно сложно выбрать все экземпляры кнопки с помощью JavaScript.</p>\n<p>Как правило, я не расширяю компоненты интерфейса или что-то другое, тип чего мне может пригодиться знать в будущем. Для этого случая как раз и придуманы компоненты, и это ещё один способ, помогающий отличать шаблоны от компонентов. Шаблон — это нечто, к чему вы никогда не обратитесь в логике вашего приложения, и поэтому его можно безопасно расширить с помощью препроцессора.</p>\n<p>Как это может выглядеть на примере модального окна, о котором шла речь выше:</p>\n<pre><code>.modal {\n    @extend %dialog;\n    @extend %drop-shadow;\n    @extend %statically-centered;\n    /* Другие стили окна */\n}\n\n.modal__close {\n    @extend %dialog__close;\n    /* Другие стили кнопки закрытия */\n}\n\n.modal__header {\n    @extend %background-gradient;\n    /* Другие стили заголовка окна */\n}\n</code></pre>\n<h3>CSS Lint</h3>\n<p><a href="http://www.stubbornella.org/">Николь Салливан</a> и <a href="http://www.nczonline.net/">Николас Закас</a> создали <a href="http://csslint.net/">CSS Lint</a>, инструмент для контроля за качеством кода, который помогает разработчикам находить плохие подходы в их CSS. На сайте он описан так:</p>\n<blockquote>\n<p>CSS Lint указывает на проблемы в вашем CSS-коде. Он делает базовую проверку синтаксиса, а также применяет к коду набор правил, которые позволяют выделить в нём проблемные подходы или признаки неэффективности. Все правила расширяемы, потому вы легко можете написать свои или пропустить ненужные.</p>\n</blockquote>\n<p>И если набор правил по умолчанию может не подходить идеально для большинства проектов, главная особенность CSS Lint в том, что он может быть настроен в точности как вам нужно. Это значит, что вы можете взять правила из списка по умолчанию и выбрать нужные, а также написать собственные.</p>\n<p>Инструмент вроде CSS Lint необходим любой большой команде, чтобы поддерживать в коде, как минимум, базовую последовательность и соответствие договорённостям. Как я уже упоминал раньше, одна из главных ценностей таких договорённостей в том, что с помощью инструментов вроде CSS Lint можно просто выявить то, что их нарушает.</p>\n<p>Основываясь на договорённостях, которые я предложил выше, очень легко написать правила для определения неверных подходов. Вот несколько правил, которые я использую:</p>\n<ul>\n<li>Не допускайте ID в своих селекторах.</li>\n<li>Не используйте несемантические типы селекторов (div и span, напр.) для любого неодиночного правила.</li>\n<li>Не используйте больше двух комбинаторов в селекторе.</li>\n<li>Не допускайте использование классов, начинающихся с <code>.js-</code>.</li>\n<li>Внимание, если раскладка и позиционирование применяются в правилах для элементов без префикса <code>.l-</code> в названии класса.</li>\n<li>Внимание, если класс, определённый сам по себе, позднее переопределяется как дочерний или иначе.</li>\n</ul>\n<p>Это, конечно, всего лишь возможные варианты, но они предложены для того, чтобы направить ваши мысли в сторону контроля стандартов, использующихся в коде вашего проекта.</p>\n<h3>HTML Inspector</h3>\n<p>Ранее я предположил, что будет довольно просто пройтись по вашим HTML-классам и всем подключенным стилям и выдать предупреждение, если класс был использован в HTML, но не определён ни в одном файле стилей. Сейчас я разрабатываю инструмент, который называется <a href="https://github.com/philipwalton/html-inspector">HTML Inspector</a>, чтобы сделать этот процесс проще.</p>\n<p>HTML Inspector проходит по вашему HTML и (почти как CSS Lint) позволяет вам написать собственные правила, которые вызывают ошибки или предупреждения, когда какие-то договорённости нарушаются. Сейчас я использую следующие правила:</p>\n<ul>\n<li>Внимание, если один и тот же ID используется на странице два раза.</li>\n<li>Не используйте классы, не упомянутые ни в одном из файлов стилей или передайте список разрешённых (с префиксом <code>.js-</code>, напр.)</li>\n<li>Классы модификаторов не должны использоваться без их базовых классов.</li>\n<li>Классы вложенных объектов не должны использоваться в отсутствие родительского базового класса.</li>\n<li>Простые элементы <code>&#x3C;div></code> и <code>&#x3C;span></code> не должны использоваться в HTML без назначенных классов.</li>\n</ul>\n<h2>Заключение</h2>\n<p>CSS — это не просто средство визуального дизайна. Не стоит забывать о правильных подходах к программированию только потому, что вы пишете CSS. Подходы вроде ООП, DRY, принцип открытости и закрытости, разделение ответственности и т.п. также применимы к CSS.</p>\n<p>Главная мысль вот в чем: что бы вы ни делали для организации вашего кода, убедитесь, что вы оцениваете свои действия по тому, помогают ли они сделать проще разработку и поддержку кода в будущем.</p>\n<p>Перевод оригинальной записи «<a href="http://philipwalton.com/articles/css-architecture/">CSS Architecture</a>» Филипа Уолтона (Philip Walton). Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод <a href="http://pepelsbey.net">Вадима Макеева</a>, редактура <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Архитектура CSS"},{depth:2,value:"Принципы хорошей архитектуры CSS"},{depth:3,value:"Предсказуемость"},{depth:3,value:"Повторное использование"},{depth:3,value:"Поддержка"},{depth:3,value:"Масштабируемость"},{depth:2,value:"Распространённые ошибки"},{depth:3,value:"Изменение компонентов в зависимости от родителя"},{depth:3,value:"Слишком сложные селекторы"},{depth:3,value:"Слишком общие имена классов"},{depth:3,value:"Когда правило делает слишком много"},{depth:2,value:"Причина"},{depth:2,value:"Решение"},{depth:2,value:"Правильный подход"},{depth:3,value:"Будьте точнее"},{depth:3,value:"Разделяйте ответственность"},{depth:3,value:"Задайте пространство имён"},{depth:3,value:"Расширяйте компоненты модификаторами классов"},{depth:3,value:"Организуйте CSS в логическую структуру"},{depth:3,value:"Используйте классы строго для оформления"},{depth:3,value:"Логическая структура в именах классов"},{depth:2,value:"Инструменты"},{depth:3,value:"Препроцессоры"},{depth:3,value:"CSS Lint"},{depth:3,value:"HTML Inspector"},{depth:2,value:"Заключение"}],frontmatter:{title:"Архитектура CSS"}}},{node:{html:'<h1>Ещё одна CSS-техника замены текста изображением</h1>\n<p><a href="http://nicolasgallagher.com/">Николас Галлахер</a> 10 сентября 2012</p>\n<p>Недавно в проект <a href="https://github.com/h5bp/html5-boilerplate">HTML5 Boilerplate</a> была добавлена новая техника замены текста изображением. В этой записи я расскажу, как она работает и как соотносится с альтернативными методами.</p>\n<p>Ниже приведен CSS <a href="https://github.com/h5bp/html5-boilerplate/commit/aa0396eae757c9e03dda4e463fb0d4db5a5f82d7">недавно обновлённого</a> вспомогательного класса (для замены текста изображением) из HTML5 Boilerplate. Этот код также попал во фреймворк <a href="http://compass-style.org/">Compass</a>.</p>\n<pre><code>.ir {\n    font: 0/0 a;\n\u2028    text-shadow: none;\n    color: transparent;\n\u2028}\n</code></pre>\n<h2>Что делает каждая из деклараций?</h2>\n<ul>\n<li><code>font:0/0 a</code> — сокращенная запись свойства, обнуляет размер шрифта и высоту строки. Значение <code>a</code> здесь выступает в роли очень короткого <code>font-family</code> (идея, взята <a href="https://github.com/bem/bem-bl/blob/c451e7bd44b298d23c7fff9bfafe1f0a514f6aaf/blocks-desktop/b-icon/b-icon.css">из реализации этого метода в БЭМ</a>). Валидатор CSS ругается, что использование <code>0/0</code> в сокращенной форме свойства <code>font</code> не соответствует стандарту, но все браузеры принимают такое объявление, и это, по-видимому, баг в самом валидаторе. Использование <code>font:0px/0 a</code> позволяет пройти валидацию, но все равно — в коде декларация отображается как <code>font:0/0 a</code>, который валидатор пропускает.</li>\n<li><code>text-shadow:none</code> — гарантированно снимает любую унаследованную тень текста. Это предотвращает появление любых остатков тени от текста поверх фона.</li>\n<li><code>color:transparent</code> — декларация для браузеров, которые не уменьшают текст полностью (до состояния невидимости). Safari 4 — пример (чрезвычайно редкий) такого браузера. Также эта декларация может быть нужна мобильным браузерам. IE6-8 не распознаёт такое значение свойства <code>color</code>, но, к счастью, IE7-8 и без него не показывают никаких следов от текста. IE6 отображает бледный след.</li>\n</ul>\n<p>Во вспомогательном классе в HTML5 Boilerplate мы также обнуляем всё, что касается свойств <code>border</code> и <code>background-color</code>, которые могут быть заданы у элементов. Это упрощает использование вспомогательных классов для элементов типа <code>&#x3C;button></code> или ссылках, у которых по дизайну может быть задан фон или рамка.</p>\n<h3>Преимущества перед методами с text-indent</h3>\n<p>Новая техника позволяет избежать различных проблем, присущих методам, основанным на использовании <code>text-indent</code>, включая предложенный <a href="http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/">Скотом Келумом</a> cпособ избежать проблем с производительностью на iPad 1, связанных с большими отрицательными отступами.</p>\n<ul>\n<li>Работает в IE6-7 для элементов с <code>inline-block</code>. Техники, основанные на использовании <code>text-indent</code> изначально «сломаны» для <code>inline-block</code> элементах, в этом можно убедиться на <a href="http://jsfiddle.net/necolas/QZvYa/show/">этом примере</a>.</li>\n<li>Не приводит к созданию контейнеров, выходящих за пределы экрана. Методы с <code>text-indent</code> приводят к отрисовке блока (иногда выходящего за экран) для любого текста, у которого есть положительный или отрицательный отступ. Иногда это приводит к проблемам с производительностью, но методы, основанные на размере шрифта, обходят эти проблемы.</li>\n<li>Не нужно указывать особенный <code>text-align</code> и обрезать контейнер свойством <code>overflow</code>, так как текст сжат и не занимает места.</li>\n<li>Не нужно скрывать <code>br</code> или задавать всему дополнительному HTML <code>display:inline</code>, чтобы обойти ограничения отступа текста. В новом методе таких проблем нет.</li>\n<li>В результате этих доработок сократилось количество стилей.</li>\n</ul>\n<h2>Недостатки</h2>\n<p>Совершенного метода заметы изображений не существует.</p>\n<ul>\n<li>Оставляет бледный след от текста в IE6.</li>\n<li>С этим подходом невозможно использовать единицы <code>em</code> для полей элементов, которые используют эту технику, потому что размер шрифта равен нулю.</li>\n<li>В Windows-Eyes есть баг, мешающий чтению текста, спрятанного этим методом. Ни в одной другой протестированной программе для чтения с экрана никаких проблем не было. Спасибо <a href="http://twitter.com/jkiss">@jkiss</a> за предоставленные <a href="https://github.com/h5bp/html5-boilerplate/commit/aa0396eae757c9e03dda4e463fb0d4db5a5f82d7#commitcomment-1052728">детальные отчеты</a> и <a href="http://twitter.com/wilto">@wilto</a> за подтверждение работоспособности этого метода в JAWS 12 для IE6-8 и для Firefox 4-6.</li>\n<li>Как и многие другие методы замены изображений, он не работает, когда CSS загружен, а изображения — нет.</li>\n<li>Текст может оказаться не скрытым, если посетитель сайта использует пользовательские стили, в которых явно объявляется важность <code>font-size</code> для элементов, к которым вы применили стили этого метода замены изображений.</li>\n</ul>\n<p>Стоит отметить, что <a href="http://nicolasgallagher.com/css-image-replacement-with-pseudo-elements/">техника замены изображений NIR</a> свободна от этих недостатков, но не работает в IE6/7.</p>\n<h2>Комментарии в заключение</h2>\n<p>Я использую эту технику без значительных проблем уже около года, с тех пор как Джонатан Нил и я использовали её в эксперименте с clearfix. Фреймворк БЭМ также использует её для иконок. Основная идея <a href="http://www.maxdesign.com.au/articles/headings-as-images/">была предложена еще в 2003 году</a>, но браузерные проблемых тех дней не давали возможности для широкого использования.</p>\n<p>Если вы встретитесь с любыми проблемами этой техники, пожалуйста, занесите их в <a href="https://github.com/h5bp/html5-boilerplate/issues">багтрекер на гитхабе HTML5 Boilerplate</a>, и приложите, если нужно, тестовый пример.</p>\n<p>Перевод оригинальной записи «<a href="http://nicolasgallagher.com/another-css-image-replacement-technique/">Another CSS image replacement technique</a>» Николаса Галлахера (Nicolas Gallagher). Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="http://css-live.ru/">Максим Усачёв</a>.</p>',headings:[{depth:1,value:"Ещё одна CSS-техника замены текста изображением"},{depth:2,value:"Что делает каждая из деклараций?"},{depth:3,value:"Преимущества перед методами с text-indent"},{depth:2,value:"Недостатки"},{depth:2,value:"Комментарии в заключение"}],frontmatter:{title:"Ещё одна CSS-техника замены текста изображением"}}},{node:{html:"<h1>CSS: новый вид JavaScript</h1>\n<p>Перевод «CSS: A New Kind Of JavaScript» Хейдона Пикеринга.</p>\n<p>Те из вас, кто знаком с веб-платформой, наверняка наслышаны и о двух дополнительных технологиях: <strong>HTML</strong> для структуризации документов и <strong>JavaScript</strong> для интерактивности и стилизации.</p>\n<p>Сколько мы себя помним, стилизация документов (то есть, влияние на их внешний вид) всегда производилась с помощью JavaScript-свойства style, доступного на каждом поддерживаемом DOM-узле.</p>\n<pre><code>node.style.color = 'red';\n</code></pre>\n<p>До изобретения этого API для стилизации авторам HTML приходилось писать атрибуты style вручную прямо в DOM, что затрудняло процесс редактирования.</p>\n<p>Используя выборку узлов по селектору из JS, мы можем стилизовать несколько элементов одновременно. В примере ниже текст во всех p стилизован красным цветом.</p>\n<pre><code>const nodes = document.querySelectorAll('p');\nArray.prototype.forEach.call(nodes, node => {\n  node.style.color = 'red';\n});\n</code></pre>\n<p>Отличная возможность выборки по селектору — обращение к нескольким элементам, перечисленным в списке через запятую.</p>\n<pre><code>const nodes = document.querySelectorAll('p, li, dd');\n</code></pre>\n<p>Гораздо менее удобно применять несколько стилей к одному узлу. Такой подход быстро становится слишком многословным:</p>\n<pre><code>node.style.color = 'red';\nnode.style.backgroundColor = 'black';\nnode.style.padding = '1rem';\n// и т.д.\n</code></pre>\n<p>Единственная стандартная альтернатива — использовать свойство cssText:</p>\n<pre><code>node.style.cssText = 'color: red; background-color: black; padding: 1rem;';\n</code></pre>\n<p>Управлять несколькими стилями в одной строке проблематично. В будущем будет сложно обновлять, удалять или заменять отдельные стили.</p>\n<p>Для этого авторы придумали способы управления информацией о стилях с помощью объектов, часто при помощи прототипа интерфейса Element.</p>\n<pre><code>Element.prototype.styles = function(attrs) {\n  Object.keys(attrs).forEach(attr => {\n    this.style[attr] = attrs[attr];\n  });\n}\n</code></pre>\n<p>Теперь стили к узлу можно добавлять вот так:</p>\n<pre><code>node.styles({\n  'color': 'red',\n  'backgroundColor': 'black',\n  'padding': '1rem'\n});\n</code></pre>\n<p>Использование подобного подхода приобрело <em>довольно большую</em> популярность в приложениях и их жизненных циклах. Однако это привело к печально известной проблеме—непониманию, где всё это хранить и как явно отделить стили от интерактивной части, ещё одной области ответственности JavaScript.</p>\n<p>А есть и другая, более фундаментальная проблема: эти стили не реактивны. К примеру, у меня есть некоторые стили для неактивных кнопок:</p>\n<pre><code>const disableds = document.querySelectorAll('[disabled]');\n\nArray.prototype.forEach.call(disableds, disabled => {\n  disabled.styles({\n  'opacity': '0.5',\n  'cursor': 'not-allowed'\n});\n</code></pre>\n<p>Эти стили применяются только к неактивным кнопкам, которые уже есть в DOM. Любые кнопки, добавленные в DOM или, что более вероятно, любые кнопки, которые приобретут свойство или атрибут disabled, не получат автоматически подходящую стилизацию.</p>\n<pre><code>button.disabled = true;\nbutton.style // ничего нового\n</code></pre>\n<p>Можно, конечно, слушать изменение атрибутов и реагировать на него с помощью mutationObserver:</p>\n<pre><code>const button = document.querySelector('button');\n\nvar config = { attributes: true }\n\nvar callback = function(mutationsList) {\n  for(var mutation of mutationsList) {\n    if (mutation.type == 'attributes') {\n      if (button.disabled) { \n        button.styles({\n          'opacity': '0.5',\n          'cursor': 'not-allowed'\n        });\n      }\n    }\n  }\n}\n\nvar observer = new MutationObserver(callback);\n\nobserver.observe(button, config);\n</code></pre>\n<p>Думаю, что все согласятся, что это—<em>довольно много</em> кода, с учётом того, что он всего лишь заставляет один экземпляр элемента одного типа реагировать на изменение единственного атрибута. Также это меняет стилизацию только в одном направлении: нам бы пришлось обрабатывать отмену стилей при удалении свойства disabled. Это не так уж и просто, учитывая, что мы не знаем изначальных значений свойств opacity или cursor.</p>\n<p>Как бы я ни любил JavaScript, я не думаю, что он хорошо спроектирован для задач стилизации. В конце концов, это процедурный и событийный язык, тогда как стили — это то, что у вас либо есть, либо нет.</p>\n<p>Мы тратим слишком много времени впустую, когда пишем и поддерживаем стили с помощью JavaScript. Пришло время это менять. Поэтому я с большим удовольствием представляю вам новый стандарт, который называется CSS.</p>\n<h2>CSS</h2>\n<p>CSS — это декларативное подмножество JavaScript, оптимизированное для задач стилизации. CSS-файл имеет расширение .css и, что важно, парсится независимо от стандартных JS-файлов. С помощью CSS наконец-то стало возможно отделить стили от поведения. Вы можете брендировать своё приложение, не трогая бизнес-логику!</p>\n<h3>Синтаксический сахар</h3>\n<p>Первое, что вы заметите — это более чистый синтаксис, фанаты CoffeeScript оценят:</p>\n<pre><code>[disabled] {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n</code></pre>\n<p>Структура, похожая на объектную, сохраняется, но теперь вам не нужно явно вызывать querySelectorAll для перебора DOM-узлов. Вместо этого перебор происходит внутри, и это, конечно же, производительнее.</p>\n<p>Пример выше автоматически применяется ко всем DOM-узлам с атрибутом disabled. Более того, все <em>новые</em> кнопки с атрибутом disabled автоматически приобретут связанные стили. Реактивность из коробки!</p>\n<h3>Каскад</h3>\n<p>CSS расшифровывается как <strong>каскадные таблицы стилей</strong>. Каскадность здесь, пожалуй, самая лучшая особенность. Взгляните на следующий CSS:</p>\n<pre><code>button {\n  background-color: blue;\n  cursor: pointer;\n}\n\n[disabled] {\n  cursor: not-allowed;\n}\n</code></pre>\n<p>Стили для блока [disabled] идут после блока button в стилях. Любые стили, описанные в блоке [disabled] с такими же ключами (именами свойств), что и в предшествующем button, будут перезаписаны. Самое замечательное заключается в том, что добавление атрибута или свойства disabled кнопке обновит только соответствующие стили. В примере выше свойство cursor обновится, но background-color останется тем же. Своего рода система фильтрации.</p>\n<p>Ко всему прочему, если атрибут или свойство disabled удалено, стили по умолчанию будут автоматически возвращены — ведь узел теперь соответствует блоку button выше по каскаду. Не нужно «вспоминать», какие стили и при каких условиях были применены ранее.</p>\n<h3>Устойчивость</h3>\n<p>При стилизации с помощью JavaScript любое неизвестное свойство или синтаксическая ошибка остановят парсинг скрипта. Все последующие стили или поведение будут отброшены целиком и всё ваше приложение просто рухнет.</p>\n<p>CSS гораздо надёжнее. В большинстве случаев любое неизвестное свойство или синтаксическая ошибка приведут только к тому, что только декларация (пара свойство: значение) с ошибкой будет отброшена.</p>\n<p>Эта инновация учитывает, что разные браузеры поддерживают разные свойства стилизации, и что отдельные стили не критичны для всей задачи. Устойчивость CSS значит, что больше пользователей получат доступ к функционирующему интерфейсу.</p>\n<h2>Заключение</h2>\n<p>Явный признак того, что технология не подходит для определённых целей—если для обхода сложностей нам приходится сильно полагаться на трюки и лучшие практики. Другой признак — насколько много кода нам приходится писать, чтобы сделать простые вещи. Когда речь заходит про стилизацию, JavaScript — как раз та самая неподходящая технология.</p>\n<p>CSS решает проблемы JavaScript со стилизацией, причём элегантно. Вопрос в том, готовы ли вы принять изменения или вы завязли в неудачной методологии?</p>\n<p>Больше информации про CSS и советы для быстрого старта <a href=\"https://en.wikipedia.org/wiki/Campus_SuperStar\">вы найдете здесь</a>.</p>\n<p><em>Перевод <a href=\"https://medium.com/@pepelsbey\">Вадима Макеева</a>, редактура <a href=\"https://medium.com/@tachisis\">Ольги Алексашенко</a> и <a href=\"https://medium.com/@amel_true\">Андрея Мелихова</a>. Переведено с разрешения автора.</em></p>",headings:[{depth:1,value:"CSS: новый вид JavaScript"},{depth:2,value:"CSS"},{depth:3,value:"Синтаксический сахар"},{depth:3,value:"Каскад"},{depth:3,value:"Устойчивость"},{depth:2,value:"Заключение"}],frontmatter:{title:"CSS: новый вид JavaScript"}}},{node:{html:'<h1>Нюансы CSS</h1>\n<p><a href="http://my.opera.com/GreLI/blog/">Лев Солнцев</a> 21 апреля 2011</p>\n<p>Многие используют CSS для оформления сайтов и веб-страниц, знают основные приёмы вёрстки, а если и нет, то быстро найдут решение в интернете, или им подскажут в тематических сообществах. Тем не менее многие широко используемые решения не оптимальны, и если ознакомиться со спецификациями чуть глубже, можно написать лучший код.</p>\n<p>К примеру многие знают, что цвет в шестнадцатеричной нотации вида <code>#RRGGBB</code> можно писать сокращённо как <code>#RGB</code>, если каждый старший разряд совпадает с младшим, или что нуль можно писать без единиц измерения, таких как «px» или «em», так как нуль — в любой системе измерения нуль.</p>\n<h2>Что считает браузер</h2>\n<p>Также широко известно, что можно отцентрировать блок с шириной меньше родительского элемента при помощи <code>margin:0 auto</code>. Однако мало кто задумывается, что почти во всех случаях дело касается непозиционированных элементов, и в этом случае значение <code>margin-top:auto</code> или <code>margin-bottom:auto</code> устанавливается равным нулю, а значит данное правило можно сократить до простого <code>margin:auto</code>.</p>\n<p>Правила <code>margin-left:auto</code> и <code>margin-right:auto</code> при ширине блока меньше ширины контейнера равномерно распределяют оставшееся место. Так, задав только <code>margin-left:auto</code>, можно выровнять элемент по правому краю.</p>\n<p>В обычном потоке элементы идут сверху вниз, поэтому <code>margin-top:auto</code> устанавливается нулевым. Однако для абсолютно спозиционированных элементов действует то же распределение свободного места, и аналогичным образом можно сделать <a href="http://test.csswg.org/suites/css2.1/20110111/html4/absolute-non-replaced-height-003.htm">центрирование по вертикали</a> при заданных высоте и <code>top</code> с <code>bottom</code> (не работает в IE7).</p>\n<h2>Сокращения и значения по умолчанию</h2>\n<p>Не менее широко распространено использование спрайтов, например: <code>background:url(icons.png) 0 0 no-repeat</code>. Однако, <code>background-position:0 0</code> является значением по умолчанию, поэтому <code>0 0</code> в таком случае можно опустить.</p>\n<p>Но если в <code>background-position</code> задана хоть одна координата: будь то <code>top</code>, <code>left</code> или <code>100%</code>, то вторая принимает значение 50%. Это может быть полезно для значков, выровненных посередине строки по вертикали — достаточно указать лишь положение слева или справа.</p>\n<p>Не все знают, что опущенные в сокращённой записи правила принимают своё значение по умолчанию. Поэтому уточняющие правила надо писать после или делать сильнее общей сокращённой надписи, как <code>background-position</code> уточняет положение каждого спрайта после <code>background</code> в предыдущем примере.</p>\n<p>При подобном написании:</p>\n<pre><code>h1 {\n    font: 2em/1 Arial,sans-serif;\n}\n</code></pre>\n<p>задаётся не только шрифт, его размер и интерлиньяж, но и сразу сбрасывается полужирное написание (<code>font-weight:normal</code>), а также другие свойства, такие как <code>font-style</code> (курсив) и <code>font-variant</code> (капитель). Некоторые авторы совершенно зря дописывают в <code>font</code> значение <code>normal</code>. Непонятно даже к какому правилу из перечисленных трёх оно могло бы относиться — порядок следования в сокращённых свойствах неважен, и неучитывание порядка могло приводить к ошибкам лишь в устаревших браузерах.</p>\n<p>Другими недопонятыми, но тоже полезными сокращёнными записями являются отдельные правила рамок <code>border-width</code>, <code>border-style</code> и <code>border-color</code>. Например, благодаря им можно задать верхнюю и нижнюю одинаковые рамки не дублированием кода в <code>border-top</code> и в <code>border-bottom</code>, а подобным образом:</p>\n<pre><code>border: solid gray;\nborder-width: 3px 0;\n</code></pre>\n<p>Кроме меньшего размера кода, такая запись полезна тем, что каждое значение написано только один раз, и поменять, скажем, <code>solid</code> на <code>double</code> не составляет труда.</p>\n<p>Более того, если будет использоваться <code>border-image</code>, то здесь явно задано, что размер боковых рамок нулевой. В противном случае <code>border-image</code> приводит к неявному появлению рамок, что может дать неожиданный эффект в углах.</p>\n<p>Есть возможность, что <code>border-radius</code> может быть включен в сокращённую запись <code>border</code> (предлагался вариант с косой чертой «/»), поэтому записывайте на всякий случай <code>border-radius</code> после <code>border</code>.</p>\n<h2>Переусложенение</h2>\n<p>Часто, чтобы избавиться от рамки на картинке внутри ссылки, пишут:</p>\n<pre><code>a img {\n    border: 0;\n}\n</code></pre>\n<p>Однако в таком случае бразуер будет на каждой картинке проверять, не находится ли она в ссылке. Если для простых страниц это кажется несущественным (вы и глазом моргнуть не успеете за те несколько миллисекунд, на которое задержится отображение страницы), то в какой-нибудь фотогалерее со сложной анимацией это может лишить вас нескольких кадров в секунду, прибавляя ощущения «тормознутости». Куда проще написать так:</p>\n<pre><code>img {\n    border: 0;\n}\n</code></pre>\n<p>Эффект будет тот же самый. Уточнение, что рамка появляется на ссылках <code>a</code> в данном случае совершенно излишне.</p>\n<p>Из тех же соображений производительности, как правило, незачем писать имя тэга вместе с классом и уж тем более с идентификатором, который сам по себе уникален. В данном правиле могут быть только два исключения: уточнение для конкретного тэга (возможно в этом случае у вас очень общий класс), и обход недостатка IE7, где эффекты при наведении <code>:hover</code> тормозят, если в селекторе не указан тэг (то есть надо писать <code>a.class:hover { color:#FC0; }</code>).</p>\n<h2>Наследование</h2>\n<p>Ещё одна недооценённая многими возможность CSS: наследование стилей. Например, может не устраивать, что по умолчанию содержимое ячеек таблиц центрируется по вертикали, при этом используются следующие правила:</p>\n<pre><code>th {\n    vertical-align: bottom;\n}\ntd {\n    vertical-align: top;\n}\n</code></pre>\n<p>Вроде бы всё здорово, но, сделав так, вы лишаетесь простого способа переопределить выравнивание для целого ряда:</p>\n<pre><code>tr.images {\n    vertical-align: middle;\n}\n</code></pre>\n<p>Этого можно избежать, воспользовавшись тем, что ячейки таблицы <code>th</code> и <code>td</code> наследуют правила от рядов <code>tr</code>, а те в свою очередь от блоков <code>thead</code>, <code>tfoot</code> и <code>tbody</code>.</p>\n<pre><code>thead {\n    vertical-align: bottom;\n}\ntbody,\ntfoot {\n    vertical-align: top;\n}\n</code></pre>\n<p>Стоит отметить, что все браузеры, кроме IE8, наследуют еще и значение <code>text-align</code> для <code>th</code>, а сам IE8 понимет ключевое слово <code>inherit</code>, что также позволяет наследовать значение <code>text-align</code>.</p>\n<h2>Заключение</h2>\n<p>Знание основ спецификаций, понимание механизмов работы браузеров и выполняемых действий позволяет оптимизировать написание кода, упростить его, сделать лаконичней, а также упростить дальшейшую разработку и поддержку.</p>',headings:[{depth:1,value:"Нюансы CSS"},{depth:2,value:"Что считает браузер"},{depth:2,value:"Сокращения и значения по умолчанию"},{depth:2,value:"Переусложенение"},{depth:2,value:"Наследование"},{depth:2,value:"Заключение"}],frontmatter:{title:"Нюансы CSS"}}},{node:{html:'<h1>Основные способы вёрстки. Часть первая: таблица</h1>\n<p><a href="http://my.opera.com/GreLI/blog/">Лев Солнцев</a> 27 июня 2013</p>\n<p>Для профессионального оформления сайтов необходимо знать не только основы CSS, но и понимать, как работает браузер, знать правила, которым он следует. Именно они определяют основные способы и приёмы вёрстки.</p>\n<p>Только имея такое понимание, можно выбрать наиболее подходящий способ решения задачи из нескольких возможных, с учётом их достоинств и ограничений. Только так можно наиболее полно задействовать возможности браузера и предупредить потенциальные ошибки.</p>\n<p>Существует немало описаний различных приёмов. В этой статье предпринята попытка собрать вместе самые важные приёмы и систематизировать их, чтобы дать представление как об основных возможностях, так и об ограничениях CSS, актуальных в настоящее время.</p>\n<p>Статья рассчитана на людей, которые знакомы с основами HTML и CSS и имеют представление об основных свойствах и базовых принципах работы каскадных таблиц стилей.</p>\n<h2>Таблица</h2>\n<p>Исторически, первым и единственным способом раскладки страницы были таблицы. Описанию поведения таблиц посвящена <a href="http://www.w3.org/TR/CSS2/tables.html">целая глава</a> в спецификации CSS 2.1. Несмотря на такой объем, некоторые моменты описаны скудно или вообще не определены и отданы на усмотрение браузеров.</p>\n<h3>Достоинства и недостатки</h3>\n<p>Таблица служит для отображения упорядоченных данных в строках и столбцах, имеющих смысловую связь по горизонтали или вертикали. Отсюда следует главное достоинство: ячейки таблиц выравниваются по сетке, что позволяет простым и очевидным образом создать <em>модульную сетку</em>.</p>\n<p>Это неотъемлемое свойство таблиц позволяет заполнить плоскость окна браузера и создавать «резиновые сайты». Но, как при малых, так и больших размерах окна просмотра браузера структура таблицы не меняется, она не может гибко адаптироваться под доступное пространство.</p>\n<p>При использовании таблицы для раскладки, то есть размещения в сетке данных, не имеющих смысловой связи, нарушается семантичность. Применение таких таблиц ухудшает доступность для людей, использующих специальные программы, и снижает положение в поисковой выдаче, поскольку поисковому движку, предположительно, сложнее разобраться в структуре страницы. Как следствие, сайт работает менее эффективно.</p>\n<h3>Особенности</h3>\n<p>Ячейки таблиц идут в коде строго друг за другом, слева направо или справа налево в зависимости от направления языка, заданного CSS-свойством <code>direction</code> или его аналогом в HTML, атрибутом <code>dir</code>.</p>\n<p>Если, к примеру, требуется, чтобы основное содержимое в центральной колонке шло в начале, перед содержимым других колонок в исходном HTML-коде, таблица — неподходящее решение.</p>\n<p>Структура таблицы довольно сложна, она описывается большим количеством тегов, что приводит к усложнению исходного кода. Негативный эффект проявляется ещё больше, когда несколько таблиц вложены друг в друга.</p>\n<h3>Имитация</h3>\n<p>Появившаяся в CSS 2.1 группа свойств <code>display: table-*</code> позволяет создать таблицу из произвольных элементов, имеющих соответствующую структуру.</p>\n<p>Согласно спецификации, достаточно только одного объявления вроде <code>display: table</code> или <code>display: table-cell</code> — недостающие элементы должны автоматически достраиваться браузером.</p>\n<p>Однако будет надёжнее создать минимальную структуру <code>таблица > ряд > ячейка</code>, аналогично обязательным тегам <code>&#x3C;table></code>, <code>&#x3C;tr></code>, <code>&#x3C;td></code>, с соответствующими значениями свойства <code>display</code>: <code>table</code>, <code>table-row</code> и <code>table-cell</code>.</p>\n<p>В противном случае может возникнуть нерегулярно проявляющаяся ошибка, замеченная в Firefox и браузерах на основе Webkit, когда ряд таблицы без элемента с <code>display: table-cell</code> случайным образом разбивается на несколько ячеек. Возможное объяснение может состоять в попадании границы сетевых пакетов среди ячеек при передаче HTML-кода.</p>\n<p>Таким образом, блочная разметка с <code>display: table-*</code> почти не отличается от обычной HTML-таблицы ни в чем, кроме имён тегов, однако обычная таблица лучше поддерживается браузерами (а именно в Internet Explorer 7 и ниже) и имеет больше возможностей, таких как объединение ячеек.</p>\n<p>Стоит отметить, что, несмотря на необязательность тега <code>&#x3C;tbody></code> в HTML, браузер обязательно создаст этот элемент, если только документ не обрабатывается в режиме XHTML, при отсутствии группирующих элементов <code>&#x3C;tbody></code>, <code>&#x3C;thead></code> и <code>&#x3C;tfoot></code>. Этим можно пользоваться при оформлении, и обязательно следует иметь в виду при использовании родительского селектора, который может иметь запись вида <code>table > tbody > tr > td</code>. Селектор <code>table > tr > td</code> работать не будет.</p>\n<p>Анонимные элементы при <code>display: table-*</code>, воссоздающие структуру таблицы согласно CSS 2.1, не влияют на дерево элементов. Им нельзя задать CSS-правила, действуют только наследуемые свойства.</p>\n<h3>Семантичность</h3>\n<p>Существует мнение, что использование <code>display: table</code> более семантично, так как используются теги, лучше соответствующие содержимому, и это поможет различным движкам в обработке страницы. Нередко при этом приводятся в пример программы чтения с экрана.</p>\n<p>Однако есть <a href="http://www.456bereastreet.com/archive/201110/using_displaytable_has_semantic_effects_in_some_screen_readers/">исследования</a>, которые показывают, что некоторые такие программы учитывают оформление страницы и воспринимают элементы с <code>display: table</code> точно так же, как и обычную таблицу, размеченную стандартными тегами. Тем не менее такой способ имеет право на существование, когда использование тегов таблицы неуместно.</p>\n<p>Рекомендуется использовать методы <a href="http://www.w3.org/TR/WCAG-TECHS/html.html">WCAG</a> для семантичного оформления таблиц, задействуя дополнительные возможности разметки, такие как краткое описание с помощью тега <code>&#x3C;caption></code> или атрибута <code>summary</code> и указание области действия заголовков <code>&#x3C;th></code> атрибутом <code>scope</code>.</p>\n<h3>Ширина</h3>\n<p>Ширина таблицы, будучи не задана, рассчитывается браузером с учётом содержимого. Если ширина таблицы меньше ширины родительского элемента, таблица может быть отцентрирована с помощью свойства <code>margin: auto</code> или выровнена по левому или правому краю.</p>\n<p>При <code>table-layout: auto</code> (значение по умолчанию) ширина таблицы расчитывается так, чтобы поместилось всё её содержимое. Если ширина элемента, в котором находится таблица, недостаточна, она выйдет за его пределы.</p>\n<p>Это может привести к появлению горизонтальной прокрутки на странице даже тогда, когда казалось бы достаточно места, из-за слишком длинного слова (например, какой-то интернет-адрес) или широкого изображения.</p>\n<p>В CSS 2.1 не определено действие свойств <code>min-width</code>, <code>max-width</code>, <code>min-height</code> и <code>max-height</code> на элементы таблицы.</p>\n<p>Так как ячейка не может иметь ширину меньшую, чем позволяет её содержимое, вместо <code>min-width</code> можно использовать достаточно широкую «распорку». Для этого можно использовать пустой блок нужной ширины.</p>\n<p>С оговоркой, о которой будет сказано далее, ограничить ширину ячейки может задание свойства <code>width</code>. Этот способ работает в современных браузерах, включая Internet Explorer 8 и даже в старших версиях Internet Explorer в режиме Internet Explorer 7, но не в настоящем браузере Internet Explorer 7. Это один из тех случаев, когда поведение в режиме эмуляции отличается от настоящей версии браузера.</p>\n<p>Ширина ячейки может не соответствовать предписанному значению в том случае, когда заданная для всей таблицы ширина не равна сумме заданных ширин всех ячеек, или их сумма не равна 100%. Тогда доступное место распределяется среди ячеек пропорционально значениям их ширины.</p>\n<p>В соответствии со стандартной блочной моделью CSS ширина ячейки задаётся по области содержимого, исключая толщину рамки и величину отступа <em>(padding)</em>. Однако, если ширина колонки таблицы устанавливается через элемент <code>&#x3C;col></code> или <code>&#x3C;colgroup></code>, то она задаётся уже с учётом ширины рамок и отступа ячеек.</p>\n<h3>Гибкость</h3>\n<p>Одним из преимуществ является то, что таблица позволяет гибко управлять соотношением ширин колонок через процентные значения. Ширина ячеек при этом учитывает размер содержимого.</p>\n<p>Примечательным свойством таблицы среди возможностей CSS 2.1 является возможность установить такую ширину ячейке, которая осталась ей доступна от остальных ячеек в ряду.</p>\n<h3>Высота</h3>\n<p>По спецификации свойство <code>height</code> задаёт только минимальную высоту ячейки. Если с шириной ячеек браузеры следуют модели CSS, то установку высоты ячейки разные браузеры трактуют по-разному.</p>\n<p>Firefox до 15-й версии и Opera до 12-й включительно считают высоту вместе с отступом и рамкой, другими словами, ведут себя как при <code>box-sizing: border-box</code>, что соответствует поведению в режиме обратной совместимости <em>(Quirks Mode)</em>.</p>\n<p>Internet Explorer версии 8 и выше и браузеры на основе WebKit задают высоту только для содержимого аналогично <code>box-sizing: content-box</code>, что является правильным поведением с точки зрения модели CSS.</p>\n<p>На текущий момент свойство <code>box-sizing</code> влияет на задание высоты ячейки только в браузере Internet Explorer. А Firefox до 16 версии не учитывал <code>box-sizing</code> даже для ширины ячеек таблиц.</p>\n<h3>Раскладка</h3>\n<h4>Жёсткая</h4>\n<p>При <code>table-layout: fixed</code> ширина ячеек таблицы задаётся непосредственно, либо равномерно распределяется среди колонок. Таблица теряет возможность автоматического расчёта ширины с учётом заполненности ячеек. Переполнение ячеек обрабатывается в соответствии со значением свойства <code>overflow</code>. Спецификация оставляет браузерам возможность всегда использовать этот режим. Его могут применять мобильные браузеры, ограниченные в ресурсах для сложной обработки таблиц.</p>\n<h4>Автоматическая</h4>\n<p>При <code>table-layout: auto</code> содержимое не может выйти за границы ячейки, и свойство <code>overflow</code> не имеет действия. При этом нельзя заставить таблицу всегда оставаться в заданных рамках. Из-за автоматического расчёта ширины, она не уменьшится, даже если есть <code>overflow: hidden</code> у элемента с неопределенной шириной внутри ячейки.</p>\n<figure>\n\t<img src="/logo-n-menu-0bb03c48564ec62fcb0b14fbd40b3ff9.svg" alt="">\n\t<figcaption>&#x414;&#x438;&#x437;&#x430;&#x439;&#x43D;&#x435;&#x440; &#x43C;&#x43E;&#x436;&#x435;&#x442; &#x436;&#x435;&#x43B;&#x430;&#x442;&#x44C;, &#x447;&#x442;&#x43E;&#x431;&#x44B; &#x43B;&#x43E;&#x433;&#x43E;&#x442;&#x438;&#x43F; &#x438;&#xA0;&#x43C;&#x435;&#x43D;&#x44E; &#x432;&#x441;&#x435;&#x433;&#x434;&#x430; &#x443;&#x43C;&#x435;&#x449;&#x430;&#x43B;&#x438;&#x441;&#x44C; &#x432;&#xA0;&#x43E;&#x434;&#x43D;&#x43E;&#x439; &#x441;&#x442;&#x440;&#x43E;&#x447;&#x43A;&#x435;. &#x422;&#x430;&#x431;&#x43B;&#x438;&#x446;&#x430; &#x43D;&#x435;&#xA0;&#x43C;&#x43E;&#x436;&#x435;&#x442; &#x43E;&#x431;&#x440;&#x435;&#x437;&#x430;&#x442;&#x44C; &#x434;&#x43B;&#x438;&#x43D;&#x43D;&#x44B;&#x435; &#x43D;&#x430;&#x434;&#x43F;&#x438;&#x441;&#x438; &#x434;&#x43B;&#x44F; &#x44D;&#x442;&#x43E;&#x439; &#x446;&#x435;&#x43B;&#x438;.</figcaption>\n</figure>\n<h3>Быстродействие</h3>\n<p>Cвойство <code>table-layout: fixed</code> предназначено для того чтобы отображать большие таблицы по мере загрузки данных — так происходит, потому что размеры ячеек указаны заранее.</p>\n<p>Если установлено <code>table-layout: auto</code>, браузер должен рассчитывать размеры таблицы, рекурсивно обрабатывая всё её содержимое, что не может не сказаться на быстродействии. При этом в большинстве браузеров таблица будет показана лишь после того, как загрузится полностью.</p>\n<h3>Выравнивание</h3>\n<p>Таблица позволяет выравнивать содержимое своих ячеек как по горизонтали (<code>text-align</code>), так и по вертикали при помощи <code>vertical-align</code>.</p>\n<p>Несмотря на то, что выравнивание по вертикали как строчных элементов, так и содержимого ячеек таблиц задаётся одним и тем же свойством, его действие отличается в каждом случае.</p>\n<p>Для строчных элементов оно действует на сами элементы и имеет больше вариантов, тогда как в случае таблиц выравнивается содержимое ячеек, включая блочные элементы.</p>\n<p>Возможные значения свойства <code>vertical-align</code> для ячеек таблиц: <code>top</code>, <code>bottom</code>, <code>middle</code> и <code>baseline</code> — выравнивание по верхней границе, нижней границе, середине и базовой линии, соответственно. Выравнивание по базовой линии производится по первой строчке текста, а если таковой нет, то по самой нижней границе блока в ячейке.</p>\n<p>Последний вариант уникален: таблица позволяет выровнять строки текста по базовой линии в разных колонках даже при различных свойствах шрифта.</p>\n<p>Другими методами в рамках CSS 2.1 такого эффекта добиться практически невозможно из-за погрешностей округления значений и особенностей отрисовки текста операционными системами и браузерами. В лучшем случае можно только подогнать параметры под наиболее вероятную ситуацию: вроде распространённой гарнитуры и стандартного размера шрифта.</p>\n<figure>\n\t<img src="/table-form-4050f2051b70a8a17a4f75d5de2a5d51.svg" alt="">\n\t<figcaption>&#x422;&#x430;&#x431;&#x43B;&#x438;&#x446;&#x430; &#x43F;&#x43E;&#x437;&#x432;&#x43E;&#x43B;&#x44F;&#x435;&#x442; &#x43B;&#x435;&#x433;&#x43A;&#x43E; &#x438;&#xA0;&#x43D;&#x430;&#x434;&#x451;&#x436;&#x43D;&#x43E; &#x432;&#x44B;&#x440;&#x43E;&#x432;&#x43D;&#x44F;&#x442;&#x44C; &#x437;&#x430;&#x433;&#x43E;&#x43B;&#x43E;&#x432;&#x43A;&#x438; &#x438;&#xA0;&#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x44B; &#x444;&#x43E;&#x440;&#x43C; &#x43F;&#x43E;&#xA0;&#x431;&#x430;&#x437;&#x43E;&#x432;&#x43E;&#x439; &#x43B;&#x438;&#x43D;&#x438;&#x438;.</figcaption>\n</figure>\n<h3>Проблемы позиционирования</h3>\n<p>В старых версиях WebKit и текущих версиях Mozilla Firefox нельзя позиционировать элементы таблицы, и потому не получится позиционировать внутренние элементы относительно ячейки. Хотя спецификация не определяет действие свойства <code>position</code> на элементы таблиц, имеется открытое <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=35168">сообщение об ошибке</a> браузера Firefox.</p>\n<p>Из-за этой особенности нет работающего во всех браузерах способа разместить что-либо сверху и снизу ячейки одновременно. Иногда проблему можно обойти, разбив ряд таблицы на два, но такое решение ведёт к усложнению кода, а полученная сетка может уже скорее мешать, чем помогать.</p>\n<p>В соответствии с принципами CSS установить высоту для элементов внутри таблицы, зависящую от высоты ячейки, можно только в том случае, когда самой ячейке задана высота. Также из-за этого не получится расположить элементы одновременно сверху и снизу с помощью позиционирования относительно внутреннего элемента. Ведь если высота не известна точно заранее, никогда нет гарантии, что соседняя ячейка, а значит и весь ряд, не имеет большую высоту.</p>\n<h3>Заключение</h3>\n<p>В будущем к нам придут на помощь новые модули CSS, но до окончательной разработки и полноценного внедрения, когда ими можно будет реально пользоваться, пройдёт ещё как минимум несколько лет.</p>\n<p>Один из таких модулей — <a href="http://www.w3.org/TR/css3-grid-layout/">CSS Grid Layout</a> — не только позволяет создать модульную сетку, аналогичную таблице, но и даёт большие возможности по оформлению и использованию. При совместном использовании с <a href="http://www.w3.org/TR/css3-mediaqueries/">медиавыражениями</a>, модуль позволяет произвольно адаптировать раскладку под размеры окна одними лишь средствами CSS. Он избавит нас в будущем от необходимости использовать таблицу для раскладки и оставить её, наконец, для своего основного предназначения: разметки табличных данных.</p>\n<p>О других приёмах и возможностях CSS 2.1 без использования таблиц читайте во второй части статьи «<a href="/articles/css-techniques-p2-alternate/">Бестабличная вёрстка</a>».</p>',headings:[{depth:1,value:"Основные способы вёрстки. Часть первая: таблица"},{depth:2,value:"Таблица"},{depth:3,value:"Достоинства и недостатки"},{depth:3,value:"Особенности"},{depth:3,value:"Имитация"},{depth:3,value:"Семантичность"},{depth:3,value:"Ширина"},{depth:3,value:"Гибкость"},{depth:3,value:"Высота"},{depth:3,value:"Раскладка"},{depth:4,value:"Жёсткая"},{depth:4,value:"Автоматическая"},{depth:3,value:"Быстродействие"},{depth:3,value:"Выравнивание"},{depth:3,value:"Проблемы позиционирования"},{depth:3,value:"Заключение"}],frontmatter:{title:"Основные способы вёрстки. Часть первая: таблица"}}},{node:{html:'<h1>Основные способы вёрстки. Часть вторая: бестабличная вёрстка</h1>\n<p><a href="http://my.opera.com/GreLI/blog/">Лев Солнцев</a> 28 июня 2013</p>\n<p>С развитием CSS появились способы вёрстки без использования таблиц, которым посвящена <a href="/articles/css-techniques-p1-tables/">первая часть статьи</a>. Таблицы обладают рядом особенностей, из-за которых порой невозможно добиться желаемого эффекта. Особенно это было актуально ранее, когда браузеры были менее совершенными в применении современных стандартов. В таких случаях для оформления лучше подходят альтернативные приёмы.</p>\n<h2>Обтекаемые блоки</h2>\n<p>Первый приём основан на использовании обтекаемых блоков, так как с их помощью можно произвольно располагать элементы по горизонтали. По сути, это использование свойства <code>float</code> не по назначению, которое сдвигает блок влево или вправо и включает обтекание текста.</p>\n<h3>Особенности</h3>\n<p>Обтекаемые элементы имеют ширину, зависящую от содержимого, и занимают доступное для этой ширины место. Если его не хватает, они смещаются вниз до тех пор, пока не хватит места или не останется других обтекаемых блоков.</p>\n<figure>\n    <img src="/floats-69219dd1de914a51a9e59ee1caace7a2.svg" alt="">\n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x433;&#x43E; &#x440;&#x430;&#x441;&#x43F;&#x43E;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x44F; &#x43F;&#x440;&#x43E;&#x438;&#x437;&#x432;&#x43E;&#x43B;&#x44C;&#x43D;&#x44B;&#x445; &#x43E;&#x431;&#x442;&#x435;&#x43A;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x431;&#x43B;&#x43E;&#x43A;&#x43E;&#x432;.</figcaption>\n</figure>\n<p>Обтекаемые элементы частично изымаются из потока и обычные блоки проходят сквозь них. Меняется лишь расположение текста из-за сужения строк. Строчные элементы располагаются там, где им хватает места в строках.</p>\n<figure>\n    <img src="/float-how-f9797e8be34c4f3c6d35cdc2779916b4.svg" alt="">\n    <figcaption>&#x41F;&#x440;&#x438;&#x43D;&#x446;&#x438;&#x43F; &#x440;&#x430;&#x431;&#x43E;&#x442;&#x44B; &#x43E;&#x431;&#x442;&#x435;&#x43A;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x431;&#x43B;&#x43E;&#x43A;&#x43E;&#x432;. &#x410;&#x434;&#x430;&#x43F;&#x442;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x43D;&#x430;&#x44F; &#x438;&#x43B;&#x43B;&#x44E;&#x441;&#x442;&#x440;&#x430;&#x446;&#x438;&#x44F; &#x438;&#x437;&#xA0;&#x441;&#x43F;&#x435;&#x446;&#x438;&#x444;&#x438;&#x43A;&#x430;&#x446;&#x438;&#x438;.</figcaption>\n</figure>\n<p>Обычный блок, в котором находится обтекаемый, заканчивается раньше обтекаемого блока, что не подходит для раскладки. Для получения предсказуемого результата (а также во избежание проблем в Internet Explorer 7 и ниже) желательно каждый ряд с раскладкой обтекаемыми блоками заключать в специальный оборачивающий элемент, создающий новый контекст форматирования, или воспользоваться трюком, известным как «очистка» (<em>clearfix</em>).</p>\n<h3>Контекст форматирования</h3>\n<p>Когда элемент создаёт новый контекст форматирования, через его границы не проникают обтекаемые элементы, а поля не складываются. В Internet Explorer 7 и ниже аналогично ведут себя элементы с <em><a href="http://www.satzansatz.de/cssd/onhavinglayout.html">hasLayout</a></em>, что помогает достичь кроссбраузерности.</p>\n<p>Согласно CSS 2.1, <a href="http://www.w3.org/TR/CSS2/visuren.html#block-formatting">новый контекст форматирования</a> создают: обтекаемые блоки; абсолютно позиционированные блоки; содержащие блоки элементы (вроде строчных блоков <code>inline-block</code> и элементов таблиц); блоки, значение свойства <code>display</code> которых отличается от <code>block</code>; и блоки с <code>overflow</code>, отличным от <code>visible</code>. Новые типы блоков из других модулей CSS также имеют подобный эффект.</p>\n<h3>Очистка</h3>\n<p>Трюк «очистка» заключается в использовании свойства <code>clear</code> для псевдоэлемента <code>:after</code>, генерируемого в конце блока, что вынуждает браузер разместить нижнюю границу после обтекаемых элементов.</p>\n<p>Первоначальный код (существуют вариации) для современных браузеров выглядит так:</p>\n<pre><code>.clearfix:after {\n    clear: both;        /* Сама очистка */\n    display: block;     /* По умолчанию — display: inline */\n    content: ".";       /* Предотвращение сложения полей */\n    height: 0;          /* Устранение влияния текста */\n    visibility: hidden; /* Скрытие текста */\n}\n</code></pre>\n<p>Спустя некоторое время появилась обновлённая версия, «<a href="http://nicolasgallagher.com/micro-clearfix-hack/">микроочистки</a>», выглядящая следующим образом:</p>\n<pre><code>.clearfix:before,\n.clearfix:after {\n    display: table;\n    content: "";\n}\n\n.clearfix:after {\n    clear: both;\n}\n</code></pre>\n<p>В этом варианте сложение полей <em>(margin collapsing)</em>, которое может происходить и сквозь пустой псевдоэлемент, предотвращается с помощью <code>display: table</code>, причём не только в конце элемента, но и в начале.</p>\n<p>А благодаря пустой строке в значении свойства <code>content</code> отпадает необходимость прятать сгенерированное содержимое.</p>\n<p>Трюк позволяет заключить обтекаемые блоки внутри элемента, подобно тому, как это происходит в блоках с новым контекстом форматирования. Но в отличие от последних, у элемента полная ширина, и он не имеет присущих им ограничений.</p>\n<h3>Адаптация</h3>\n<img src="/float-overflow-5acaf90461c3b4ebe4446c1987f52175.svg" alt="">\n<p>Блок, у которого новый контекст форматирования задан с помощью значения <code>overflow</code>, отличного от <code>visible</code> (то есть <code>auto</code>, <code>scroll</code> или <code>hidden</code>), обладает примечательным свойством: такой блок занимает всё доступное место по горизонтали. Если он следует за обтекаемым блоком, его ширина соответственно уменьшается на значение ширины обтекаемого блока.</p>\n<p>Хотя такое поведение — необязательное требование спецификации, браузеры солидарны в данном вопросе.</p>\n<p>Эта особенность даёт возможность задействовать эффект обрезания неуместившегося текста с многоточием на месте сокращения: <code>text-overflow: ellipsis</code>, которого нельзя достигнуть таблицой с автоматическим расчётом ширины.</p>\n<img src="/mail-folders-24daa508ba7de37c57501a2de68056cb.svg" alt="">\n<p>Примером такого использования могут быть папки в почтовом интерфейсе, где напротив имён папок показывается количество сообщений в них. Если имя папки слишком длинно, чтобы поместиться, то оно обрезается.</p>\n<p>Количество сообщений, заранее неизвестное, может исчисляться тысячами и даже меняться в реальном времени. Вдобавок, ширина элементов зависит от параметров шрифта и даже механизма отрисовки браузера и операционной системы.</p>\n<p>Можно ограничить длину любых имён, выделив место для чисел с большим запасом, но было бы неразумно делать такое ограничение из-за не столь частых, хотя и встречающихся, случаев.</p>\n<h3>Ограничения</h3>\n<p>Заметный недостаток адаптирующегося по ширине элемента заключается в том, что всё его содержимое обрезается по краям блока. Это препятствует использованию выносных элементов любого рода и даже графических эффектов вроде обводок и теней. Вдобавок, обтекаемые блоки должны идти первыми в исходном коде.</p>\n<p>Одним из главных недостатков методов с использованием обтекаемых блоков является отсутствие возможности произвольного выравнивания по вертикали. Хуже того, как можно было заметить из примера, когда они имеют разную высоту, то вместо стройных рядов может выйти хаотичная мозаика.</p>\n<p>Расположение элементов по рядам — это то, с чем хорошо справляются строчные блоки.</p>\n<h2>Строчные блоки</h2>\n<p>Строчный блок — это блок, который размещается в текстовой строке, имеющий свойство <code>display: inline-block</code>. Строчные блоки предоставляют уникальные возможности в рамках CSS 2.1, так как, будучи строчными элементами, они могут содержать любые блоки.</p>\n<p>В особенной модели Internet Explorer 7 и ниже строчные блоки — это обычные строчные элементы, у которых есть свойство <em>hasLayout</em>. Правило <code>display: inline-block</code> включает именно это свойство, но эффект достигается только на строчных элементах. Блочным элементам требуется задать <code>display: inline</code> и включить <var>hasLayout</var> другим способом: например, с помощью <code>zoom: 1</code>, или вынести объявление <code>display: inline-block</code> в отдельный блок правил.</p>\n<p>Так же, как и у обтекаемых блоков или ячеек таблиц, ширина строчных блоков, если не указана, рассчитывается браузером с учётом содержимого.</p>\n<p>Как и ячейки таблиц, они идут в строгом порядке друг за другом: слева направо или справа налево в зависимости от направления письма.</p>\n<p>Благодаря своему расположению в строках текста, строчные блоки располагаются строго по рядам, что нередко предпочтительней.</p>\n<figure>\n    <img src="/inline-blocks-751c374c38c79579cf681edfdf7e5fbb.svg" alt="">\n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x43E;&#x433;&#x43E; &#x440;&#x430;&#x441;&#x43F;&#x43E;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x44F; &#x441;&#x442;&#x440;&#x43E;&#x447;&#x43D;&#x44B;&#x445; &#x431;&#x43B;&#x43E;&#x43A;&#x43E;&#x432;.</figcaption>\n</figure>\n<p>Примечательной особенностью строчных блоков является возможность их выравнивания подобно другим текстовым элементам как по горизонтали, так и по вертикали.</p>\n<h3>Горизонтальное выравнивание</h3>\n<p>Кроме привычного выравнивания слева или справа строчным блокам можно делать полную выключку — выравнивание одновременно по обоим краям одновременно — с помощью <code>text-align: justify</code>. Последняя строка, однако, всё равно остаётся выровненной слева или справа в зависимости от направления письма.</p>\n<p>Проблему с последней строкой можно обойти при помощи свойства <code>text-align-last: justify</code>, которое поддерживается браузерами Internet Explorer 5.5+ и Firefox 12+ (с префиксом <code>-moz-</code>), и включено в разрабатываемый модуль <a href="http://www.w3.org/TR/css3-text/">CSS3 Text</a>.</p>\n<p>Отсутствие поддержки этого свойства в остальных браузерах можно заменить добавлением псевдоэлемента <code>:after</code> или пустого строчного блока со стопроцентной шириной:</p>\n<pre><code>.justify:after {\n    display: inline-block;\n    width: 100%;\n    content: "";\n}\n</code></pre>\n<img src="/inline-justifying-106aa409e3cdafc176c65d15fa6ff107.svg" alt="">\n<p>Метод хорош тем, что позволяет выравнивать таким образом заранее неизвестное число элементов. Количество элементов в ряду также может меняться, адаптируясь к ширине окна просмотра.</p>\n<p>Недостатки метода в дополнительном элементе и лишней строке, добавляющей отступ, если не принять соответствующие меры.</p>\n<p>Этот приём можно использовать для размещения двух элементов в одной строке: слева и справа. Если они не умещаются в одну строку, то второй элемент окажется в начале следующей, а не в конце, как было бы в случае с обтекаемыми блоками. Это выглядит аккуратнее с точки зрения дизайна.</p>\n<h3>Вертикальное выравнивание</h3>\n<p>Строчные блоки по умолчанию выравниваются по базовой линии нижней строки. Но если значение <code>overflow</code> отличается от <code>visible</code>, строчные блоки должны выравниваться по своей нижней границе, чему, однако, не следуют браузеры на основе WebKit.</p>\n<p>Одно из полезных применений режимов выравнивания строчных блоков: вертикальное центрирование.</p>\n<p>Если нужно разместить какой-либо текст или изображение в ограниченном пространстве, выровняв по середине, то для этого можно использовать вспомогательный строчный блок с заданной высотой. Ему и блоку с содержимым задаётся вертикальное выравнивание по середине <code>vertical-align: middle</code>.</p>\n<pre><code>.holder {\n    word-wrap: none;\n}\n.edge,\n.centered {\n    display: inline-block;\n    vertical-align: middle;\n}\n.edge {\n    height: 100px;\n}\n.centered {\n    word-wrap: normal;\n}\n</code></pre>\n<img src="/inline-centering-ebab554d0527158e92c3f376fb9046ce.svg" alt="">\n<p>Выровненные блоки будут корректно вести себя при любых размерах. Если содержимого окажется слишком много, то при необходимости увеличится и высота родительского элемента, если она не ограничена неким заданным значением. Этим не может похвастаться метод центрирования абсолютно позиционированного блока.</p>\n<p>Чтобы избежать возможного переноса строк между вспомогательным элементом и содержимым, используется <code>word-wrap: none</code>. Следует вернуть значение свойства для содержимого обратно <code>word-wrap: normal</code>, чтобы оставить возможность переноса строк внутри текста.</p>\n<h3>Пробельные символы</h3>\n<p>Поскольку строчные блоки по определению являются элементами строк, между ними появляются пробелы, если в HTML-коде есть пробельные символы между тегами. Как правило, это нежелательный эффект, поскольку пробелы добавляют лишние отступы.</p>\n<p>Иногда пробелов можно избежать с помощью специального оформления кода: написанием тегов в подряд, использованием трюков с угловыми скобками или с помощью комментариев. Но такой подход не всегда возможен, например, использование таких приёмов может не позволять HTML-шаблонизатор.</p>\n<p>От лишних промежутков, добавляемых пробелами, можно избавиться с помощью CSS-свойства <code>word-spacing</code>:</p>\n<pre><code>word-spacing: -0.25em;\n</code></pre>\n<p>Данное объявление уменьшает пробелы между словами везде, кроме браузеров, основанных на WebKit. Дефект в WebKit был исправлен только недавно, и на момент написания этих строк его уже нет в Chrome 26, но он ещё присутствует в остальных браузерах на основе старых версий движка WebKit.</p>\n<p>Проблему в WebKit можно обойти через аналогичное объявление свойства <code>letter-spacing</code>:</p>\n<pre><code>letter-spacing: -0.25em;\n</code></pre>\n<p>Можно было бы всегда использовать это правило, но оно не работает в браузере Opera вплоть до 12 версии включительно. Есть и другие недостатки: браузер Mozilla Firefox имеет дефект, из-за которого строчные блоки переносятся на следующую строку в обтекаемом блоке из-за неверного расчёта ширины, а в Internet Explorer 7 теряется эффект при одновременном наличии обоих свойств.</p>\n<p>Поэтому следует выделить свойство <code>letter-spacing: -0.25em</code> только для WebKit, устранив при этом действие <code>word-spacing</code>. Либо же использовать только <code>letter-spacing</code> и выделить <code>word-spacing</code> отдельно для браузера Opera</p>\n<p>Внутри блоков следует вернуть значение свойств по умолчанию <code>0</code>, чтобы избежать слипания слов в тексте.</p>\n<p>В примере использовано значение <code>0.25em</code> — примерный размер пробела в гарнитуре Arial и некоторых других. Однако в иных гарнитурах значение может отличаться, например, Verdana имеет пробел шириной <code>0.34em</code>.</p>\n<p>Некоторые браузеры не допускают наложение строчных блоков, даже если отрицательное значение свойства по модулю больше ширины пробела. Спецификация допускает ограничение действия отрицательного значения.</p>\n<p>Но в WebKit это ограничение отсутствует, и строчные блоки могут накладываться друг на друга. Поэтому нужно тщательно подбирать используемое значение.</p>\n<h3>Ограничения</h3>\n<p>Основной недостаток строчных блоков, помимо пробелов, заключается в том, что нельзя задать блоку ширину, оставшуюся доступной от других элементов в ряду.</p>\n<p>Если ширина не задана, то она зависит от содержимого (<em>shrink-to-fit</em>) и по мере заполнения элемента может увеличиваться вплоть до ширины родительского элемента или даже превысить её.</p>\n<h2>Абсолютное позиционирование</h2>\n<p>Наибольший контроль над положением элементов можно получить с помощью позиционирования элементов по абсолютным координатам. Такие элементы полностью изымаются из потока и не влияют на остальные элементы страницы.</p>\n<h3>Особенности</h3>\n<p>Координаты абсолютно позиционированного элемента задаются относительно предка в дереве элементов, который тоже имеет свойство <code>position</code> со значением, отличным от <code>static</code>. С точки зрения оформления этот предок становится родительским блоком абсолютно позиционированного элемента.</p>\n<p>Промежуточные элементы между этим предком и абсолютно позиционированным блоком не имеют никакого влияния, даже если у них есть такое свойство, как <code>overflow: hidden</code>.</p>\n<p>Согласно спецификации, если координаты не заданы, то абсолютно позиционированный элемент должен располагаться примерно там, где оказался бы, не будучи позиционированным.</p>\n<p>Это даёт возможность применения некоторых приёмов, но, к сожалению, в браузерах всё ещё встречаются ошибки, связанные с таким позиционированием. Также при этом игнорируются режимы выравнивания элементов.</p>\n<h3>Выравнивание</h3>\n<p>Когда заданы координаты с двух противоположных сторон, абсолютно позиционированный элемент растягивается между указанными координатами. Этого не было в Internet Explorer 6, но, начиная с Internet Explorer 7, появилось и работает во всех браузерах.</p>\n<p>Если при этом задан соответствующий размер: ширина или высота, а свойство <code>margin</code> по той же оси имеет значение <code>auto</code>, то элемент выровняется посередине этих координат. Эту ситуацию правильно обрабатывают все браузеры, начиная с Internet Explorer 8.</p>\n<figure>\n    <img src="/position-aligning-97b7048834166e82f242df5337ad6ab2.svg" alt="">\n    <figcaption>&#x412;&#x44B;&#x440;&#x430;&#x432;&#x43D;&#x438;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x430;&#x431;&#x441;&#x43E;&#x43B;&#x44E;&#x442;&#x43D;&#x43E; &#x43F;&#x43E;&#x437;&#x438;&#x446;&#x438;&#x43E;&#x43D;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x43D;&#x43E;&#x433;&#x43E; &#x431;&#x43B;&#x43E;&#x43A;&#x430; &#x43C;&#x435;&#x436;&#x434;&#x443; &#x437;&#x430;&#x434;&#x430;&#x43D;&#x43D;&#x430;&#x43C;&#x438; &#x43A;&#x43E;&#x43E;&#x440;&#x434;&#x438;&#x43D;&#x430;&#x442;&#x430;&#x43C;&#x438; &#x441; `margin: auto`.</figcaption>\n</figure>\n<h3>Заполнение</h3>\n<p>Если задана левая координата <code>left</code>, но не задана правая, то по мере заполнения элемент расширяется вплоть до правой границы предка, относительно которого идёт позиционирование, после чего начинается перенос текста. Аналогично и для обратного случая с правой координатой <code>right</code>.</p>\n<img src="/position-filling-d0b739b358660a0a4bf13b6243b91504.svg" alt="">\n<p>Такое поведение может быть как полезно, чтобы текст не слишком вытянулся в длину, или подсказка не вышла за границы экрана, так и вредно, если размеры позиционированного предка слишком малы.</p>\n<p>Браузеры соблюдают данное правило, начиная с Internet Explorer 8. В Internet Explorer 7 бывают ошибки, а в Internet Explorer 6 нет такого ограничения.</p>\n<h3>Контекст размещения</h3>\n<p>Свойство <code>z-index</code> указывает взаимное расположение позиционированных элементов по оси <code>z</code>, направленной к пользователю. Элементы с большим <code>z-index</code> показываются поверх элементов с меньшим значением свойства.</p>\n<figure>\n    <img src="/position-stacking-bc35904727c0754c310ccc46dc5c7417.svg" alt="">\n    <figcaption>&#x41E;&#x442;&#x43E;&#x431;&#x440;&#x430;&#x436;&#x435;&#x43D;&#x438;&#x435; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x43E;&#x432; &#x441;&#x43E;&#x433;&#x43B;&#x430;&#x441;&#x43D;&#x43E; &#x437;&#x43D;&#x430;&#x447;&#x435;&#x43D;&#x438;&#x44F;&#x43C; `z-index`.</figcaption>\n</figure>\n<p>Хотя может показаться, что взаимная расстановка блоков определяется только их значениями <code>z-index</code>, положение позиционированного предка тоже определяется его значением <code>z-index</code>. Именно это значение является решающим, когда определяется, какой блок должен показываться поверх другого.</p>\n<p>Существует такое понятие как <strong>контекст размещения</strong> (<em>stacking context</em>): если значение <code>z-index</code> у родительского элемента отличается от <code>auto</code>, позиционированные элементы располагаются только внутри этого контекста. Даже элементы с отрицательным <code>z-index</code> отображаются поверх оформления родительского элемента, создающего контекст размещения, хотя и остаются под его содержимым.</p>\n<p>Вследствие этого, элемент с большим <code>z-index</code> и все его потомки отображаются поверх другого элемента с меньшим <code>z-index</code> и всех его потомков независимо от значений <code>z-index</code> самих потомков.</p>\n<figure>\n    <img src="/position-stacking-context-eb6e70d3c8cfc077b8c5990577423610.svg" alt="">\n    <figcaption>&#x41E;&#x442;&#x43E;&#x431;&#x440;&#x430;&#x436;&#x435;&#x43D;&#x438;&#x435; &#x441;&#xA0;&#x443;&#x447;&#x451;&#x442;&#x43E;&#x43C; &#x43A;&#x43E;&#x43D;&#x442;&#x435;&#x43A;&#x441;&#x442;&#x430; &#x440;&#x430;&#x437;&#x43C;&#x435;&#x449;&#x435;&#x43D;&#x438;&#x44F;.</figcaption>\n</figure>\n<p>Контекст размещения появляется не только при наличии <code>z-index</code>, но и при использовании свойств <code>opacity</code> или <code>transform</code> из модулей CSS 3.</p>\n<p>К сожалению, не обошлось без ошибок: Internet Explorer 8 по-особому размещает позиционированные псевдо-элементы <code>:before</code> и <code>:after</code>. Они имеют проблемы с расположением относительно как обычного, так и позиционированного содержимого элемента, к которому относятся. Эти дефекты не воспроизводятся в режиме эмуляции более старших версий вроде «Internet Explorer 10 в режиме Internet Explorer 8».</p>\n<p>Internet Explorer 7 (и ниже) по-своему работает с <code>z-index</code>: в этой версии браузера нет значения <code>auto</code>, значение свойства по умолчанию равно нулю. Понятие контекста размещения при этом имеется и действует на все позиционированные элементы.</p>\n<p>Интересно отметить, что какое-то время Internet Explorer 6 был единственным браузером, учитывающим контекст размещения.</p>\n<h2>Заключение</h2>\n<p>Здесь описаны далеко не все приёмы, а лишь дан общий обзор основных способов вёрстки. Они предназначены для обхода недостатков CSS при раскладке элементов. Этих методов явно недостаточно, но они дают возможность использования неочевидных приёмов, и позволяют полнее раскрыть возможности браузеров.</p>\n<p>Уже на подходе модули, которые прямо предназначены для сложного оформления. Модуль <a href="http://www.w3.org/TR/css3-flexbox/">CSS Flexible Box Layout</a>, близкий к выпуску на момент написания статьи, позволяет гораздо более гибко выравнивать элементы и распределять доступное пространство между ними.</p>\n<p>В разработке находятся многочисленные новые модули CSS: для создания модульной сетки, для достижения недоступных сейчас типографических эффектов, и многие другие, дающие новые возможности и повышающие удобство пользования CSS.</p>\n<p>Со временем отпадёт необходимость в использовании описанных способов, и эти свойства будет разумнее использовать только по их прямому назначению.</p>',headings:[{depth:1,value:"Основные способы вёрстки. Часть вторая: бестабличная вёрстка"},{depth:2,value:"Обтекаемые блоки"},{depth:3,value:"Особенности"},{depth:3,value:"Контекст форматирования"},{depth:3,value:"Очистка"},{depth:3,value:"Адаптация"},{depth:3,value:"Ограничения"},{depth:2,value:"Строчные блоки"},{depth:3,value:"Горизонтальное выравнивание"},{depth:3,value:"Вертикальное выравнивание"},{depth:3,value:"Пробельные символы"},{depth:3,value:"Ограничения"},{depth:2,value:"Абсолютное позиционирование"},{depth:3,value:"Особенности"},{depth:3,value:"Выравнивание"},{depth:3,value:"Заполнение"},{depth:3,value:"Контекст размещения"},{depth:2,value:"Заключение"}],frontmatter:{title:"Основные способы вёрстки. Часть вторая: бестабличная вёрстка"}}},{node:{html:'<h1>Элементы details и summary</h1>\n<p><a href="http://tomleadbetter.co.uk/">Том Лидбеттер</a> 29 августа 2011</p>\n<p>Вам часто приходилось использовать JavaScript для создания виджета, показывающего и скрывающего какое-то содержимое? Возможно, для этого вы даже скачивали целую JavaScript-библиотеку? Что ж, можете радоваться: HTML5 позволяет создавать подобное всего лишь парой строчек кода, без применения JavaScript. Зависит от браузера, конечно, но мы вернёмся к этому позже. Представляем вам элемент <code>&#x3C;details></code>.</p>\n<p>Вот что о нём написано <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-details-element">в спецификации</a>:</p>\n<blockquote>\n<p>Элемент <code>details</code> представляет собой раскрывающийся виджет, показывающий пользователю дополнительную информацию или элементы управления.</p>\n<p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-details-element">Спецификация WHATWG HTML5</a></p>\n</blockquote>\n<p>Мы можем использовать <code>&#x3C;details></code> для создания «виджетов-аккордеонов», которые пользователь может разворачивать и сворачивать. Внутри этого элемента можно разместить любое содержимое.</p>\n<h2>Поддержка браузерами</h2>\n<p>Прежде чем мы продолжим, вам нужно учесть, что сейчас только Chrome поддерживает элемент <code>&#x3C;details></code>. <a href="http://my.opera.com/ODIN/blog/implementing-html5-details">Скоро к нему присоединится и Opera</a>, но немного костылей нам все-таки понадобится. Что ж, запускайте Chrome, и давайте смотреть.</p>\n<h2>Использование <code>&#x3C;details></code></h2>\n<p>Имеются два элемента: <code>&#x3C;details></code> и необязательный <code>&#x3C;summary></code>. Элемент <code>&#x3C;details></code> — это обёртка для содержимого, которое мы хотим показать и скрыть, а <code>&#x3C;summary></code> содержит описание и заголовок этой группы. Формально <code>&#x3C;summary></code> нам не нужен. В его отсутствие браузер подставит текст по умолчанию, например «details» в Chrome. Давайте взглянем на код:</p>\n<pre><code>&#x3C;details>\n    &#x3C;summary>Покажи-скрой меня&#x3C;/summary>\n    &#x3C;p>Бурное развитие внутреннего туризма привело Томаса Кука.&#x3C;/p>\n&#x3C;/details>\n</code></pre>\n<p>Вы можете <a href="http://jsbin.com/egefop#html,live">посмотреть это в действии на jsbin</a>. Даже этот простой пример прекрасно демонстрирует эффект переключения. Без JavaScript!</p>\n<h3>Атрибут <code>open</code></h3>\n<p>В вышеприведенном примере содержимое скрыто при загрузке страницы. Мы можем сделать его видимым по умолчанию, добавив одиночный атрибут <code>open</code> для <code>&#x3C;details></code>, <a href="http://jsbin.com/egefop/2#html,live">пример на jsbin</a>:</p>\n<pre><code>&#x3C;details open>\n    &#x3C;summary>Покажи-скрой меня&#x3C;/summary>\n    &#x3C;p>Бурное развитие внутреннего туризма привело Томаса Кука.&#x3C;/p>\n&#x3C;/details>\n</code></pre>\n<p>Атрибута <code>closed</code> не существует. Поэтому, опуская <code>open</code>, вы по умолчанию подразумеваете <code>closed</code>.</p>\n<h3>Элемент <code>&#x3C;summary></code></h3>\n<p>Мы бегло взглянули на <code>&#x3C;summary></code> в действии, теперь остановимся на нём подробнее. Внутри <code>&#x3C;summary></code> могут использоваться строчные элементы, такие как <code>&#x3C;span></code> или <code>&#x3C;strong></code>. Для чего это может быть нужно? Например, для дополнительного оформления или, как предлагает спецификация, использования <code>&#x3C;label></code> для элемента формы. По крайней мере, <em>было бы</em> удобно, если бы <a href="http://jsbin.com/egefop/3#html">подобная конструкция</a> работала корректно:</p>\n<pre><code>&#x3C;details>\n    &#x3C;summary>&#x3C;label for="name">Имя:&#x3C;/label>&#x3C;/summary>\n    &#x3C;input type="text" id="name" name="name" />\n&#x3C;/details>\n</code></pre>\n<p>Теоретически, нажатие на <code>&#x3C;summary></code> должно раскрывать содержимое элемента <code>&#x3C;details></code>. Но в этом примере содержимое не будет развернуто, потому что вы, фактически, взаимодействуете с <code>&#x3C;label></code>, который переводит фокус на соответствующий <code>&#x3C;input></code> — даже если он скрыт с помощью <code>&#x3C;details></code>.</p>\n<p>Честно говоря, этот момент еще требует прояснения. А что по вашему мнению должно происходить? Возможно, у разработчиков браузеров, читающих эту статью, есть какие-то идеи? :)</p>\n<h3>Вложенность <code>&#x3C;details></code></h3>\n<p>Вы можете помещать <code>&#x3C;details></code> друг в друга, если хотите, как это сделано в <a href="http://jsbin.com/egefop/14#html,live">следующем, вполне валидном примере</a>:</p>\n<pre><code>&#x3C;details>\n    &#x3C;summary>Вопрос 1&#x3C;/summary>\n    &#x3C;p>Население превышает широкий кристаллический фундамент.&#x3C;/p>\n    &#x3C;details>\n        &#x3C;summary>Приложенные документы&#x3C;/summary>\n        &#x3C;ul>\n            &#x3C;li>&#x3C;a href="#">Болгары очень дружелюбны;&#x3C;/a>&#x3C;/li>\n            &#x3C;li>Скумбрия неумеренно перевозит вулканизм;&#x3C;/li>\n            &#x3C;li>Дождливая погода, куда входят Пик-Дистрикт;&#x3C;/li>\n            &#x3C;li>Белый саксаул дегустирует живописный утконос;&#x3C;/li>\n        &#x3C;/ul>\n    &#x3C;/details>\n&#x3C;/details>\n</code></pre>\n<h2>Примеры использования</h2>\n<p>Так в каких же случаях вы можете использовать <code>&#x3C;details></code>? Первое, что приходит в голову — FAQ. Разработчики часто используют для них «аккордеоны», поэтому <code>&#x3C;details></code> замечательно подходит.</p>\n<p>Также не забывайте о навигации по странице. Это может быть закрепленный блок, передвигающаяся одновременно с прокруткой. <a href="http://jsbin.com/egefop/8#html,live">Возможно, что-то вроде этого?</a></p>\n<p>Вы можете использовать <code>&#x3C;details></code> для сворачивания и разворачивания блока комментариев в блоге, для профиля пользователя, для описания загружаемого файла, для сложных форм или в веб-приложениях, как показано в этом примере из спецификации:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 267px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 211.61048689138576%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAIAAAA8m+yHAAAACXBIWXMAAAsSAAALEgHS3X78AAAIe0lEQVRIx3VVaVTTVxbPhzmnH2Y6ntYFsydkISH7SkKALGYBskAwYUkEZRNEEFC01q2W9gxVq9VW7WltO05PT1tnqTOtVUY5ImtYspAAYQmBkIRVIOAHPznHucGZOdNxvOeed977/+99v/t+7757EePjE5OTk9PT05MTE263278pw77hiYkJ/5h/ZGQEJsPDw6Ojo2ATCARgPgbiHwMbRCQS7nYM/HzvPhj9cPv2jz/dcfT1ff/9rVu3/nj3Xutf//bj/ftt3377ndvt2XjyZCY0e+fOz319/W1tbS6XCxGNhD0u18P7rXOR0IjX7fO4fEOuYGAcxgn/SCg4OeQaHBvxTU2O+Ye989HZ2OryyvLCxtpKaDqI8E3M9o9FHf65wYmFzqGZ3pFwt2/W4Y92D4dh7hiN/EdhCTbOwJJzctEVfDwwHEQ0fR2SnVvLurKq/3il4EZM/P6S8sNl5YVl1YePQROPL/6mZn5L3fxvazfHg3OvH5zbUhv9VdVC9geTiHbH+F8ejN/tGP/p4Vhr1+SDvnD7YKR9IPpoMNo+EHnQF7nXG2n9Xw23OubaesYRU4Fx/4jb6xl0Ox2jw5711cXVx/OrjxdejGsrC7GXdO3x/JPYcmg6gADagT2Ho8/r9fU6+kZH/YtLS/PzC6DR6Nz/1UgkOj+/ODExGXd2xcUNF+jxeHw+XzAYhPuEMRoFo/mFlwQ+Li0tQXYgpqamvN6h7u5uh8Mx5PH09/f39PTAsre3d24OcKKzs7PhXwp8gV/giAiFQpBG4+Pjs6EQ5NbMzAx8gRG2h6wC0/X19dXV1bVfSiwWg6RCgF04ND3mH41EIpB0A/39/lH/1FQQooJTbGxsPH/+/NmzZ/94SeBo8Qy70+7pdLh9Xs/Y2PjopkAs8A8QFhcXX3XmeNjh2VCPO+AdDYAzhA1uXq8XXggQCZ6vImx5eTmOHMfxDvX39YGb0+mEUOHHC8C5VwiwCAZxtgHN6XQB1S8AYRl5hUT/rZFwGNDjhAH6kNcHlwz3BJs9ffp0fT22vr4BJL8gFjiDZSy2vgq6tr4Wi+vKamzzzOHwn7/75vSZdw81vtV4+GhDQyPIkYaG+kP1h4+8dfbUyWMNdaePNTYfb7x0tuniyUMfHK+/cqbB2XE7MBWEYhA5UFEh4HD12SaBSMrlCUkEAodBTxUJ1Eolg06j4HZyyThBEiE1GWMSE9KpaDULe/fmiQAgg3NN5X4xh9vU2KjV6YvtNr0iVa/T2XK0UgGXRCSncui7UrgprCQxg5zGSxLQEgV04g+fH5sOBhHA3p4im8W8uyAvTylL3aXWlRRaK/fa9llzALmyuNCaY7CZ9eoUllbKUQjoSj6NTUQ2VRdBIoJzdI+tpGxvmUmjyFQpSwt3F+fnnWioPlO/7/ThqlM1hVa9Si4R1pcY7TnacrPKBnYCuiVbA/UQAZdWUVLKIFML9BoeT5SXwS1QskuM8uZD1pY6Y51FphOSOfSkMqPUkJpslTO4VCJ625YCkw6eHSISjTZWlTNJiWaFiEampnNohWqhUS6y7Eopz5HnyIUyDp1FJfPpFAYZL6HjTBIqPuFNnUYdRwbnk/VVEmZSplQgYibTSVRhMiODz1aL2Top15jB16Rw8Bjc1gQMDo3axSObUml03HaLcRMZwrYX2pHbkRgCDYcjM6k0jYivFLDlfGa2lFdqkGgl7EQMFpOATCZgpQwSlYATU5EH7Ma48/xc9GDZXvQOFBpPZlLIKHSiis8qVAhU/GQ5P7naLM3gJ9PxeJOUrRMxubTEFAZJnITca8nePHMk2lRdxiUTWVQqj0IiYIhUPMmu4OVKGdliWrWeX6QV5CqEf/po/3t1uVYVP1OSzEpElhUYZ2Y22c4vsBFRGBmXnSli6sXJDDI5R0Szy5IqFbRqNSMvlf5+fd7fv2j45nx5vV2dq+AquIR3G+xxZyhIR+rr7RZLZdHuL841tn7d3FBhy1WrjpbsrjWkFQqJ/ESMgpdkVnBLc2THS9X5Wn6OLOmjU+XBF/fcVFOlS5MdOVDxcXPj1eaG3F3pFBxewaFr2ZQUMo5NwKZQ8TQ8Jkuc1JAvNWWw9mZyrr1XDaUq/qpaTh7bl2cozs0pzDFmSKTmrEwpk47cmsBAonhoNAeHMQtIMgZRL6aUZnHzVJz9ZtH5t8vjzhB28/GjjWW2+orSCltRSb5FkyY1i2gmHoWIxGK2I4tkdJuUomISMsVUrThJn84SMghWsyHONhTld44dNmlUFqMhQyZXpcllbKZBxKwyKLIzUokYXCaXms0jGSS0VDaZQkDjMMjXXvt1WrpyZnqTsLqaWnOuxZRrEYjTdFk51jxrsdVakp+fpVQKkpNFNEq2lMmjExkMJpvNhRGLJWRmGuKVBApSeWmFRJKWodCweCnpcg2LLeRxRSQSbcebCSR8Ij2RxATa6JSszKwsnU6j1ei02j12e7wAQujnzl1o+V1LS8sHV658cv78haIC2xuvv4HeiU7Yid2xHYVKQCViMer0lHSJSMTlKGUibYawttw2FZiK96qr12+cOX3m5Im3L1++fPbs2fKyckhmDpWCxxJ27ECTsVgiMkEmFtp2G/NzTbZ8i0WvPFq7L44M1fPTz7689snVS5cu3rz5h+vXrx+sqSWi0CwSaes21NZtSBYRNiKK+Dx7vqUYvLN1VoO6sbo4XvThWb7T3HLh4pWr1z698dnnX371e1txKRqbuBNDRiLxKBSBiMVJ+By5XKFTpZu0cplEmC7m1lXa44TBmfsHBlvvt7U/6ujq7HzwID6BLt/d0+vodXR393R0dnV1dba3t3d1POru6ujshPlDt8v5r44BrX1wYMA5OBjv8W630znY3983MDDQ09MLFrHY2srKClR/aLP/3WuhPf0TIzyDngw6/NwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44F; details &#x438;&#x437; &#x441;&#x43F;&#x435;&#x446;&#x438;&#x444;&#x438;&#x43A;&#x430;&#x446;&#x438;&#x438;." title="" src="/static/details-w3c-bb70816ada1f337f0162172eae911f43-a9412.png" srcset="/static/details-w3c-bb70816ada1f337f0162172eae911f43-e0eb5.png 163w,\n/static/details-w3c-bb70816ada1f337f0162172eae911f43-a9412.png 267w" sizes="(max-width: 267px) 100vw, 267px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44F; <code>&lt;details&gt;</code> &#x438;&#x437;&#xA0;&#x441;&#x43F;&#x435;&#x446;&#x438;&#x444;&#x438;&#x43A;&#x430;&#x446;&#x438;&#x438;.</figcaption>\n</figure>\n<p>На самом деле, даже глядя сейчас на админку WordPress, я вижу множество возможностей использования <code>&#x3C;details></code>. Если у вас есть ещё какие-то идеи и предложения — расскажите о них в комментариях.</p>\n<h2>Оформление</h2>\n<p>Как же нам оформить эту штуку? Для элемента, раскрывающего содержимое, в WebKit вы можете использовать псевдо-элемент <code>::-webkit-details-marker</code>. <a href="http://jsbin.com/egefop/9#html,live">Небольшой пример</a>:</p>\n<pre><code>details summary::-webkit-details-marker {\n    background: red;\n    color: #fff;\n    font-size: 500%;\n}\n</code></pre>\n<p>Мы также можем позиционировать этот элемент по отношению к родителю. <a href="http://jsbin.com/egefop/17#html,live">Здесь, например, он прижат к правому краю</a>. В общем-то, и все.</p>\n<p>А как же заменить раскрывающий элемент своей иконкой? Используя выборку по атрибуту, вы можете определить, когда <code>&#x3C;details></code> раскрыт, а когда закрыт, и применить соответствующее фоновое изображение. Мы делаем примерно то же самое в <a href="http://jsbin.com/egefop/11#html,live">этом примере</a>, за исключением того, что вместо фонового изображения мы используем псевдо-элемент <code>:after</code>:</p>\n<pre><code>summary::-webkit-details-marker {\n    display: none\n}\n\nsummary:after {\n    background: red;\n    border-radius: 5px;\n    content: "+";\n    color: #fff;\n    float: left;\n    font-size: 1.5em;\n    font-weight: bold;\n    margin: -5px 10px 0 0;\n    padding: 0;\n    text-align: center;\n    width: 20px;\n}\n\ndetails[open] summary:after {\n    content: "-";\n}\n</code></pre>\n<p>В этом примере символы <code>+</code> и <code>-</code> используются в качестве раскрывающей ссылки. В зависимости от дизайна вы можете использовать <code>:before</code> вместо <code>:after</code>, но, в любом случае, оба псевдо-элемента позволяют использование изображения.</p>\n<p>Выборка по атрибуту <code>details[open]</code> скрывает в себе некоторые интересные возможности. Как хорошие HTML5-доктора, мы создали <a href="http://jsbin.com/egefop/15#html,live">доработанный пример</a>, показанный на этом скриншоте:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 57.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQoz5WS2U7jQBBF/f9fM+A4XpCX6nY3Hi/BEU4UJ5MdgteMoqA8c21BhBAjMeehulyq5Va3lZeXwzzPF4s/ZVW9/g+Xy0VZrVazrnixXq/3+/1Tz9X5F7vdrm3brjgKozhO8nz+/MHhcLj6SL3aK+heVZXCGGeMSSGI2L28D8MwCAIhZBRFo9EoSZI0fYjjeDwexwlOhDEpTtO0KArFdhzLtIQUnufC5z7njLuuS0Su48D6vt/3J9t2CAeRlNJx3c1mo9yqqjEcmoahqreGrpumoRvGYDDQdV3t7FDvMICGqKZZlvXr5sYj6mSjjMjzGHEhmO/bts04R2/OOeQQ4n4HRnvQBkUeCkkI0clGamaamaZN7+4eNS2QEiKR7RGSmC94EP7GvWDJPM+n0+msZzKZ4FIVTK/LsqnKqiiasqxrfOHJ36l74LRt8xkET6dT91QPaYrLXG+2TZ/SfkPzhfdiTF8ul2gB5++POR6P5/NZwY+VZRmW2W639Y/BIpj8BveBY6TkFNVSAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x42D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442; details &#x432; Chrome." title="" src="/static/nice-details-d618cabca3dbb30f0243ec807c40aa36-fa387.png" srcset="/static/nice-details-d618cabca3dbb30f0243ec807c40aa36-844a8.png 163w,\n/static/nice-details-d618cabca3dbb30f0243ec807c40aa36-fe46c.png 325w,\n/static/nice-details-d618cabca3dbb30f0243ec807c40aa36-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41E;&#x444;&#x43E;&#x440;&#x43C;&#x43B;&#x435;&#x43D;&#x43D;&#x44B;&#x439; <code>&lt;details&gt;</code> &#x432;&#xA0;Chrome.</figcaption>\n</figure>\n<p>Было бы интересно (хотя это и не всегда уместно), если бы мы могли использовать CSS-трансформации для анимации разворачивания и сворачивания <code>&#x3C;details></code>, но пока это невозможно.</p>\n<h2>Доступность</h2>\n<p>К сожалению, на момент написания статьи отсутствует возможность управления <code>&#x3C;details></code> с помощью клавиатуры. <a href="http://www.paciellogroup.com/blog/2011/08/accessibility-notes-2nd-august-2011/">Стив Фолкнер пишет</a>:</p>\n<blockquote>\n<p>Проблема в том, что на данный момент отсутствует поддержки клавиатуры и нет никакой инофрмации для обеспечения доступности.</p>\n</blockquote>\n<p>Попробуйте сами. Если вы раскроете элемент <code>&#x3C;details></code> с помощью мыши, тогда вы сможете использовать клавиатуру для навигации по вложенным элементам, но вы также должны иметь возможность открывать и закрывать <code>&#x3C;details></code> с клавиатуры. Что ж, неидеально, но я уверен, что разработчики Chrome скоро с этим разберутся. Правда, ребята?</p>\n<h2>Обратная совместимость</h2>\n<p>Прежде чем кто-то начнет восклицать, что это не работает в IE6, хочу сказать: мы знаем. Тем не менее, благодаря некоторым умным людям, мы можем обеспечить изящную обратную совместимость. В этой <a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills">очень полезной коллекции всевозможных кроссбраузерных костылей</a> я нашел два решения, оба они требуют jQuery:</p>\n<ul>\n<li>Обратная совместимость для <a href="http://mathiasbynens.be/notes/html5-details-jquery"><code>&#x3C;details></code> с помощью jQuery</a> от Матиаса Байненса;</li>\n<li><a href="https://github.com/manuelbieh/details-Polyfill">Еще одна альтернатива <code>&#x3C;details></code>, также основанная на jQuery</a> от Мануэля Бье.</li>\n</ul>\n<p>Многие из вас захотят использовать <a href="http://modernizr.com/">Modernizr</a> для определения возможностей браузера, но на данный момент в Modernizr отсутствует проверка поддержки <code>&#x3C;details></code>. Матиас, автор приведенного выше решения для обратной совместимости, предлагает использовать <a href="https://github.com/Modernizr/Modernizr/blob/master/feature-detects/elem-details.js">этот Modernizr-сниппет</a>.</p>\n<h2>Зачем вообще это использовать?</h2>\n<p>Конечно, дарёному коню в зубы не смотрят, но все-таки — почему этот виджет существует в HTML5? Что ж, как и в случае с другими возможностями HTML5, он просто делает нашу жизнь легче. Реализация таких элементов, как календарь, слайдер, прогресс-бар, а теперь ещё и «аккордеон», становится гораздо проще и не требует использования JavaScript. Кто знает, что будет следующим? Нативные табы? Было бы здорово :)</p>\n<h2>В заключение</h2>\n<p>В этой статье мы продемонстрировали, как использовать элементы <code>&#x3C;details></code> и <code>&#x3C;summary></code>. Элемент <code>&#x3C;details></code> при помощи <code>&#x3C;summary></code> создаёт естественный для браузера интерактивный раскрывающийся виджет.</p>\n<p>На текущий момент <code>&#x3C;details></code> работает только в Chrome, но, надеюсь, эта ситуация в скором времени изменится. Пока что мы можем использовать в CSS только <code>::-webkit-details-marker</code>, но есть и множество других CSS-техник. Если у вас есть какой-либо опыт или идеи для использования элемента <code>&#x3C;details></code>, расскажите об этом в комментариях.</p>\n<p>Перевод оригинальной статьи «<a href="http://html5doctor.com/the-details-and-summary-elements/">The details and summary elements</a>» <a href="http://html5doctor.com/author/toml/">Тома Лидбеттера</a> (Tom Leadbetter), опубликованной на сайте <a href="http://html5doctor.com/">HTML5Doctor.com</a>.</p>',headings:[{depth:1,value:"Элементы details и summary"},{depth:2,value:"Поддержка браузерами"},{depth:2,value:"Использование "},{depth:3,value:"Атрибут "},{depth:3,value:"Элемент "},{depth:3,value:"Вложенность "},{depth:2,value:"Примеры использования"},{depth:2,value:"Оформление"},{depth:2,value:"Доступность"},{depth:2,value:"Обратная совместимость"},{depth:2,value:"Зачем вообще это использовать?"},{depth:2,value:"В заключение"}],frontmatter:{title:"Элементы details и summary"}}},{node:{html:'<h1>Вам не нравится IE6? Что, правда?</h1>\n<p><a href="http://remy.tumblr.com/">Реми Шарп</a> 2 августа 2011</p>\n<p>Сегодня прочёл очередное высказывание на тему <em>Почему я не поддерживаю IE6</em> из длинного-предлинного списка ему подобных. Что за бред? Если поддержка IE6 является частью вашей работы или включена в договор — значит так оно и есть, такова профессия, и в этих сложностях её смысл.</p>\n<p>Меня тошнит от подобных старых и скучных публикаций и даже целых сайтов, посвящённых разглагольствованиям, почему IE6 должен умереть. Мы все в курсе, что IE6 должен умереть. Microsoft в курсе, что IE6 должен умереть. Чёрт, даже сам IE6 в курсе, что он должен умереть. Он шатается вокруг уже многие годы как чёртов зомби.</p>\n<p>А теперь смотрите, факт: никто сегодня не устанавливает IE6 в качестве основного браузера. Более того, я готов спорить, что никто, будь у него такой выбор, не предпочтёт IE6 любому другому браузеру. Но проблема не в этом. Теперь нам ясно: никто, блин, специально не выбирает IE6 и уж точно не использует этот браузер, чтобы просто вас взбесить!</p>\n<p>Кстати, когда IE6 наконец-то помрёт, кто займётся поиском и заменой IE6 на IE7 во всех записях, а потом IE7 на IE8 и так далее?</p>\n<p>Вполне очевидно, что когда компания АБВ во времена XP и IE6 приобретала оборудование для своих сотрудников, это стоило ей чёртову кучу денег. Компании не любят тратить деньги, когда им кажется, что это совсем не нужно. Поэтому очередное обновление всех этих ПК не входит в их приоритеты. Не забывайте, что обновление тянет за собой поддержку, обслуживание, простой и так далее — всё, что стоит ещё одну чёртову кучу денег.</p>\n<p>Относительно недавно я вёл курсы в одном научном институте, где местные разработчики рассказали мне, что самый часто используемый браузер у них — это IE6. И поддерживать этот браузер — это их работа.</p>\n<p>Их работа. За которую им платят. Если вы не хотите поддерживать IE6 — не поддерживайте. Никто не выкручивает вам руки, заставляя фрилансить над подобными проектами. Если вы настолько против IE6 и имеете постоянную работу — я надеюсь, что вы упомянули это на собеседовании, но если нет — и вы действительно ненавидите IE6, то вы можете уволиться и найти другую работу, правильно?</p>\n<p>То, что разрабатывать под IE6 сложно из-за того, что он уже не поддерживается и, в частности, просто не совместим с требованиями к современным сайтам — это факт. Поэтому мы просим за это больше денег.</p>\n<p>Если ваш клиент создаёт совершенно новый продукт, то у вас нет причин для поддержки старых браузеров, если только у них нет чёткой статистики, показывающей эту необходимость. В любом случае, существует множество способов просчитать потенциальную статистику использования браузеров. Однако если это уже существующая компания, и у них есть поток IE6, обеспечивающий поддержку их бизнесу — тогда это просто часть вашей работы.</p>\n<p>Некоторые команды разработчиков имеют такие размеры и способны нанимать новых людей только благодаря браузерам вроде IE. Если бы всё было так просто, куча людей осталась бы без работы.</p>\n<p>Разработка для сети подразумевает, что вы знаете как работают браузеры. Суть такой работы заключается в том, чтобы сайты работали везде. Знание всех «подводных граблей» браузеров — это то, что отличает <em>Ваньку Середнячка</em> от <em>господина Николая Великолепного</em>. Если вы не хотите учить трюки IE6 (или IE7, или IE8, или IE9) — не надо. Вашу работу заберёт кто-нибудь другой.</p>\n<p>Что до меня, я с нетерпением жду новых причин, согласно которым IE6 должен умереть — как будто это и так прекрасно не задокументировано.</p>\n<p>Перевод оригинальной заметки «<a href="http://remy.tumblr.com/post/8334086394/what-do-you-mean-you-dont-like-ie6-really">What do you mean, you don’t like IE6? Really?</a>» <a href="http://richclarkdesign.com/">Реми Шарпа</a> (Remy Sharp), опубликованной в блоге «<a href="http://remy.tumblr.com/">rem @ > 140 characters</a>».</p>',headings:[{depth:1,value:"Вам не нравится IE6? Что, правда?"}],frontmatter:{title:"Вам не нравится IE6? Что, правда?"}}},{node:{html:"<h1>Улучшение формы комментариев</h1>\n<p>От базовых до улучшенных сообщений об ошибках к фоновой синхронизации</p>\n<p><em>Перевод «<a href=\"https://justmarkup.com/log/2016/10/enhancing-a-comment-form/\">Enhancing a comment form</a>» Майкла Шарналя.</em></p>\n<p>Не исключено, что рано или поздно при разработке сайта вам придётся заняться реализацией формы, будь то регистрационная форма или форма для добавления комментариев. Я сам занимался этим уже много раз, но при создании очередной формы комментариев я задумался, насколько далеко я могу зайти в процессе её улучшения. После добавления одного улучшения мне в голову пришло другое, после реализации которого пришло ещё одно.</p>\n<p>Вот почему я хотел бы показать вам как, используя фоновую синхронизацию, вы можете улучшить форму (в данном случае состоящую из <input> для имени, <textarea> для сообщения и <button> для отправки) с базовой до <em>Улучшенной улучшенной™</em> версии с фоновой синхронизацией.</p>\n<h2>Базовая версия</h2>\n<p>Начнём с базовой версии <em>HTML</em>-формы:</p>\n<pre><code>&#x3C;form action=\"./\" method=\"post\">\n    &#x3C;label for=\"name\">Имя&#x3C;/label>\n    &#x3C;input type=\"text\" name=\"name\" id=\"name\">\n\n    &#x3C;label for=\"comment\">Комментарий&#x3C;/label>\n    &#x3C;textarea name=\"comment\" id=\"comment\">&#x3C;/textarea>\n\n    &#x3C;button type=\"submit\">Опубликовать&#x3C;/button>\n&#x3C;/form>\n</code></pre>\n<p>Это будет работать в <em>любом</em> браузере. Теперь начнём улучшать форму без изменения её базовой версии.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v1/\">Демо базовой версии.</a></p>\n<h2>Улучшенная HTML-версия</h2>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*gZFIRrlbLI5aNHlSNzfiNg.png\"></p>\n<p>Во-первых, элемент <textarea> никогда не должен быть пустым, поэтому добавим к нему атрибут required. Форму можно проверять на стороне клиента без <em>JavaScript</em> — при условии, что браузер <a href=\"http://caniuse.com/#feat=form-validation\">поддерживает</a> такую возможность. Однако, не стоит на него полагаться (неподдерживаемые браузеры, <a href=\"https://bugs.webkit.org/show_bug.cgi?id=28649\">баги</a> в браузерах и другое), поэтому валидация форм на стороне сервера — очень хорошая идея.</p>\n<pre><code>&#x3C;form action=\"./\" method=\"post\">\n    &#x3C;label for=\"name\">Имя&#x3C;/label>\n    &#x3C;input type=\"text\" name=\"name\" id=\"name\">\n\n    &#x3C;label for=\"comment\">Комментарий&#x3C;/label>\n    &#x3C;textarea required placeholder=\"Что думаете?\" name=\"comment\" id=\"comment\">&#x3C;/textarea>\n\n    &#x3C;button type=\"submit\">Опубликовать&#x3C;/button>\n&#x3C;/form>\n</code></pre>\n<p>Далее, добавим атрибут placeholder. Никогда не заменяйте <label> на placeholder, это важное дополнение, но никак не замена.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v2/\">Демо улучшенной версии <em>HTML</em>.</a></p>\n<h2>Делим по способностям</h2>\n<p>Для дальнейших улучшений мы будем использовать <em>JavaScript</em>. В <head> нашей страницы добавим <a href=\"https://justmarkup.com/log/2015/02/cut-the-mustard-revisited/\">тест, отсекающий браузеры</a>, которые не поддерживают улучшения. Мы будем использовать технику, с которой я впервые столкнулся в статье <em>Filament Group <a href=\"https://www.filamentgroup.com/lab/enhancing-optimistically.html\">«Enhancing optimistically»</a></em>.</p>\n<pre><code>if ('visibilityState' in document) {\n    // Подключаем здесь loadJS...\n    function loadJS (src) { ... }\n\n    // Этот браузер всё сможет, давайте ещё улучшим интерфейс!\n    var docElem = window.document.documentElement;\n\n    // Класс для улучшения интерфейса\n    var enhancedClass = 'enhanced';\n    var enhancedScriptPath = 'enhanced.js';\n\n    // Добавляем класс улучшения\n    function addClass () {\n        docElem.className += ' ' + enhancedClass;\n    }\n\n    // Удаляем класс улучшения\n    function removeClass () {\n        docElem.className = docElem.className.replace(enhancedClass, ' ');\n    }\n\n    // Давайте оптимистично улучшим\n    addClass();\n\n    // Подгружаем улучшенный JS-файл\n    var script = loadJS(enhancedScriptPath);\n\n    // Если скрипт не загрузился за 8 секунд,\n    // удаляем класс улучшения\n    var fallback = setTimeout(removeClass, 8000);\n\n    // Когда скрипт загружается, отменяем таймер\n    // и добавляем класс снова, на всякий случай\n    script.onload = function () {\n        // Отменяем таймер фолбэка\n        clearTimeout(fallback); \n        // Добавляем этот класс на случай, если его уже удалили.\n        // Этот запрос не отменить, он может прийти в любое время\n        addClass();\n    };\n}\n</code></pre>\n<h2>Кастомные сообщения об ошибках</h2>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*cwLJ0FiC-KCDTXvVmJYXBw.png\"></p>\n<p>Заменим базовое сообщение об ошибке «Пожалуйста, заполните это поле» на кастомное. Для создания кастомного сообщение в наш скрипт <em>enhanced.js</em> (который будет загружаться только в поддерживаемых браузерах) добавим следующий код:</p>\n<pre><code>// Добавляем свой текст сообщения об ошибке\nvar commentArea = document.querySelector('#comment');\n\ncommentArea.addEventListener('invalid', function (e) {\n    e.target.setCustomValidity('');\n    if (!e.target.validity.valid) {\n        e.target.setCustomValidity('Пожалуйста, введите комментарий.');\n    }\n});\n\ncommentArea.addEventListener('input', function (e) {\n    e.target.setCustomValidity('');\n});\n</code></pre>\n<p>В таком случае, при отправке формы без комментариев, пользователю будет выводиться сообщение <em>«Пожалуйста, введите комментарий»</em>. Вы, наверное, заметили, что я до сих пор ничего не говорил о стилях сообщений. Потому что на данный момент нет никакой возможности оформить их с помощью <em>CSS</em>. Раньше можно было воспользоваться селектором ::-webkit-validation-bubble для браузеров на <em>WebKit</em>, но он был удалён. Если вы действительно хотите оформить всплывающее окно, то вам нужно будет <a href=\"http://developer.telerik.com/featured/building-html5-form-validation-bubble-replacements/\">создать своё собственное</a>. Но имейте в виду, что здесь есть много подводных камней, поэтому я советую использовать всплывающие окна по умолчанию.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v3/\">Демо кастомных сообщений об ошибках.</a></p>\n<h2>Аяксим</h2>\n<p>Теперь, когда пользователь попытается отправить пустое поле, все современные браузеры будут выводить кастомное сообщение об ошибке, но даже если пользователь оставит комментарий, форма по-прежнему будет обрабатываться на стороне сервера, что приведёт к перезагрузке страницы. Давайте это исправим, разместив комментарий с помощью <em>JavaScript</em>.</p>\n<pre><code>// Отправляем данные формы на JavaScript\nif (window.FormData) {\n    var appendComment = function (nameValue, commentValue) {\n        var comment = document.createElement('li');\n        var commentName = document.createElement('h4');\n        var commentComment = document.createElement('p');\n        var commentWrapper = document.querySelector('.comments');\n        commentName.innerText = nameValue;\n        commentComment.innerText = commentValue;\n        nameValue ? comment.appendChild(commentName) : '';\n        comment.appendChild(commentComment);\n        commentWrapper.appendChild(comment);\n    };\n\n    form.addEventListener('submit', function (e) {\n        var formData = new FormData(form);\n        commentValue = commentArea.value;\n        nameValue = nameInput.value;\n\n        var xhr = new XMLHttpRequest();\n        // Сохраняем комментарий в базу\n        xhr.open('POST', './save', true);\n        xhr.onload = function () {\n            appendComment(nameValue, commentValue);\n        };\n        xhr.send(formData);\n\n        // Всегда вызывайте preventDefault в конце\n        // см. http://molily.de/javascript-failure/\n        e.preventDefault();\n    });\n}\n</code></pre>\n<p>Сначала проверим поддерживает ли бразуер <a href=\"http://caniuse.com/#feat=xhr2\">*FormData</a>* и расширенные функции XMLHttpRequest. Если да, то определим функцию appendComment() для добавления нового комментария к другим комментариям. Далее добавим <em>событие отправки *к нашей форме для отправки XMLHttpRequest. Если запрос успешный — добавляем комментарий. В самом конце вызовем preventDefault для предотвращения поведения формы по умолчанию. Важно вызывать метод preventDefault в конце, так как мы не знаем [завершится ли выполнение *JavaScript</em> ошибкой](<a href=\"http://molily.de/javascript-failure/\">http://molily.de/javascript-failure/</a>).</p>\n<p>Теперь наша форма прекрасно отправляет комментарии без перезагрузки страницы и при этом по-прежнему работает в неподдерживаемых браузерах.</p>\n<p>На этом этапе вы можете задаться вопросом, почему я не использовал <em>Fetch API</em>. Я хотел охватить как можно больше популярных браузеров без использования полифилов и не хотел ограничиваться поддержкой только современных браузеров.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v5/\">Демо <em>AJAX</em>-версии.</a></p>\n<h2>Авторасширение <em><textarea></em></h2>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*n8RKieLJYcHXD_5Czl-UhQ.gif\"></p>\n<p>Если вы напишите длинный комментарий, вам придётся проматывать текст вверх и вниз, чтобы перепроверить написанное. Исправим это с помощью авторасширения <textarea>.</p>\n<p>Для этого мы будем использовать <a href=\"https://codepen.io/vsync/pen/czgrf\">решение</a>, которое я нашёл на <em>CodePen</em>.</p>\n<pre><code>commentArea.addEventListener('keydown', autosize);\n \nfunction autosize () {\n    var el = this;\n    setTimeout(function () {\n        el.style.cssText = 'height:auto;';\n        el.style.cssText = 'height:' + el.scrollHeight + 'px';\n    }, 0);\n}\n</code></pre>\n<p>Теперь элемент <textarea> адаптируется к длине комментария, что упрощает проверку текста.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v5/\">Демо с автоматическим расширением.</a></p>\n<h2>Успех, ошибка и плохое соединение</h2>\n<p>Итак, мы добавили улучшенный <em>HTML</em> (атрибуты placeholder и required), назначили кастомные сообщения об ошибках, добавили <em>AJAX</em> и автоматическое расширение для <textarea>.</p>\n<p>Далее, для большего удобства, добавим уведомление о успешной (или неуспешной) отправке комментария и индикатор прогресса для отображения времени загрузки.</p>\n<pre><code>&#x3C;p class=\"message\" id=\"feedback\">&#x3C;/p>\n&#x3C;button type=\"submit\">Опубликовать&#x3C;/button>\n</code></pre>\n<p>Сначала добавим новый элемент в нашу форму для отображения сообщений.</p>\n<pre><code>var messageElement = document.querySelector('#feedback');\n// …\nform.addEventListener('submit', function () {\n// …\n    xhr.onerror = function () {\n        messageElement.className = 'message error';\n        messageElement.textContent = 'При публикации комментария произошла ошибка. Попробуйте ещё раз.';\n    };\n    xhr.upload.onprogress = function (e) {\n        messageElement.textContent = 'Uploading: ' + e.loaded / e.total * 100;\n    };\n    xhr.upload.onloaded = function () {\n        messageElement.className = 'message success';\n        messageElement.textContent = 'Ваш комментарий успешно опубликован.';\n    };\n// …\n});\n</code></pre>\n<p>В случае возникновения ошибки при отправке комментария, пользователю будет выводиться сообщение, которое определено в событии error. В противном случае будет выводиться сообщение об успешной отправке, как это задано в событии loaded. В событие progress добавим индикатор, который будет показывать сколько процентов страницы уже загрузилось. При условии, что качество подключения хорошее, вы не увидите индикатор загрузки, но если вы набираете длинный комментарий при медленном соединении, индикатор сообщит вам, что «там» что-то происходит и комментарий рано или поздно будет опубликован.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v6/\">Демо версии с прогрессом</a>.</p>\n<h2>Сервис-воркер и фоновая синхронизация</h2>\n<p>Итак, мы улучшили работу с формой при плохом соединении, а теперь улучшим её при отсутствии соединения.</p>\n<pre><code>// Проверяем поддержку сервис-воркера\nif ('serviceWorker' in navigator) {\n    // Регистрируем сервис-воркер\n    navigator.serviceWorker.register('./service-worker.js');\n\n    form.addEventListener('submit', function (e) {\n        let formData = new FormData(form);\n        // Отправляем сообщение в фоне\n        navigator.serviceWorker.ready.then(function (swRegistration) {\n            idbKeyval.set('comment', commentArea.value);\n            idbKeyval.set('name', nameInput.value ? nameInput.value : false);\n            messageElement.className = 'message info';\n            messageElement.textContent = 'Похоже вы в офлайне. Комментарий опубликуется автоматически как только вы будете онлайн.';\n\n            return swRegistration.sync.register('form-post');\n        });\n\n        // Всегда вызывайте preventDefault в конце\n        // см. http://molily.de/javascript-failure/\n        e.preventDefault();\n    });\n\n    // Событие для получения сообщения\n    // отправленного сервис-воркером\n    navigator.serviceWorker.addEventListener('message', function (e) {\n        if (e.data == 'success') {\n            messageElement.className = 'message success';\n            messageElement.textContent = 'Ваш комментарий успешно опубликован.';\n            let nameValue = false;\n            idbKeyval.get('name').then(function (data) {\n                nameValue = data;\n                let commentValue = '';\n                idbKeyval.get('comment').then(function (data) {\n                    commentValue = data;\n                    appendComment(nameValue, commentValue);\n                });\n            });\n        } else if (e.data == 'error') {\n            messageElement.className = 'message error';\n            messageElement.textContent = 'При публикации комментария произошла ошибка. Попробуйте ещё раз.';\n        }\n    });\n} else if (window.FormData) {\n    // …\n}\n</code></pre>\n<p>Сначала проверим <a href=\"http://caniuse.com/#feat=serviceworkers\">поддерживается ли</a> сервис-воркер браузером. Если да, то используем <a href=\"https://github.com/WICG/BackgroundSync/blob/master/explainer.md\">фоновую синхронизацию</a> для отправки комментария, в противном случае опубликуем комментарий через XMLHttpRequest, как показано выше в версии на <em>AJAX</em>.</p>\n<p>Давайте посмотрим, как работает код. При отправке данных формы сохраним значение имени и комментария в <a href=\"https://developer.mozilla.org/en/docs/Web/API/IndexedDB_API\">*IndexedDB</a><em>. В моём случае, я использую хранилище «ключ-значение» на промисах Джейка Арчибальда, реализованное с помощью *IndexedDB</em>. Также выведем сообщение о том, что пользователь находится в автономном режиме и, как только появится сеть, комментарий будет автоматически опубликован. Если соединение хорошее и комментарий может быть опубликован сразу, это сообщение выводиться не будет. И, наконец, регистрируем фоновую синхронизацию с тегом form-post.</p>\n<p>Чтобы узнать был ли комментарий размещён успешно, добавим обработчик событий, который проверит сообщения, поступающие от сервис-воркера.</p>\n<p>Теперь давайте посмотрим, как выглядит наш <em>service-worker.js</em>.</p>\n<pre><code>importScripts('idb-keyval.js');\n\nconst VERSION = 'v1';\n\nself.addEventListener('install', function (e) {\n    self.skipWaiting();\n    e.waitUntil(\n        caches.open(VERSION).then(function (cache) {\n            return cache.addAll([\n                './',\n                './index.html',\n                '../style.css',\n                'enhanced.js'\n            ]);\n        })\n    );\n});\n\nself.addEventListener('fetch', function (e) {\n    let request = e.request;\n    if (request.method !== 'GET') {\n        return;\n    }\n});\n\nself.addEventListener('activate', function () {\n    if (self.clients &#x26;&#x26; clients.claim) {\n        clients.claim();\n    }\n});\n\nself.addEventListener('sync', function (e) {\n    if (e.tag == 'form-post') {\n        e.waitUntil(postComment());\n    }\n});\n\nfunction postComment () {\n    let formData = new FormData();\n\n    idbKeyval.get('name').then(function (data) {\n        formData.append('name', data);\n    });\n\n    idbKeyval.get('comment').then(function (data) {\n        formData.append('comment', data);\n    });\n\n    fetch('./save', {\n        method: 'POST',\n        mode: 'cors',\n        body: formData\n    }).then(function (response) {\n        return response;\n    }).then(function (text) {\n        send_message_to_all_clients('success');\n    }).catch(function (error) {\n        send_message_to_all_clients('error');\n    });\n}\n\nfunction send_message_to_client (client, msg) {\n    return new Promise(function (resolve, reject) {\n        var msg_chan = new MessageChannel();\n\n        msg_chan.port1.onmessage = function (e) {\n            if (e.data.error) {\n                reject(e.data.error);\n            } else {\n                resolve(e.data);\n            }\n        };\n\n        client.postMessage(msg, [msg_chan.port2]);\n    });\n}\n\nfunction send_message_to_all_clients (msg) {\n    clients.matchAll().then(clients => {\n        clients.forEach(client => {\n            send_message_to_client(client, msg).then(\n                msg => console.log('Сообщение из сервис-воркера: ' + msg)\n            );\n        });\n    });\n}\n</code></pre>\n<p>Сначала импортируем хранилище «ключ-значение» на промисах, которое мы уже использовали в <em>enhanced.js</em> для обработки <em>IndexedDB</em>. Затем определим const для версии кэша и добавим функции для обработки install (добавим ресурсы в кэш), fetch (для обработки запросов) и события активации. Самая важная часть начинается с синхронизированной версии. Здесь мы сначала проверяем является ли тег form-post. Это тот самый тег, который мы зарегистрировали ранее используя swRegistration.sync.register(form-post). При совпадении тега вызываем e.waitUntil(postComment()). Теперь, как только появится хорошее соединение, функция postComment будет выполнена.</p>\n<p>В нашей функции postComment создадим новый объект FormData и добавим имя и значение поля, которые мы получим от <em>IndexedDB</em>. Далее, для того, чтобы сохранить комментарий, используем fetch. В случае получения успешного ответа отобразим сообщения об удачной отправке комментария (в противном случае — об ошибке).</p>\n<p>Теперь комментарий будет опубликован в любом случае. Если вы онлайн, комментарий опубликуется сразу, если вы офлайн, он будет опубликован, как только появится связь, даже если вы уже закрыли страницу с формой.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v7/\">Демо <em>Улучшенной улучшенной™</em> версии.</a></p>\n<p><strong>*Обратите внимание:</strong> если вы хотите проверить работоспособность окончательной версии в автономном режиме, необходимо учитывать, что сейчас в Chrome есть ошибка — просмотр страницы в автономном режиме, при использовании отладчика, не работает. Для этого вам действительно надо быть в офлайне.*</p>\n<h2>Заключение</h2>\n<p>Как видите, есть много вариантов улучшить форму, а также множество других возможностей, которые я не упомянул. Столько всего можно сделать с помощью <em>CSS</em>, о чём я вообще не говорил здесь, но также многое можно сделать с помощью <em>JavaScript</em>. Самое главное здесь, что, благодаря прогрессивному улучшению, мы поддерживаем все браузеры. Некоторые посетители получат более удобный интерфейс, но абсолютно все пользователи смогут выполнить задачу и опубликовать комментарий.</p>\n<p>Лишь немногие получат Улучшенную улучшенную™ версию, но, в зависимости от обстоятельств, каждый гарантированно получит базовую версию формы.</p>\n<p><a href=\"https://justmarkup.github.io/demos/form-enhancement/v7/\">Финальная Улучшенная улучшенная™ версия.</a></p>\n<p>Если у вас есть какие-либо идеи по улучшению или вы нашли ошибку в коде, пожалуйста, создайте <a href=\"https://github.com/justmarkup/demos/issues\">ишью на Гитхабе.</a></p>\n<p><em>Перевод «<a href=\"https://justmarkup.com/log/2016/10/enhancing-a-comment-form/\">Enhancing a comment form</a>» Майкла Шарналя, опубликован с разрешения автора. Перевод <a href=\"https://medium.com/@annakukhareva\">Анны Кухаревой</a>, редактура <a href=\"https://medium.com/@pepelsbey\">Вадима Макеева</a>, <a href=\"https://medium.com/@yoksel\">Юли Бухваловой</a> и <a href=\"https://medium.com/@simonenko\">Алексея Симоненко</a>.</em></p>",headings:[{depth:1,value:"Улучшение формы комментариев"},{depth:2,value:"Базовая версия"},{depth:2,value:"Улучшенная HTML-версия"},{depth:2,value:"Делим по способностям"},{depth:2,value:"Кастомные сообщения об ошибках"},{depth:2,value:"Аяксим"},{depth:2,value:"Авторасширение "},{depth:2,value:"Успех, ошибка и плохое соединение"},{depth:2,value:"Сервис-воркер и фоновая синхронизация"},{depth:2,value:"Заключение"}],frontmatter:{title:"Улучшение формы комментариев"}}},{node:{html:'<h1>Глубокое погружение в ES-модули в картинках</h1>\n<p>Перевод «ES modules: A cartoon deep-dive» Лин Кларк.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2400/1*yl5PHa3rt2ew4HVqVEwRjA.png"></p>\n<p><em>ES</em>-модули приносят в <em>JavaScript</em> официальную, унифицированную модульную систему. Однако, чтобы прийти к этому, потребовалось почти 10 лет работы по стандартизации.</p>\n<p>Но ожидание почти закончилось. С выходом <em>Firefox 60</em> в мае (пока в бете) все основные браузеры будут поддерживать <em>ES</em>-модули, а Рабочая группа <em>Node Modules</em> сейчас работает над добавлением поддержки <em>ES</em>-модулей в <em>Node.js</em>. Также идет интеграция <em>ES</em>-модулей в <em>WebAssembly</em>.</p>\n<p>Многие <em>JavaScript</em>-разработчики знают, что <em>ES</em>-модули были противоречивыми. Но мало кто действительно понимает, как они работают. Давайте рассмотрим, какую проблему решают <em>ES</em>-модули и чем они отличаются от модулей в других модульных системах.</p>\n<h2>Какую проблему решают модули?</h2>\n<p>Написание кода на <em>JavaScript</em> состоит в работе с переменными — в присвоении значений переменным или добавлении чисел в переменные или объединении двух переменных вместе и помещении их в другую переменную.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*UD4gTeUXaejaQwBx.png"></p>\n<p>Поскольку большая часть вашего кода связана с изменением переменных, то их организация будет напрямую влиять на качество вашего кода… и на то, насколько хорошо вы сможете поддерживать его в дальнейшем.</p>\n<p>Небольшое количества переменных, о которых вам нужно думать, значительно упростило бы ситуацию. У <em>JavaScript</em> есть способ помочь вам в этом — область видимости <em>(scope)</em>. Из-за того, как области видимости работают в <em>JavaScript</em>, функции не могут обращаться к переменным, определенным в других функциях.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*S8Otp1D1ENByNbs0.png"></p>\n<p>Это хорошо. Значит когда вы работаете над одной функцией, вы можете сосредоточиться только на ней. Вам не нужно беспокоиться о том, что другие функции могут делать с вашими переменными.</p>\n<p>Однако у такого подхода есть и недостаток. Он затрудняет обмен переменными между различными функциями.</p>\n<p>Что делать, если вы захотите использовать переменную вне текущей области видимости? Обычно способ справиться с этим заключается в том, чтобы положить её в область выше, например, в глобальную область видимости.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*K3tvgoP61czfaTmT.png"></p>\n<p>Это работает, но появляются некоторые проблемы.</p>\n<p>Во-первых, все ваши скрипты должны быть расположены в определенном порядке. И вы должны будете внимательно следить за тем, чтобы никто не испортил этот порядок.</p>\n<p>Если этот порядок нарушится, то в середине работы ваше приложение выдаст ошибку. Когда функция ищет <em>jQuery</em> там, где она ожидает его — на глобальном уровне — и не находит его, она выбрасывает ошибку и прекращает выполнение.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*eUgkBh7r2VqilmzI.png"></p>\n<p>Это делает поддержку кода сложным, а удаление старого кода или скриптов игрой в рулетку. Вы не знаете, что может сломаться. Зависимости между этими различными частями кода неявны. Любая функция может использовать что угодно на глобальном уровне, поэтому вы точно не можете знать, какие функции от чего зависят.</p>\n<p>Вторая проблема заключается в том, что поскольку эти переменные находятся в глобальной области видимости, каждая часть кода, находящаяся внутри этой области, может изменить переменную. Вредоносный код может изменить эту переменную специально с целью изменения работы функций или другой код может случайно удалить вашу переменную.</p>\n<h2>Как нам помогут модули?</h2>\n<p>Модули дают вам лучший способ организовать эти переменные и функции. С модулями вы группируете переменные и функции, которые имеет смысл объединить.</p>\n<p>Это помещает эти функции и переменные в область видимости модуля. Область модуля может использоваться для обмена переменными между функциями в модуле.</p>\n<p>Но в отличие от областей видимости функций, области модулей позволяют сделать их переменные доступными и для других модулей. Они могут явно указать, какие переменные, классы или функции в модуле должны быть доступны.</p>\n<p>Когда что-то становится доступным для других модулей, это называется export. После экспорта другие модули могут явно сказать, что они зависят от этой переменной, класса или функции.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*z3bsaQj547DC8tSm.png"></p>\n<p>Поскольку экспорт указывается явно, это позволяет определить, какие модули будут нарушены при удалении другого.</p>\n<p>Когда у вас появляется возможность экспортировать и импортировать переменные между модулями, это значительно облегчает разбиение вашего кода на небольшие куски, которые могут работать независимо друг от друга. Затем вы можете комбинировать и рекомбинировать эти куски, вроде блоков <em>Lego</em>, для создания любых приложений из одного и того же набора модулей.</p>\n<p>Поскольку модули настолько полезны, было несколько попыток добавить модульность в <em>JavaScript</em>. Сегодня активно используются две системы</p>\n<ol>\n<li>\n<p><em>CommonJS (CJS)</em> — это то, что <em>Node.js</em> использовал изначально.</p>\n</li>\n<li>\n<p><em>ESM</em> (модули <em>ECMAScript</em>) — это более новая система, добавленная в спецификацию <em>JavaScript</em>. Браузеры уже поддерживают <em>ES</em>-модули, а <em>Node.js</em> добавляет поддержку.</p>\n</li>\n</ol>\n<p>Давайте подробно рассмотрим, как работает эта новая модульная система.</p>\n<h2>Как работают <em>ES</em>-модули</h2>\n<p>При разработке с помощью модулей, вы строите граф зависимостей. Связи между различными зависимостями берутся из любых инструкций import, которые вы используете.</p>\n<p>Эти операторы импорта определяют, какой код браузеру или <em>Node.js</em> нужно загрузить. Вы даете ему файл для использования в качестве точки входа в граф. Оттуда он просто следует за любым из операторов импорта, чтобы найти остальную часть кода.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*wx7IkCi21DVWKooZ.png"></p>\n<p>Но сами файлы не являются тем, что браузер может использовать. Ему необходимо разобрать все эти файлы, чтобы превратить их в структуры данных, называемые записями модулей <em>(module records)</em>. Таким образом, он действительно узнает, что происходит в файле.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*e858f2LgzPRB05ff.png"></p>\n<p>После этого запись модуля необходимо превратить в экземпляр модуля. Экземпляр объединяет две вещи: код и состояние.</p>\n<p>Код обычно представляет собой набор инструкций. Это как рецепт, как сделать что-то. Но вы не можете просто использовать этот код. Вам нужны исходные материалы для использования с этими инструкциями.</p>\n<p>Что такое состояние? Состояние дает вам эти исходные материалы. Состояние — это фактические значения переменных в любой момент времени. Конечно, эти переменные — это просто псевдонимы для ячеек памяти, которые содержат значения.</p>\n<p>Таким образом, экземпляр модуля объединяет код (список инструкций) с состоянием (значениями всех переменных).</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*4GAPJD0pqkZQ2sLL.png"></p>\n<p>Нам нужен экземпляр для каждого модуля. Процесс загрузки модуля происходит от файла точки входа к полному графу экземпляров модуля.</p>\n<p>Для <em>ES</em>-модулей это происходит в три этапа.</p>\n<ol>\n<li>\n<p>Построение <em>(constuction)</em> — поиск, загрузка и парсинг всех файлов в записях модулей.</p>\n</li>\n<li>\n<p>Создание экземпляра <em>(instantiation)</em> — поиск ячеек в памяти для размещения всех экспортируемых значений (но пока без заполнения их значениями) Затем связывание — экспорт и импорт этих полей в памяти.</p>\n</li>\n<li>\n<p>Оценка <em>(evaluation)</em>— запуск кода для заполнения этих полей фактическими значениями переменных.</p>\n</li>\n</ol>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*0Dd6MLcpTAjykhRN.png"></p>\n<p>Люди говорят о том, что ES-модули являются асинхронными. Вы можете думать об этом как о асинхронном процессе, т.к работа делится на три разные фазы:</p>\n<ol>\n<li>\n<p>Построение</p>\n</li>\n<li>\n<p>Создание экземпляров</p>\n</li>\n<li>\n<p>Оценка</p>\n</li>\n</ol>\n<p>Все эти этапы могут выполняться отдельно. Это означает, что спецификация вводит какую-то асинхронность, которой не было в <em>CommonJS</em>. Я объясню это позже, но в <em>CJS</em>-модуль и его зависимости загружаются, создаются и анализируются сразу, без каких-либо перерывов.</p>\n<p>Однако сами по себе действия не обязательно являются асинхронными. Они могут быть выполнены синхронным способом — зависит от того, что делает загрузка. Это потому, что не все контролируется спецификацией <em>ESM</em>. На самом деле есть два этапа работы, которые покрываются различными спецификациями.</p>\n<p>Спецификация <em>ES</em>-модулей говорит о том, как следует анализировать файлы в записях модулей, и как следует создавать экземпляры и оценивать этот модуль. Тем не менее, в спецификации не описывается, как изначально получить эти файлы.</p>\n<p>Это загрузчик, который извлекает файлы. И загрузчик указан в другой спецификации. Для браузеров он описан спецификацией <em>HTML</em>. Но у вас могут быть разные загрузчики, основанные на той платформе, которую вы используете.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*fPQcyIHWjQg1W_IK.png"></p>\n<p>Загрузчик также точно контролирует загрузку модулей. Он вызывает методы <em>ES</em>-модуля: <em>ParseModule</em>, <em>Module.Instantiate</em> и <em>Module.Evaluate</em>.</p>\n<p><img src="https://cdn-images-1.medium.com/max/NaN/0*gSiKMh4nSOaPPM57.png"></p>\n<p>Теперь давайте пройдемся по каждому шагу более подробно.</p>\n<h3>Построение (Construction)</h3>\n<p>Во время этапа построения для каждого модуля происходят три вещи:</p>\n<ol>\n<li>\n<p>Определение, где загрузить файл, содержащий модуль <em>(module resolution)</em>.</p>\n</li>\n<li>\n<p>Загрузка файла (по <em>URL</em> или из файловой системы).</p>\n</li>\n<li>\n<p>Синтаксический анализ файла в записи модуля.</p>\n</li>\n</ol>\n<h3>Поиск и получение файла (fetching)</h3>\n<p>Загрузчик позаботится о поиске файла и его загрузке. Сначала ему необходимо найти файл точки входа. В <em>HTML</em> вы указываете загрузчику, где его найти, используя тег <script>.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*WzWUDhsp3ZQwuRhS.png"></p>\n<p>Но как он найдет следующую группу модулей — от которых напрямую зависят модули main.js?</p>\n<p>В этом случае используются операторы import. Одна часть оператора импорта называется спецификатором модуля. Он сообщает загрузчику, где он может найти каждый следующий модуль.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*OMTl_f284KMAm5QJ.png"></p>\n<p>Одно замечание о спецификаторах модулей: иногда их нужно обрабатывать по-разному в браузере и <em>Node.js</em>. Каждый хост имеет свой собственный способ интерпретации спецификатора модуля. Для этого он использует решение, называемое алгоритмом разрешения модулей, которое отличается между платформами. В настоящее время некоторые спецификаторы модулей, которые работают в <em>Node.js</em>, не будут работать в браузере, но сейчас ведутся <a href="https://github.com/domenic/package-name-maps">работы по устранению этой проблемы</a>.</p>\n<p>Пока это не исправлено, браузеры принимают только <em>URL</em> в качестве спецификаторов модуля. Они загружают файл модуля с этого <em>URL</em>. Но это не происходит для всего графа одновременно. Вы не знаете, какие зависимости модуль должен получить, пока вы не проанализировали файл… и вы не сможете проанализировать файл, пока не получите его.</p>\n<p>Это означает, что мы должны пройти через дерево поэтапно, слой за слоем, анализировать один файл, выяснить его зависимости, а затем найти и загрузить их.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*z6YBWuNyRERpNk9a.png"></p>\n<p>Если бы основной поток ожидал загрузки каждого из этих файлов, в его очереди скопилось бы много других задач. Это потому, что, когда вы работаете в браузере, загрузка занимает большую часть времени.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*OeKzBEFkWO-2XM91.png"></p>\n<p>Блокировка основного потока сделает использование модулей в вашем приложении очень медленным. Это одна из причин того, что спецификация <em>ES</em>-модулей разбивает алгоритм на несколько этапов. Разбиение на фазы позволяет браузерам извлекать файлы и строить свое понимание графа модуля перед тем, как приступить к синхронной работе по созданию экземпляров.</p>\n<p>Этот подход — разделение алгоритма на фазы — является одним из ключевых различий между <em>ES</em>-модулями и модулями <em>CommonJS</em>.</p>\n<p><em>CommonJS</em> может делать всё по-другому, потому что загрузка файлов из файловой системы занимает гораздо меньше времени, чем загрузка через интернет. Это означает, что <em>Node.js</em> может блокировать основной поток при загрузке файла. И раз файл уже загружен, есть смысл сразу провести построение <em>(construction)</em> и создание экземпляров (без разбивки на фазы). Это также означает, что вы идёте по всему графу, загружаете, создаете экземпляры и оцениваете зависимости перед возвратом экземпляра модуля.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*-aK0BYiBf7vbr-04.png"></p>\n<p>Подход <em>CommonJS</em> имеет несколько последствий, и я расскажу об этом позже. Но одно это означает, что в <em>Node.js</em> с модулями <em>CommonJS</em> вы можете использовать переменные в вашем спецификаторе модуля. Вы выполняете весь код в этом модуле (до инструкции require), прежде чем искать следующий модуль. Это означает, что переменная будет иметь значение при переходе к определению модулей.</p>\n<p>Но с <em>ES</em>-модулями вы заранее строите весь этот граф модулей, прежде чем выполнять какую-либо оценку. Это означает, что вы не можете использовать переменные в своих спецификаторах модулей, поскольку эти переменные еще не имеют значений.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*K3yz98H3yo7-hUQy.png"></p>\n<p>Но иногда очень полезно использовать переменные для путей модулей. Например, может потребоваться переключить загружаемый модуль в зависимости от того, что делает код или в какой среде он выполняется.</p>\n<p>Чтобы сделать это возможным для ES модулей, есть <a href="https://github.com/tc39/proposal-dynamic-import">предложение под названием динамический импорт</a>. С его помощью можно использовать импорт вида import(<code>${path}/foo.js</code>).</p>\n<p>Это работает так: любой файл, загруженный с помощью import(), обрабатывается как точка входа в отдельный граф. Динамически импортируемый модуль запускает новый граф, который обрабатывается отдельно.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*S2GpoP47Seyri8Rl.png"></p>\n<p>Однако следует отметить, что любой модуль, который находится в обоих этих графах, будет совместно использовать экземпляр модуля. Это происходит потому, что загрузчик кэширует экземпляры модулей. Для каждого модуля в определенной глобальной области будет только один экземпляр модуля.</p>\n<p>Это уменьшает объём работы для движка. Например, это означает, что файл модуля будет извлечен только один раз, даже если несколько модулей зависят от него (это одна из причин для кэширования модулей. Мы увидим другой в разделе оценки.)</p>\n<p>Загрузчик управляет этим кэшем с помощью так называемой <a href="https://html.spec.whatwg.org/multipage/webappapis.html#module-map">карты модулей</a>. Каждый глобальный модуль отслеживает свои модули в отдельной карте.</p>\n<p>Когда загрузчик получает <em>URL</em>, он помещает этот <em>URL</em> в карту модуля и отмечает, что он в настоящее время извлекает файл (fetching). Затем он отправит запрос и перейдет к следующему файлу.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*4TbPku1ve_TZfvm6.png"></p>\n<p>Что произойдет, если другой модуль зависит от того же файла? Загрузчик будет искать каждый <em>URL</em> в карте модуля. Если он увидит там fetching, он просто перейдет к следующему <em>URL</em>.</p>\n<p>Но карта модуля не просто отслеживает, какие файлы извлекаются. Карта модуля также служит в качестве кэша для модулей, как мы увидим далее.</p>\n<h3>Парсинг</h3>\n<p>Теперь, когда мы извлекли этот файл, нам нужно распарсить его в записи модуля. Это помогает браузеру понять, что представляют собой различные части модуля.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*AsoeAIGI6G4M6k45.png"></p>\n<p>После создания запись модуля помещается в карту модуля. Это означает, что всякий раз, когда он запрашивается, загрузчик может вытащить его из этой карты.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*iMcuLbe97XMGIvnz.png"></p>\n<p>Есть одна деталь в парсинге, которая может показаться тривиальной, но на самом деле имеет довольно большие последствия. Все модули анализируются так, как если бы они имели use strict вверху. Есть и другие незначительные отличия. Например, ключевое слово await зарезервировано в коде верхнего уровня модуля, а значение this — undefined.</p>\n<p>Другой способ парсинга называется целью парсинга <em>(parse goal)</em>. Если вы анализируете один и тот же файл, но используете разные цели, вы получите разные результаты. Таким образом, вы хотите знать, прежде чем начать парсинг, какой файл вы анализируете — является ли он модулем или нет.</p>\n<p>В браузерах это довольно легко. Вы просто добавляетеtype="module" в тег <script>. Это говорит браузеру, что этот файл должен быть проанализирован как модуль. И поскольку импортировать можно только модули, браузер знает, что любой импорт также является модулем.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*7XWgICjSxgidpl49.png"></p>\n<p>Но в <em>Node.js</em> вы не можете использовать <em>HTML</em>-теги, поэтому у вас нет возможности использовать атрибут type. Сообщество пыталось решить эту проблему с помощью расширения .mjs. Это расширение говорит <em>Node.js</em> что этот файл является модулем. Сообщество говорит об этом, как о метке для цели парсинга. Обсуждение в настоящее время продолжается, поэтому неясно, какую метку сообщество решит использовать в конце.</p>\n<p>В любом случае загрузчик определит, следует ли анализировать файл как модуль или нет. Если это модуль и есть импорт, он начнет процесс снова, пока все файлы не будут извлечены и распарсены.</p>\n<p>И все готово! По окончании процесса загрузки вы перешли от простого файла точки входа к множеству записей модуля.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*-efsKcPdNwE-2Fxt.png"></p>\n<p>Следующий шаг — создать экземпляр этого модуля и связать Все экземпляры вместе.</p>\n<h3>Cоздание экземпляра</h3>\n<p>Последний шаг — заполнение этих ячеек памяти. <em>JS</em>-движок делает это, выполняя код верхнего уровня — код, который находится вне функций.</p>\n<p>Помимо простого заполнения этих ячеек памяти, оценка кода также может вызывать различные сайд-эффекты. Например, модуль может сделать запрос на сервер.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*uJuK9ryDnfphW7Bd.png"></p>\n<p>Из-за потенциальных побочных эффектов вы хотите только один раз оценить модуль. В отличие от линковки, которая происходит при создании экземпляра, которая может выполняться несколько раз с точно таким же результатом, оценка может иметь разные результаты в зависимости от того, сколько раз вы это делаете.</p>\n<p>Это одна из причин наличия карты модулей. Карта модуля кэширует модуль по каноническому <em>URL</em>, так что для каждого модуля имеется только одна запись модуля. Это гарантирует, что каждый модуль выполняется только один раз.</p>\n<p>А как насчет тех циклов, о которых мы говорили раньше?</p>\n<p>В циклической зависимости вы в конечном итоге получаете цикл в графе. Обычно это длинная петля. Но чтобы объяснить проблему, я буду использовать пример с коротким циклом.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*dOyMkZxUV-Q0IoDD.png"></p>\n<p>Давайте посмотрим, как это будет работать с модулями <em>CommonJS</em>. Во-первых, основной модуль выполнит оператор require. Затем будет загружен модуль counter.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*lCyyZPfmk8PRgwwE.png"></p>\n<p>Модуль counter попытается получить доступ к message из объекта exports. Но так как он еще не был оценен в основном модуле, вернется undefined. <em>JS</em>-движок выделит пространство в памяти для локальной переменной и установит значение undefined.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*734NMB_qv35W4wdg.png"></p>\n<p>Оценка продолжается до конца кода верхнего уровня counter. Мы хотим узнать, получим ли мы правильное значение для сообщения в конце концов (после оценки main.js), поэтому мы настроим таймаут. Затем оценка возобновляется на main.js.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*sFM37GwyjYbHU5NP.png"></p>\n<p>Переменная message будет инициализирована и добавлена в память. Но поскольку между ними нет никакой связи, она останется неопределенной в требуемом модуле.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/0*xXkftHxJ7AxozuyF.png"></p>\n<p>Если экспорт будет обработан с использованием привязок в реальном времени, в конце концов counter увидит правильное значение. К моменту истечения таймаута оценка main.js завершиться и в переменную присвоится значение.</p>\n<p>Поддержка этих циклов является большим основанием для разработки <em>ES</em>-модулей. Именно эта трехфазная архитектура и сделает её возможной.</p>\n<h3>Каков текущий статус ES-модулей ?</h3>\n<p>С выходом <em>Firefox 60</em> в начале мая, все основные браузеры будут поддерживать <em>ES</em>-модули по умолчанию. <em>Node.js</em> также добавляет поддержку, создана рабочая группа, занимающаяся выяснением проблем совместимости между <em>CommonJS</em> и <em>ES</em>-модулями.</p>\n<p>Это означает, что вы сможете использовать тег <script type="module">, import и export. Однако еще больше возможностей впереди. <a href="https://github.com/tc39/proposal-dynamic-import">*Dynamic imports proposal</a>* находится на <em>Stage 3</em> в процессе спецификации, также есть <a href="https://github.com/tc39/proposal-import-meta">*import.meta</a><em>, а [</em>module resolution proposal](<a href="https://github.com/domenic/package-name-maps">https://github.com/domenic/package-name-maps</a>)* поможет сгладить различия между браузерами и <em>Node.js</em>. Поэтому работа с модулями станет еще лучше в будущем.</p>\n<h2>Благодарность</h2>\n<p>Спасибо всем, кто дал обратную связь на этот пост, или чьи письма или дискуссии прошлого года, в том числе Акселю Раухшмаеру, Бредли Фариасу, Дейву Хернану, Доменику Дениколе, Хави Хоффману, Джейсону Везерсби, Джей-Эф Бастьену, Йону Копперду, Люку Вагнеру, Майлсу Боринсу, Тиллю Шнайдериту, Тобаясу Копперсу, Йехуде Кацу, участникам сообщества WebAssembly, Рабочей группе <em>Node Modules</em>, а также <em>TC39</em>.</p>\n<p><em>Перевод <a href="https://medium.com/@nzvtrkk">Артура Храброва</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</em></p>',headings:[{depth:1,value:"Глубокое погружение в ES-модули в картинках"},{depth:2,value:"Какую проблему решают модули?"},{depth:2,value:"Как нам помогут модули?"},{depth:2,value:"Как работают "},{depth:3,value:"Построение (Construction)"},{depth:3,value:"Поиск и получение файла (fetching)"},{depth:3,value:"Парсинг"},{depth:3,value:"Cоздание экземпляра"},{depth:3,value:"Каков текущий статус ES-модулей ?"},{depth:2,value:"Благодарность"}],frontmatter:{title:"Глубокое погружение в ES-модули в картинках"}}},{node:{html:'<h1>Генерация HTTP-запросов</h1>\n<p>Fetch или Axios.js</p>\n<p><em>Перевод «<a href="https://medium.com/p/2b261cdd3af5">Fetch vs. Axios.js for making http requests</a>» Джейсона Арнольда.</em></p>\n<p><img src="https://cdn-images-1.medium.com/max/4000/1*zCV86muS6E3yBu52J-Waew.jpeg" alt="Какой хороший пёсик!"><em>Какой хороший пёсик!</em></p>\n<p>В одном из заключительных разделов курса <a href="https://www.udemy.com/javascript-es6-tutorial/learn/v4/overview">*ES6 Javascript: The Complete Developer’s Guide</a>* на <em>Udemy</em> Стефан Гридер рассказывает о методе fetch() и о некоторых его недостатках. Он отмечает, что реализация fetch() не идеальна и предлагает другие варианты для выполнения <em>HTTP</em>-запросов. Один из таких вариантов — <a href="https://www.npmjs.com/package/axios">*Axios</a><em>. Раньше я даже не слышал об *Axios</em> и подумал, что подвернулась отличная возможность, чтобы немного покопаться и изучить его. Поскольку это ссылка на материал из курса Стивена, я использую похожие примеры.</p>\n<p><em>Axios</em> — это <em>JavaScript</em>-библиотека для выполнения либо <em>HTTP</em>-запросов в <em>Node.js,</em> либо XMLHttpRequests в браузере. Она поддерживает промисы — новинку <em>ES6</em>. Одна из особенностей, которая делает её лучше fetch() — автоматические преобразования <em>JSON</em>-данных.</p>\n<p>При использовании fetch() для передачи данных в <em>JSON,</em> необходимо выполнить процесс в два этапа. Сначала сделать фактический запрос, а затем вызвать метод json() для полученных данных с сервера.</p>\n<p><strong>*Обновление:</strong> по состоянию на 29 мая, Spotify теперь требует проверки подлинности для всех запросов к их API, поэтому примеры ниже не будут работать корректно.*</p>\n<p>Вот простой пример c использованием <em>API Spotify</em>. Установим <em>URL</em> в качестве переменной и передадим её в fetch(). Затем установим колбэк, выводящий в консоль данные в качестве аргумента then().</p>\n<pre><code>const url = \'https://api.spotify.com/v1/artists/ID\';\n\nfetch(url)\n  .then(data => console.log(data));\n</code></pre>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*MBFkZoDs-MQb6ztpjmM_ig.png" alt="Ответ метода fetch() по умолчанию."><em>Ответ метода fetch() по умолчанию.</em></p>\n<p>Это конечно здорово, но это не те данные, которые мы бы хотели увидеть. Этот ответ сервера сообщил нам, что наш запрос прошел просто отлично. Круто, но мы больше не можем ничего с этим сделать.</p>\n<p>Чтобы получить данные, сперва нужно передать их в метод json().</p>\n<pre><code>fetch(url)\n  .then(response => response.json())\n  .then(data => console.log(data));\n</code></pre>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*9ubEzV7mNNDPs2ZLh1k3pQ.png" alt="Результат после передачи в json()."><em>Результат после передачи в json().</em></p>\n<p>Теперь это те данные, которые мы хотели получить. Попробуем реализовать это через <em>Axios</em>. Первый шаг — установка. Существует несколько вариантов установки:</p>\n<p>Либо <em>npm</em>, либо <em>bower</em>:</p>\n<pre><code>$ npm install axios\n$ bower install axios\n</code></pre>\n<p>Либо прямо с <em>CDN</em>:</p>\n<pre><code>&#x3C;script src="https://unpkg.com/axios/dist/axios.min.js">&#x3C;/script>\n</code></pre>\n<p>Затем, прямо в консоли, устанавливаем <em>URL</em> в качестве переменной и передаем его в метод axios.get().</p>\n<pre><code>const url = \'https://api.spotify.com/v1/artists/ID\'\n\naxios.get(url)\n  .then(response => console.log(response));\n</code></pre>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*r76qb_RUT18pcUmd-SLGBA.png"></p>\n<p>Таким образом, с помощью <em>Axios</em> можно обойтись без передачи результатов <em>HTTP</em>-запроса в метод json(). <em>Axios</em> возвращает именно тот объект с данными, который мы ожидаем.</p>\n<p>Второй вопрос, который Стивен поднимает: как fetch() обрабатывает ответы на ошибки. Логически можно предположить, что если метод fetch() возвращает сообщение об ошибке, то управление переходит в блок catch() и ошибка обрабатывается там, верно? Не совсем. Вот пример.</p>\n<p>Изменим переменную url из предыдущих примеров на некорректную. Ожидается, что ошибка 400 из метода then() перейдёт в блок сatch(), но этого не происходит.</p>\n<pre><code>const url = \'[https://api.spotify.com/v1/artists/WRONG\'](https://api.spotify.com/v1/artists/0OdUWJ0sBjDrqHygGUXeCFcdsds\');\n\nfetch(url)\n  .catch(error => console.log(\'BAD\', error))\n  .then(response => console.log(\'GOOD\', response));\n</code></pre>\n<p>Для наглядности выведем в консоль BAD в случае, если ошибка обрабатывается в блоке catch(), в противном случае выведем GOOD.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*5ZmMcEBqOE1v_evfWYmc7w.png"></p>\n<p>Получаем код ответа 400, но, как вы можете видеть по строке GOOD в консоли, выполнился then(). Как же <em>Axios</em> справляется с этим? Так, как мы и ожидали: выполняется блок сatch() и мы получаем необходимый нам вид ошибки.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*MP3q_dzXbSEsRDri40-UpQ.png"></p>\n<p>Строка BAD и ошибка выводятся в консоль.</p>\n<p>Метод fetch() — огромный шаг в развитии нативного <em>JS</em> в сторону взаимодействия с сервером. Но он имеет свои недостатки, которых можно избежать, используя сторонние библиотеками, такие как <em>Axios</em>.</p>\n<h2><em>Примечания переводчика</em></h2>\n<p>Метод fetch() по умолчанию не работает с куками. Для этого необходимо выставить значение credentials</p>\n<pre><code>fetch(\'url\', { credentials: \'same-origin\' });\n</code></pre>\n<p><em>Перевод <a href="https://medium.com/@nzvtrkk">Артура Храброва</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</em></p>',headings:[{depth:1,value:"Генерация HTTP-запросов"},{depth:2,value:"Примечания переводчика"}],frontmatter:{title:"Генерация HTTP-запросов"}}},{node:{html:'<h1>Элементы figure и figcaption</h1>\n<p><a href="http://richclarkdesign.com/">Ричард Кларк</a> 12 марта 2012</p>\n<p>В обычных печатных изданиях, таких как книги и журналы, изображения, таблицы или примеры кода обычно сопровождаются подписью. До сих пор у нас не было возможности семантически выделять такой тип содержимого напрямую в HTML, вместо того чтобы прибегать к именам классов СSS. HTML5 надеется исправить эту проблему с помощью новых элементов: <code>&#x3C;figure></code> и <code>&#x3C;figcaption></code>. Давайте разберемся!</p>\n<h2>Элемент <code>&#x3C;figure></code></h2>\n<p>Предполагается, что элемент <code>&#x3C;figure></code> будет использоваться в сочетании с элементом <code>&#x3C;figcaption></code> для того, чтобы выделять диаграммы, иллюстрации, фотографии и примеры кода (помимо прочего). Вот что говорится о <code>&#x3C;figure></code> в спецификации:</p>\n<blockquote>\n<p>Элемент <code>&#x3C;figure></code> представляет собой фрагмент независимого содержимого, совсем необязательно с подписью, который как правило относится к отдельному элементу из основного содержимого документа, и может быть удалён из документа без ущерба его смыслу.\n<a href="http://dev.w3.org/html5/markup/figure.html">Спецификация W3C</a></p>\n</blockquote>\n<h2>Элемент <code>&#x3C;figcaption></code></h2>\n<p>Этот элемент стал <a href="http://adactio.com/journal/1604/">поводом</a> <a href="http://remysharp.com/2009/08/12/saving-figure-detail/">серьезных</a> <a href="http://html5doctor.com/legend-not-such-a-legend-anymore/">споров</a>. Спецификация изначально предлагала приспособить для этих целей элемент <code>&#x3C;legend></code>, вместо того, чтобы придумывать новый элемент. Были и другие предложения, включавшие <code>&#x3C;label></code>, <code>&#x3C;caption></code>, <code>&#x3C;p></code> и даже заголовки <code>&#x3C;h1></code>—<code>&#x3C;h6></code>. Семантика элемента <code>&#x3C;legend></code> <a href="http://html5doctor.com/legend-not-such-a-legend-anymore/">изменилась</a>, и поэтому мы начали использовать комбинацию <code>&#x3C;dt></code> и <code>&#x3C;dd></code> внутри <code>&#x3C;figure></code> по предложению <a href="http://twitter.com/adactio">Джереми</a>. Но большинство этих идей были отклонены из-за отсутствия обратной совместимости для CSS-оформления.</p>\n<p>Наши постоянные читатели знают, что недавно <a href="http://html5doctor.com/summary-figcaption-element/">был представлен новый элемент</a> <code>&#x3C;figcaption></code>. Кто знает, приживется ли он, а пока давайте узнаем, что о нём говорит спецификация:</p>\n<blockquote>\n<p>Элемент <code>&#x3C;figcaption></code> представляет собой заголовок или описание для <figure>.</p>\n<p><a href="http://dev.w3.org/html5/markup/figcaption.html">Спецификация W3C</a></p>\n</blockquote>\n<p>Элемент <code>&#x3C;figcaption></code> является необязательным и может появляться до <em>или</em> после содержимого внутри <code>&#x3C;figure></code>. Только один элемент <code>&#x3C;figcaption></code> может быть помещен в <code>&#x3C;figure></code>, хотя сам элемент <code>&#x3C;figure></code> может содержать несколько дочерних элементов (например, <code>&#x3C;img></code> или <code>&#x3C;code></code>).</p>\n<h2>Использование <code>&#x3C;figure></code> и <code>&#x3C;figcaption></code></h2>\n<p>Итак, мы узнали, что об этих элементах говорится в спецификации. Как же их использовать? Давайте рассмотрим это на примерах.</p>\n<h3><code>&#x3C;figure></code> для изображения</h3>\n<p>Изображение в элементе <code>&#x3C;figure></code> без подписи:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 500px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 54.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAFR2VrJfEiT/8QAGxABAAICAwAAAAAAAAAAAAAAAQACAxESISL/2gAIAQEAAQUCMvosSq6ZvrGvH//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAECAQE/AVf/xAAcEAABAwUAAAAAAAAAAAAAAAAAARARIjEyUaH/2gAIAQEABj8CqsaUy4Q//8QAGRABAQEBAQEAAAAAAAAAAAAAAREAIUEx/9oACAEBAAE/ITno8w6YCANPiXQYTHL41IV7vd3/2gAMAwEAAgADAAAAEN8//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxATOlt//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/ELGH/8QAHRABAAICAgMAAAAAAAAAAAAAAQARIXExQZGxwf/aAAgBAQABPxADALwNvGbil4nIn2nxAHWFICr7iIKvlK1BbFFLoolBl16J/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41C;&#x430;&#x43B;&#x44B;&#x448; &#x43E;&#x440;&#x430;&#x43D;&#x433;&#x443;&#x442;&#x430;&#x43D;&#x433;&#x430; &#x441;&#x432;&#x438;&#x441;&#x430;&#x435;&#x442; &#x441;&#xA0;&#x43A;&#x430;&#x43D;&#x430;&#x442;&#x430;." title="" src="/static/orang-utan-891c164ae2cc654e7e7334f4229d1987-69999.jpg" srcset="/static/orang-utan-891c164ae2cc654e7e7334f4229d1987-8a2bc.jpg 163w,\n/static/orang-utan-891c164ae2cc654e7e7334f4229d1987-f1944.jpg 325w,\n/static/orang-utan-891c164ae2cc654e7e7334f4229d1987-69999.jpg 500w" sizes="(max-width: 500px) 100vw, 500px">\n    </span>\n  </span>\n  \n</figure>\n<p>Вот код для этого:</p>\n<pre><code>&#x3C;figure>\n    &#x3C;img src="orang-utan.jpg"\n         alt="Малыш орангутанга свисает с каната.">\n&#x3C;/figure>\n</code></pre>\n<h3><code>&#x3C;figure></code> с изображением и подписью</h3>\n<p>Изображение внутри элемента <code>&#x3C;figure></code> с поясняющей подписью:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 500px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABM7pigID/xAAaEAACAwEBAAAAAAAAAAAAAAABAgADEhET/9oACAEBAAEFAnw8KankI4zSo7SWn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAAhMf/aAAgBAgEBPwHFf//EABwQAAICAgMAAAAAAAAAAAAAAAAxAREhUTJBov/aAAgBAQAGPwKxLRx9GOy50Qkf/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFBcf/aAAgBAQABPyEYzXo7DTXhxTBLx2aty2uVWkPwD4n/2gAMAwEAAgADAAAAEMvP/8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQMBAT8QSf/EABgRAAMBAQAAAAAAAAAAAAAAAAABETHw/9oACAECAQE/EG3snKf/xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhUTFBcWH/2gAIAQEAAT8QaDqlGz0MgKKg9l106uIO5UpYfdYFVKl8zw/cBIrv8znMsO3u8//Z&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41C;&#x430;&#x43A;&#x430;&#x43A;&#x430; &#x43D;&#x430; &#x434;&#x435;&#x440;&#x435;&#x432;&#x435;." title="" src="/static/macaque-555bf6bd0046041dc10071a112b68699-69999.jpg" srcset="/static/macaque-555bf6bd0046041dc10071a112b68699-8a2bc.jpg 163w,\n/static/macaque-555bf6bd0046041dc10071a112b68699-f1944.jpg 325w,\n/static/macaque-555bf6bd0046041dc10071a112b68699-69999.jpg 500w" sizes="(max-width: 500px) 100vw, 500px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41D;&#x430;&#x433;&#x43B;&#x430;&#x44F; &#x43C;&#x430;&#x43A;&#x430;&#x43A;&#x430; &#x438;&#x437; &#x411;&#x43E;&#x440;&#x43D;&#x435;&#x43E;. &#x424;&#x43E;&#x442;&#x43E; <a href="http://www.flickr.com/photos/rclark/102352241/in/set-72057594082373448/">&#x420;&#x438;&#x447;&#x430;&#x440;&#x434;&#x430; &#x41A;&#x43B;&#x430;&#x440;&#x43A;&#x430;</a></figcaption>\n</figure>\n<p>И код, который мы использовали:</p>\n<pre><code>&#x3C;figure>\n    &#x3C;img src="macaque.jpg" alt="Макака на дереве.">\n    &#x3C;figcaption>\n        Наглая макака из Борнео.\n        Фото &#x3C;a href="…">Ричарда Кларка&#x3C;/a>\n    &#x3C;/figcaption>\n&#x3C;/figure>\n</code></pre>\n<h3><code>&#x3C;figure></code> с несколькими изображениями</h3>\n<p>Размещение нескольких изображений внутри одного элемента <code>&#x3C;figure></code> с общей подписью:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 165px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 145.45454545454547%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAgQD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAV9mEzSQsBu305FLAGf/xAAcEAACAwEAAwAAAAAAAAAAAAABAgADBBEQEyH/2gAIAQEAAQUCora2WZ7E8JnBDFq4R9BYNqJ9B4TlQNNjdsn/xAAWEQEBAQAAAAAAAAAAAAAAAAAQARH/2gAIAQMBAT8Bwp//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAcEAABBQEBAQAAAAAAAAAAAAABAAIQERIxIUH/2gAIAQEABj8CIulfRDcupZc6xHhpBx6uLZWPgEf/xAAdEAEAAgIDAQEAAAAAAAAAAAABABFBUSExYRCB/9oACAEBAAE/IaVAMs5kGwgPkRmpkzE3WbIS04L6lgY6MwgncEjscIR2ODUT2j9+f//aAAwDAQACAAMAAAAQIC9w/8QAGREAAwADAAAAAAAAAAAAAAAAAAEREDFR/9oACAEDAQE/EFW8Nwp//8QAFxEAAwEAAAAAAAAAAAAAAAAAARAxUf/aAAgBAgEBPxAnFF//xAAeEAEAAwEAAgMBAAAAAAAAAAABABEhMVFxQWGB4f/aAAgBAQABPxBQB7Sv8IDiWbkSWKHzDch3onvqA5QHWv1f5GNGSeGyuAPTfaCg0HjfY9Dv07CvdROf1C6wxrqrg1iCnzP/2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41A;&#x443;&#x43A;&#x430;&#x431;&#x430;&#x440;&#x430;." title="" src="/static/kookaburra-29244c618844f1a0e936557a9d97c32c-bfd69.jpg" srcset="/static/kookaburra-29244c618844f1a0e936557a9d97c32c-8534c.jpg 163w,\n/static/kookaburra-29244c618844f1a0e936557a9d97c32c-bfd69.jpg 165w" sizes="(max-width: 165px) 100vw, 165px">\n    </span>\n  </span>\n  \n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 165px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 145.45454545454547%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgD/2gAMAwEAAhADEAAAAWjOasgdhzdalg2B/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAECEBESISL/2gAIAQEAAQUC391xm8ZU+jgkKbwJYr//xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAwEBPwEp/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAECAQE/AcSb/8QAHRAAAQMFAQAAAAAAAAAAAAAAAQAQIQIREiBSYf/aAAgBAQAGPwLFyeQoLeK9JUjT/8QAGxABAAMBAQEBAAAAAAAAAAAAAQARITFREEH/2gAIAQEAAT8hxcYmMZcpUTpbBaG/EWHV2bjEj/0Tr2GfYV4T/9oADAMBAAIAAwAAABAsHYD/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQMBAT8QRMI//8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBEEH/2gAIAQIBAT8QYydKf//EAB4QAQADAAEFAQAAAAAAAAAAAAEAETEhEEFRcYHR/9oACAEBAAE/EHX+IaNRdFWBS5QNlcxiSOYx2Utcqc/Aun9g1p7oLsF8Stn0wItR9T//2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x435;&#x43B;&#x438;&#x43A;&#x430;&#x43D; &#x43D;&#x430; &#x43F;&#x43B;&#x44F;&#x436;&#x435;." title="" src="/static/pelican-4eb3e03bd63be17d0c0fc5ebfe3db1bd-bfd69.jpg" srcset="/static/pelican-4eb3e03bd63be17d0c0fc5ebfe3db1bd-8534c.jpg 163w,\n/static/pelican-4eb3e03bd63be17d0c0fc5ebfe3db1bd-bfd69.jpg 165w" sizes="(max-width: 165px) 100vw, 165px">\n    </span>\n  </span>\n  \n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 165px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 145.45454545454547%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAb/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAFe+O2NqRMDN2LTTtc8dGD/AP/EAB4QAAICAQUBAAAAAAAAAAAAAAACAQMRBBITFCMx/9oACAEBAAEFAqWWFS9mOw8GwV8HKKpZVKzkjVWKJ7JP3//EABkRAQACAwAAAAAAAAAAAAAAAAEAAgMQMf/aAAgBAwEBPwHFUt2Ijv8A/8QAGREAAgMBAAAAAAAAAAAAAAAAASEAAhAR/9oACAECAQE/AblKdO//xAAcEAABBQADAAAAAAAAAAAAAAAAAQIQETEhQVH/2gAIAQEABj8CtK4NOhIwapaZHpbo/8QAHBABAAMAAwEBAAAAAAAAAAAAAQARITFBYYGR/9oACAEBAAE/IWGjTfMJ4D1kUUzUp3U/JGq6fQmnlEgrBQ3PkyLAR0WbtXMsQfUn/9oADAMBAAIAAwAAABDQDA3/xAAWEQEBAQAAAAAAAAAAAAAAAAABAFH/2gAIAQMBAT8QGY4AjIUL/8QAGREAAwADAAAAAAAAAAAAAAAAAAEhETFR/9oACAECAQE/EGLqLHUVaHT/xAAdEAEAAwACAwEAAAAAAAAAAAABABEhMVFBYaGR/9oACAEBAAE/EMAlo+IuDyNwy+BTtqGj0nOwimlDwbiidvARjIBd3jLoNuk49TMQumV74Kkp/SFVvsQZVCzKFvyf/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41D;&#x430;&#x433;&#x43B;&#x44B;&#x439; &#x43C;&#x43D;&#x43E;&#x433;&#x43E;&#x446;&#x432;&#x435;&#x442;&#x43D;&#x44B;&#x439; &#x43B;&#x43E;&#x440;&#x438;&#x43A;&#x435;&#x442;." title="" src="/static/lorikeet-aa77de320f9024623a64080783529a9f-bfd69.jpg" srcset="/static/lorikeet-aa77de320f9024623a64080783529a9f-8534c.jpg 163w,\n/static/lorikeet-aa77de320f9024623a64080783529a9f-bfd69.jpg 165w" sizes="(max-width: 165px) 100vw, 165px">\n    </span>\n  </span>\n  \n    <figcaption>\n        &#x421;&#x43B;&#x435;&#x432;&#x430; &#x43D;&#x430;&#x43F;&#x440;&#x430;&#x432;&#x43E;: &#x43A;&#x443;&#x43A;&#x430;&#x431;&#x430;&#x440;&#x430;, &#x43F;&#x435;&#x43B;&#x438;&#x43A;&#x430;&#x43D; &#x438; &#x43C;&#x43D;&#x43E;&#x433;&#x43E;&#x446;&#x432;&#x435;&#x442;&#x43D;&#x44B;&#x439; &#x43B;&#x43E;&#x440;&#x438;&#x43A;&#x435;&#x442;.\n        &#x424;&#x43E;&#x442;&#x43E;&#x433;&#x440;&#x430;&#x444;&#x438;&#x438; <a href="http://www.flickr.com/photos/rclark/">&#x420;&#x438;&#x447;&#x430;&#x440;&#x434;&#x430; &#x41A;&#x43B;&#x430;&#x440;&#x43A;&#x430;</a>\n    </figcaption>\n</figure>\n<p>И сам код:</p>\n<pre><code>&#x3C;figure>\n    &#x3C;img src="kookaburra.jpg" alt="Кукабара.">\n    &#x3C;img src="pelican.jpg" alt="Пеликан на пляже.">\n    &#x3C;img src="lorikeet.jpg" alt="Наглый многоцветный лорикет.">\n    &#x3C;figcaption>\n        Слева направо: кукабара, пеликан и многоцветный лорикет.\n        Фотографии &#x3C;a href="…">Ричарда Кларка&#x3C;/a>\n    &#x3C;/figcaption>\n&#x3C;/figure>\n</code></pre>\n<h3><code>&#x3C;figure></code> с блоком кода</h3>\n<p>Элемент <code>&#x3C;figure></code> может быть также использован для примеров кода:</p>\n<figure>\n    <blockquote>\n        <p><code><small>\n            <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">\n                Creative Commons Attribution Share-alike license\n            </a>\n        </small></code></p>\n    </blockquote>\n    <figcaption>\n        Использование элемента <code>&lt;small&gt;</code> вокруг ссылки на лицензию Creative Commons с <code>rel="license"</code>.\n    </figcaption>\n</figure>\n<p>Ниже приведен код для этого:</p>\n<pre><code>&#x3C;figure>\n    &#x3C;blockquote>\n        &#x3C;p>&#x3C;code>&#x3C;small>\n            &#x3C;a rel="license" href="…">\n                Creative Commons Attribution Share-alike license\n            &#x3C;/a>\n        &#x3C;/small>&#x3C;/code>&#x3C;/p>\n    &#x3C;/blockquote>\n    &#x3C;figcaption>\n        Использование элемента &#x3C;code>&#x26;lt;small&#x26;gt;&#x3C;/code>\n        вокруг ссылки на лицензию Creative Commons\n        с &#x3C;code>rel="license"&#x3C;/code>.\n    &#x3C;/figcaption>\n&#x3C;/figure>\n</code></pre>\n<h3>Различия между <code>&#x3C;figure></code> и <code>&#x3C;aside></code></h3>\n<p>Мы уже говорили об элементе <code>&#x3C;aside></code> <a href="http://html5doctor.com/aside-revisited/">в предыдущей статье</a>, но важно отметить разницу между ними. При выборе между <code>&#x3C;aside></code> или <code>&#x3C;figure></code>, стоит спросить себя, имеет ли содержимое элемента важное значение для понимания содержимого:</p>\n<ul>\n<li>Если содержимое просто имеет отношение и не является существенным, то используйте <code>&#x3C;aside></code>.</li>\n<li>Если содержимое является важным, но его положение в потоке общего содержимого не так важно, используется элемент <code>&#x3C;figure></code>.</li>\n</ul>\n<p>Обратите внимание, что если положение содержимого в тексте тесно связано с предыдущим и последующим содержимым, следует использовать более подходящие элементы — например, <code>&#x3C;div></code>, старый добрый <code>&#x3C;img></code>, <code>&#x3C;blockquote></code>, или даже <code>&#x3C;canvas></code>, в зависимости от типа содержимого.</p>\n<h2>Не останавливайтесь на достигнутом!</h2>\n<p>Не стоит ограничивать использование <code>&#x3C;figure></code> изображениями и примерами кода. Другим содержимым, подходящим по смыслу для использования в элементе <code>&#x3C;figure></code> может быть аудио, видео, графики (возможно, с использованием <code>&#x3C;canvas></code> или <code>&#x3C;svg></code>), стихи или таблицы со статистикой.</p>\n<p>Однако использование элемента <code>&#x3C;figure></code> не всегда целесообразно. Например, графический баннер не стоит размечать в <code>&#x3C;figure></code>. Используйте для этого просто <code>&#x3C;img></code>.</p>\n<h2>Вывод</h2>\n<p>Как мы продемонстрировали в этой статье, элемент <code>&#x3C;figure></code> открывает много возможностей. Только не забудьте убедиться, что он подходходит для конкретного случая. Хотя вряд ли вы бездумно относитесь к разметке, так ведь?</p>\n<p>Перевод оригинальной статьи «<a href="http://html5doctor.com/the-figure-figcaption-elements/">The figure &#x26; figcaption elements</a>» <a href="http://richclarkdesign.com/">Ричарда Кларка</a> (Richard Clark), опубликованной на сайте <a href="http://html5doctor.com/">HTML5Doctor.com</a>.</p>\n<p>Перевод выполнила Екатерина Мордвина.</p>',headings:[{depth:1,value:"Элементы figure и figcaption"},{depth:2,value:"Элемент "},{depth:2,value:"Элемент "},{depth:2,value:"Использование "},{depth:3,value:" для изображения"},{depth:3,value:" с изображением и подписью"},{depth:3,value:" с несколькими изображениями"},{depth:3,value:" с блоком кода"},{depth:3,value:"Различия между "},{depth:2,value:"Не останавливайтесь на достигнутом!"},{depth:2,value:"Вывод"}],frontmatter:{title:"Элементы figure и figcaption"}}},{node:{html:'<h1>Руководство для прохождения интервью по фронтенду</h1>\n<p>Перевод «Front End Interview Handbook» Юн Хен Тая.</p>\n<h2>Часть 1. HTML</h2>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*96ndS1Dh7zvkCKqv2avcWA.png" alt="[Картинка ](https://dribbble.com/shots/3831443-Tech-Interview-Handbook)[yangheng](https://dribbble.com/yangheng)"><em><a href="https://dribbble.com/shots/3831443-Tech-Interview-Handbook">Картинка </a><a href="https://dribbble.com/yangheng">yangheng</a></em></p>\n<h2>Что это такое?</h2>\n<p>В отличие от типичного собеседования с разработчиками ПО, на собеседованиях фронтенд-разработчиков меньше внимания уделяется алгоритмам. Большая часть вопросов касается специфичных знаний и компетенций в таких областях, как <em>HTML, CSS, JavaScript</em>.</p>\n<p>Несмотря на то, что существуют ресурсы, призванные помочь в подготовке к собеседованию, они сильно отличаются по полноте материалов от тех же ресурсов для разработчиков ПО. Среди того, что существует на сегодняшний день, наиболее полезным может быть сборник вопросов <a href="https://github.com/h5bp/Front-end-Developer-Interview-Questions">*Front-end Developer Interview Questions</a>*. К сожалению, на многие вопросы я не смог найти в сети полные и удовлетворяющие ответы. Поэтому в документе ниже я постарался самостоятельно ответить на них. Будучи <a href="https://github.com/yangshun/front-end-interview-handbook">открытым репозиторием</a>, этот проект может жить и развиваться благодаря сообществу, поскольку интернет эволюционирует.</p>\n<h2>Нужна более общая подготовка?</h2>\n<p>Вас может заинтересовать <a href="https://github.com/yangshun/tech-interview-handbook">*Tech Interview Handbook</a><em>, в котором содержится информация для прохождения общих технических интервью, в частности описаны алгоритмы, даны ответы на вопросы по софт-скиллс. Также есть [</em>Interview Cheatsheet](<a href="https://github.com/yangshun/tech-interview-handbook/blob/master/preparing/cheatsheet.md">https://github.com/yangshun/tech-interview-handbook/blob/master/preparing/cheatsheet.md</a>)*!</p>\n<h2>Вопросы по HTML</h2>\n<p>Ответы на вопросы из списка <a href="https://github.com/h5bp/Front-end-Developer-Interview-Questions#html-questions">*Front-end Job Interview Questions — HTML Questions</a>*. Комментарии с предложениями по улучшению и дополнению приветствуются!</p>\n<h3>Что делает DOCTYPE?</h3>\n<!DOCTYPE> — это сокращение от «*document type*» (тип документа). Он объявляется в HTML для того, чтобы различать стандартный режим или [режим совместимости (*quirks mode*)](https://quirks.spec.whatwg.org/#history). Его наличие говорит браузеру работать со страницей в стандартном режиме.\n<p>Мораль истории — просто добавляй <!DOCTYPE html> в начало страницы.</p>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li>\n<p><a href="https://stackoverflow.com/questions/7695044/what-does-doctype-html-do">Stack Overflow: What does <!doctype html> do?</a></p>\n</li>\n<li>\n<p><a href="https://www.w3.org/QA/Tips/Doctype">W3C: Don’t forget to add a doctype.</a></p>\n</li>\n<li>\n<p><a href="https://quirks.spec.whatwg.org/#history">Quirks Mode: History.</a></p>\n</li>\n</ul>\n<h3>Как поддерживать страницу на нескольких языках?</h3>\n<p>Вопрос немного расплывчатый. Полагаю, что речь о наиболее частом случае: как поддерживать страницу с содержимым на нескольких языках, где одновременно должен отображаться только один язык.</p>\n<p>Когда к серверу делается <em>HTTP</em>-запрос, то браузер пользователя обычно отсылает информацию о предпочитаемом языке в заголовке Accept-Language. Сервер может использовать эту информацию, чтобы вернуть версию документа на подходящем языке, если такая возможность есть. В возвращенном <em>HTML</em>-документе обязательно должен быть указан атрибут lang у тега <html>, к примеру <html lang="en">.</p>\n<p>На бэкенде <em>HTML</em>-разметка будет содержать плейсхолдер i18n, а контент для конкретного языка будет хранится в <em>YML-</em> или <em>JSON-</em>формате. Сервер динамически формирует <em>HTML</em>-страницу с контентом на конкретном языке, чаще всего при помощи бэкенд-фреймворка.</p>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li><a href="https://www.w3.org/International/getting-started/language">W3C: Language on the Web</a>.</li>\n</ul>\n<h3>На что обратить внимание при разработке мультиязычных сайтов?</h3>\n<ul>\n<li>\n<p><strong>Используй атрибут lang в <em>HTML</em>.</strong></p>\n</li>\n<li>\n<p>**Перенаправляй пользователей на версию сайта на их языке. **Позволяйте быстро и без проблем изменить страну и язык.</p>\n</li>\n<li>\n<p><strong>Текст на картинках плохо поддается адаптации.</strong> Многие до сих пор помещают текст на картинки чтобы получить хорошо выглядящий несистемный шрифт на любом компьютере. Однако чтобы перевести текст картинкой, нужно иметь подготовленную картинку с каждой строкой текста для каждого языка. При большом количестве текста это быстро выйдет из под контроля.</p>\n</li>\n<li>\n<p><strong>Ограничение длины слов и предложений.</strong> Некоторый контент может быть длиннее при написании на другом языке. Будьте внимательны к макету и проверяйте поведение блоков при переполнении. Количество символов важно в таких элементах, как заголовки, лейблы и кнопки. Но не так важно в основном тексте или в блоке комментария.</p>\n</li>\n<li>\n<p><strong>Помните о восприятии цветов.</strong> В разных языках и культурах цвета имеют разное значение. Дизайн должен учитывать эти особенности.</p>\n</li>\n<li>\n<p><strong>Форматируете даты и валюты.</strong> Календарные даты иногда пишутся по-разному. Например, «Май 31, 2012» в Америке или «31 мая 2012» в большинстве стран Европы.</p>\n</li>\n<li>\n<p><strong>Не склеивайте переведенные строки.</strong> Не пишите что-то вроде "Сегодняшняя дата " + date. Эта фраза будет выглядеть коряво на языках с другим порядком слов. Вместо этого используйте параметры шаблона.</p>\n</li>\n<li>\n<p><strong>Разные направления чтения.</strong> В русском мы читаем слева направо, сверху вниз. В традиционном японском языке текст читается сверху вниз, справа налево.</p>\n</li>\n</ul>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li><a href="https://www.quora.com/What-kind-of-things-one-should-be-wary-of-when-designing-or-developing-for-multilingual-sites">What kind of things one should be wary of when designing or developing for multilingual sites?</a></li>\n</ul>\n<h3>Для чего отлично подойдут data-атрибуты?</h3>\n<p>До того, как <em>JavaScript</em>-фреймворки стали популярны, фронтенд-разработчики использовали data-атрибуты чтобы хранить дополнительные данные прямо в <em>DOM</em> без хаков вроде нестандартных атрибутов или дополнительных свойств в <em>DOM</em>. Атрибуты этого семейства предназначены для хранения частных данных пользователя, для которых не существует более подходящих атрибутов или элементов, на странице или в приложении.</p>\n<p>На сегодняшний день использование data-атрибутов не поощряется. Одной из причин является то, что пользователь может модифицировать данные в атрибуте, используя инспектор кода в браузере. Данные лучше хранить в самом JavaScript и обновлять DOM при помощи связывания данных через библиотеку или фреймворк.</p>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li>\n<p><a href="http://html5doctor.com/html5-custom-data-attributes/">HTML5 Custom Data Attributes (data-*)</a>.</p>\n</li>\n<li>\n<p><a href="https://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-attributes">HTML 5.2: Embedding custom non-visible data with the data-* attributes</a></p>\n</li>\n</ul>\n<h3>Представьте HTML5 как открытую веб-платформу. Из каких блоков состоит HTML5?</h3>\n<ol>\n<li>\n<p><strong>Семантика.</strong> Позволяет более точно описать из чего состоит контент.</p>\n</li>\n<li>\n<p><strong>Связанность.</strong> Позволяет общаться с сервером новыми и инновационными способами.</p>\n</li>\n<li>\n<p><strong>Офлайн и хранилище.</strong> Позволяют страницам хранить данные локально на клиентской стороне и более эффективно работать в офлайне.</p>\n</li>\n<li>\n<p><strong>Мультимедиа.</strong> Ставит создание видео и аудио на первое место в вебе.</p>\n</li>\n<li>\n<p><strong>2D- и 3D-графика и эффекты.</strong> Позволяет расширить возможности презентации.</p>\n</li>\n<li>\n<p><strong>Производительность и интеграция.</strong> Обеспечивает большую скорость оптимизации и лучшее использование аппаратных средств.</p>\n</li>\n<li>\n<p><strong>Доступ к устройствам.</strong> Позволяет взаимодействовать с различными устройствами ввода и вывода.</p>\n</li>\n<li>\n<p><strong>Стилизация.</strong> Позволяет создавать более сложные темы оформления.</p>\n</li>\n</ol>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5">MDN: HTML5</a>.</li>\n</ul>\n<h3>Объясните разницу между cookie, sessionStorage и localStorage.</h3>\n<p>Все вышеупомянутые технологии являются механизмами хранения типа ключ-значение на клиентской стороне. Они могут хранить данные только как строки.</p>\n<h3>Cookie</h3>\n<ul>\n<li>\n<p><strong>Инициатор:</strong> клиент или сервер. Сервер может использовать заголовок Set-Cookie.</p>\n</li>\n<li>\n<p><strong>Срок хранения:</strong> устанавливается вручную.</p>\n</li>\n<li>\n<p><strong>Хранение между сессиями:</strong> зависит от установки срока хранения.</p>\n</li>\n<li>\n<p><strong>Связь с доменом:</strong> да.</p>\n</li>\n<li>\n<p><strong>Отправка на сервер с каждым <em>HTTP</em>-запросом:</strong> автоматически, с помощью заголовка Cookie.</p>\n</li>\n<li>\n<p><strong>Емкость, на один домен:</strong> 4 КБ.</p>\n</li>\n<li>\n<p><strong>Доступность:</strong> в любом окне.</p>\n</li>\n</ul>\n<h3>Local Storage</h3>\n<ul>\n<li>\n<p><strong>Инициатор:</strong> клиент.</p>\n</li>\n<li>\n<p><strong>Срок хранения:</strong> всегда.</p>\n</li>\n<li>\n<p><strong>Хранение между сессиями:</strong> да.</p>\n</li>\n<li>\n<p><strong>Связь с доменом:</strong> нет.</p>\n</li>\n<li>\n<p><strong>Отправка на сервер с каждым <em>HTTP</em>-запросом:</strong> нет.</p>\n</li>\n<li>\n<p><strong>Емкость, на один домен:</strong> 5 МБ.</p>\n</li>\n<li>\n<p><strong>Доступность:</strong> в любом окне.</p>\n</li>\n</ul>\n<h3>Session Storage</h3>\n<ul>\n<li>\n<p><strong>Инициатор:</strong> клиент.</p>\n</li>\n<li>\n<p><strong>Срок хранения:</strong> до закрытия вкладки.</p>\n</li>\n<li>\n<p><strong>Хранение между сессиями:</strong> нет.</p>\n</li>\n<li>\n<p><strong>Связь с доменом:</strong> нет.</p>\n</li>\n<li>\n<p><strong>Отправка на сервер с каждым <em>HTTP</em>-запросом:</strong> нет.</p>\n</li>\n<li>\n<p><strong>Емкость, на один домен:</strong> 5 МБ.</p>\n</li>\n<li>\n<p><strong>Доступность:</strong> в той же вкладке.</p>\n</li>\n</ul>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li>\n<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies</a></p>\n</li>\n<li>\n<p><a href="http://tutorial.techaltum.com/local-and-session-storage.html">http://tutorial.techaltum.com/local-and-session-storage.html</a></p>\n</li>\n</ul>\n<h3>Разница между <script>, <script async> и <script defer></h3>\n<ul>\n<li>\n<script> — отрисовка *HTML* блокируется, скрипт извлекается и выполняется немедленно, отрисовка *HTML* возобновляется после окончания выполнения скрипта.\n\n</li>\n<li>\n<script async> — скрипт будет извлечен и обработан параллельно с отрисовкой *HTML*, его выполнение закончится как только это будет возможно (обычно до того, как закончилась отрисовка *HTML*). Используйте async тогда, когда скрипт не зависит от других скриптов на странице, например для аналитики.\n\n</li>\n<li>\n<script defer> — скрипт будет извлечен параллельно с отрисовкой HTML, его выполнение произойдет после того, как вся страница будет загружена. Если таких скриптов несколько, то каждый из них будет исполнятся в том порядке, в котором они расположены в документе. Если скрипту нужен полностью распарсеный DOM, то атрибут defer обеспечит уверенность в том, что на момент отработки скрипта весь *HTML* отрисован. Нет особой разницы со скриптами, расположенными перед тегом <body>. Отложенный скрипт не должен содержать document.write.\n</li>\n</ul>\n<p><em>Примечание</em>: Атрибуты async и defer игнорируются, если у тега <script> нет атрибута src.</p>\n<p><strong>Ссылки</strong></p>\n<ul>\n<li>\n<p><a href="http://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html">async vs defer attributes</a>.</p>\n</li>\n<li>\n<p><a href="https://stackoverflow.com/questions/10808109/script-tag-async-defer">Stack Overflow: Script Tag — async &#x26; defer</a>.</p>\n</li>\n<li>\n<p><a href="https://bitsofco.de/async-vs-defer/">Asynchronous vs Deferred JavaScript</a>.</p>\n</li>\n</ul>\n<h3>Почему хорошей практикой считается располагать <link> для подключения CSS между <head></head>, а <script> для подключения JS ставить перед </body>? Знаете ли вы исключения?</h3>\n<h3><strong>Размещение <link> внутри <head></strong></h3>\n<p>Необходимость помещать теги <link> внутри шапки сайта описана в спецификации. Кроме того, размещение в верхней части разметки позволяет загружать страницу постепенно, что хорошо отражается на опыте использования. Проблема, возникающая при размещении таблиц стилей в нижней части страницы, заключается в том, что этот порядок препятствует прогрессивной загрузке страницы во многих браузерах. В том числе в <em>Internet Explorer</em>. Некоторые браузеры блокируют загрузку страницы, чтобы избежать перерисовки элемента, если его стили изменятся. Все это время пользователь будет пялиться на белый экран. Такое поведение браузеров предотвращает мерцание или отрисовку нестилизованых элементов.</p>\n<h3><strong><em>Размещение <script> прямо перед </body></em></strong></h3>\n<p>Теги <script> блокируют отрисовку <em>HTML</em> на то время, пока они скачиваются и исполняются. Скачивание скриптов в конце позволяет сперва распарсить и показать пользователю весь <em>HTML</em>.</p>\n<p>Исключением является случай, когда в вашем скрипте содержится document.write(). Но на сегодняшний день его использование не считается хорошей практикой. К тому же, расположение скриптов внизу разметки означает, что браузер не может начать их скачивать до тех пор, пока не отрисован весь документ. Единственным рабочим способом, при котором <script> будет расположен внутри <head>, является добавление атрибута defer.</p>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li><a href="https://developer.yahoo.com/performance/rules.html#css_top">Yahoo: Put Stylesheets at the Top</a>.</li>\n</ul>\n<h3>Что такое прогрессивный рендеринг?</h3>\n<p>Прогрессивный рендеринг — имя, данное технологиям, используемым для ускорения отрисовки страниц (в частности, уменьшение времени загрузки), чтобы показать пользователю контент как можно скорее.</p>\n<p>До того, как широкополосный интернет распространился повсеместно, прогрессивный рендеринг встречался довольно часто. Но этот подход по прежнему полезен в современной разработке, поскольку все более популярным (и ненадежным) становится мобильный доступ в интернет.</p>\n<p>Примеры технологий:</p>\n<ul>\n<li>\n<p><strong>Ленивая загрузка картинок.</strong> Картинки на странице не загружаются все разом. JavaScript подгрузит картинки тогда, когда пользователь доскроллит до той части страницы, на которой они расположены.</p>\n</li>\n<li>\n<p>**Приоритизация видимого контента. **Только минимум CSS, контента, скриптов, необходимых для отрисовки той части страницы, которую пользователь увидит первой. Вы можете использовать отложенные скрипты или слушать события DOMContentLoaded или load, чтобы загрузить остальные ресурсы и контент.</p>\n</li>\n<li>\n<p>**Асинхронные фрагменты HTML. *<em>Отправка в браузер частей *HTML</em>-страницы, созданной на бэкенде. Более подробно про эту технологию можно почитать <a href="http://www.ebaytechblog.com/2014/12/08/async-fragments-rediscovering-progressive-html-rendering-with-marko/">в этой статье</a>.</p>\n</li>\n</ul>\n<h3><strong>Ссылки</strong></h3>\n<ul>\n<li>\n<p><a href="https://stackoverflow.com/questions/33651166/what-is-progressive-rendering">Stack Overflow: What is progressive rendering?</a></p>\n</li>\n<li>\n<p><a href="http://www.ebaytechblog.com/2014/12/08/async-fragments-rediscovering-progressive-html-rendering-with-marko/">Async Fragments: Rediscovering Progressive HTML Rendering with Marko</a>.</p>\n</li>\n</ul>\n<h3>Приходилось ли вам работать с языками HTML-шаблонизации?</h3>\n<p>Да, <em>Pug</em> (ранее известный как <em>Jade</em>), <em>ERB, Slim, Handlebars, Jinja, Liquid</em> и это только некоторые из них. По моему мнению, все они более или менее одинаковые и предоставляют одинаковые возможности экранирования контента и полезных фильтров для работы с отображаемыми данными. Большинство движков позволяют вводить собственные фильтры, если вам требуется дополнительная обработка контента перед его отображением.</p>\n<h2>Другие ответы</h2>\n<ul>\n<li>\n<p><a href="https://neal.codes/blog/front-end-interview-questions-html/">Front End Interview Questions HTML</a>.</p>\n</li>\n<li>\n<p><a href="http://peterdoes.it/2015/12/03/a-personal-exercise-front-end-job-interview-questions-and-my-answers-all/">The Definitive “Front-End Developer Job Interview Questions” And My Answers</a>.</p>\n</li>\n</ul>\n<p><em>Перевод <a href="https://medium.com/@ABatickaya">Алёны Батицкой</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</em></p>',headings:[{depth:1,value:"Руководство для прохождения интервью по фронтенду"},{depth:2,value:"Часть 1. HTML"},{depth:2,value:"Что это такое?"},{depth:2,value:"Нужна более общая подготовка?"},{depth:2,value:"Вопросы по HTML"},{depth:3,value:"Что делает DOCTYPE?"},{depth:3,value:"Ссылки"},{depth:3,value:"Как поддерживать страницу на нескольких языках?"},{depth:3,value:"Ссылки"},{depth:3,value:"На что обратить внимание при разработке мультиязычных сайтов?"},{depth:3,value:"Ссылки"},{depth:3,value:"Для чего отлично подойдут data-атрибуты?"},{depth:3,value:"Ссылки"},{depth:3,value:"Представьте HTML5 как открытую веб-платформу. Из каких блоков состоит HTML5?"},{depth:3,value:"Ссылки"},{depth:3,value:"Объясните разницу между cookie, sessionStorage и localStorage."},{depth:3,value:"Cookie"},{depth:3,value:"Local Storage"},{depth:3,value:"Session Storage"},{depth:3,value:"Ссылки"},{depth:3,value:"Разница между "},{depth:3,value:"Почему хорошей практикой считается располагать "},{depth:3,value:"Размещение "},{depth:3,value:"Размещение "},{depth:3,value:"Ссылки"},{depth:3,value:"Что такое прогрессивный рендеринг?"},{depth:3,value:"Ссылки"},{depth:3,value:"Приходилось ли вам работать с языками HTML-шаблонизации?"},{depth:2,value:"Другие ответы"}],frontmatter:{title:"Руководство для прохождения интервью по фронтенду"}}},{node:{html:'<h1>Быстродействие фронтенда для дизайнеров и разработчиков</h1>\n<p><a href="http://csswizardry.com">Гарри Робертс</a> 15 апреля 2013</p>\n<p>Вряд ли кто-то будет отрицать, что быстродействие — один из <em>ключевых</em> аспектов любого более-менее серьёзного веб-проекта: будь это маленький сайт-портфолио, мобильное веб-приложение, или полноценный проект интернет-магазина. Исследования, статьи и ваш собственный опыт подсказывают: чем быстрее, тем лучше.</p>\n<p>Быстродействие — это не только крайне важный, но и <em>невероятно</em> интересный предмет, и я все больше и больше увлекаюсь им и на работе (я вечно достаю на этот счет нашего ведущего специалиста по быстродействию), и в собственных проектах, и в рамках CSS Wizardry (здесь достаётся <a href="http://twitter.com/andydavies">Энди Дэвису</a>).</p>\n<p>В этой гигантской статье я поделюсь с вами множеством быстрых, простых, но очень интересных вещей, которые я узнал о быстродействии: надеюсь, они пригодятся и веб-дизайнерам, и фронтенд-разработчикам, а вся эта статья послужит вводной для любого, кто хочет начать заниматься быстродействием и сделать свой фронтенд молниеносно быстрым. Все эти советы вы можете воплотить в жизнь сами, и <em>очень</em> просто. Нужно немножко хитрости и базовые знания о том, как работают браузеры — и всё, вы готовы обыграть систему!</p>\n<p>Здесь не будет кучи путаных графиков и трудноперевариваемых цифр. Вместо этого мы сделаем акцент на теории и приемах для повышения быстродействия, которые я освоил, читая, отслеживая, учась у коллег и экспериментируя (достаточно много времени я провел, просто уставившись в каскад отрисовки CSS Wizardry). Кроме того, я дам ссылки на другие статьи по теме, чтобы подчеркнуть какие-то ключевые моменты. Наслаждайтесь!</p>\n<p><strong>N.B.</strong> Чтобы эта статья была полезной, вам все-таки нужно немножко знать о быстродействии, но все незнакомые термины, которые будут упоминаться в этой статье, очень легко нагуглить!</p>\n<ol>\n<li>\n<p><a href="#section:the-basics">Принципы</a></p>\n<ol>\n<li><a href="#section:styles-at-the-top-scripts-at-the-bottom">Стили наверху, скрипты внизу</a></li>\n<li><a href="#section:make-fewer-requests">Делайте меньше запросов</a></li>\n<li><a href="#section:maximising-parallelisation">Максимальная параллелизация</a></li>\n</ol>\n</li>\n<li>\n<p><a href="#section:http-requests-and-dns-lookups">HTTP-запросы и поиск DNS</a></p>\n<ol>\n<li><a href="#section:dns-prefetching">Предзагрузка DNS</a></li>\n</ol>\n</li>\n<li><a href="#section:resource-prefetching">Предзагрузка ресурсов</a></li>\n<li><a href="#section:css-and-performance">CSS и быстродействие</a></li>\n<li><a href="#section:gzipping-and-minifying">Минификация и gzip</a></li>\n<li>\n<p><a href="#section:optimising-images">Оптимизация изображений</a></p>\n<ol>\n<li><a href="#section:spriting">Спрайты</a></li>\n<li><a href="#section:retina-images">Изображения для ретины</a></li>\n<li><a href="#section:progressive-jpgs">JPG с прогрессивной загрузкой</a></li>\n<li><a href="#section:use-no-images-at-all">Не используйте изображения вообще</a></li>\n</ol>\n</li>\n<li><a href="#section:further-reading">Дальнейшее чтение</a></li>\n</ol>\n<h2>Принципы</h2>\n<p>Практически <em>все</em> дизайнеры и фронтенд-разработчики кое-что знают о быстродействии: например, что нужно делать как можно меньше запросов, оптимизировать изображения, размещать ссылки на стили в <code>&#x3C;head></code>, размещать JS-код перед <code>&#x3C;/body></code>, минимизировать JS и CSS, и т.п. Эти базовые вещи уже помогут вашим страницам загружаться быстрее. Но способов ускорить загрузку ещё много… очень много.</p>\n<p>Ещё очень важно помнить о том, что браузеры (из-за которых у нас каждый рабочий день болит голова) стали <em>очень</em> умными: много работы по оптимизации быстродействия они делают за вас, так что значительная часть рекомендаций сводится к тому, как наилучшим образом использовать эту работу. Многие ноу-хау по быстродействию касаются понимания, использования и настройки того, что браузер уже делает.</p>\n<h3>Стили наверху, скрипты внизу</h3>\n<p>Это простое правило, и следовать ему очень легко, но почему оно имеет такое значение? Если совсем кратко:</p>\n<ul>\n<li><strong>CSS блокирует отрисовку,</strong> поэтому вам нужно разобраться с ним как можно быстрее (то есть в верхней части документа, внутри <code>&#x3C;head></code>).</li>\n<li><strong>JS блокирует загрузки,</strong> так что вам нужно разобраться с ним в последнюю очередь, чтобы быть уверенным, что ваши JS-файлы не мешают загрузке других ресурсов на этой странице.</li>\n</ul>\n<p>CSS блокирует отрисовку, потому что браузеры отображают страницы методом прогрессивной развёртки: они отображают элементы по мере того, как получают их, и по порядку. Если стили находятся внизу страницы, браузер не может обработать этот CSS, пока не доберется до него. Так задумано для того, чтобы браузеру не приходилось перерисовывать стили в том случае, если они изменяют какой-то элемент, который был отображен выше на странице. Браузер не будет рендерить страницу, пока у него нет всей необходимой информации о стилях, и если вы размещаете эту информацию в нижней части документа, вы заставляете браузер ждать и блокируете тем самым отрисовку.</p>\n<p>Так что размещайте CSS в верхней части страницы, чтобы браузер мог начать отрисовку сразу.</p>\n<p>JavaScript блокирует загрузки по ряду причин (браузеры снова умничают), но для начала мы должны знать, как именно происходит загрузка ресурсов в браузерах: если коротко, браузер загружает столько ресурсов, сколько может загрузить <em>параллельно</em> с одного домена. Чем больше доменов задействовано, тем больше ресурсов могут одновременно загружаться параллельно.</p>\n<p>JavaScript прерывает этот процесс и блокирует параллельные загрузки с текущего и всех остальных доменов, потому что:</p>\n<ul>\n<li>Вызванный скрипт может изменить содержимое страницы, и значит, браузер должен разобраться с этим скриптом перед тем, как начать заниматься чем-то ещё. Для этого браузер просто останавливает загрузку всего остального, чтобы полностью сфокусироваться на скрипте.</li>\n<li>Обычно, чтобы скрипты работали, их нужно загружать в определенном порядке: например, нужно загрузить jQuery, а <em>потом</em> плагин. Ясно, что при параллельной загрузке скриптов, сперва загрузится плагин, а <em>только потом —</em> jQuery. Поэтому браузеры блокируют параллельную загрузку JavaScript-файлов.</li>\n</ul>\n<p>Итак, поскольку браузеры приостанавливают загрузки, пока подгружают JavaScript, ссылки на JavaScript-ресурсы следует помещать как можно ниже в документе. Вы наверняка видели пустые части страниц, потому что какой-то сторонний JS грузится веками и блокирует загрузку и обработку ресурсов для всего остального. Это и есть блокирование JavaScript.</p>\n<p>Однако, по всей видимости, современные браузеры стали ещё умнее. Я приведу здесь отрывочек из письма <a href="http://twitter.com/andydavies">Энди Дэвиса</a>, потому что он объясняет все гораздо лучше, чем я:</p>\n<blockquote>\n<p>Современные браузеры загружают JS параллельно, и только отрисовка блокируется до тех пор, пока не исполнится скрипт (разумеется, перед этим браузер должен его загрузить).</p>\n<p>Загрузка скрипта часто осуществляется предзагрузчиком браузера.</p>\n<p>Когда браузер не может отрендерить страницу (например, ждет загрузки CSS или исполнения JS), предзагрузчик анализирует оставшийся код на странице и ищет ресурсы, которые может загрузить.</p>\n<p>Некоторые браузеры (например, Chrome) расставляют приоритеты в загрузке ресурсов: например, если в очередь на загрузку стоят скрипты и изображения, браузер сперва загрузит скрипты.</p>\n</blockquote>\n<p>Умно!</p>\n<p>Итак: для того, чтобы ваша страница могла начать отрисовку как можно быстрее, размещайте стили наверху. Чтобы избежать блокировки загружаемых ресурсов, размещайте скрипты внизу.</p>\n<h3>Делайте меньше запросов</h3>\n<p>Ещё одна совершенно очевидная и базовая оптимизация быстродействия: загружайте меньше. Каждый ресурс на странице — это лишний HTTP-запрос, на каждый ресурс, необходимый для отрисовки страницы, браузер отвлекается. Каждый из этих запросов может привести к поиску DNS, редиректам, обработке 404-й ошибки и т.п. Таким образом, каждый HTTP-запрос, который вы делаете, будь это запрос стилей, картинок, веб-шрифтов, JS-файла, чего угодно — потенциально весьма дорогостоящая операция. Минимизация количества этих запросов — один из самых простых способов оптимизировать быстродействие.</p>\n<p>Возвращаясь к браузерам и параллелизации: большинство браузеров будут загружать всего несколько ресурсов с каждого домена одновременно, а JS, как вы помните, блокирует эти загрузки в любом случае. Каждый HTTP-запрос, который вы делаете, должен быть оправдан, не смотрите на это сквозь пальцы.</p>\n<h3>Максимальная параллелизация</h3>\n<p>Для того, чтобы заставить браузер загружать больше ресурсов параллельно, вы можете отдавать их с разных доменов. Если браузер может загружать одновременно, например, только два ресурса с домена, то, раздавая ресурсы с двух доменов, вы сможете загружать одновременно четыре ресурса; с трёх — значит браузер может выжать шесть одновременных загрузок.</p>\n<p>У большого количества сайтов есть домены для статических ресурсов. Например, Twitter раздает статические ресурсы с <code>si0.twimg.com</code>:</p>\n<pre><code>&#x3C;link rel="stylesheet"\n      href="https://si0.twimg.com/…/t1_core.bundle.css"\n      type="text/css" media="screen">\n</code></pre>\n<p>Facebook использует <code>fbstatic-a.akamaihd.net</code>:</p>\n<pre><code>&#x3C;link rel="stylesheet"\n      href="https://fbstatic-a.akamaihd.net/…/76f893pcD3j.css">\n</code></pre>\n<p>Используя эти домены для статических ресурсов, Twitter и Facebook могут отдавать больше ресурсов параллельно: ресурсы с <code>twitter.com</code> и <code>si0.twimg.com</code> могут загружаться одновременно. Это очень простой способ получить большее количество одновременных загрузок ресурсов на вашей странице, и его можно улучшить, совместив с технологией CDN (она позволяет уменьшить сетевые задержки за счёт того, что ресурс отдается с наиболее подходящего <em>физического</em> сервера).</p>\n<p>Все это замечательно, но ниже мы обсудим, как загрузка ресурсов с поддоменов может при ряде обстоятельств навредить быстродействию.</p>\n<p>Итак, вот наши принципы быстродействия:</p>\n<ul>\n<li>Размещайте ссылки на стили наверху страницы</li>\n<li>Размещайте JavaScript внизу (насколько это возможно)</li>\n<li>Делайте как можно меньше HTTP-запросов</li>\n<li>Раздавая ресурсы с нескольких доменов, вы можете увеличить количество ресурсов, которые браузер будет загружать параллельно.</li>\n</ul>\n<h2>HTTP-запросы и поиск DNS</h2>\n<p>Каждый раз, когда вы делаете запрос на ресурс с какого-либо домена, браузер делает HTTP-запрос с соответствующими заголовками, сервер отвечает и посылает обратно ответ. Это, конечно, очень упрощенная модель процесса, но по-настоящему вам нужно знать только это. Так выглядит HTTP-запрос, и все ресурсы, которые вы запрашиваете, вы получите таким путём. Эти запросы и есть главное узкое место фронтенд-быстродействия: как говорилось выше, браузеры ограничены тем, сколько запросов они могут выполнять параллелльно. Вот почему мы часто используем поддомены: так можно одновременно выполнить большее количество запросов, распределенных по нескольким доменам.</p>\n<p>С этим, однако, есть и проблема — DNS-запросы. Каждый раз, когда делается запрос к <em>новому</em> домену (с холодного кэша), HTTP-запрос должен произвести довольно долгий DNS-запрос (между 20 и 120 мс). За это время исходящий запрос смотрит, где же, собственно, находится ресурс: интернет организован с помощью IP-адресов, на которые ссылаются доменные имена, которые, в свою очередь, управляются DNS.</p>\n<p>В обращение к каждому новому домену, с которого вы запрашиваете ресурсы, включена стоимость DNS-запроса, и вам нужно быть уверенным, что оно того стоит. Если вас сайт небольшой (как, например, CSS Wizardry), тогда вам, скорее всего, не стоит раздавать ресурсы с поддомена: браузер, вероятно, сможет скачать несколько ресурсов с одного домена без параллелизации быстрее, чем сделать DNS-запросы на несколько доменов и распараллелить загрузку ресурсов с них.</p>\n<p>Если у вас десять-пятнадцать ресурсов, вам следуем подумать о том, чтобы раздавать их <strong>с одного</strong> поддомена: скорее всего, лишний DNS-запрос стоит того, чтобы обеспечить лучшую параллелизацию этих ресурсов. Если у вас, например, 40 ресурсов, возможно, имеет смысл разделить их <em>на два</em> поддомена: два лишних DNS-запроса будут оправданной ценой за то, чтобы раздавать ваш сайт с целых трёх доменов.</p>\n<p>DNS-запросы достаточно дороги, так что вам нужно определить, что больше подходит для вашего сайта: издержки на DNS-запросы или просто раздача одного домена.</p>\n<p>Важно помнить, что, если HTML уже запрошен с домена, скажем, <code>foo.com</code>, DNS-запрос для этого хоста уже произошёл, так что дополнительные запросы к любому ресурсу на <code>foo.com</code> больше <em>не проходят</em> через DNS-запрос.</p>\n<h3>Предзагрузка DNS</h3>\n<p>Если вы, как и я, хотите, чтобы у вас на сайте был виджет Twitter, аналитика или какие-то веб-шрифты, то вам <em>нужно</em> будет ссылаться на внешние домены. Это означает, что вам <em>нужно</em> будет тратить время на DNS-запросы. Мой совет: не использовать какие попало виджеты, не обдумав заранее их влияние на быстродействие. Но если вы решили, что какой-то виджет вам <em>необходим</em>, полезно знать следующее.</p>\n<p>Поскольку эти ресурсы располагаются на других доменах, CSS для вашего веб-шрифта, например, будет загружаться параллельно с вашим собственным CSS, что в каком-то смысле хорошо, но скрипты всё равно будут блокировать браузер (<a href="http://css-tricks.com/thinking-async/">если они не асинхронные</a>).</p>\n<p>На самом деле, проблема здесь заключается в DNS-запросах, связанных с внешними доменами. К счастью, есть очень быстрый и лёгкий способ ускорить этот процесс: предзагрузка DNS.</p>\n<p>Что делает предзагрузка DNS, понятно из названия; реализовать её очень просто. Если вам нужно запросить ресурсы, скажем, с <code>widget.foo.com</code>, вы можете предзагрузить DNS для этого поддомена, просто добавив в начале страницы в секции <code>&#x3C;head></code>:</p>\n<pre><code>&#x3C;head>\n    &#x3C;link rel="dns-prefetch" href="//widget.foo.com">\n&#x3C;/head>\n</code></pre>\n<p>Эта простая строчка объявит браузерам, которые поддерживают предзагрузку, что им стоит начать загружать DNS для этого домена за долю секунды до того, как это понадобится сделать для загрузки ресурса. Таким образом, когда браузер дойдёт до элемента <code>&#x3C;script></code>, запрашивающего виджет, DNS-запрос уже будет запущен. Так браузер чуть-чуть опережает события.</p>\n<p>Этот простой элемент <code>&#x3C;link></code> (<a href="https://github.com/csswizardry/csswizardry.github.com/blob/b52472cea6a0f087944afda750839d7c96fab7d3/_layouts/default.html#L7-L15">я использую его на CSS Wizardry</a>) полностью обратно совместим и не отразится отрицательно на быстродействии. Думайте об этом, как о прогрессивном улучшении быстродействия.</p>\n<h3>Дальнейшее чтение</h3>\n<p><a href="http://calendar.perfplanet.com/2012/speed-up-your-site-using-prefetching/">Speed Up Your Site Using Prefetching</a>.</p>\n<h2>Предзагрузка ресурсов</h2>\n<p>Вместе с предзагрузкой DNS очень полезно предзагружать все нужные вашему сайту ресурсы. Чтобы понять, что стоит предзагружать, сначала нужно разобраться, как и когда браузер <em>обычно</em> запрашивает ресурсы.</p>\n<p>Веб-шрифты и изображения, упомянутые в CSS, ведут себя точно так же: браузер начнет загружать их, как только наткнётся на ту часть HTML-кода, для которого они нужны. Как я уже говорил выше, браузеры очень умные, и здесь мы видим ещё одно подтверждение этому. Представьте себе, если бы браузеры загружали изображения из CSS, как только увидели в стилях следующее:</p>\n<pre><code>.page--home         { background-image: url(home.jpg); }\n.page--about        { background-image: url(about.jpg); }\n.page--portfolio    { background-image: url(portfolio.jpg); }\n.page--contact      { background-image: url(contact.jpg); }\n</code></pre>\n<p>Если бы браузер <em>не ждал,</em> пока дело дойдёт до HTML, требующего эти картинки, при заходе на главную страницу он бы скачивал все четыре изображения. Это крайне расточительное использование ресурсов, поэтому, перед тем, как скачивать картинку, браузер должен быть уверен, что она ему <em>определенно</em> нужна. Проблема здесь в том, соответственно, что загрузки не происходит до последнего момента.</p>\n<p>Если же мы полностью уверены, что какое-то изображение из CSS <em>точно</em> будет использоваться на каждой странице, мы можем обмануть браузер и заставить его скачать это изображение как можно раньше, ещё <em>до того,</em> как он доберется до HTML, которому оно требуется. Сделать это невероятно просто, но, в зависимости от того, как именно вы решите это сделать, это может быть немного грязным приёмом.</p>\n<p>Итак, грязный, но самый безопасный способ: поставить на каждой странице скрытый <code>&#x3C;div></code>, в котором при помощи элементов <code>&#x3C;img></code> с пустым атрибутом <code>alt</code> вставлены все изображения из CSS. Я поступил так со <a href="https://github.com/csswizardry/csswizardry.github.com/blob/b52472cea6a0f087944afda750839d7c96fab7d3/_layouts/default.html#L41-L44">спрайтом на CSS Wizardry</a>; я знаю, что они используется на каждой странице, и поэтому с уверенностью могу предзагружать его в своем HTML. Браузеры замечательно обрабатывают теги <code>&#x3C;img></code>: предзагружая картинку, браузер обращается к ней очень рано, поэтому, заставив его загрузить спрайты с помощью тега <code>&#x3C;img></code> в разметке, мы добиваемся более ранней загрузки изображения, чем затребовал бы CSS. Таким образом, упомянув (скрытое) изображение в HTML, я ускоряю эту загрузку.</p>\n<p>Со вторым, более «чистым» способом, который очень похож на пример с предзагрузкой DNS, есть некоторая путаница:</p>\n<pre><code>&#x3C;link rel="prefetch" href="sprite.png">\n</code></pre>\n<p>Этот код прямо говорит браузеру, что нужно начать предзагружать мое изображение со спрайтами, вне зависимости от того решения, которые он может принять после обработки CSS.</p>\n<p>Путаница заключается в несогласованности между двумя статьями: <a href="https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ">по этой статье с MDN</a> можно понять, что <code>prefetch</code> — подсказка для браузера, что, <em>может быть,</em> стоит предзагрузить ресурс, <em>если</em> браузер сейчас ничем не занят. Напротив, <a href="http://calendar.perfplanet.com/2012/speed-up-your-site-using-prefetching/">в этой статье</a> с Planet Performance сказано, что браузер всегда будет предзагружать ресурсы, если он поддерживает синтаксис <code>rel="prefetch"</code>, и не упоминается, что это будет сделано «в свободное время». Графики загрузки, на которые я смотрел, <em>вроде бы</em> подтверждают второй вариант, но странный глюк в WebKit, из-за которого нельзя наблюдать результаты предзагрузки, если у тебя открыт отладчик (привет, быстродействие Шредингера!), приводит к том, что я не могу быть уверенным на 100%. Буду <em>очень благодарен</em> за любые комментарии по этому поводу.</p>\n<p>Я уже говорил, что шрифты и изображения работают почти одинаково: сказанное выше относится и к файлам шрифтов, но шрифт нельзя загрузить в спрятанном <code>&#x3C;div></code>, нужно использовать <code>prefetch</code>.</p>\n<pre><code>&#x3C;link rel="prefetch" href="webfont.woff">\n</code></pre>\n<p>Проще говоря, мы делаем следующее: заставляем браузер скачать наш ресурс заранее, так что к тому времени, как нужно будет применять наш CSS, он уже будет скачан (ну или хотя бы начнет скачиваться). Ура!</p>\n<h3>Дальнейшее чтение</h3>\n<p><a href="http://calendar.perfplanet.com/2012/speed-up-your-site-using-prefetching/">Speed Up Your Site Using Prefetching</a>.</p>\n<h2>CSS и быстродействие</h2>\n<p>Во множестве разных статей написано, что, если вы используете отдельные домены для ресурсов, то с них нужно загружать все статические ресурсы: CSS, JS, изображения и т.п.</p>\n<p>Одно из маленьких открытий, которое мы сделали в процессе работы, звучит так: <em>не раздавайте</em> CSS с поддомена.</p>\n<p>Помните, как мы обсуждали блокировку отрисовки загрузкой стилей. Браузер хочет получить ваш CSS как можно скорее, CSS находится на <em>критическом пути —</em> то есть на том необходимом пути, который браузер проходит от момента, когда пользователь затребовал страницу, и до того, когда он что-то увидел. В отличие от JS и изображений, CSS находится там из-за своего свойства блокировать отрисовку. В ваших интересах проходить критический путь настолько быстро, насколько это возможно — то есть <strong>без дополнительных DNS-запросов</strong>.</p>\n<p>Однажды мы разрабатывали сайт, рабочее окружение которого раздавало все ресурсы с одного хоста (например, <code>foo.com</code>), но когда дело дошло до того, чтобы сделать его более приближенным к реальному, мы начали раздавать ресурсы с <code>s1.foo.com</code> и <code>s2.foo.com</code>. Получилось, что все изображения, JS, CSS и шрифты были расположены на разных доменах, что приводило к нескольким DNS-запросам. Проблема здесь в том, что неоходимый для получения CSS-файла DNS-запрос, отправленный из холодного кэша, <em>сразу же</em> замедлял наш критический путь. Наши графики ужасно скакнули, показывая задержку, которой в теории не должно было случиться: все прогрессивные практики диктуют, что вы должны распределять большое количество ресурсов по поддоменам, не правда ли? CSS это <strong>не касается</strong>. Необходимый DNS-запрос занимал ощутимое время, на которое в итоге задерживалась отрисовка страницы.</p>\n<p>CSS — один из самых страшных врагов быстродействия, <a href="http://www.phpied.com/css-and-the-critical-path/">подчеркивает Стоян Стефанов</a>, — именно из-за этой блокировки отрисовки. Также стоит отметить, что браузер скачает <em>все</em> CSS-файлы перед тем, как начнет рендерить страницу. Это значит, что браузер <em>в любом случае</em> запросит <code>print.css</code>, даже если страница всего лишь выводится на экран. Это значит, что все стили, которые используются только вместе с медиавыражениями, например, следующие стили, скачаются в любом случае, даже если они не нужны:</p>\n<pre><code>&#x3C;link rel="stylesheet"\n      media="screen and (min-device-width: 800px)"\n      href="desktop.css">\n</code></pre>\n<p>Впрочем, <a href="http://twitter.com/andydavies">Энди Дэвис</a> сообщил мне, что WebKit расставляет приоритеты в порядке загрузки CSS таким образом, что <em>сперва</em> загружается только тот CSS, который нужен для первоначального отображения страницы, а загрузка всех остальных стилей (например, <code>print.css</code>) как можно дольше откладывается. Отлично!</p>\n<p>Итак, то, что знаем про CSS, позволяет нам принять несколько решений и все они основаны на знании, что CSS блокирует отрисовку, запрашивается <em>весь сразу</em> и находится на вашем критическом пути:</p>\n<ul>\n<li><strong>Никогда не раздавайте CSS с отдельного домена,</strong> поскольку это приводит к задерживающим отрисовку DNS-запросам.</li>\n<li><strong>Вставляйте CSS в HTML-код как можно раньше,</strong> чтобы браузер мог скачать его и заняться другими вещами.</li>\n<li><strong>Собирайте CSS в один файл.</strong> Браузер все равно скачает весь CSS, поэтому гораздо лучше просто собрать все, что у вас есть, в один HTTP-запрос.</li>\n<li><strong>Сожмите его с помощью gzip и минифицируйте,</strong> чтобы браузеру пришлось загружать меньше.</li>\n<li><strong>Закэшируйте все, что можно,</strong> чтобы весь этот процесс происходил как можно реже.</li>\n</ul>\n<p>CSS находится на вашем критическом пути, так что вам нужно разобраться с ним быстро; он блокирует отрисовку, это означает, что пользователям загрузка страницы будет казаться медленной. <strong>Когда мы перенесли CSS на поддомен, наше быстродействие резко упало.</strong></p>\n<h3>Дальнейшее чтение</h3>\n<p><a href="http://www.phpied.com/css-and-the-critical-path/">CSS And the Critical Path</a></p>\n<h2>Минификация и gzip</h2>\n<p>Есть две простые вещи, которые вы можете (и должны) сделать со своими текстовыми ресурсами: минификация, чтобы убрать комментарии и пробелы, и сжатие с помощью gzip, чтобы ещё сильнее уменьшить размер.</p>\n<p>Если выбирать из этого только что-то одно, то gzip эффективнее, чем минификация. Но если вы можете, делайте и то и другое.</p>\n<p><em>Обычно</em> для того, чтобы включить gzip, нужно чуть-чуть поиграть с <code>.htaccess</code>, но, как подсказывает мой добрый друг <a href="http://twitter.com/makeusabrew">Ник Пэйн</a>, <code>.htaccess</code> — не самая лучшая вещь с точки зрения серверного быстродействия — <code>.htaccess</code> заново анализируется на <em>каждом</em> входящем запросе, поэтому при его использовании возникает достаточно большая нагрузка.</p>\n<p>Итак, <a href="http://httpd.apache.org/docs/2.2/howto/htaccess.html">из документации Apache</a>:</p>\n<blockquote>\n<p>Вам стоит перестать использовать <code>.htaccess</code> полностью, если у вас есть доступ к конфигурационному файлу главного httpd-сервера. Использование <code>.htaccess</code> замедляет ваш Apache. Любую директиву, которую вы включаете в <code>.htaccess</code>, гораздо лучше поместить в блок <code>Directory</code>, поскольку эффект будет таким же, а быстродействие — лучше…</p>\n</blockquote>\n<p>Если же у вас есть только доступ к <code>.htaccess</code>, не волнуйтесь: эта нагрузка <em>обычно</em> настолько маленькая, что беспокоиться о нёй на стоит. Включить gzip с помощью <code>.htaccess</code> на самом деле очень просто. С минификацией сложнее, разве что у вас есть процесс сборки проекта, или если вы используете какой-то препроцессор или CodeKit, который компилирует исходники сразу в минифицированную версию.</p>\n<p>Кстати, главной причиной, по которой я переписал <a href="http://inuitcss.com/">inuit.css</a> на Sass было (по крайней мере, сперва) то, что я мог легко скомпилировать минифицированную версию.</p>\n<p>Основной эффект минификации сводится к тому, что она убирает пробелы и комментарии — если вы комментируете свой код так же подробно, как я, то вы наверняка захотите минифицировать свои ресурсы.</p>\n<p>Gzip, как и любой другой алгоритм сжатия, берет любой <em>текстовый</em> исходник и сжимает его на основании повторяющихся строк. В целом, gzip сжимает код очень хорошо, потому что в любом коде, как правило, есть типовые строки, которые повторяются: например, <code>background-image</code> в CSS, <code>&#x3C;strong></code> в разметке и т.п.</p>\n<p>Gzip <em>действительно</em> очень сильно уменьшает размер ваших ресурсов, и вам определенно нужно включать его. Если вам нужен хороший пример <code>.htaccess</code>, посмотрите, как это сделано <a href="https://github.com/h5bp/html5-boilerplate/blob/dac15682b35ad69f519205e1b82694d0cab189ca/.htaccess#L153">в HTML5 Boilerplate</a>.</p>\n<p>Сжатие вашего контента это <em>гигантская</em> экономия. На данный момент <code>inuit.css</code> весит 77 КБ. После минификации и gzip-сжатия он весит всего лишь <strong>5,52 КБ</strong>. Таким образом, эти два приема дают нам экономию в 93%. Ну а раз gzip хорошо работает на текстовых ресурсах, то вы можете сжимать с его помощью и SVG, и даже некоторые форматы шрифтов!</p>\n<h2>Оптимизация изображений</h2>\n<p>Я не могу сказать, что я какой-то запредельный специалист в науке оптимизации изображений — я просто прогоняю их через утилиту оптимизации, но разбираться собственно с изображениями и их постобработкой очень интересно.</p>\n<h3>Спрайты</h3>\n<p>Если вы хотите, чтобы ваш сайт обладал хорошим быстродействием, спрайты просто-напросто обязательны: вы загружаете одну большую картинку через один HTTP-запрос, а не несколько изображений за несколько запросов. Проблема состоит в том, что не все изображения можно объединить в спрайт: например, если у вас есть иконка, которая должна быть фоновым изображением на элементе переменной длины, то у вас не получится это сделать — это не работает для элементов, размеры которых не фиксированы. Вы можете оставить много свободного места вокруг картинки в своём спрайте, но <a href="http://blog.vlad1.com/2009/06/22/to-sprite-or-not-to-sprite/">лишние пиксели в спрайтах сами по себе являются проблемой для быстродействия</a>.</p>\n<p>Чтобы справиться с изображениями, которые нельзя поместить в спрайты, нам понадобится «спрайтовый элемент». По сути, это просто пустой элемент, обычно <code>&#x3C;i></code>, единственная задача которого — оставаться пустым и содержать фоновое изображение. (Всё же элемент <code>&#x3C;i></code> имеет <a href="/articles/i-b-em-strong-elements/">другое назначение</a> и здесь больше подойдёт <code>&#x3C;span></code> — <em>прим. редактора.)</em></p>\n<p>Я использовал такие элементы, когда разрабатывал <a href="http://www.skybet.com/">Sky Bet</a>, они используются на YouTube и Facebook, а <a href="http://twitter.com/snookca">Джонатан Снук</a> написал <a href="http://smacss.com/book/icon-module">целый раздел о них на SMACSS</a>.</p>\n<p>Идея такая: если вы не можете использовать в элементе спрайт из-за того, что элемент тянется, то вы помещаете внутрь пустой элемент, чтобы иметь возможность поправить размеры. После этого сможете уже собрать спрайты в один файл, например:</p>\n<pre><code>&#x3C;li>\n    &#x3C;a href="/profile/">\n        &#x3C;i class="icon icon--person">&#x3C;/i> Profile\n    &#x3C;/a>\n&#x3C;/li>\n</code></pre>\n<p>Здесь мы не можем отправить в спрайты ни для <code>&#x3C;li></code>, ни для <code>&#x3C;a></code>, так что мы просто ставим пустой <code>&#x3C;i></code>, в котором и находится иконка. Именно это — одна из тех вещей, которые я больше всего люблю в теме быстродействия: вы используете разные умные приемы, чтобы увеличить скорость загрузки страницы, но при этом используете разметку, которая традиционно считается «плохой». Отлично же!</p>\n<h3>Дальнейшее чтение</h3>\n<p><a href="http://blog.vlad1.com/2009/06/22/to-sprite-or-not-to-sprite/">To Sprite Or Not To Sprite</a>.</p>\n<h2>Изображения для ретины</h2>\n<p>Вам не нужно готовить для ретины <em>все</em> изображения. Картинка в два раза больше по ширине и высоте содержит <strong>в четыре раза</strong> больше пикселей, чем такая же картинка в стандартном разрешении. В четыре. Раза. Хоть это и не значит, что размер файла увеличится соответственно — все-таки у изображений свои методы сжатия — но памяти на это изображение требуется <em>в четыре раза больше</em>.</p>\n<p>Давайте мы на секунду остановимся и подумаем: изображения для ретины чаще всего (хоть и необязательно) нужны для того, чтобы отображение дизайна на телефонах было более четким. У телефонов гораздо меньше памяти, чем у других устройств. Таким образом, изображения для ретины занимают кучу памяти на устройствах, у которых, как известно, лишней памяти немного… Подумайте ещё раз, действительно ли вам нужны изображения для ретина, или вы можете пойти на разумный компромисс?</p>\n<p>Изображения для ретины прекрасны, когда вам нужна красивая четкая графика, но нет никакого смысла в четкой графике, если на то, чтобы загрузить ее, уходит пять секунд. В большинстве случаев скорость должна стоять выше эстетики.</p>\n<p>Вы можете побыть умным и отдавать всем устройствам изображения в 1,5 раза больше (чтобы на всех устройствах были достаточно хорошими), но, по-моему, лучше всего будет использовать изображения для ретины только тогда, когда это нужно.</p>\n<p>Если ваша статистика использования браузеров позволяет, вместо растровых изображений вы можете использовать SVG или шрифт с иконками. На CSS Wizardry я использую SVG и это даёт мне следующие преимущества:</p>\n<ul>\n<li>Независимость от разрешения</li>\n<li>Можно минифицировать</li>\n<li>Можно сжимать в gzip</li>\n</ul>\n<p>Мой коллега <a href="http://twitter.com/sdmix">Мэтт Аллен</a> сделал шрифт с иконками, который можно использовать вместе со спрайтовым элементом, чтобы на странице были пригодные для ретина-дисплеев масштабируемые иконки.</p>\n<p>Ещё вы можеете попробовать сервисы вроде <a href="http://resrc.it/">ReSRC.it</a>, чтобы загружать изображения в зависимости от устройства и дополнительных условий.</p>\n<h3>JPG с прогрессивной загрузкой</h3>\n<p>Ещё один интересный аспект быстродействия — это его <em>восприятие</em>: дело не только в том, что говорят цифры, но и в том, есть ли <em>ощущение,</em> что сайт быстрый.</p>\n<p>Вам наверняка знакома прерывистая загрузка больших JPG-изображений: 100 пикселей картинки загрузилось, пауза, ещё 50, пауза, потом ещё 200, потом — <strong>бах! —</strong> вся картинка загрузилась.</p>\n<p>Это работа <em>обычного</em> (baseline) JPG, и она действительно выглядит крайне прерывистой. Если вы переключаетесь на JPG с прогрессивной загрузкой, всё происходит намного веселее: сперва появляется вся картинка, но сильно размытая, затем изображение постепенно фокусируется. Звучит хуже, чем предыдущем варианте, но на самом деле <em>ощущается</em>, что загрузка идет быстрее: пользователь сразу что-то видит, а качество постепенно улучшается. Эти изображения, как правило, чуть тяжелее своих стандартных версий, но в целом будет казаться, что изображение загружается <em>намного</em> быстрее.</p>\n<p>Для того, чтобы создать JPG с прогрессивной загрузкой, нужно всего лишь включить соответствующий флажок в диалоге «Save for Web» в Photoshop — и дело сделано!</p>\n<h3>Дальнейшее чтение</h3>\n<p><a href="http://calendar.perfplanet.com/2012/progressive-jpegs-a-new-best-practice/">Progressive JPEGs: a New Best Practice.</a></p>\n<h3>Не используйте изображения вообще</h3>\n<p>Лучше, чем спрайты, SVG и игнорирование ретины — полный отказ от изображений. Если вы можете сверстать дизайн картинкой со стопроцентной точностью, а повторить его чистым CSS с точностью 75% — лучше выберите CSS-решение (конечно, если для этого не потребуются лишние сто строчек кода!). Если у вас нет картинок — нет и HTTP-запросов, а также это упрощает поддержку сайта. Если вы можете не использовать изображения — не используйте.</p>\n<h2>Итоги</h2>\n<p>Итак, вот целая куча решений (а на самом деле всего ничего), что вы можете применить, чтобы заставить браузер загружать клиентский код быстрее. Понимая, как работают браузеры, мы можем построить свой код так, чтобы наш фронтенд работал <em>ещё</em> быстрее.</p>\n<p>Если у вас есть предложения, что можно было бы сюда добавить — или вы не согласны, или хотите поправить меня — пожалуйста, присоединяйтесь к обсуждению; весь этот мир быстродействия для меня относительно нов, поэтому я очень хочу продолжать учиться у других и узнавать что-то новое.</p>\n<p>Я очень надеюсь, что эта простыня хоть немного помогла вам, и, прочитав её, вы получили знания о вещах, о которых вы, возможно, никогда бы и не задумались. Ещё я надеюсь, что эта статья помогла вам хотя бы <em>вполовину</em> так заинтересоваться вопросами быстродействия, как ими заинтересовался я.</p>\n<p>Я особенно хотел бы поблагодарить <a href="http://twitter.com/makeusabrew">Ника Пэйна</a> и <a href="http://twitter.com/andydavies">Энди Дэвиса</a> за помощь в прояснении нескольких вещей, которые я описал в этой статье. Спасибо, парни!</p>\n<h2>Дальнейшее чтение</h2>\n<p>Если вам понравилась эта статья и вы хотите узнать ещё, я настоятельно рекомендую следующее:</p>\n<ul>\n<li>Книги Стива Саудерса: <a href="http://www.amazon.com/High-Performance-Web-Sites-Essential/dp/0596529309">High Performance Web Sites</a> и <a href="http://www.amazon.com/Even-Faster-Web-Sites-Performance/dp/0596522304">Even Faster Web Sites</a>.</li>\n<li><a href="http://www.phpied.com/">Сайт Стояна Стефанова</a>.</li>\n<li><a href="http://www.igvita.com/">Сайт Ильи Григорика</a>.</li>\n<li><a href="http://twitter.com/andydavies">Читать Энди Дэвиса</a>.</li>\n</ul>\n<p>Перевод оригинальной записи «<a href="http://csswizardry.com/2013/01/front-end-performance-for-web-designers-and-front-end-developers/">Front-end performance for web designers and front-end developers</a>» Гарри Робертса (Harry Roberts), опубликованной на сайте <a href="http://csswizardry.com">CSS Wizardry</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод <a href="http://www.facebook.com/vlad.andersen">Влада Андерсена</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a> и <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Быстродействие фронтенда для дизайнеров и разработчиков"},{depth:2,value:"Принципы"},{depth:3,value:"Стили наверху, скрипты внизу"},{depth:3,value:"Делайте меньше запросов"},{depth:3,value:"Максимальная параллелизация"},{depth:2,value:"HTTP-запросы и поиск DNS"},{depth:3,value:"Предзагрузка DNS"},{depth:3,value:"Дальнейшее чтение"},{depth:2,value:"Предзагрузка ресурсов"},{depth:3,value:"Дальнейшее чтение"},{depth:2,value:"CSS и быстродействие"},{depth:3,value:"Дальнейшее чтение"},{depth:2,value:"Минификация и gzip"},{depth:2,value:"Оптимизация изображений"},{depth:3,value:"Спрайты"},{depth:3,value:"Дальнейшее чтение"},{depth:2,value:"Изображения для ретины"},{depth:3,value:"JPG с прогрессивной загрузкой"},{depth:3,value:"Дальнейшее чтение"},{depth:3,value:"Не используйте изображения вообще"},{depth:2,value:"Итоги"},{depth:2,value:"Дальнейшее чтение"}],frontmatter:{title:"Быстродействие фронтенда для дизайнеров и разработчиков"}}},{node:{html:'<h1>Функции-декораторы, которые можно написать с нуля</h1>\n<p>Перевод «Here are a few function decorators you can write from scratch» Кристи Сальсезку.</p>\n<p><img src="https://cdn-images-1.medium.com/max/10392/1*Qw0e4LC2Fri7dFkBY0N1cA.jpeg" alt="Фото [Calum Lewis](https://unsplash.com/photos/rkT_TG5NKF8)."><em>Фото <a href="https://unsplash.com/photos/rkT_TG5NKF8">Calum Lewis</a>.</em></p>\n<blockquote>\n<h1>Декораторы — это функции высшего порядка, которые принимают в качестве аргумента одну функцию и возвращают другую. Возвращаемая функция является преобразованным вариантом функции-аргумента <a href="https://leanpub.com/javascript-allonge/read#decorators">*Javascript Allongé</a>*</h1>\n</blockquote>\n<p>Давайте самостоятельно напишем некоторые базовые дектораторы, представленные в таких библиотеках, как <a href="http://underscorejs.org/#functions">*underscore.js</a><em>, [</em>lodash.js](<a href="https://lodash.com/docs/4.17.5">https://lodash.com/docs/4.17.5</a>)<em>, [</em>ramda.js](<a href="http://ramdajs.com/docs/">http://ramdajs.com/docs/</a>)*.</p>\n<h2>once()</h2>\n<ul>\n<li>\n<p><a href="https://jsfiddle.net/cristi_salcescu/zpLeLp0v/">once(fn)</a> создает экземпляр функции, которая должна быть выполнена только один раз. Паттерн может быть использован, например, для инициализации, когда нужно быть уверенным в единичном запуске функциональности, даже если сама функция вызвана в нескольких местах.</p>\n<p>function once(fn){\nlet returnValue;\nlet canRun = true;\nreturn <strong>function runOnce(){\nif(canRun) {\nreturnValue = fn.apply(this, arguments);\ncanRun = false;\n}\nreturn returnValue;\n}</strong>\n}</p>\n<p>var processonce = once(process);\nprocessonce(); // process\nprocessonce(); //</p>\n</li>\n</ul>\n<p>Функция once() возвращает другую функцию — runOnce(), использующую <a href="https://medium.freecodecamp.org/why-you-should-give-the-closure-function-another-chance-31253e44cfa0">замыкание</a>. Обратите также внимание, как осуществлен вызов оригинальной функции, а именно через передачу this и arguments в метод apply: fn.apply(this, arguments).</p>\n<p>Если хотите узнать замыкания глубже, обратите внимание на статью «<a href="https://medium.com/p/31253e44cfa0">Why you should give the Closure function another chance</a>».</p>\n<h2>after()</h2>\n<ul>\n<li>\n<p><a href="https://jsfiddle.net/cristi_salcescu/4evuoxe6/">after(count, fn)</a> создает вариант функции, которая будет выполнена только после определенного количества вызовов. Функция полезна, например, если должна быть выполнена *только *по завершению асинхронных операций.</p>\n<p>function after(count, fn) {\nlet runCount = 0;\nreturn function runAfter() {\nrunCount = runCount + 1;\nif (runCount >= count) {\nreturn fn.apply(this, arguments);<br>\n}\n}\n}</p>\n<p>function logResult() { console.log("calls have finished"); }\n<strong>let logResultAfter2Calls = after(2, logResult);</strong></p>\n<p>setTimeout(function logFirstCall() {\nconsole.log("1st call has finished");\n<strong>logResultAfter2Calls();</strong>\n}, 3000);</p>\n<p>setTimeout(function logSecondCall() {\nconsole.log("2nd call has finished");\n**logResultAfter2Calls(); **\n}, 4000);</p>\n</li>\n</ul>\n<p>В примере выше при помощи after() я создаю функцию logResultAfter2Calls(). Она в свою очередь выполняет logResult() только после второго вызова.</p>\n<h2>throttle()</h2>\n<ul>\n<li>\n<p><a href="https://jsfiddle.net/cristi_salcescu/5tdv0eq6/">throttle(fn, wait)</a> создает вариант функции, которая при повторяющихся вызовах выполняется через указанный временной интервал (аргумент wait). Декоратор эффективен для обработки быстро повторяющихся событий.</p>\n<p>function throttle(fn, interval) {\nlet lastTime;\nreturn function throttled() {\nlet timeSinceLastExecution = Date.now() - lastTime;\nif(!lastTime || (timeSinceLastExecution >= interval)) {\nfn.apply(this, arguments);\nlastTime = Date.now();\n}\n};\n}</p>\n<p>let throttledProcess = throttle(process, 1000);\n$(window).mousemove(throttledProcess);</p>\n</li>\n</ul>\n<p>Здесь движение мыши генерирует множество событий mousemove, тогда как оригинальная функция process() вызывается лишь раз в секунду.</p>\n<h2>debounce()</h2>\n<ul>\n<li>\n<p><a href="https://jsfiddle.net/cristi_salcescu/424unsa7/">debounce(fn, wait)</a> создает вариант функции, которая выполняет <em>оригинальную *функцию спустя wait миллисекунд *после</em> предыдующего вызова *декорированной *функции. Паттерн также применяется в работе с повторяющимися событиями. Он полезен, если функциональность должна быть выполнена по завершению очереди событий.</p>\n<p>function debounce(fn, interval) {\nlet timer;\nreturn function debounced() {\nclearTimeout(timer);\nlet args = arguments;\nlet that = this;\ntimer = setTimeout(function callOriginalFn() {\nfn.apply(that, args);\n}, interval);\n};\n}</p>\n<p>let delayProcess = debounce(process, 400);\n$(window).resize(delayProcess);</p>\n</li>\n</ul>\n<p>Функция debounce() часто используется вместе с событиями scroll, resize, mousemove и keypress.</p>\n<h2>Частичное применение</h2>\n<p>Частичное применение преобразует функцию за счет изменения количества параметров. Это один из примеров движения от общего к частному.</p>\n<h2>partial()</h2>\n<p>На этот раз <a href="https://jsfiddle.net/cristi_salcescu/sbborekp/">создадим метод partial()</a> и сделаем его доступным для всех функций. В данном примере я использую синтаксис <em>ECMAScript 6</em>, а именно оператор rest. С его помощью набор аргументов функции преобразуется в массив ...leftArguments. Это нужно для конкатенации массивов, тогда как специальный объект arguments массивом не является.</p>\n<pre><code>Function.prototype.partial = function(...leftArguments){\n    let fn = this;\n    return function partialFn(...rightArguments){\n       let args = leftArguments.concat(rightArguments);\n       return fn.apply(this, args);\n    }\n}\n\nfunction log(level, message){\n    console.log(level  + " : " + message);\n}\n\n**let logInfo = log.partial("Info");\nlogInfo("here is a message");**\n</code></pre>\n<p>Обратите внимание, созданная таким образом logInfo() использует лишь один аргумент message.</p>\n<h2>Заключение</h2>\n<p>Применение указанных функций помогает понять принципы работы декораторов и саму идею инкапсуляции логики внутри них.</p>\n<p>Декораторы — мощный инструмент расширения функциональности без изменения исходной функции. Это отличный путь переиспользовать код, и он соответствует функциональной парадигме программирования.</p>\n<h3><strong>Больше о ФП в JavaScript</strong></h3>\n<ul>\n<li>\n<p><a href="https://medium.com/p/33dcb910303a">How point-free composition will make you a better functional programmer</a></p>\n</li>\n<li>\n<p><a href="https://medium.com/p/13ba11825319">You will finally understand what Closure is</a></p>\n</li>\n<li>\n<p><a href="https://medium.com/p/73258b6a8d15">Class vs Factory function: exploring the way forward</a> (см. <a href="https://medium.com/@kanby/%D0%BA%D0%BB%D0%B0%D1%81%D1%81-vs-%D1%84%D0%B0%D0%B1%D1%80%D0%B8%D0%BA%D0%B0-%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D0%BE%D0%B2-%D0%BF%D0%B5%D1%80%D1%81%D0%BF%D0%B5%D0%BA%D1%82%D0%B8%D0%B2%D1%8B-9b4c696823c8">перевод</a>).</p>\n</li>\n<li>\n<p><a href="https://medium.com/p/94fb8cc69f9d">Make your code easier to read with Functional Programming</a></p>\n</li>\n</ul>\n<p><em>Перевод <a href="https://medium.com/@vlad_poe">Влада Почепцова</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</em></p>',headings:[{depth:1,value:"Функции-декораторы, которые можно написать с нуля"},{depth:1,value:"Декораторы — это функции высшего порядка, которые принимают в качестве аргумента одну функцию и возвращают другую. Возвращаемая функция является преобразованным вариантом функции-аргумента "},{depth:2,value:"once()"},{depth:2,value:"after()"},{depth:2,value:"throttle()"},{depth:2,value:"debounce()"},{depth:2,value:"Частичное применение"},{depth:2,value:"partial()"},{depth:2,value:"Заключение"},{depth:3,value:"Больше о ФП в JavaScript"}],frontmatter:{title:"Функции-декораторы, которые можно написать с нуля"}}},{node:{html:'<h1>Здравствуй, Blink</h1>\n<p><a href="http://www.brucelawson.co.uk">Брюс Лоусон</a> 6 апреля 2013</p>\n<p>Как же хорошо открыто говорить о <a href="http://blog.chromium.org/2013/04/blink-rendering-engine-for-chromium.html">Blink</a> — новом движке для браузеров Opera <em>(примечание: это мой работодатель, но запись личная)</em> и Сhrome. Я знаю множество людей, которые переживали, что с уходом Opera Presto веб потеряет былое многообразие, но форк WebKit в Blink восстановит баланс сил. Opera будет развивать Blink.</p>\n<p><em>(Добавлено позднее)</em> Мой начальник, Ларш Эрик Больстед (Lars Erik Bolstad) официально заявил от лица Opera:</p>\n<blockquote>\n<p>Мы намерены привнести опыт разработки движка Opera в Blink, начиная с внедрения новых веб-стандартов и заканчивая улучшением существующего кода.</p>\n</blockquote>\n<p>Мое личное мнение (не представляющее интересы моего работодателя, жены, детей и хомячка): Blink выглядит очень многообещающе. Его архитектура позволяет увеличить скорость работы — то, чему Opera и Google давно уделяют пристальное внимание. Вебу как платформе проще конкурировать с нативными приложениями, когда браузеры быстрые и совместимые. А ещё я надеюсь, что небольшим компаниям и даже отдельным людям станет проще участвовать в разработке движка благодаря более прозрачной системе курирования кода: «Наша цель в том, чтобы любой мог внести свой вклад в разработку, состоит он в какой-либо организации, или нет».</p>\n<p>А ещё хорошо, что <a href="http://www.chromium.org/blink#vendor-prefixes">в Blink больше не будет префиксов</a> (только <a href="http://www.chromium.org/blink/developer-faq#TOC-Will-we-see-a--chrome--vendor-prefix-now-">унаследованные от WebKit</a>, да и они будут удалены или отброшены, как только это станет возможным). Префиксы — это как сольная карьера Моррисси (солист британской группы The Smiths — <em>прим. редактора):</em> отличная идея на бумаге и полный кошмар в реальности.</p>\n<p>Так что, здравствуй, Blink. При том, что движок Presto проживёт до 2020 года, а Firefox с Samsung анонсировал работу над двумя молодыми проектами в основе нового движка <a href="https://blog.mozilla.org/blog/2013/04/03/mozilla-and-samsung-collaborate-on-next-generation-web-browser-engine/">Servo</a> — разнообразие веба никогда не выглядело так здорово, а совместимость — такой, эм-м, совместимой.</p>\n<p>Перевод оригинальной записи «<a href="http://www.brucelawson.co.uk/2013/hello-blink/">Hello Blink</a>» Брюса Лоусона (Bruce Lawson). Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="http://twitter.com/silentimp">Антон Немцев</a> (SilentImp).</p>',headings:[{depth:1,value:"Здравствуй, Blink"}],frontmatter:{title:"Здравствуй, Blink"}}},{node:{html:'<h1>Элементы i, b, em и strong</h1>\n<p><a href="http://oli.jp/">Оли Стадхольм</a> 13 июля 2010</p>\n<p>В то время как многие элементы из HTML4 вошли в HTML5 без существенных изменений, некоторые исторически презентационные элементы обрели новую семантику.</p>\n<p>Давайте посмотрим на <code>&#x3C;i></code> и <code>&#x3C;b></code> и сравним их с семантическими преемниками — <code>&#x3C;em></code> и <code>&#x3C;strong></code>. Что получается:</p>\n<ul>\n<li><code>&#x3C;i></code> — был просто курсивом, а сейчас обозначает <em>дополнительное выделение</em> (например, для иностранных слов, технических терминов) или просто курсивное начертание текста (<a href="http://dev.w3.org/html5/markup/i.html">W3C:Markup</a>, <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-i-element">WHATWG</a>);</li>\n<li><code>&#x3C;b></code> — просто выделял текст полужирным, а сейчас обозначает <em>стилистическое усиление</em> текста (например, для ключевых слов) или просто полужирное начертание (<a href="http://dev.w3.org/html5/markup/b.html">W3C:Markup</a>, <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-b-element">WHATWG</a>);</li>\n<li><code>&#x3C;em></code> — обозначал выделение, а сейчас обозначает <em>экспрессивно-эмоциональное выделение</em>, т.е. слово или фразу, произнесённые иначе (<a href="http://dev.w3.org/html5/markup/em.html">W3C:Markup</a>, <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-em-element">WHATWG</a>);</li>\n<li><code>&#x3C;strong></code> — обозначал большее усиление экспрессии, а сейчас обозначает <em>высокую важность</em>, что, в общем, почти то же самое (ещё большее усиление или важность сейчас определяется уровнем вложенности) (<a href="http://dev.w3.org/html5/markup/strong.html">W3C:Markup</a>, <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-strong-element">WHATWG</a>).</li>\n</ul>\n<h2>Новая семантика презентационных элементов</h2>\n<p>В HTML4 элементы <code>&#x3C;i></code> и <code>&#x3C;b></code> были <a href="http://www.w3.org/TR/html401/present/graphics.html#h-15.2.1">презентационными</a>. Они по-прежнему могут использоваться там, где этого требует типографская традиция. Тем не менее, теперь они обрели семантику и могут быть оформлены при помощи CSS, что делает их <em>не только</em> презентационными — элемент <code>&#x3C;b></code>, например, совсем не обязательно должен быть полужирным. Поэтому <strong>для обозначения смысловой нагрузки элементов рекомендуется использовать классы</strong>; это позволит легко изменить внешний вид элементов в дальнейшем.</p>\n<h3>Элемент <code>&#x3C;i></code></h3>\n<blockquote>\n<p>Элемент <code>&#x3C;i></code> представляет собой фрагмент текста с дополнительным выделением или же экспрессивно-эмоциональным сдвигом относительно обычного текста (то, что обычно обозначается курсивом в типографике)</p>\n<p><a href="http://dev.w3.org/html5/markup/i.html">Спецификация W3C</a></p>\n</blockquote>\n<p>Обычно обозначаются курсивом: иностранные слова (с атрибутом <code>lang</code>), таксономия и технические термины, названия кораблей, пометки в сценариях, нотное письмо, вставки размышлений или рукописного текста. Пример:</p>\n<pre><code>&#x3C;blockquote cite="http://www.trussel.com/bladerun.htm">\n    &#x3C;ol class="script semantic-list">\n        &#x3C;li>\n            &#x3C;b class="character">Декард&#x3C;/b>:\n            Шевелись! Прочь с дороги!\n        &#x3C;/li>\n        &#x3C;li class="action">\n            Декард стреляет и убивает Зору\n            в драматической замедленной сцене.\n        &#x3C;/li>\n        &#x3C;li>\n            &#x3C;b class="character">Декард&#x3C;/b>:\n            &#x3C;i class="voiceover">В отчёте это будет выглядеть\n            рутинным устранением двойника, что, однако, совсем\n            не поможет мне чувствовать себя лучше после выстрела\n            женщине в спину. И снова. Жалость где-то внутри.\n            К ней, к Рэйчел.&#x3C;/i>\n        &#x3C;/li>\n        &#x3C;li>\n            &#x3C;b class="character">Декард&#x3C;/b>:\n            Декард. Б-263-54.\n        &#x3C;/li>\n    &#x3C;/ol>\n&#x3C;/blockquote>\n</code></pre>\n<p>В указанном примере элемент <code>&#x3C;i class="voiceover"></code> используется для обозначения внутреннего диалога персонажа, произнесённого в другом тоне.</p>\n<pre><code>&#x3C;blockquote>\n    &#x3C;p>\n        Прошлой ночью мы ели\n        &#x3C;i lang="ja-cyrl" title="угорь">унаги&#x3C;/i>,\n        &#x3C;i lang="ja-cyrl" title="копчёный лосось">абури-заке&#x3C;/i> и\n        &#x3C;i lang="ja-cyrl" title="осьминог">тако&#x3C;/i>, а все\n        &#x3C;i lang="ja-cyrl" title="тунец">торо&#x3C;/i> суши кончились.\n    &#x3C;/p>\n&#x3C;/blockquote>\n</code></pre>\n<p>Элемент <code>&#x3C;i lang="ja-cyrl"></code> используется в этом примере для обозначения «идиоматических фраз из другого языка» (японских слов). Полный список значений атрибута <code>lang</code> вы можете найти в <a href="http://www.iana.org/assignments/character-sets">официальном списке IANA</a>; или же вы можете воспользоваться замечательным <a href="http://rishida.net/utils/subtags/">сервисом по поиску языковых обозначений от Ричарда Исиды из W3C</a>.</p>\n<pre><code>&#x3C;blockquote cite="http://en.wikipedia.org/wiki/Nanotyrannus">\n    &#x3C;p>\n        &#x3C;i class="taxonomy">Nanotyrannus&#x3C;/i> («карликовый тиран»)\n        принадлежит к семейству тиранозавров, и, возможно, является\n        юной особью &#x3C;i class="taxonomy">тиранозавра&#x3C;/i>.\n        Его череп, ныне находящийся в КМЕ (Кливлендском Музее\n        естествознания), был найден Чарльзом Гилмором в 1942-м\n        году, описан им же в 1946-м. Гилмор обозначил его\n        как представителя нового вида \n        &#x3C;i class="taxonomy">Gorgosaurus lancensis&#x3C;/i>.\n    &#x3C;/p>\n&#x3C;/blockquote>\n</code></pre>\n<p>Элементом <code>&#x3C;i class="taxonomy"></code> в данном примере обозначается таксономическая единица.</p>\n<p>Используйте <code>&#x3C;i></code> только в том случае, когда не удаётся найти ничего более подходящего: <code>&#x3C;em></code> для фрагментов с экспрессивно-эмоциональным выделением, <code>&#x3C;strong></code> для смысловой важности, <code>&#x3C;cite></code> для имён при цитировании или в библиографии, <code>&#x3C;dfn></code> для определений и <code>&#x3C;var></code> для математических переменных. Однако для придания курсивного начертания таким блокам текста, как ремарки, стихотворные строфы и цитаты, используйте CSS . Не забывайте использовать атрибут <code>class</code> для задания функциональной роли элемента — это позволит с легкостью переопределить стили в дальнейшем. К примеру, вы можете сделать выборку по атрибуту <code>lang</code> в CSS, используя селектор вида <code>[lang="ja-cyrl"]</code>.</p>\n<h3>Элемент <code>&#x3C;b></code></h3>\n<blockquote>\n<p>Элемент <code>&#x3C;b></code> представляет собой фрагмент текста, который выделяется из окружающего его контекста, но не передает никакого особого значения. Это, например, ключевые слова в выдержках, названия продуктов в обзорах или другие части текста, которые по правилам типографики обычно выделяются полужирным начертанием.</p>\n<p><a href="http://dev.w3.org/html5/markup/b.html">Спецификация W3C</a></p>\n</blockquote>\n<p>Для текста, обрамленного в <code>&#x3C;b></code> (который должен просто отличаться от основного), нет необходимости использовать <code>font-style:bold</code> — можно обратиться к другим стилям: скруглённому фону, большему размеру шрифта, другому цвет или особому форматированию типа капители. К примеру, в <a href="#deckard">приведенном выше отрывке</a>, <code>&#x3C;b class="character"></code> используется для указания на того, кто говорит или рассказывает.</p>\n<p>Текст, который набран полужирным по типографским соглашениям (а совсем <strong>не</strong> потому, что он более важен) может использоваться для выделения имён в голливудских сплетнях или в качестве вводного текста для сложных или оформленных в классическом стиле текстов:</p>\n<pre><code>&#x3C;p class="sub-versal">\n    &#x3C;b class="opening-phrase">Было около часу&#x3C;/b>,\n    когда Шерлок Холмс вернулся с прогулки.\n    Он держал в руках листок голубой бумаги,\n    исчирканный заметками и рисунками.\n&#x3C;/p>\n</code></pre>\n<p>В данном примере буквица соединяется с текстом при помощи <code>&#x3C;b class="opening-phrase"></code>. Для ее создания используется псевдо-элемент <code>:first-letter</code>. В этом случае открывающая фраза выделена полужирным только из оформительских соображений, но если бы этот фрагмент был семантически важен, то <code>&#x3C;strong></code> или другой подобный элемент подошли бы лучше.</p>\n<pre><code>&#x3C;p class="versal">\n    Просматривая свои записи о приключениях Шерлока Холмса, —\n    а таких записей, которые я вел на протяжении последних восьми\n    лет, у меня больше семидесяти, — я нахожу в них немало\n    трагических случаев, есть среди них и забавные, есть\n    и причудливые, но нет ни одного заурядного.\n&#x3C;/p>\n</code></pre>\n<p>Несмотря на то, что мы можем использовать <code>&#x3C;b></code> для традиционного типографического оформления вроде выделения капителью первого слова, фразы или предложения, псевдо-элемент <code>:first-line</code> больше подходит для таких целей. Например, все первые абзацы <a href="http://html5doctor.com/">HTML5Doctor.com</a> оформлены при помощи элегантного <code>:first-of-type</code>.</p>\n<p>Используйте <code>&#x3C;b></code> только тогда, когда нет ничего более подходящего, например: <code>&#x3C;strong></code> для текста с семантической важностью, <code>&#x3C;em></code> для акцентированного текста (с «логическим ударением»), элементы от <code>&#x3C;h1></code> до <code>&#x3C;h6></code> для заголовков и <code>&#x3C;mark></code> для подсвеченного или выделенного текста. Для <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#tag-clouds">облака тегов</a> используйте список с соответствующими классами. Для воссоздания традиционных типографских приёмов используйте <a href="http://www.w3.org/TR/CSS2/selector.html#pseudo-element-selectors">CSS-селекторы псевдо-элементов</a>: <code>:first-line</code> и <code>:first-letter</code>, каждый для своего случая. И ещё раз, не забывайте использовать атрибут <code>class</code> для обозначения того, зачем был использован каждый конкретный элемент  — это упростит повторное изменение элемента в дальнейшем.</p>\n<h2>…и для сравнения: элементы <code>&#x3C;em></code> и <code>&#x3C;strong></code></h2>\n<p>Хотя <code>&#x3C;em></code> и <code>&#x3C;strong></code> остались практически такими же, как были, в их значении всё же произошли некоторые изменения. В HTML4 они означали «акцент» и «сильный акцент». Сейчас их значение несколько видоизменилось: <code>&#x3C;em></code> обозначает <em>экспрессивно-эмоциональное выделение</em> (т.е. нечто, произнесённое иначе), а <code>&#x3C;strong></code> обозначает важность.</p>\n<h3>Элемент <code>&#x3C;em></code></h3>\n<blockquote>\n<p>Элемент <code>&#x3C;em></code> обозначает часть текста с эмфатическим ударением.</p>\n<p><a href="http://dev.w3.org/html5/markup/em.html">Спецификация W3C</a></p>\n</blockquote>\n<p>Термин «ударение» имеет отношение к лингвистике. Ударение изменяет эмоциональную окраску слова, что, в свою очередь, может изменить смысл предложения. Например, фраза «Быстро позови <em>доктора!</em>» акцентирует важность того, чтобы позвали именно доктора — возможно, в ответ на чей-то вопрос «Мне позвать сестру?» Напротив, фраза «<em>Быстро</em> позови доктора!» акцентирует важность немедленного вызова.</p>\n<p>Используйте <code>&#x3C;strong></code> в других случаях для обозначения важности и <code>&#x3C;i></code> для курсивного начертания без эмоциональной окраски. Уровень вложенности обозначает силу акцентирования.</p>\n<h3>Элемент <code>&#x3C;strong></code></h3>\n<blockquote>\n<p>Элемент <code>&#x3C;strong></code> обозначает часть текста с высокой важностью.</p>\n<p><a href="http://dev.w3.org/html5/markup/strong.html">Спецификация W3C</a></p>\n</blockquote>\n<p>Добавить, в общем-то, и нечего — элемент <code>&#x3C;strong></code> хорошо всем нам знаком. Используйте вложенные элементы <code>&#x3C;strong></code> для обозначения относительной важности, <code>&#x3C;em></code> для эмафтического ударения и <code>&#x3C;b></code> для стилистически выделенных или просто полужирных фрагментов текста без подчёкнутой важности.</p>\n<h2>Резюмируя...</h2>\n<p>И последнее: все эти элементы (как и большинство HTML5-элементов) намеренно были сделаны <em>медиа-независимыми</em>, т.е. их семантика теперь не привязана к отображению в визуальных браузерах.</p>\n<p>Что же мы имеем? Две презентационных дворняжки из HTML4 превратились в полноценные, насыщенные смыслом HTML5-элементы, готовые снова вернуться в ваш код. Сможете ли <em>вы</em> устоять перед их блестящими, полными семантики щенячьими глазками? Дайте нам знать!</p>\n<p>Перевод оригинальной статьи «<a href="http://html5doctor.com/i-b-em-strong-element/">The i, b, em, &#x26; strong elements</a>» <a href="http://oli.jp/">Оли Стадхольма</a> (Oli Studholme), опубликованной на сайте <a href="http://html5doctor.com/">HTML5Doctor.com</a>.</p>',headings:[{depth:1,value:"Элементы i, b, em и strong"},{depth:2,value:"Новая семантика презентационных элементов"},{depth:3,value:"Элемент "},{depth:3,value:"Элемент "},{depth:2,value:"…и для сравнения: элементы "},{depth:3,value:"Элемент "},{depth:3,value:"Элемент "},{depth:2,value:"Резюмируя..."}],frontmatter:{title:"Элементы i, b, em и strong"}}},{node:{html:'<h1>Я знаю jQuery. И что?</h1>\n<p><a href="http://remysharp.com">Реми Шарп</a> 16 декабря 2013</p>\n<p>На конференции jQuery UK 2013 я делал доклад под названием «<a href="https://speakerdeck.com/rem/i-know-jquery-now-what">Я знаю jQuery. И что?</a>». Обычно я готовлюсь, устраивая взрыв из стикеров на своём столе, но в этот раз я сперва написал пост, а потом уже сделал слайды. Итак, вот мой практически не отредактированный и немного путаный рассказ о том, как я работал с jQuery, и как я смотрю на использование встроенных браузерных технологий.</p>\n<h2>7 лет назад…</h2>\n<p>17 июня 2006 года я опубликовал мой самый первый настоящий <a href="http://web.archive.org/web/20061018170852/http://leftlogic.com/info/articles/auto-selecting_navigation">пост в блоге</a>: я взял обычный JavaScript и упростил его с помощью jQuery. В итоге 14 строчек JavaScript превратились в три строчки на jQuery (версии pre-1.0).</p>\n<p>Самый важный эффект от jQuery был в том, что вместо муторной навигации по DOM вы писали простой CSS-селектор, после чего к нужному элементу добавлялся класс. К тому же, исходный JavaScript-код был довольно нестабильным, а разметка у вас получалась одна и та же в обоих случаях.</p>\n<p>Я показал jQuery команде разработчиков, с которыми я сотрудничал в середине 2000-х, и даже дизайнеры увидели все плюсы этого подхода, поскольку CSS-селекторы были им уже знакомы (именно так и возникла идея «jQuery для дизайнеров»).</p>\n<h3>Внезапно навигация по DOM стала простой</h3>\n<p>В те времена навигация по DOM была очень сложной. Можно было поспорить — если у вас получалось что-то сделать в Firefox 1.5, то в IE6 это не работало.</p>\n<p>Простота, с которой можно было изучить jQuery, стала для меня плюсом. Вся навигация по DOM делалась с помощью CSS-селекторов (реализовано это было какой-то безумной магией из «черного ящика», которую придумал Джон Резиг) — главное, что это экономило мои ограниченные мыслительные ресурсы, и, когда я получал нужные мне элементы DOM, я уже мог делать с ними все что угодно (показывать, скрывать, анимировать и т.п.)</p>\n<h3>Понимание Ajax</h3>\n<p>jQuery также поставила на доступный мне уровень абстракцию Ajax. Этот термин был придуман буквально только что, в 2005 году, и документации по технологии было мало, понять её было непросто (не забывайте про ограниченные вычислительные способности моего мозга).</p>\n<p>Итак, мне нужно было работать с объектом <code>XMLHttpRequest</code>. Когда я увидел его впервые, мне стоило усилий понять, как работает событие <code>onreadystatechange</code> и пара <code>this.status</code> и <code>this.readyState</code>. jQuery, как и ряд других библиотек, разобралась с тем ужасом, который представляли собой XHR-запросы в IE через ActiveX…</p>\n<pre><code>function getXmlHttpRequest() {\n    var xhr;\n        if (window.XMLHttpRequest) {\n            xhr = new XMLHttpRequest();\n    } else {\n            try {\n                xhr = new ActiveXObject("Msxml2.XMLHTTP");\n        } catch (e) {\n            try {\n                xhr = new ActiveXObject("Microsoft.XMLHTTP");\n        } catch (e) {\n                xhr = false;\n        }\n    }\n}\n    return xhr;\n}\n// Код, который Джон написал в jQuery,\n// куда более элегантен!\n</code></pre>\n<p>Когда я увидел, что в jQuery можно использовать функцию <code>ajax</code>, для того чтобы выцепить HTML по какому-то адресу (именно это мы обычно и хотели делать с помощью Ajax), вся технология внезапно стала для меня понятной.</p>\n<p>jQuery сразу и надолго стала моим обычным инструментом. Это был мой «швейцарский нож», если позаимствовать <a href="http://events.jquery.org/2013/uk/schedule.html#adam">название доклада Адама</a>!</p>\n<h2>Назад в будущее: сегодня</h2>\n<p>Давайте промотаем ленту вперед и вернемся в сегодняшний день. Что случилось за эти годы?</p>\n<p>Для начала: моя позиция по умолчанию — это не «всегда подключай jQuery». Я лучше знаю JavaScript, и как в нём все работает. У меня появились собственные критерии, когда нужно подключать jQuery, а когда нет. Но если я не подключаю jQuery, что тогда?</p>\n<p>За эти семь лет произошло довольно многое. Вероятно, одним из самых важных шагов вперед стало появление в браузерах <code>querySelectorAll</code>.</p>\n<p>Возможность передать встроенной функции внутри браузера CSS-селектор, чтобы сам браузер работал над навигацией по DOM — это огромная (правда!) часть jQuery. Базовая поддержка была в Chrome с самого начала, в IE8 и Firefox 3.5 появилась в середине 2009 года.</p>\n<p>Эндрю Ланни (из PhoneGap и Adobe) написал невероятно простую функцию:</p>\n<pre><code>var $ = document.querySelectorAll.bind(document);\nElement.prototype.on = Element.prototype.addEventListener;\n\n$(\'#somelink\')[0].on(\'touchstart\', handleTouch);\n</code></pre>\n<p>Это просто и прекрасно.</p>\n<p>Я взял его идею, немного развил ее и использовал в ряде довольно специфических проектов, добавив поддержку для чейнинга, циклов и упростив синтаксис. В сжатом виде все занимает меньше 200 байт. Смысл этого в том, что сейчас у нас есть встроенная в браузеры поддержка для ряда функций, и я стараюсь принимать во внимание аудиторию своего проекта, перед тем как по умолчанию подключать jQuery.</p>\n<h2>В каких случаях я всегда использую jQuery</h2>\n<p>Прежде чем я расскажу о том, как я могу обходиться без jQuery, быть «нагим» — давайте я расскажу о случаях, когда я точно включаю jQuery в проект. Есть несколько довольно специфических причин, которые заставляют меня либо начинать прямо с jQuery, либо переключаться на нее с какого-то специально написанного решения.</p>\n<p>Перед этим я должен оговориться относительно случая, когда я абсолютно точно не использую jQuery: если я пытаюсь воспроизвести баг в браузере, я никогда не использую библиотеку. Если вы пытаетесь найти баг, чтобы можно было сообщить о проблеме, необходимо, чтобы в примере было как можно меньше кода (конечно, кроме тех случаев, когда вы отправляете сообщение об ошибке внутри jQuery!).</p>\n<h3>1. Когда проект должен работать в устаревших браузерах</h3>\n<p>BBC достаточно четко озвучили, <a href="http://responsivenews.co.uk/post/18948466399/cutting-the-mustard">что именно они называют современным браузером</a>, и по некотором размышлении это и есть тот признак, по которому я решаю, включать jQuery по умолчанию или нет.</p>\n<p>Если я знаю, что я должен работать с несовременными браузерами, и они составляют часть ядра аудитории, то я начну с jQuery внутри своего кода.</p>\n<p>Что значит «современный»? По большому счету, ответ простой: поддерживает ли браузер <code>querySelectorAll</code>? BBC применяет следующий тест на соответствие требованию современности:</p>\n<pre><code>if (querySelector in document &#x26;&#x26;\n    localStorage in window &#x26;&#x26;\n    addEventListener in window) {\n    // Загружаем JavaScript-приложение\n}\n</code></pre>\n<p>Я знаю наизусть, что IE8 не поддерживает <code>addEventListener</code> (<a href="https://gist.github.com/eirikbacker/2864711">хотя и существует полифил</a>), так что, если поддержка этого браузера важна для проекта, я понимаю, что не хочу начинать проект с хаков для IE8.</p>\n<p>Не то чтобы я хочу сказать, что те проекты, которые я начинаю без jQuery, не будут поддерживать IE8. Скорее — что нужно начинать с малого и делать разработку простой с самого начала. Если я начну проект с охапки хаков — проблем не оберёшься.</p>\n<p>И еще я считаю это тем случаем, «когда сложность перевешивает простоту».</p>\n<h3>2. Когда я делаю что-то дешево и сердито</h3>\n<p>Если я создаю какой-то концепт, тестирую идею или просто что-то набрасываю и отправляю в <a href="http://jsbin.com">JS Bin</a>, обычно я просто добавляю jQuery по умолчанию. Так мне не приходится лишний раз думать.</p>\n<h2>Без jQuery!</h2>\n<p>Наверное, вы думаете: «Так, Реми использует jQuery, а если нет, то просто переписывает все фичи сам?»</p>\n<p>Я совершенно не хочу изобретать велосипед. Если я обнаруживаю, что, разрабатывая без jQuery, я в итоге сам переписываю с нуля ее функциональность, тогда, ясное дело, я просто трачу свое время впустую.</p>\n<p>Нет, всё не так. Просто есть довольно много сценариев, в которых я буду писать код своего приложения без библиотеки, опираясь на встроенные в браузер технологии. Если какая-то часть этих технологий не поддерживается в том или ином браузере, я могу прибегнуть к <a href="http://remysharp.com/2010/10/08/what-is-a-polyfill/">полифилам</a> — но только после тщательного рассмотрения и понимания, что это имеет смысл.</p>\n<p>Итак, как я живу без jQuery, и насколько полной можно считать поддержку нужных технологий в браузерах?</p>\n<h2>document.ready</h2>\n<p>Даже когда я использую jQuery, если у меня (или моей компании) есть контроль над проектом, я очень редко использую <code>document.ready</code> (или его короткую версию: <code>$(function)</code>).</p>\n<p>Дело в том, что весь JavaScript я размещаю под всем DOM, перед тегом <code>&#x3C;/body></code>. Так я всегда уверен, что в этот момент весь DOM уже будет обработан браузером.</p>\n<p>Надеюсь, что вы это и так знаете, но JavaScript блокирует рендеринг страницы. Если вы разместите JavaScript над содержимым, и ваш сервер подвиснет — вы получите пустую страницу. Я много раз уже использовал этот пример, но повторюсь, что раньше (довольно давно) виджет Twitter просто вставлялся в HTML вашей страницы. Их сайт частенько падал, и мой блог (с этим виджетом) зависал на пустой странице — так что выглядело все так, будто упал мой сайт.</p>\n<h2>.attr(\'value\') и .attr(\'href\')</h2>\n<p>Мне всегда становится грустно, когда я вижу, как jQuery используется для того, чтобы получить значение элемента <code>&#x3C;input></code>:</p>\n<pre><code>$(\'input\').on(\'change\', function () {\n    var value = $(this).attr(\'value\');\n    alert(\'The new value is\' + value);\n});\n</code></pre>\n<p>Почему? Потому что всегда можно получить значение элемента с помощью <code>this.value</code>. Что важнее — нужно думать о том, как вы используете JavaScript-библиотеку. Не применяйте jQuery без необходимости.</p>\n<p>Дело здесь не в jQuery. Это просто нормальная практика. Нужно, чтобы в коде просто было написано:</p>\n<pre><code>$(\'input\').on(\'change\', function () {\n    alert(\'The new value is\' + this.value);\n});\n</code></pre>\n<p>Еще люди довольно часто используют jQuery для того, чтобы получить <code>href</code> ссылки: <code>$(this).attr(\'href\')</code>, но можно вполне легко получить путь и из DOM: <code>this.href</code>. Обратите, правда, внимание, что <code>this.href</code> несколько отличается: это абсолютный путь, поскольку мы здесь говорим про DOM API, а не сам элемент. Если вы хотите получить значение атрибута (как это работает в случае jQuery), вы можете использовать <code>this.getAttribute(\'href\')</code>.</p>\n<p>Ещё есть сценарий, в котором вы устанавливаете класс для элемента, и здесь вам тоже не нужна jQuery, если вы просто добавите класс. Сколько раз я видел:</p>\n<pre><code>    &#x3C;script src="http://code.jquery.com/jquery.min.js">&#x3C;/script>\n&#x3C;/head>\n&#x3C;body>\n    &#x3C;script>\n        $(\'body\').addClass(\'hasJS\');\n    &#x3C;/script>\n</code></pre>\n<p>Но зачем, когда можно так?</p>\n<pre><code>&#x3C;/head>\n&#x3C;body>\n    &#x3C;script>\n        document.body.className = \'hasJS\';\n    &#x3C;/script>\n</code></pre>\n<p>Пожалуй, самое главное различие между этими двумя примерами состоит в том, что мы не подключаем jQuery только затем, чтобы установить класс для <code>&#x3C;body></code>, определяющий доступность JavaScript.</p>\n<p>Если у <code>&#x3C;body></code> уже может быть какой-нибудь класс, то просто припишите новый к строке (jQuery тоже нужно обращаться к свойству <code>className</code>): <code>document.body.className += \' hasJS\'</code>.</p>\n<p>Здесь мы начинаем натыкаться на проблемы с именами классов и отслеживанием того, у каких элементов какой класс есть, а какого нет. Но в браузерах есть и такая функциональность.</p>\n<h2>classList — добавляем, удаляем, переключаем</h2>\n<p>Свойство <code>classList</code> из спецификации HTML5 поддерживается всеми последними версиями браузеров (кроме IE9 — но в этом случае я могу использовать полифил).</p>\n<p>Вместо:</p>\n<pre><code>$(\'body\').addClass(\'hasJS\');\n// или\ndocument.body.className += \' hasJS\';\n</code></pre>\n<p>Можно написать:</p>\n<pre><code>document.body.classList.add(\'hasJS\');\n</code></pre>\n<p>Красиво, не правда ли? А удалять?</p>\n<pre><code>$(\'body\').removeClass(\'hasJS\');\n// или какое-нибудь безумное регулярное выражение\n</code></pre>\n<p>Или можно сделать так:</p>\n<pre><code>document.body.classList.remove(\'hasJS\');\n</code></pre>\n<p>Но больше впечатляет встроенная поддержка переключения классов:</p>\n<pre><code>document.body.classList.toggle(\'hasJS\');\n// и\ndocument.body.classList.contains(\'hasJS\');\n</code></pre>\n<p>Для добавления нескольких классов нужно добавить их как аргументы через запятую:</p>\n<pre><code>document.body.classList.add(\'hasJS\', \'ready\');\n</code></pre>\n<p>Есть, конечно, некоторые проблемы, вроде этой, с пустой строкой:</p>\n<pre><code>document.body.classList.contains(\'\');\n// SyntaxError: DOM Exception 12\n</code></pre>\n<p>Ужасно! Но, с другой стороны, я знаю проблемные места и обхожу их стороной. В принципе, мы выросли, работая с браузерами именно по таким принципам.</p>\n<h2>Хранение данных</h2>\n<p>Хранение произвольных данных в элементах появилось в jQuery в версии 1.2.3, а хранение объектов — в 1.4, то есть уже довольно давно.</p>\n<p>В HTML5 есть встроенное хранение данных внутри элементов, но между jQuery и встроенной поддержкой есть фундаментальная разница: <code>dataset</code> в HTML5 не поддерживает хранение объектов.</p>\n<p>Но если вы храните строки или JSON, тогда встроенная поддержка работает идеально:</p>\n<pre><code>element.dataset.user = JSON.stringify(user);\nelement.dataset.score = score;\n</code></pre>\n<p>К сожалению, встроенной поддержки нет в IE10 (конечно, можно добавить полифил, и все прекрасно заработает — но это нужно принимать во внимание при использовании <code>dataset</code>).</p>\n<h2>Ajax</h2>\n<p>Как я уже говорил, jQuery помогла мне понять Ajax в полной мере. Сейчас Ajax — это довольно просто. Конечно, у меня нет всяких дополнительных опций, но, по большей части я просто выполняю XHR GET или POST-запросы с JSON.</p>\n<pre><code>function request(type, url, opts, callback) {\n    var xhr = new XMLHttpRequest(),\n        fd;\n\n    if (typeof opts === \'function\') {\n        callback = opts;\n        opts = null;\n}\n\n    xhr.open(type, url);\n\n    if (type === \'POST\' &#x26;&#x26; opts) {\n        fd = new FormData();\n\n        for (var key in opts) {\n            fd.append(key, JSON.stringify(opts[key]));\n    }\n}\n\n    xhr.onload = function () {\n        callback(JSON.parse(xhr.response));\n};\n\n    xhr.send(opts ? fd : null);\n}\n\nvar get = request.bind(this, \'GET\');\nvar post = request.bind(this, \'POST\');\n</code></pre>\n<p>Коротко и просто. XHR — это совсем не сложно, а сейчас есть и хорошая документация. Понимание того, как XHR на самом деле работает и что с его помощью можно сделать, дает нам больше возможностей.</p>\n<p>Как насчет событий прогресса? Событий, привязанных к прогрессу загрузки? Что насчёт отправки <code>ArrayBuffer</code>? А если нужно разбираться с <a href="http://ru.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a> и заголовком <code>xml-requested-with</code>?</p>\n<p>Для этого вам понадобится прямой доступ к объекту XHR (я знаю, что это можно получить и из jQuery), и вам нужно знать, как устроен XHR и что с ним можно делать, потому что такие вещи, как, например, загрузку файлов через перетаскивание сейчас безумно просто реализовать с помощью встроенной функциональности.</p>\n<h2>Наконец-то формы!</h2>\n<p>jQuery-плагин для валидации форм был стабильным плагином с первых дней jQuery, и честно сделал работу с формами намного проще.</p>\n<p>Но вне зависимости от валидации на стороне клиента все равно нужно проводить валидацию на стороне сервера — это необходимо в любом случае, какую бы валидацию вы ни делали.</p>\n<p>Но что, если можно было бы выбросить кучу строк JavaScript и плагинов и валидировать эл. адрес как-то так:</p>\n<pre><code>&#x3C;input type="email">\n</code></pre>\n<p>Хотите сделать его обязательным полем?</p>\n<pre><code>&#x3C;input type="email" required>\n</code></pre>\n<p>Хотите разрешать пользователю вводить только определенные символы?</p>\n<pre><code>&#x3C;input pattern="a-z0-9">\n</code></pre>\n<p>Неплохо. Здесь даже есть поддержка вспомогательных технологий — например, клавиатура на мобильных устройствах адаптируется и будет выводить символы для эл. адреса.</p>\n<p>Так как все эти типы полей при отсутствиии в браузере поддержки просто становятся текстовыми полями, и раз уж вам все равно нужно делать валидацию на сервере, я бы на вашем месте выкинул всю JavaScript-валидацию и заменил ее на встроенную в браузеры валидацию HTML5-форм.</p>\n<h2>jQuery-анимации против CSS-анимаций и JavaScript-анимаций</h2>\n<p>На самом деле это никакое не соревнование. CSS выигрывает. Анимации, для которых используется CSS, вычисляются на видеокарте. В анимациях на JavaScript добавляется еще один уровень расчетов — просто потому, что там есть JavaScript.</p>\n<p>Даже в том случае, когда я пишу код сам, я выберу <code>requestAnimationFrame</code> вместо использования анимаций, основанных на <code>setInterval</code>.</p>\n<p>Джейк Арчибальд подготовил отличные слайды, которые показывают проблему — <code>setInterval</code> не сделает анимацию плавной, и достаточно скоро начнет пропускать кадры:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.09803921568627%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHUkfK6Rhn/xAAaEAADAAMBAAAAAAAAAAAAAAAAAQIDERIT/9oACAEBAAEFAlE685HjkTR0Okf/xAAWEQADAAAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8BrKz/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREC/9oACAECAQE/AZkiP//EABgQAAIDAAAAAAAAAAAAAAAAAAAyASAx/9oACAEBAAY/AsFFin//xAAZEAADAAMAAAAAAAAAAAAAAAAAARExYcH/2gAIAQEAAT8hciTXKOBKmNR55P/aAAwDAQACAAMAAAAQWA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/EBP/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAlf//EABwQAAICAgMAAAAAAAAAAAAAAAABEVEhcTFBYf/aAAgBAQABPxBNl4Xg4BXSigwxzC6EVM40abpn/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="set timeout" title="" src="/static/set-timeout-339a76bf8fed5e9f1d0e4e1217f2340f-3ecdc.jpg" srcset="/static/set-timeout-339a76bf8fed5e9f1d0e4e1217f2340f-5cba7.jpg 163w,\n/static/set-timeout-339a76bf8fed5e9f1d0e4e1217f2340f-cf009.jpg 325w,\n/static/set-timeout-339a76bf8fed5e9f1d0e4e1217f2340f-3ecdc.jpg 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.09803921568627%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAdRofKqRhf/EABoQAAMAAwEAAAAAAAAAAAAAAAABAgMREhP/2gAIAQEAAQUCUTrzkeORNHQ6R//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPwGsrP/EABcRAAMBAAAAAAAAAAAAAAAAAAABEQL/2gAIAQIBAT8BmSI//8QAGBAAAgMAAAAAAAAAAAAAAAAAADEBIDL/2gAIAQEABj8CRkUU/8QAGRABAQEAAwAAAAAAAAAAAAAAAQAxEWHB/9oACAEBAAE/IWY3WuR5SQZM52//2gAMAwEAAgADAAAAEJwP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAFh/9oACAEDAQE/EKdH/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERYfD/2gAIAQIBAT8QWoKD/8QAGhABAAIDAQAAAAAAAAAAAAAAAQARIVFxYf/aAAgBAQABPxAaKtHkYZxq0jAc0QJd45ON6Z//2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="request animation frame" title="" src="/static/request-animation-frame-baddf361410b4c8155d5b69297ad2890-3ecdc.jpg" srcset="/static/request-animation-frame-baddf361410b4c8155d5b69297ad2890-5cba7.jpg 163w,\n/static/request-animation-frame-baddf361410b4c8155d5b69297ad2890-cf009.jpg 325w,\n/static/request-animation-frame-baddf361410b4c8155d5b69297ad2890-3ecdc.jpg 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n</figure>\n<p>Кроме того, CSS-анимации проходят через тот же таймер, что и <code>requestAnimationFrame</code> — его мы и хотим использовать.</p>\n<p>Так что, если ваш браузер это позволяет, используйте CSS-анимации. Конечно, это посложнее, чем <code>$foo.animate(\'slow\', { x: \'+=10px\' })</code>, но зато анимация будет чище и плавнее. Стоит знать, что трогать DOM — дорогая операция. Если вы анимируете положение элемента по оси абсцисс, обновляя атрибут <code>el.style.left</code>, вы постоянно читаете и пишете в DOM.</p>\n<p>А вот если вы просто сделаете <code>foo.classList.add(\'animate\')</code>, анимация CSS-класса выполнит плавный переход положения левой точки элемента. И если вы точно знаете, что это только значение слева, можно использовать аппаратное ускорение, выполнив <code>translateX</code> с <code>translateZ(0)</code>.</p>\n<p>Ну а как же, слышу я ваш крик, как же вызов функции после окончания анимации? Это тоже можно. Хотя синтаксис немножко противный:</p>\n<pre><code>el.addEventListener("webkitTransitionEnd", transitionEnded);\nel.addEventListener("transitionend", transitionEnded);\n</code></pre>\n<p>Обратите внимание, что <code>e</code> в <code>end</code> строчная…</p>\n<p>Пара милых людей в Твиттере показали мне <a href="https://github.com/benbarnett/jQuery-Animate-Enhanced">своего рода полифил для jQuery</a>, который дополняет функцию <code>.animate</code> в том случае, если в браузере доступны CSS-анимации.</p>\n<p>Еще есть отдельный плагин <a href="http://ricostacruz.com/jquery.transit/">Transit</a>, который дает вам возможность писать CSS-анимации на JavaScript. Приятный момент для меня — поддержка чейнинга. Но так он работает только с CSS-анимациями, для этого требуется IE10 или выше.</p>\n<p>Отсюда у меня возникает вопрос: почему этот плагин в обязательном порядке требует jQuery?</p>\n<h2>В сторону: jQuery-плагины — просто так</h2>\n<p>Я:</p>\n<blockquote>\n<p>Не знаю почему, но мне очень хочется больно ударить людей, которые пишут такие jQuery-плагины, для которых на самом деле jQuery совершенно не нужна. /требуется-контроль-эмоций</p>\n</blockquote>\n<p>Ответ:</p>\n<blockquote>\n<p>@rem У меня то же самое. Я думаю, где-то есть группа, в которой с этим помогают, — и, полагаю, довольно большая.</p>\n</blockquote>\n<p>Я недавно работал над проектом и узнал о <a href="http://fittextjs.com">fitText.js</a>. Я решил включить его в свой код, но потом заметил, что для него <strong>требуется</strong> jQuery.</p>\n<p>Хм-м. Зачем?</p>\n<p>Этот проект использует следующие методы jQuery:</p>\n<ol>\n<li><code>.extend</code></li>\n<li><code>.each</code></li>\n<li><code>.width</code></li>\n<li><code>.css</code></li>\n<li><code>.on</code> (над производительностью никто особенно не задумывался)</li>\n</ol>\n<p>Собственно, вот код проекта:</p>\n<pre><code>$.fn.fitText = function( kompressor, options ) {\n\n    // Настраиваем\n    var compressor = kompressor || 1,\n        settings = $.extend({\n            \'minFontSize\' : Number.NEGATIVE_INFINITY,\n            \'maxFontSize\' : Number.POSITIVE_INFINITY\n    }, options);\n\n    return this.each(function(){\n\n        // Сохраняем объект\n        var $this = $(this);\n\n        // Функция Resizer() изменяет размеры объекта\n        // на основе его ширины, поделённой на compressor * 10\n        var resizer = function () {\n            $this.css(\'font-size\', Math.max(\n                Math.min($this.width() / (compressor*10),\n                parseFloat(settings.maxFontSize)\n            ),\n            parseFloat(settings.minFontSize)));\n    };\n\n        // Вызываем для установки\n        resizer();\n\n        // Вызываем при ресайзе. Opera кеширует вызовы по умолчанию\n        $(window).on(\'resize orientationchange\', resizer);\n});\n};\n</code></pre>\n<p><code>.extend</code> используется на объекте, в котором всего две опции, так что я бы переписал его так:</p>\n<pre><code>if (options === undefined) options = {};\nif (options.minFontSize === undefined) options.minFontSize = Number.NEGATIVE_INFINITY;\nif (options.maxFontSize === undefined) options.maxFontSize = Number.POSITIVE_INFINITY;\n</code></pre>\n<p><code>return this.each</code> используется для того, чтобы итерироваться по элементам. Предположим, что мы хотим, чтобы этот код работал без jQuery: тогда наша функция <code>fitText</code> получит список элементов (так как чейнинга мы делать не будем):</p>\n<pre><code>var length = nodes.length,\n    i = 0;\n\n// Хотелось бы использовать [].forEach.call, но нет поддержки в IE8\nfor (; i &#x3C; length; i++) {\n    (function (node) {\n        // там, где использовался `this`, теперь `node`\n        // …\n    })(nodes[i]);\n}\n</code></pre>\n<p><code>$this.width()</code> получает ширину контейнера, чтобы изменять размер текста. Для этого нам нужно получить рассчитанные стили и взять из них значение ширины:</p>\n<pre><code>// Функция Resizer() изменяет размеры объекта\n// на основе его ширины, поделённой на compressor * 10\nvar resizer = function () {\n    var width = node.clientWidth;\n    // …\n};\n</code></pre>\n<p><code>$this.css</code> используется для установки значений, так что тут всего лишь нужно задать стили:</p>\n<pre><code>node.style.fontSize = Math.max(…);\n</code></pre>\n<p><code>$(window).on(\'resize\', resizer)</code> прикрепляет обработчик события (если вы хотите поддержку в IE8, то нужно еще включить <code>addEvent</code>):</p>\n<pre><code>window.addEventListener(\'resize\', resizer, false);\n</code></pre>\n<p>На самом деле, я бы пошел еще дальше и хранил бы функции ресайза в массиве, и во время операции изменения размера проходил бы по массиву, исполняя все эти функции.</p>\n<p>Конечно, тут нужно немножко больше работы, но при этом такие изменения довольно легко провести так, чтобы работа в качестве jQuery-плагина была бы для этого проекта дополнительной функциональностью, а не требованием.</p>\n<p>Моя тирада скоро закончится: еще меня убивает, когда я вижу полифил, которому требуется jQuery — но я признаю и контраргумент: чрезвычайная распространенность jQuery, наверное, может оправдать то, что столько проектов пишется с зависимостью от нее.</p>\n<h2>Заключение</h2>\n<p>Моей целью было показать вам, что, хотя jQuery безумно помогала мне все эти годы (особенно годы плохой совместимости между браузерами), и со встроенной функциональностью браузеров можно уйти довольно далеко в плане обычных сценариев, — когда я пишу JavaScript для того, чтобы «сделать что-нибудь» в DOM.</p>\n<p>Перестаньте думать в парадигме «функция X не работает в браузере Y». Подходите с другой точки зрения. Какую задачу я решаю? Какой инструмент лучше всего подойдет? Для кого это делается? Я по-прежнему верю в методологию прогрессивного улучшения, но я не понимаю удовольствия лезть из кожи вон ради того, чтобы поддерживать воображаемую аудиторию пользователей (по той причине, что у нас нет данных, какие браузеры у наших пользователей).</p>\n<p>Google (по моим последним данным) поддерживает последние и предпоследние версии браузеров. Я тоже стараюсь начинать с поддержки этих версий.</p>\n<p>Я буду продолжать использовать jQuery так, как мне удобно, и я продолжу убеждать своих читателей и слушателей, что фронтенд-разработчики должны знать, что могут браузеры, с которыми они работают.</p>\n<p>Итак, на этом я заканчиваю и надеюсь, что этот текст был вам полезен.</p>\n<p>Возможно, некоторые из вас уже знали всё это (правда, в таком случае у меня возникает вопрос, зачем вы это читаете), однако я надеюсь, что хоть кому-то я показал, что за пределами jQuery есть еще целый мир, и вы можете начать осваивать его прямо сейчас в одном из своих проектов.</p>\n<p>Может быть, некоторые из вас только знакомятся с jQuery — я надеюсь, что вы станете разбираться и дальше в том, на что способны JavaScript и DOM.</p>\n<p>Однако большинству из вас я принёс снег зимой. Вы уже согласны со мной. Вы уже верите в стандарты, делаете все правильно, учитесь и образовываетесь. Но вы должны помочь людям, которые не получают этой информации.</p>\n<p>Вам нужно делиться своими ощущениям с другими людьми. Теперь вы — эксперты, и вы должны помочь окружающим достигнуть вашего уровня и превзойти его.</p>\n<p>На конференциях будут нужны новые докладчики и новые эксперты: это вы.</p>\n<h2>Материалы к статье</h2>\n<ul>\n<li><a href="https://speakerdeck.com/rem/i-know-jquery-now-what">Слайды презентации</a></li>\n<li><a href="http://vimeo.com/68009123">Видео доклада</a></li>\n<li><a href="http://vimeo.com/68910118#t=2380">Секция вопросов и ответов с конференции Mobilism</a></li>\n<li><a href="https://github.com/remy/min.js">Библиотека min.js</a></li>\n</ul>\n<p>Перевод оригинальной записи «<a href="http://remysharp.com/2013/04/19/i-know-jquery-now-what/">I know jQuery. Now what?</a>» Реми Шарпа (Remy Sharp), опубликованной на сайте <a href="http://remysharp.com">remy sharp’s b:log</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод <a href="http://www.facebook.com/vlad.andersen">Влада Андерсена</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a> и <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Я знаю jQuery. И что?"},{depth:2,value:"7 лет назад…"},{depth:3,value:"Внезапно навигация по DOM стала простой"},{depth:3,value:"Понимание Ajax"},{depth:2,value:"Назад в будущее: сегодня"},{depth:2,value:"В каких случаях я всегда использую jQuery"},{depth:3,value:"1. Когда проект должен работать в устаревших браузерах"},{depth:3,value:"2. Когда я делаю что-то дешево и сердито"},{depth:2,value:"Без jQuery!"},{depth:2,value:"document.ready"},{depth:2,value:".attr('value') и .attr('href')"},{depth:2,value:"classList — добавляем, удаляем, переключаем"},{depth:2,value:"Хранение данных"},{depth:2,value:"Ajax"},{depth:2,value:"Наконец-то формы!"},{depth:2,value:"jQuery-анимации против CSS-анимаций и JavaScript-анимаций"},{depth:2,value:"В сторону: jQuery-плагины — просто так"},{depth:2,value:"Заключение"},{depth:2,value:"Материалы к статье"}],frontmatter:{title:"Я знаю jQuery. И что?"}}},{node:{html:'<h1>Ключевые слова в линейных градиентах</h1>\n<p><a href="http://meyerweb.com/">Эрик Мейер</a> 24 июля 2012</p>\n<p>Использование линейных градиентов в CSS может приводить к самым разнообразным результатам, которые не назовёшь иначе как странными; иногда даже сам синтаксис кажется странным.</p>\n<p>Давайте я сразу замечу, что кое-что из того, о чём я здесь рассказываю, еще не поддерживается широко, и даже, по правде говоря, эта спецификация еще не зафиксирована раз и навсегда. Скорее всего, она такой и останется, но могут быть и какие-то изменения. Даже если этого не случится — эта статья не о новом <strong>«используйте прямо сейчас!»</strong> приёме. Как и многое из того, что я пишу, это скорее маленькая прогулка по одному из уголков CSS с целью посмотреть, есть ли здесь что-нибудь интересное.</p>\n<p>Хотя линейные градиенты кажутся очень сложными, в действительности они довольно просты. Вы определяете направление, по которому идет градиент, а затем — перечисляете столько контрольных точек цвета, сколько хотите. Таким образом, вы описываете изображение текстом, примерно как SVG. Это довольно важный пункт, его стоит помнить: линейный (и радиальный) градиент — это картинка, точно такая же, как любой GIF и PNG. Это означает, помимо всего прочего, что можно совместно использовать растровые изображения и градиенты в фоне элемента, используя синтаксис множественных фоновых изображений.</p>\n<p>Но вернёмся к градиентам. Вот совсем простое градиентное изображение:</p>\n<pre><code>linear-gradient(45deg, red, blue)\n</code></pre>\n<p>Значение <code>45deg</code> описывает линию градиента, то есть ту линию, которая определяет направление градиента. Линия градиента всегда проходит через центр фоновой области элемента, и в каком именно направлении она пройдет, определяете вы, автор CSS. В этом примере линия грандиента направлена на угол в 45% от горизонтальной оси элемента. Значения <code>red</code> и <code>blue</code> — контрольные точки цвета. Здесь в цветах не определены положения контрольных точек, поэтому эти значения принимаются равными 0% и 100% соответственно, то есть вы получаете градиент, который переходит от красного к синему и идёт по указанному направлению.</p>\n<p>Можно создать контрольные точки таким образом, чтобы переход между ними был резким:</p>\n<pre><code>linear-gradient(45deg, green 50%, lightblue 50%)\n</code></pre>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAs0lEQVQY02NgaGCAI6ZGJoYaBqt5vptuvV1/8+W6W8+Xnb8z6+DZDbdfrbn+dO2NZ2iIAVkzEDEC9Vcz2M4LXHvzGVBz19rt03Yf33j3NVGawfYzA+13nBXctWTzghNXN97DrhO7ZoZGBsYmJoZEButWz413Xq+78Xz19SdEa65nYMhiYCpnBrLt5gevv/Vyw82XxDm7kYGhloGhkoGhiYGpgRnIsJkXsOr6I6DSNTfQ9QMAzaa23vnbDlMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="pic 1" title="" src="/static/pic-1-099579f422a68cf0c14b23d0ec868a43-fa387.png" srcset="/static/pic-1-099579f422a68cf0c14b23d0ec868a43-844a8.png 163w,\n/static/pic-1-099579f422a68cf0c14b23d0ec868a43-fe46c.png 325w,\n/static/pic-1-099579f422a68cf0c14b23d0ec868a43-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n    <figcaption>&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 1.</figcaption>\n</figure>\n<p>Так вы получите результат, показанный на рисунке 1, к которому я добавил (в Photoshop) стрелку, которая показывает направление линии градиента и центральную точку фоновой области. Каждая «полоска», составляющая градиент, перпендикулярна линии градиента — поэтому граница между двумя цветами в точке 50% перпендикулярна по отношению к линии градиента. Этот закон перпендикулярности работает всегда.</p>\n<p>Определять направление в градусах — это замечательно (и, чтобы соответствовать синтаксису анимаций, математическое определение градусов будет заменено на углы по компасу, но об этом в другой раз), но можно ещё использовать и ключевые слова, описывающие направления. Причем двух разных типов.</p>\n<p><em><strong>Обратите внимание,</strong> что задания направления градиента с помощью ключевых слов <strong>без</strong> ключевого слова <code>to</code>, описанное дальше, справедливо только для старой версии спецификации и применяется только для градиентов с префиксами. Прим. редактора.</em></p>\n<p>Первый вариант использования — это просто объявить направление, перемешав и подставив слова из набора <code>top</code>, <code>bottom</code>, <code>right</code> и <code>left</code>. Диковатенько здесь то, что в этом случае вы определяете не то направление, куда двигается градиент, а откуда он выходит; то есть вы должны определить положение его начальной, а не конечной точки. Соответственно, если вы хотите, чтобы градиент шёл из нижнего левого угла в верхний правый, надо писать <code>bottom left</code>:</p>\n<pre><code>linear-gradient(bottom left, green 50%, lightblue 50%)\n</code></pre>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqklEQVQY02NgaGBAQ0yNzAxVDCGr8nfe+7by6sMNt1+tu/Vi7fWna288Q0MMWDQ3MDFUM6hNNV53+8Wme28Wnb6+/OK9dTefE6WZsZERSPJU8tUvWzp914mWZRsWHL+y/vbLNRiWY2huZGAoYmDMYWTIYIidUrbh2qu1t55h1YndZqCHmeqYGWoZrBf6bbv7afW1x1h14tDcCHZ5HQNPq8D8i5c33HqFSzMAtBe2CedqIT4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="pic 2" title="" src="/static/pic-2-529d0c9ea195a26bad92995ae9cd5da5-fa387.png" srcset="/static/pic-2-529d0c9ea195a26bad92995ae9cd5da5-844a8.png 163w,\n/static/pic-2-529d0c9ea195a26bad92995ae9cd5da5-fe46c.png 325w,\n/static/pic-2-529d0c9ea195a26bad92995ae9cd5da5-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n    <figcaption>&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 2.</figcaption>\n</figure>\n<p>Но <code>bottom left</code> — не то же самое, что <code>45deg</code> (это справедливо только в том случае, если фоновая область элемента — правильный квадрат) Если эта область неквадратна, то линия градиента идет из одного угла в другой, а разделительные полоски — перпендикулярно ей, как на рисунке 2. И снова для ясности я добавил стрелку, показывающую градиентную линию, и центральную точку в Photoshop.</p>\n<p>Естественно, это означает, что если фоновая область элемента изменит свои размеры по ширине или высоте, угол линии градиента тоже изменится. Если элемент станет шире по вертикали или уже по горизонтали, то линия повернется против часовой стрелки; уже по вертикали и шире по горизонтали — по часовой. Вполне возможно, именно такой вариант вам и нужен. Во всяком случае, он явно отличается от задания значения угла в градусах, при котором градиент не будет поворачиваться никуда, как бы ни менялся размер фона элемента.</p>\n<p><em><strong>Обратите внимание,</strong> что способ задания направления градиента с ключевым словом <code>to</code>, описанный дальше, по стабильной версии спецификации является единственным возможным способом, и должен применяться только для градиентов без префикса. Прим. редактора.</em></p>\n<p>Другой способ использовать ключевые слова выглядит похоже, но результат у него совершенно другой. Вы используете те же самые определения <code>top/bottom/left/right</code>, но перед ними пишете ключевое слово <code>to</code>, вот так:</p>\n<pre><code>linear-gradient(to top right, green 50%, lightblue 50%)\n</code></pre>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 29.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABEElEQVQY02PwW55ef2DF0iu3t9/9vOv+982336298Wz1tcfrbr1YdPL68ov31t18ARTBihgYqhkY6hgEOyVs5gdkbeudeuYYUHTr7Y9bH35qW7l55qHTa289W3Xt8ZobT7FoZmpkZmgA6WeoAhnE2syuOdUsfF1pw44VrUvW7Lj/ZcvtDxtuvlp9/cmq649WX0cxhQGks4GBsYERaAqQZKgHu6WWga2QRaFIxW1pTNmeuXMvXNx658POe1+33H4P1AM0BYiApkA1IyOmBiamFmaGPAaGCgaGGkaGGgbedkGT2a7Jm1smnNy/5vrTHfe+bLkDdM5LLJqhqBrJORBPVYHMVZig5bM8te7A8kWXrwMAY863bohk5LgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="pic 3" title="" src="/static/pic-3-9f063e8eba807946bcc23223a35eb128-fa387.png" srcset="/static/pic-3-9f063e8eba807946bcc23223a35eb128-844a8.png 163w,\n/static/pic-3-9f063e8eba807946bcc23223a35eb128-fe46c.png 325w,\n/static/pic-3-9f063e8eba807946bcc23223a35eb128-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n    <figcaption>&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 3.</figcaption>\n</figure>\n<p>В этом случае ясно, что вы определяете конечную точку линии градиента, а не начальную — в конце концов, вы же пишете <code>to top right</code>. Однако, в таком случае вы не направляете градиент в правый верхний угол фоновой области элемента. Вы определяете общее направление — вперед и направо. Результат предыдущего определения виден на рисунке 3: снова стрелка с линией градиента добавлена в Photoshop.</p>\n<p>Обратите внимание на линию резкого разделения между контрольными точками. Она идет от левого верхнего угла в правый нижний (ни тот, ни другой — не <code>top right</code>). Так происходит потому, что, написав ключевое слово <code>to</code> в начале определения, мы включили то, что называется «магическими углами». Когда «магические углы» включены, то как бы фоновая область элемента ни изменяла свой размер, эта разделительная линия всегда будет идти из левого верхнего в правый нижний угол. Собственно, вот это и есть магические углы. Таким образом, линия градиента направлена не в правый верхний угол (только если фоновая область элемента — правильный квадрат), а в правый верхний квадрант фоновой области. По-видимому, термин «магические квадранты» посчитали менее удачным, чем «магические углы».</p>\n<p>Если размер фоновой области изменится, эффект будет тем же самым, что в прошлый раз; уменьшим высоту или увеличим ширину фоновой области — линия градиента повернется по часовой стрелке; сделаем обратные изменения размера — линия пойдет в обратном направлении. Единственная разница — в начальном состоянии.</p>\n<p>Итак: если вы хотите использовать ключевые слова, которые заставляют градиент быть всегда направленным в угол (как на рис. 2), но хотите указать направление, а не исходную точку — то этого сделать не получится. Точно так же нельзя указать и исходный квадрант, в котором начинается градиент. Чтобы получилась линия градиента, которая всегда идет из угла в угол, нужно объявить начальную точку линии градиента (рис. 2). Если вы хотите получить эффект «магических углов», когда линия контрольной точки цвета на 50% всегда идет из угла в угол, нужно объявить квадрант направления (рис. 3).</p>\n<p>Теперь что касается собственно поддержки: на момент написания статьи <em>(26 апреля 2012, прим. редактора)</em> только Firefox и Opera поддерживают «магические углы». Все остальные браузеры — IE10 в случае Internet Explorer — поддерживают математические углы и ключевые слова без «магических углов» (то есть Opera и Firefox поддерживают оба типа). Никто ещё не переключился с математических углов на углы по компасу (я совершенно специально использовал значение <code>45deg</code>, поскольку в обеих системах оно описывает одно и то же направление).</p>\n<p><em><strong>Обратите внимание,</strong> что на момент публикации перевода (27 июля 2012) спецификацию в полной мере (включая направление поворота и ключевое слово <code>to</code>) поддерживают без префиксов: тестовая версия Firefox 16 Aurora и последняя тестовая версия IE10 в составе Windows 8 Release Preview. Прим. редактора.</em></p>\n<p>Таково состояние дел с линейными градиентами прямо сейчас. Мне очень интересно узнать, что вы думаете о различных форматах ключевых слов и их принципах работы — у меня самого были вначале некие проблемы с их пониманием, и то, что у двух форматов синтаксиса совершенно разные результаты, по-моему, делает всё это довольно-таки запутанным. А вы что скажете?</p>\n<p>Перевод оригинальной записи «<a href="http://meyerweb.com/eric/thoughts/2012/04/26/lineargradient-keywords/">Linear Gradient Keywords</a>» Эрика Мейера (Eric Meyer). Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="http://www.facebook.com/vlad.andersen">Влад Андерсен</a>.</p>',headings:[{depth:1,value:"Ключевые слова в линейных градиентах"}],frontmatter:{title:"Ключевые слова в линейных градиентах"}}},{node:{html:'<h1>Манифест? А? Что? Зачем?</h1>\n<p>Перевод поясняющей заметки к спецификации Web App Manifest.</p>\n<p><a href="https://github.com/w3c/manifest/graphs/contributors">Многие из нас</a>, кто работает над вебом, активно стараются уменьшить разрыв между нативными и веб-приложениями.</p>\n<p>Но что это за разрыв? Всего несколько лет назад этот разрыв был, в большей степени, технологическим. Если вы хотели получить доступ к <em>GPS</em> устройства, вам приходилось писать нативное приложение. Сейчас ситуация несколько улучшилась: теперь мы можем получать доступ к датчикам устройства, вроде <em>GPS</em>, камеры и ориентации устройства — хотя впереди ещё долгий путь. Благодаря последним успехам веб-технологий, теперь у нас есть платформа, которая может конкурировать с нативными приложениями уже почти на равных.</p>\n<p>Сегодня разрыв между нативными и веб-приложениями не столько технологический — дело в удобстве пользователей: они предпочитают устанавливать приложения, которые уютно живут на домашнем экране (или даже на рабочем столе, если речь про десктопные браузеры).</p>\n<p>Кроме того, нативные приложения по умолчанию работают в офлайне и интегрируются с возможностями, которые предоставляет операционная система: например, возможность видеть установленные приложения в переключателе задач. Или возможность управлять настройками конфиденциальности приложения в том же самом месте, что и для приложений, установленных из магазина. Чтобы сделать что-нибудь подобное в браузере, мы всё ещё слоняемся по браузеру в поисках открытых вкладок и вводим длинные, скучные адреса.</p>\n<p>Нам нужен такой способ «установки» веб-приложений, чтобы они были неотличимы от любого другого приложения, установленного на устройстве пользователя. Но в тоже время, мы не хотим потерять мощные функции, составляющие основу веб-платформы: связанность ссылками, просмотр исходного кода и возможность хостить собственные проекты.</p>\n<p>Мы в веб-сообществе, как правило, называем это «<a href="https://en.wikipedia.org/wiki/Progressive_web_app">прогрессивными веб-приложениями</a>».</p>\n<h2>Что такое «установка»?</h2>\n<p>По сути, «установка» веб-приложения — это добавление «закладки» на домашний экран или в программу запуска приложений. Есть некоторые довольно очевидные вещи, которые вы, как разработчик, должны предоставить браузеру, чтобы тот мог считать сайт приложением: название, иконки, и т.д. Есть и более сложные функции, которые могут вам пригодиться, например, возможность указать предпочтительную ориентацию устройства и нужен ли вам полноэкранный режим.</p>\n<p>Спецификация манифеста предлагает вам стандартный способ сделать это с помощью файла <em>JSON</em>. Просто сошлитесь на файл манифеста в <em>HTML</em>-странице следующим образом:</p>\n<pre><code>&#x3C;link rel="manifest" href="/manifest.json">\n</code></pre>\n<p>Но что находится в этом загадочном файле манифеста? Хорошо, что вы спросили!</p>\n<h2>Очень простой манифест</h2>\n<p>Самый простой манифест может состоять всего-то из имени и одной или нескольких иконок.</p>\n<pre><code>{\n    "name": "Супергонщик 3000",\n    "icons": [{\n        "src": "icon/lowres.png",\n        "sizes": "64x64"\n    }]\n}\n</code></pre>\n<h2>Типичный манифест</h2>\n<p>Более типичный манифест может выглядеть следующим образом. Имена его ключей должны говорить сами за себя, но мы подробнее опишем их использование ниже.</p>\n<pre><code>{\n    "lang": "ru",\n    "dir": "ltr",\n    "name": "Супергонщик 3000",\n    "description": "Потрясающая футуристичная гоночная игра из будущего!",\n    "short_name": "Гонщик3K",\n    "icons": [{\n        "src": "icon/lowres.webp",\n        "sizes": "64x64",\n        "type": "image/webp"\n    },{\n        "src": "icon/lowres.png",\n        "sizes": "64x64"\n    }, {\n        "src": "icon/hd_hi",\n        "sizes": "128x128"\n    }],\n    "scope": "/racer/",\n    "start_url": "/racer/start.html",\n    "display": "fullscreen",\n    "orientation": "landscape",\n    "theme_color": "aliceblue",\n    "background_color": "red",\n    "screenshots": [{\n        "src": "screenshots/in-game-1x.jpg",\n        "sizes": "640x480",\n        "type": "image/jpeg"\n    },{\n        "src": "screenshots/in-game-2x.jpg",\n        "sizes": "1280x920",\n        "type": "image/jpeg"\n    }]\n}\n</code></pre>\n<h2>Название приложения</h2>\n<p>Приложению нужно настоящее название или набор названий (которые обычно совсем не совпадают с содержимым элемента <title> документа). Для этого используются ключи name и short_name.</p>\n<pre><code>{\n    "name": "Моё вообще улётное фотоприложение",\n    "short_name": "Фотки"\n}\n</code></pre>\n<p>Ключ short_name служит названием приложения при отображении в условиях ограниченного пространства (например, под значком на домашнем экране телефона). Ключ name может быть немного длиннее, отображая название приложения полностью. Также он служит дополнительной информацией для пользователя, который ищет ваше приложения на телефоне. Так что, набрав «улётный» или «фото», пользователь сможет найти приложение на своем устройстве.</p>\n<p>Если вы опустите название, то браузер может использовать <meta name="application-name"> или элемент <title>.</p>\n<p>Но будьте внимательны: некоторые браузеры могут требовать указать название — иначе, ваше приложение может лишиться статуса «прогрессивное веб-приложение».</p>\n<h2>Иконки</h2>\n<p>Вместо обычной иконки браузера, у вашего веб-приложения должна быть иконка, которая будет с ним ассоциироваться. Для этого в манифесте есть ключ icons. Он принимает список иконок, их размеров и форматов. Это делает процесс выбора иконки очень эффективным, поскольку у иконок появляется адаптивное решение, которое позволяет избежать ненужных нагрузок и помогает иконкам всегда выглядеть отлично на широком диапазоне устройств и разрешений экрана.</p>\n<pre><code>{\n    "icons": [{\n        "src": "icon/lowres",\n        "sizes": "64x64",\n        "type": "image/webp"\n    }, {\n        "src": "icon/hd_small",\n        "sizes": "64x64"\n    }, {\n        "src": "icon/hd_hi",\n        "sizes": "128x128",\n    }]\n}\n</code></pre>\n<p>Если вы не укажете иконки, браузер будет искать запасные варианты: <link rel="icon">, <em>favicon.ico</em> или, если не найдёт их, может даже использовать скриншот вашего сайта.</p>\n<h2>Назначение иконки</h2>\n<p>Нужно написать.</p>\n<p>Больше подробностей о назначении иконок можно найти в спецификации <a href="http://www.w3.org/TR/appmanifest/#purpose-member">*Web App Manifest</a>*.</p>\n<h2>Режимы отображения и ориентация</h2>\n<p>Приложения при запуске должны иметь возможность контролировать свое отображение на экране. Если это игра, то ей, вероятно, нужно быть в полноэкранном режиме и в горизонтальной ориентации. Для этого формат манифеста предоставляет вам два ключа.</p>\n<pre><code>{\n    "display": "fullscreen",\n    "orientation": "landscape"\n}\n</code></pre>\n<p>Доступные значения режимов отображения:</p>\n<ul>\n<li>\n<p><strong>Полноэкранный</strong> fullscreenзанимает весь экран.</p>\n</li>\n<li>\n<p><strong>Автономный</strong> standalone открывает приложение со строкой состояния.</p>\n</li>\n<li>\n<p><strong>Минимальный</strong> minimal-ui, когда приложение отображается в полноэкранном режиме, как на <em>iOS</em>, но некоторые действия могут вызывать панель навигации и появление кнопок назад и вперед.</p>\n</li>\n<li>\n<p><strong>Браузерный</strong> browser открывает приложение со стандартным набором кнопок и панелью инструментов.</p>\n</li>\n</ul>\n<p>Плюс такого указания ориентации в том, что она выступает в качестве «ориентации по умолчанию» для всего приложения. Поэтому, при переходе от одной странице к другой, ваше приложение остается в правильном положении. Вы можете изменить ориентацию по умолчанию с помощью <a href="https://w3c.github.io/screen-orientation/"><em>API</em> ориентации экрана</a>.</p>\n<p>Также вы можете применить другие стили для приложение в определённом режиме с помощью характеристики display-mode:</p>\n<pre><code>[@media](http://twitter.com/media) all and (display-mode: standalone) {\n    /* … */\n}\n</code></pre>\n<p>Используйте метод window.matchMedia(), чтобы проверить это медиавыражение в <em>JavaScript</em>.</p>\n<pre><code>if (window.matchMedia(\'(display-mode: standalone)\').matches) {\n    // интересные модификации интерфейса\n}\n</code></pre>\n<h2>Стартовый адрес</h2>\n<p>Иногда при запуске приложения вам нужно, чтобы пользователь всегда попадал на определенную страницу. Ключ start_url даёт возможность это указать.</p>\n<pre><code>{\n    "start_url": "/start_screen.html"\n}\n</code></pre>\n<h2>«Область» приложения</h2>\n<p>Нативные приложения имеют чёткие границы: как пользователь, вы уверены, что когда вы открываете нативное приложение, оно неожиданно не откроет другое незаметно для вас. Чаще всего, вам предельно ясно, что вы переключились с одного нативного приложения на другое. Обычно эти визуальные подсказки предоставляет операционная система (например, вызов диспетчера задач и выбор другого приложения или нажатие <em>Cmd Tab</em> или <em>Alt Tab</em> на компьютере).</p>\n<p>С вебом все иначе: это огромная гипертекстовая система, в которой веб-приложение может охватывать несколько доменов: вы можете с легкостью перейти с <em>gmail.com</em> на <em>docs.google.com</em> и пользователь даже этого не заметит. На практике, идея существования границ приложения является абсолютно чуждой для веба. Ведь, в действительности, веб-приложение — это просто серия <em>HTML</em>-документов (представьте «серию труб»… м-м, нет, забудьте!).</p>\n<p>В интернете мы знаем, что покидаем область одного приложения и переходим в другое, только благодаря веб-дизайнерам, которые были достаточно добры, чтобы сделать им уникальный различимый дизайн. В случаях, когда это не так, множество пользователей оказываются обмануты сайтами, маскирующимися под другие (старый добрый фишинг).</p>\n<p>Формат манифеста решает эту проблему позволяя указывать «область адреса» для вашего приложения. Эта область устанавливает границы для приложения. Это может быть либо домен, либо директория на этом домене.</p>\n<pre><code>{\n    "scope": "/myapp"\n}\n</code></pre>\n<h2>Интернационализация: lang и dir</h2>\n<p>Нужно написать.</p>\n<h2>Распространение приложения</h2>\n<p>Нужно написать с подробностями и скриншотами.</p>\n<h2>Цвет темы и цвет фона</h2>\n<p>Нужно написать.</p>\n<h2>Как мне определить, что пользователь «установил» приложение?</h2>\n<p>Спецификация позволяет вам определить, когда пользователь устанавливает приложение с помощью регистрации события appinstalled.</p>\n<pre><code>function handleInstalled(ev) {\n    const date = new Date(ev.timeStamp / 1000);\n    console.log(`Ура! Установлено в ${date.toTimeString()}`);\n}\n\n// Используем атрибут IDL обработчика события\nwindow.onappinstalled = handleInstalled;\n\n// Используем .addEventListener()\nwindow.addEventListener(\'appinstalled\', handleInstalled);\n</code></pre>\n<p>Однако по причинам конфиденциальности вы не можете непосредственно обнаружить, установлено ли ваше приложение — только узнать, что в вашем веб-приложении используется файл манифеста.</p>\n<h2>Что не так с тегами <meta>?</h2>\n<p>В ходе обсуждения спецификации шли оживленные дискуссии об использовании тегов <meta> в <em>HTML</em> вместо создания нового формата. В конце концов, реализация функции «добавить на домашний экран» в <em>Chrome</em> использует теги <meta>, да и с самых первых дней веба эти теги были родным домом для всякой нестандартной ерунды.</p>\n<p>Причины для использования отдельного файла:</p>\n<ul>\n<li>\n<p>это экономит кучу информации в шапке документа при загрузке каждой страницы установленного приложения или сайта;</p>\n</li>\n<li>\n<p>после загрузки, файл остаётся в <em>HTTP</em>-кэше браузера.</p>\n</li>\n</ul>\n<p>В спецификации есть <a href="https://www.w3.org/TR/appmanifest/#relationship-to-html-s-link-and-meta-elements">более подробная информация</a> о том, почему мы выбрали <em>JSON</em> вместо <em>HTML</em>-тегов.</p>\n<h2>Кто это внедряет?</h2>\n<p>Манифест и прогрессивные веб-приложения реализованы в <em>Chrome</em>, <em>Opera</em> и <em>Samsung Internet</em> для <em>Android</em>. <em>Firefox</em> также подаёт обнадёживающие сигналы, что будет поддерживать эти стандарты (реализации в <em>Gecko</em> уже больше двух лет, но она не используется ни в одном из продуктов).</p>\n<h2>Взаимодействие с поисковыми роботами</h2>\n<p>Как и другие веб-ресурсы, манифест веб-приложения должен быть доступен для любого веб-браузера или поискового робота.</p>\n<p>Если разработчик веб-приложения хочет известить поисковых роботов о запрете на сканирование файла, он <strong>может</strong> сделать это включив манифест веб-приложения в файл <em>robots.txt</em>. Это описано подробнее в протоколе <a href="http://www.robotstxt.org/">*robots.txt</a><em>. Разработчик веб-приложения также может использовать *HTTP</em>-заголовок <em>X-Robots-Tag</em>.</p>\n<h2>Авторы</h2>\n<p>Основная часть этого пояснения первоначально появилась в статье «<a href="http://html5doctor.com/web-manifest-specification/">*The W3C App Manifest specification</a><em>» на [</em>HTML5 Doctor](<a href="http://html5doctor.com/">http://html5doctor.com/</a>)*, и была написана <a href="https://github.com/marcoscaceres">Маркусом Касересом</a> и <a href="http://www.brucelawson.co.uk/">Брюсом Лоусоном</a>. Данный материал публикуется на основе лицензии <a href="http://creativecommons.org/licenses/by-nc/2.0/uk/">для некоммерческое использования</a>. Вы можете спокойно изменять, повторно использовать, модифицировать и расширять это пояснение. Некоторые авторы сохраняют свои авторские права на отдельные статьи.</p>\n<p><em>Перевод <a href="https://github.com/w3c/manifest/blob/gh-pages/explainer.md">поясняющей заметки</a> к спецификации <a href="https://www.w3.org/TR/appmanifest/">Web App Manifest</a>. Перевод <a href="https://medium.com/@annakukhareva">Анны Кухаревой</a> и <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>, редактура Вадима Макеева.</em></p>',headings:[{depth:1,value:"Манифест? А? Что? Зачем?"},{depth:2,value:"Что такое «установка»?"},{depth:2,value:"Очень простой манифест"},{depth:2,value:"Типичный манифест"},{depth:2,value:"Название приложения"},{depth:2,value:"Иконки"},{depth:2,value:"Назначение иконки"},{depth:2,value:"Режимы отображения и ориентация"},{depth:2,value:"Стартовый адрес"},{depth:2,value:"«Область» приложения"},{depth:2,value:"Интернационализация: lang и dir"},{depth:2,value:"Распространение приложения"},{depth:2,value:"Цвет темы и цвет фона"},{depth:2,value:"Как мне определить, что пользователь «установил» приложение?"},{depth:2,value:"Что не так с тегами "},{depth:2,value:"Кто это внедряет?"},{depth:2,value:"Взаимодействие с поисковыми роботами"},{depth:2,value:"Авторы"}],frontmatter:{title:"Манифест? А? Что? Зачем?"}}},{node:{html:'<h1>Преимущества многострочного CSS</h1>\n<p><a href="http://miripiruni.org/">Вячеслав Олиянчук</a> 13 декабря 2010</p>\n<p>Предлагаю вашему вниманию моё видение наиболее удобной методики форматирования CSS-кода. Я знаю, что вопрос этот достаточно холиварный, однако материалов, статей или другого рода информации по этому вопросу очень мало, поэтому я постараюсь аргументированно раскрыть причины существования как многострочного, так и однострочного форматирования, рассказать о том, к чему приводит применение каждого из них и проанализировать, помогает или мешает выбранный стиль в работе.</p>\n<p>Для начала определимся в терминологии. В CSS-коде у нас есть: блок правил — селектор и список правил для него; каждое правило состоит из свойства и его значения.</p>\n<p>Есть два варианта форматирования CSS-кода, иначе говоря, расположения правил: однострочный и многострочный, а также их комбинации. Однострочное форматирование, правила для селектора записаны в одну строку:</p>\n<pre><code>.example { position: absolute; top: 10px; display: block; width: 10px; height: 10px; background: url(icon.png) no-repeat }\n</code></pre>\n<p>Многострочное форматирование, каждая пара <code>свойство: значение</code> на новой строке:</p>\n<pre><code>.example {\n    position: absolute;\n    top: 10px;\n    display: block;\n    width: 10px;\n    height: 10px;\n    background: url(icon.png) no-repeat;\n}\n</code></pre>\n<p>Однострочный способ хорош в «наборах», «батареях» селекторов с одинаковыми свойствами. Например, там, где одно свойство принимает разные значения:</p>\n<pre><code>.tag-cloud .xs    { font-size: 0.5em }\n.tag-cloud .s     { font-size: 0.75em }\n.tag-cloud .m     { font-size: 1em }\n.tag-cloud .l     { font-size: 1.25em }\n.tag-cloud .xl    { font-size: 1.5em }\n.tag-cloud .xxl   { font-size: 1.75em }\n</code></pre>\n<p>Многострочный: перфекционистский, безопасный, наглядный. Давайте разберем по порядку все его преимущества.</p>\n<h2>Анализ</h2>\n<p>Работа с кодом — это операции написания, поиска и редактирования текста. Чтобы работать результативно, нужно преследовать две цели:</p>\n<h3>Цель №1: минимизация шанса на ошибку</h3>\n<p>Некоторые из ошибок бывают вполне безобидны (вроде дублирования одного и того же свойства или одновременного использования двух взаимоисключающих), а некоторые могут быть критичны. Например, ошибочное переопределение или опечатка, которая блокирует работу следующих свойств.</p>\n<h3>Цель №2: скорость восприятия свойств</h3>\n<p>Основной труд при написании CSS файла — это объявление значений определенных свойств. Значит, нужно иметь набор этих свойств наглядно и под рукой, в рамках одного селектора.</p>\n<p>Разве вам нужно следить за огромным количеством строк одновременно? Посмотрите, например, как думает программист, пишущий новую функцию. Его внимание сосредоточено только на этой функции. Так и у верстальщика — работа идет одновременно только с одним селектором. Столбик — самая наглядная запись. Он является потомком примитивного <em>списка в столбик</em>. Вы же не будете отрицать, что вытянутые в строку элементы списка теряют в доступности?</p>\n<p>Например, довольно трудно найти отдельный элемент этого списка:</p>\n<pre><code>Я полюбил { Машеньку: болтушку; Юшечку: тихоню; Лизоньку: умницу; Алиночку: скромницу; }\n</code></pre>\n<p>Гораздо проще найти нужный нам пункт в таком виде:</p>\n<pre><code>Я полюбил {\n    Машеньку: болтушку;\n    Юшечку: тихоню;\n    Лизоньку: умницу;\n    Алиночку: скромницу;\n}\n</code></pre>\n<p>Не нужно думать, что HTML-верстка это нечто обособленное в плане написания кода. Обратите внимание на практики, которые используют программисты, пишущие на JavaScript, PHP или Perl. Пара <code>свойство:значение</code> в CSS — это объявление той же переменной, только с ограниченным вариантом значений.</p>\n<p>Пример JavaScript-кода:</p>\n<pre><code>function example() {\n    var position = \'absolute\', display = \'block\', width = 10, height = 10, background = \'icon.png\';\n    // …\n}\n</code></pre>\n<p>То же самое, но в традиционном для JavaScript стиле форматирования:</p>\n<pre><code>function example() {\n    var position = \'absolute\',\n        display = \'block\',\n        width = 10,\n        height = 10,\n        background = \'icon.png\';\n    // …\n}\n</code></pre>\n<p>Теперь давайте вернёмся и еще раз перечитаем как <a href="#target-2">сформулирована цель №2</a>: ключевое слово <em>«свойства»</em>. Нам не так часто приходится править селектор или расположение блоков с селекторами, но очень часто приходится править набор правил, иметь ввиду значение свойств, следить, какие уже объявлены, а каких еще нет. Именно поэтому важно <strong>сконцентрировать</strong> свое внимание на наборе правил.</p>\n<h2>Автоматизация</h2>\n<p>Помимо привычного нам ручного копания в коде, можно использовать автоматические решения. Далее речь пойдет о тех приемах, которые каждый способен применять в IntelliJ IDEA. Возможно, ваш любимый редактор кода тоже способен на нечто подобное.</p>\n<p>Среди автоматических способов решения проблем первым стоит упомянуть построчную валидацию CSS-свойств в рамках селектора. Пусть машина помогает вам находить опечатки и проблемные фрагменты кода:</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 51.37254901960784%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQoz42PbU+kMBCA+f9/6cyd7unpLnHdrN6+QIFloduClNJCodA39zw/mBijTyaTSWaezIy3z0AAgu1mHwQhxhjWRZIe4zA6wRPnLaU1+YSqLL1TdkToBOJicY+Wa/IYwLunvweYTdOktT7n8QNSSqUNeVx5ZZ7LoZ+U89d2FwnMnrmi3dhZ6z7DvvZ403gwjqvnUml3NTdXC367DWk9KGWc+0JmjHkwSTBCWtuKKspcw01RtnJU35JREnHGSS1qKggVQvTuK97ktvUgCDhnhI6/r9Ofs2gzv2cPP0QB7euU+/+6fV/bNxnnXr7f9b0Yh/bmtpz72XJzV1epVt84mxw8DFZyqJo6ubg8/prBP/56C3AaJ+Bpi8HOpisTP5jQN8A38dIcVjZcTPnGOcFI9O/spqnlOKW5zJDBhS2IQBUeukEKYfrO9MJ0/BxatKZvjWhVL87rKcpfAPEoNIMDXcvlAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="validation" title="" src="/static/validation-8e8a547585071a4f1d1a55ee0c7a52a0-fa387.png" srcset="/static/validation-8e8a547585071a4f1d1a55ee0c7a52a0-844a8.png 163w,\n/static/validation-8e8a547585071a4f1d1a55ee0c7a52a0-fe46c.png 325w,\n/static/validation-8e8a547585071a4f1d1a55ee0c7a52a0-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>При многострочном форматировании сложнее пропустить:</p>\n<ul>\n<li>переопределение одного правила другим и уже объявленное правило;</li>\n<li>пропущенную <code>;</code> в последовательности правил;</li>\n<li>незаметные опечатки, вроде <code>height</code> и <code>heigth</code>;</li>\n<li>хаки.</li>\n</ul>\n<h3>Визуализация цветов</h3>\n<p>У каждой строки с использованием цветового кода мой редактор визуализирует цвет. Это нагляднее. Привлекает внимание быстрее. Еще один способ быстро найти нужное.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 89.60784313725489%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAACOklEQVQ4y32T2XbaMBCGef/H6W1z0ZwQAsSGxCmkJCBsbIwXSZZ3a68IkNIszNHF2Gc+za9fo55n91HqdxRvt97Gj3KScJYzmlNGlCy0KrQuTCJEfr6kLJoG9rzJHcGRVC3tCmdeXQ/rp0U3f81++0+wCXAOwx2sqlxrqnV3tiilZQ+MRyhFnAuttRcI5492t7UP05oXJa+KukW4a1quP4Whe641hmlqMvNdFPUSELCp46QhRDKm9Pexh5d3A5SmUh3q1MtK/bjS40d+NcrcJAxLP8gisM48nyilPsJry8IIMn4UhlAzfykTWO5QKsW+Wmn1bWd3MsHInPkI101rTSNnVs6eMx95FSsuyfYepgRnUsp9k7ceUaJ/9rXtCAsAB4Q7Ena8+xpe25bvbc7hGOobSwym4fUQLkC+SXY7Ere8KWnJBXsrUyfZ0wlMEsrYYT+lZJy0XlAH2WabYHNyjBiqsriK4jLqWPsfDEZDhPC7YYzx5xfiPHfzBbMfUt9HF6/q5jpxXcb+6akbOl8Q4DPgYmcWIVxLIc5tPyR7eHXbT8GKnWQzJsqqy0jj+h1wieFJ3rYt+3DJJ3g8cl3vXbYQfLmupjM2fdr8Gi9e1xHEbV60B0c/wcOBMUyYgVCKi31FXhheBSn2sJs3+VHp10Ni3yMIlRLbMB/bYZxUE8e3HX8Jjq9Fqe8NA/ejDGFhVCn5OKdXfdW3s7tHEGzNMEulLj6M1eAWpfAwnk3Lms781bSTHeX6Yhj4L6AQAWNuMOW4AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="colors" title="" src="/static/colors-700ccce907d8375ab034835a7122b486-fa387.png" srcset="/static/colors-700ccce907d8375ab034835a7122b486-844a8.png 163w,\n/static/colors-700ccce907d8375ab034835a7122b486-fe46c.png 325w,\n/static/colors-700ccce907d8375ab034835a7122b486-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<h3>Порядок свойств, селекторов, решений</h3>\n<p>Организация свойств и селекторов поможет вам значительно улучшить понимание и читабельность кода, ускорить доступ к тем или иным решениям. Вы можете работать самостоятельно или в команде, над одним файлом или над гигантским проектом. В любой ситуации порядок будет на вашей стороне.</p>\n<p>Я рекомендую разбить ваш CSS на три части. Это может быть как в прямом смысле разделение по файлам, так и просто мысленное принятие этого правила. Первая часть — это сброс умолчаний, так называемый reset.css, вторая — правила для HTML-тегов, третья — объявления классов и уникальных идентификаторов. Любой из этих частей может и не быть, но так можно организовать порядок на верхнем уровне. В каждой из этих частей всё тоже можно организовать: теги сгруппировать по функциональному признаку, классы и идентификаторы по решениям.</p>\n<p>После того, как сделано всё вышесказанное, возникает вопрос: как организовать свойства в рамках одного селектора — по алфавиту, по длине записи, по частоте использования? Эти методы не годятся потому, что организация, навязываемая ими, не отвечает нашим целям. Вот, например, всё отсортировано по алфавиту, и чтобы увидеть какой <code>z-index</code> у абсолютно позиционированного блока, нужно выискивать его вдалеке от <code>position:absolute</code>, а свойство <code>left</code> совершенно неочевидно будет соседствовать с <code>letter-spacing</code>.</p>\n<p>Наиболее правильный метод — это функциональная группировка. Например: позиционирование, поведение блока, размеры, цвета и т.д. Один из наиболее продуманных вариантов сортировки есть <a href="http://code.google.com/p/zen-coding/wiki/ZenCSSPropertiesEn">в документации к проекту Zen Сoding</a>.</p>\n<p>Случается, что вам приходится работать с неопрятным кодом, доставшимся вам от других разработчиков. В этом случае можно автоматически пересортировать CSS-свойства в нужном вам порядке утилитой <a href="http://csscomb.ru/">CSScomb</a>.</p>\n<h3>Дополнительное окно</h3>\n<p>Несколько окон для одного файла позволяют удобно работать с отдаленными участками кода. Можно подсмотреть решение, скопировать, сверить с чем-то. Опять-таки, я берегу внимание, избавляюсь от беготни по файлу вверх и вниз.</p>\n<a href="images/split-view.png">\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 55.490196078431374%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABzUlEQVQoz1WSa2/bIBiF/f//06RJazulS7X6GifxfMO2kmAbc8fgy3DTdt2LxAdeHs7hgANAnuclAA1jmBBEMEFb9QgNfVeDKkvTPEmqtiOwa/sefdTQdY1TxwfORRiL6Kyb23hB3bos8zyv68rpBUQ+JSzJaFGJnmC7uHx2eesUYTBNox+v3x7XJ7+uBnDfYWfBcOG5QnCE+PMLLIBuB6W0Wt9KCuqUQSCluEEVJyotGRP6C9yDwMOYCqkpVeM4zfNixx0WAlvYH0cFIYlPPWxHrS22rO9wWcUB5+xwlru9/h3XWKJ/R4vLpmzMWJTo+4/mNWi7YaSKmWnTp7ixd1ZStP18hesFESLxFxg6IAqVUtO0BvF6LHhYlVhSK23bQ38FUWBtlzVLc46pnJfpPzj3PRsJxmr367Z/hQ9PaZZCLtp5WWxSpe8KTqOzedhNL6cqg4BJ9QGTzfab8vz80j7u4M997R9OcADLdmdeeB6l9J6QjcpMizbm7ksI4YAwkEpa5STjeUlaJLXR73lyXvoeo/T0h4PaDHwY1HCX3Z5KCidzXcpI27Ho2PthczxfrzdsvdifQAnJPZdRkmTj3h2TAl0xnKfZGLN1Kf0LOChnfRQOTzwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="split view small" title="" src="/static/split-view-small-7171b0a9ad1295f4a1078d0413fb2bda-fa387.png" srcset="/static/split-view-small-7171b0a9ad1295f4a1078d0413fb2bda-844a8.png 163w,\n/static/split-view-small-7171b0a9ad1295f4a1078d0413fb2bda-fe46c.png 325w,\n/static/split-view-small-7171b0a9ad1295f4a1078d0413fb2bda-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n</a>\n<h3>Сравнение содержимого построчно</h3>\n<p>Вы можете писать однострочный CSS, но вполне вероятно что вы вырастете до работы над большими проектами с множеством файлов и большим объемом CSS. Вам придётся работать с системой контроля версий, построением проекта и другими разработчиками в вашей команде. Обратите внимание на то, что разница между двумя файлами вычисляется именно построчно, и при однострочной записи вам будет труднее выявить различия, так как строка будет различаться сразу несколькими свойствами:</p>\n<a href="images/diff.png">\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.03921568627451%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABK0lEQVQY0zWP226DMAyGef832QOsm6qqldZt3bq12qEtg5ZDAiEkDiQhJEB3M7jYZ/n3hT9ZsheeC0qrqhoKZi8lodCAaBn0GNMkQkVOEKJJQgE0wICZjFkBwnGwDJy33bH9IT9TYl3f9V03dT8MVyVlfMFFlkcJvL6zzxATUV2H38n6x1u/uMUmTHmsjbGtadvWTNEK4P4pSeM4I3q+kvvglAmkGzUqZmKa3tOmvpl9HwMURFTIunedc+14tebl7iP1jz+EqNtls9wiP+EhLsZ1Z51zdixv/VzfzfnqMX7+Co5ZxGrIqUYcMIredrF/8PNC3a+62UI/bPMTSs4UF4JTUKSiHs4NBWdHOiuMVEZL6arGcFamSU4JAaFGp+TTL21nuK6l0aqxtZF/iVBEzbxB054AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="diff small" title="" src="/static/diff-small-7ea39e35fd93c48fb47cd47e222fda3c-fa387.png" srcset="/static/diff-small-7ea39e35fd93c48fb47cd47e222fda3c-844a8.png 163w,\n/static/diff-small-7ea39e35fd93c48fb47cd47e222fda3c-fe46c.png 325w,\n/static/diff-small-7ea39e35fd93c48fb47cd47e222fda3c-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n</a>\n<h3>Доступ по селектору через поиск</h3>\n<p>Один из главных аргументов <em>однострочников</em> сводится к тому, что перед глазами сразу располагаются только нужные селекторы. Процесс поиска нужных селекторов можно банально и очень эффективно автоматизировать при помощи поиска по файлу или проекту. Пусть машина ищет, пока вы экономите своё драгоценное внимание. Никакого просматривания глазами и выискивания. Никакой прокрутки. Не напрягайте глаза больше, чем это реально нужно.</p>\n<h3>Доступ к свойству конкретного селектора по номеру строки</h3>\n<p>Номер строки можно найти так: проинспектировать нужный блок в верстке с помощью Firebug, Web Inspector или Dragonfly, затем найти нужный селектор, который срабатывает для данного блока и подсмотреть номер строки и имя файла. Далее дело техники и знания горячих клавиш вашего любимого редактора. Объем CSS-кода и его растянутость (излишняя, как считают некоторые) не имеет никакого значения в этом случае.</p>\n<h3>Комментирование</h3>\n<p>При построчной записи удобнее комментировать конкретное свойство. Например напомнить, что оно переопределено в файле ie6.css. Или указать, что эта ширина может меняться в зависимости от наличия другого класса.</p>\n<a href="images/comment.png">\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.31372549019608%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3klEQVQoz1WS246bMBCG8/4PVqlSL6qqXakiCZvA4gNgjPFxfKBjsk3akS9sz/95Tj4FwUPM905f+5lwqZTf973suzWG3m7sdpfTVPbCuWk7eSeTECbGhBqAeLJG51z4mDqulLXo8KH6EB6aM7lcFsbxqNbYMzfKtQp8LGWPMZ5AjzFlxvwHgYFLubpNhwprPZwrLPmIRyEspakflFi1XFxKJaV0Ck6Nk+2GNcS4/2N62z6aM/ISM7bh1q2rtrUiDHpYjaz1JoQmfFRqMah6GICSS/v2+/rW8L7Xxred6cgavIcQ/CFxzp0izDGWe2fOd6mMf0bGmsn1SttWjjXtaXLNVbF5yzk/BDVtAIe79y79umxMyqPTL5i07XLAs8hvjW/JEiK84AguhEiZJTQMbDP2M3ht2OWCPDYMRzVNhjIYqJ2lfpR9NMyK42FHqJZreGZV4abBhj1GZQygYJ6dD/EVOYA6JuG+fJPfzzehNKTqNi+YVWmEHz/N1x/9nY8O4Fnzhjvnctv5XnB0xJyekclfuJREWb6QabUGUnrC2KR9054yR4ZlGkUp+X+4pg0B+OQp0eRj9M5/ztm5Fd+YZtX1klBprc/VCsL0/R3XwnnKGb9AFRCJnyJnvMgA8AfaC+PKR3PfAwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="comment small" title="" src="/static/comment-small-5a81e487c39042d310d67130b31601de-fa387.png" srcset="/static/comment-small-5a81e487c39042d310d67130b31601de-844a8.png 163w,\n/static/comment-small-5a81e487c39042d310d67130b31601de-fe46c.png 325w,\n/static/comment-small-5a81e487c39042d310d67130b31601de-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n</a>\n<p>Взгляните, как комментируют свой код программисты — люди высокой организации мышления. Сложно оставить комментарий-послание себе или другим специалистам, если у вас однострочный код. И не говорите, что это вам не нужно. Когда понадобится неожиданно — будет мучительно неудобно.</p>\n<p>При должной сноровке и знании горячих клавиш вашего любимого редактора закомментировать одно свойство на одной строке — легко. Комментарий <code>/* … */</code> автоматически обхватит свойство в многострочной записи. В однострочной записи вам недоступна такая роскошь. <q>А я комментирую, ломая имя свойства иксиком или другим символом</q> — детский сад, и к тому же небезопасно для обработки браузером дальнейшего кода. Не стоит испытывать на прочность CSS-парсеры.</p>\n<h3>А у меня CSS меньше и быстрее</h3>\n<p>Теперь о мнениях из серии <q>я пишу код в одну строку потому, что так посетители не грузят пробелы или символы табуляции</q>.</p>\n<p>Версия в разработке и версия в бою — разные вещи. Версия для разработки должна быть максимально заточена под нужды разработчика и способствовать минимизации шансов на ошибку или опечатку из-за невнимательности. Для боевой версии актуальны совсем другие вещи: количество запросов к серверу, объем кода, актуальность загрузки всего кода сразу либо по частям, обфускация.</p>\n<h2>В итоге</h2>\n<p>Рекомендую пересилить себя и в целях повышения продуктивности, как личной, так и вашего проекта в целом, задуматься: почему вы пишете именно так? Может дело в простой привычке? Если вы преследуете <a href="#target-1">цель №1</a> и <a href="#target-2">цель №2</a>, то настоятельно рекомендую переходить на многострочный стиль.</p>\n<h3>Дополнительное чтение</h3>\n<ul>\n<li><a href="http://vimeo.com/17498225">CSS-менеджмент. Три года спустя</a>, доклад Вадима Макеева;</li>\n<li><a href="http://www.artlebedev.ru/tools/technogrette/soft/eclipse-ant/">Eclipse: знакомство с Ant</a>, статья Сергея Чикуёнка;</li>\n<li><a href="http://csscomb.ru/">CSScomb.ru</a>, инструменты для сортировки CSS-свойств.</li>\n</ul>',headings:[{depth:1,value:"Преимущества многострочного CSS"},{depth:2,value:"Анализ"},{depth:3,value:"Цель №1: минимизация шанса на ошибку"},{depth:3,value:"Цель №2: скорость восприятия свойств"},{depth:2,value:"Автоматизация"},{depth:3,value:"Визуализация цветов"},{depth:3,value:"Порядок свойств, селекторов, решений"},{depth:3,value:"Дополнительное окно"},{depth:3,value:"Сравнение содержимого построчно"},{depth:3,value:"Доступ по селектору через поиск"},{depth:3,value:"Доступ к свойству конкретного селектора по номеру строки"},{depth:3,value:"Комментирование"},{depth:3,value:"А у меня CSS меньше и быстрее"},{depth:2,value:"В итоге"},{depth:3,value:"Дополнительное чтение"}],frontmatter:{title:"Преимущества многострочного CSS"}}},{node:{html:"<h1>Роутинг, бандлинг и ленивая загрузка на Webpack</h1>\n<p>Перевод «Multiple routes, bundling and lazy-loading» Серджио Гомеса.</p>\n<h2>Обзор проблемы</h2>\n<p>Мы с коллегами пишем клиентское приложение на нативном <em>JS</em>, которое разбивается на маршруты. Маршруты — это способ организации структуры сайта. Они как правило привязаны к отдельным <em>URL</em>. Таким образом, в интернет-магазине вы можете иметь различные маршруты, такие как главная, список категорий, страница продукта, и страница оформления заказа, каждый из которых может иметь свой собственный <em>JavaScript</em>. Например, для списка категорий может потребоваться код для обработки фильтрации, а для страницы оформления заказа может потребоваться иной код (для валидации формы).</p>\n<p>Однако мы не создаем полностью клиентское приложение. Пользователь может попасть на сайт через различные страницы, например, ввести <em>URL</em> в адресную строку и загрузить главную страницу, или найти интересный продукт в поисковике и перейти прямо на страницу описания этого продукта. Поэтому каждый из этих маршрутов должен иметь свою собственную структуру <em>URL</em>:</p>\n<pre><code>Home: /\nCategory listing: /category/42\nProduct page: /product/1234\nCheckout: /checkout\n</code></pre>\n<p>Кроме того, нам не нужно загружать весь <em>JavaScript</em> для всех маршрутов, когда сайт впервые открыт. В идеале, нам достаточно кода для того маршрута, который был открыт, а остальное можно подгружать, когда пользователь переходит на другие страницы сайта. Но если вы делаете единый бандл, то вы получите один массивный файл, который должен быть полностью загружен и проанализирован, прежде чем что-либо произойдет:</p>\n<pre><code>dist/\n  big-bundle.js\n</code></pre>\n<p>Это не лучшее решение, ведь подгружается много <em>JavaScript</em>, который не используется. При медленном подключении это может означать, что пользователю придется подождать довольно долгое время, прежде чем начать взаимодействовать со страницей. Вот почему большие бандлы являются антипаттерном.</p>\n<p>Вот где нам поможет концепция <strong>точки входа</strong>. Вместо того, чтобы иметь единый главный файл, мы решили иметь точку входа для каждого маршрута, при этом оставшиеся маршруты лениво загружаются по мере необходимости. В конечном итоге мы получим следующее:</p>\n<pre><code>dist/\n  bundle-home.js\n  bundle-category.js\n  bundle-product.js\n  bundle-checkout.js\n  home.js\n  category.js\n  product.js\n  checkout.js\n</code></pre>\n<p>В зависимости от маршрута, будет загружен только один из файлов пакета. Этот файл будет лениво загружать другие модули, по мере необходимости. И если пользователь открыл продукт, то загрузится только bundle-product.js, необходимый для текущей страницы , а затем лениво подгрузятся home.js, category.js и checkout.js , если это необходимо.</p>\n<p>Это решение позволяет загружать весь необходимый код для выполнения немедленного запроса пользователя и только при необходимости загружать остальной. И хотя это и включает в себя один и тот же код в нескольких файлах, фактически пользователь должен загружать только одну версию каждого модуля при навигации по сайту.</p>\n<h2>Webpack и модули</h2>\n<p>Существует миф, что <em>Webpack</em> трудно сконфигурировать, чтобы использовать его в большинстве ситуаций. Я использую <em>Webpack</em> недавно, и не могу судить насколько было правдиво это утверждение в прошлом, но оказывается, что сейчас <em>Webpack</em> довольно прост в использовании! Если вы знакомы с <em>ES</em>-модулями, статическим и динамическим импортом, вы в значительной степени готовы к созданию некоторых сложных приложений с хорошей практикой загрузки и без особых навыков конфигурирования.</p>\n<p><em>Webpack</em> понимает стандартизированный синтаксис <em>ES</em>-модулей, а также статическую и динамическую загрузку модулей. Он смотрит на ваш код и решает, как разделить его на пакеты в зависимости от того, какой тип импорта вы делаете. Таким образом, если вы загружаете модуль статически, он будет в бандле:</p>\n<pre><code>import Foo from './foo.js';\nFoo.doSomething();\n</code></pre>\n<p>Приведенные выше результаты соберутся в один файл bundle.js со всем кодом. Если вместо этого вы загружаете его динамически, то <em>Webpack</em> будет создавать отдельный бандл и получать дополнительный код по требованию:</p>\n<pre><code>import('./foo.js').then(module => {\n  module.doSomething();\n});\n</code></pre>\n<p>Приведенные выше результаты соберутся в bundle.js с некоторой магической ленивой загрузкой, и файл 0.js с кодом для foo. 0.js называется «чанком» в терминологии, предназначенной для ленивой загрузки другим кодом <em>Webpack</em>, и не обрабатывается непосредственно собственным кодом.</p>\n<h2>Множественные точки входа и роутинг</h2>\n<p>Хорошо, похоже, что все готово! Вы можете написать стандартизированный код модуля, который будет работать как изначально в браузере (если ваш браузер уже добавил поддержку), так и через некоторую магию в <em>Webpack</em>.</p>\n<p>Итак, давайте напишем код и посмотрим, как это на самом деле выглядит. Я вернусь к исходному примеру и использую маршруты для страниц категории, продукта, оформления заказа и главной, а также соответствующую точку входа для каждого из них.</p>\n<p>Модули довольно просты. Вы можете создать один метод с любым именем, так как содержание не имеет значения для примера:</p>\n<pre><code>export function printMessage() {\n  console.log('Hi! This is the Checkout module.');\n}\n</code></pre>\n<p>Каждый файл точки входа будет загружать соответствующий модуль статически, а остальные модули динамически. Чтобы избежать дублирования кода, вам нужно создать простой, последовательный интерфейс для определения всего остального. Вот пример, который я называю Router.</p>\n<p><strong>*Примечание:</strong> хоть этот пример и не будет делать какие-либо фактические маршрутизации, в традиционном смысле, он будет определять какой код будет загружаться по маршруту. Так что я все еще думаю, что это нормальное имя:)*</p>\n<pre><code>const _modules = {\n  Home: import('./home.js'),\n  Category: import('./category.js'),\n  Product: import('./product.js'),\n  Checkout: import('./checkout.js'),\n};\n\nexport default class Router {\n  static get modules() {\n    return _modules;\n  }\n}\n</code></pre>\n<p>Каждый модуль хранится как запись в объекте _modules, причем значение является промисом загрузки, возвращаемым import(). Обратите внимание, что это немедленно начнет загружать другие маршруты, которые вам, возможно, не понадобятся, но в этом случае вы всегда можете отложить загрузку явным вызовом, который вызовет фактический импорт. Например:</p>\n<pre><code>const _modules = {\n  Home: () => import('./home.js'),\n  Category: () => import('./category.js'),\n  Product: () => import('./product.js'),\n  Checkout: () => import('./checkout.js'),\n};\n\nexport default class Router {\n  static get modules() {\n    return _modules;\n  }\n}\n</code></pre>\n<p>Но если все четыре модуля загружаются лениво, как избежать дублирования кода в точке входа? Безусловно, один из них должен быть null?</p>\n<p>На самом деле в этом нет необходимости! Браузер (с поддержкой модулей) и <em>Webpack</em> делают дедупликацию, где они отслеживают, какие модули были загружены, чтобы они не загружались дважды. Таким образом, вам, как разработчику, не нужно беспокоиться о том, чтобы отслеживать что-либо из этого. Это делает точку входа действительно чистой и легкой для понимания:</p>\n<pre><code>import * as Home from './home.js';\nimport Router from './router.js';\n\nconsole.log('Hello from the Home entry point!');\n\nRouter.modules.Home().then(module => module.printMessage());\nRouter.modules.Category().then(module => module.printMessage());\nRouter.modules.Product().then(module => module.printMessage());\nRouter.modules.Checkout().then(module => module.printMessage());\n</code></pre>\n<p>Главная загружается статически, так что она сразу же доступна и не требует ожидания ленивой загрузки. Router также загружается статически. После того, как вы сделаете запрос к Router, он проверяет, был ли загружен этот модуль либо статически, либо динамически. Если он уже был загружен, промис немедленно разрешается. Если этого не произошло, он извлекает файл, загружает код и продолжает цепочку промисов после этого.</p>\n<p>Это означает, что все модули могут использоваться точно так же, входным модулем или, если это было реальное приложение с надлежащей маршрутизацией <em>URL</em>, самим Router.</p>\n<h2>Как мне заставить это работать в Webpack?</h2>\n<p>Как я упоминал ранее, все это должно работать в браузере без изменений, если ваш браузер поддерживает <em>ES-</em>модули и их загрузку. Вы не получите преимущества от сборки без некоторой дальнейшей работы, но код все еще функционален.</p>\n<p>Тем не менее, поскольку большинство из нас все еще собирают в бандл, нам нужно найти способ заставить это работать с <em>Webpack</em>. И оказывается все очень просто! Вот файл webpack.config.js:</p>\n<pre><code>const path = require('path');\nmodule.exports = {\n  entry: {\n    'bundle-home': './entry-home.js',\n    'bundle-category': './entry-category.js',\n    'bundle-product': './entry-product.js',\n    'bundle-checkout': './entry-checkout.js',\n  },\n  output: {\n    path: path.resolve('./dist'),\n    filename: '[name].js',\n  }\n}\n</code></pre>\n<p>Главное здесь — убедиться, что все точки входа являются частью одного формирования, чтобы создать только один набор динамически загружаемых блоков. Выходное имя файла основано на ключе для каждой точки входа, благодаря использованию [name], поэтому вывод выглядит следующим образом:</p>\n<pre><code>dist/\n  0.js\n  1.js\n  2.js\n  3.js\n  bundle-category.js\n  bundle-checkout.js\n  bundle-home.js\n  bundle-product.js\n</code></pre>\n<p>Числовые файлы включают в себя модуль, завернутый в <em>JSONP</em>. Собранные файлы имеют код для этой точки входа, связанный с кодом Router и некоторыми методами, обрабатывающими отложенную загрузку.</p>\n<p>Если вы загрузите файл bundle-checkout.js на тестовой странице и посмотрите на отладчик <em>Chrome</em>, вы можете убедится, что загружаются только три чанка, как и ожидалось. Вы также можете увидеть, что сообщение из модуля Checkout поступает из bundle-checkout.js, что означает, что модуль Checkout попал в этот файл.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2660/0*pnJPmIbgfe86W1QK.png\"></p>\n<h2>Выводы и предостережения</h2>\n<p>Обратите внимание, что этот пример довольно прост, и реальное приложение будет иметь дополнительные требования, такие как необходимость использовать <em>CommonsChunkPlugin</em> для более легкого разделения битов кода, или, возможно, некоторые потенциальные сложности, возникающих при использовании <em>npm</em>-модулей в качестве зависимостей. Это, вероятно, потребует дополнительной работы над конфигурацией <em>Webpack</em>.</p>\n<p>Тем не менее, я чувствовал, что это интересная проблема и достаточно достойное решение, чтобы поделиться, поэтому я надеюсь, что вы найдете его полезным! Особая благодарность Сурме и Сэму Даттону за помощь в поисках более чистого решения!</p>\n<p><em>Перевод <a href=\"https://medium.com/@nzvtrkk\">Артура Храброва</a>, редактура <a href=\"https://medium.com/@pepelsbey\">Вадима Макеева</a>.</em></p>",headings:[{depth:1,value:"Роутинг, бандлинг и ленивая загрузка на Webpack"},{depth:2,value:"Обзор проблемы"},{depth:2,value:"Webpack и модули"},{depth:2,value:"Множественные точки входа и роутинг"},{depth:2,value:"Как мне заставить это работать в Webpack?"},{depth:2,value:"Выводы и предостережения"}],frontmatter:{title:"Роутинг, бандлинг и ленивая загрузка на Webpack"}}},{node:{html:'<h1>Как работает nth-child</h1>\n<p><a href="http://css-tricks.com/">Крис Койер</a> 21 ноября 2011</p>\n<p>Существует такой селектор, точнее псевдокласс, называемый <code>:nth-child</code>. Вот пример его использования:</p>\n<pre><code>ul li:nth-child(3n+3) {\n    color: #cccccc;\n}\n</code></pre>\n<p>Что делает CSS-код, приведенный выше? Он выбирает каждый третий элемент внутри маркированного списка: это 3-й, 6-й, 9-й, 12-й и т.д. Давайте посмотрим, как именно работает это выражение и что еще можно сделать с помощью <code>:nth-child</code>.</p>\n<p>Всё зависит от того, что находится между скобками. Селектор <code>:nth-child</code> принимает два ключевых слова: <code>even</code> и <code>odd</code>. Тут всё просто: <code>even</code> выбирает чётные элементы, такие как 2-й, 4-й, 6-й и т.д., а <code>odd</code> выбирает нечётные элементы, такие как 1-й, 3-й, 5-й и т.д.</p>\n<p>Как видно из первого примера, <code>:nth-child</code> также принимает в качестве параметра выражения. В том числе и простейшие уравнения, иначе говоря, просто числа. Если поставить их в скобки, будет выбран только один элемент с соответствующим номером. Например, вот как выбрать только пятый элемент:</p>\n<pre><code>ul li:nth-child(5) {\n    color: #cccccc;\n}\n</code></pre>\n<p>Однако давайте вернемся к <code>3n+3</code> из первого примера. Как он работает и почему выбирается каждый третий элемент? Весь фокус в понимании переменной <code>n</code> и приведенного алгебраического уравнения. Подумайте об <code>n</code>, как о начинающемся с нуля множестве целых чисел. Потом дополните уравнение. Так <code>3n</code> это <code>3×n</code>, а все уравнение вместе это <code>(3×n)+3</code>. Теперь, подставляя вместо <code>n</code> числа больше или равные нулю, мы получим:</p>\n<ul>\n<li>(3 × 0) + 3 = 3 = 3-й элемент</li>\n<li>(3 × 1) + 3 = 6 = 6-й элемент</li>\n<li>(3 × 2) + 3 = 9 = 9-й элемент и т.д.</li>\n</ul>\n<p>А как насчёт <code>:nth-child(2n+1)</code>?</p>\n<ul>\n<li>(2 × 0) + 1 = 1 = 1-й элемент</li>\n<li>(2 × 1) + 1 = 3 = 3-й элемент</li>\n<li>(2 × 2) + 1 = 5 = 5-й элемент и т.д.</li>\n</ul>\n<p>Так, стоп! Это ведь то же самое, что и <code>odd</code>. Тогда, возможно, не стоит использовать это выражение? Но разве в этом случае мы не подвергаем наш первый пример излишнему усложнению? Что, если вместо <code>3n+3</code> мы запишем <code>3n+0</code> или ещё проще <code>3n</code>?</p>\n<ul>\n<li>(3 × 0) = 0 = ничего нет</li>\n<li>(3 × 1) = 3 = 3-й элемент</li>\n<li>(3 × 2) = 6 = 6-й элемент</li>\n<li>(3 × 3) = 9 = 9-й элемент и т.д.</li>\n</ul>\n<p>Итак, как вы можете видеть, результат получится такой же, а значит, нет необходимости в <code>+3</code>. Мы можем использовать и отрицательные значения <code>n</code>, с таким же успехом, как и вычитание в уравнениях. Например, <code>4n-1</code>:</p>\n<ul>\n<li>(4 × 0) – 1 = –1 = ничего нет</li>\n<li>(4 × 1) – 1 = 3 = 3-й элемент</li>\n<li>(4 × 2) – 1 = 7 = 7-й элемент и т.д.</li>\n</ul>\n<p>Использование <code>-n</code> может показаться странным — ведь если конечный результат отрицательный, то никакие элементы в выборку не попадут. Но если дополнить уравнение и снова сделать результат положительным, то выборка окажется довольно интересной: при помощи неё можно будет получить первые <code>n</code> элементов, например так: <code>-n+3</code>:</p>\n<ul>\n<li>–0 + 3 = 3 = 3-й элемент</li>\n<li>–1 + 3 = 2 = 2-й элемент</li>\n<li>–2 + 3 = 1 = 1-й элемент</li>\n<li>–3 + 3 = 0 = ничего нет и т.д.</li>\n</ul>\n<p>На SitePoint есть хороший справочник <a href="http://reference.sitepoint.com/css/understandingnthchildexpressions">с милой табличкой</a>, которую я бесстыдно опубликую здесь:</p>\n<table>\n<thead>\n<tr>\n<th>n</th>\n<th>2n+1</th>\n<th>4n+1</th>\n<th>4n+4</th>\n<th>4n</th>\n<th>5n-2</th>\n<th>-n+3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>4</td>\n<td>–</td>\n<td>–</td>\n<td>3</td>\n</tr>\n<tr>\n<td>1</td>\n<td>3</td>\n<td>5</td>\n<td>8</td>\n<td>4</td>\n<td>3</td>\n<td>2</td>\n</tr>\n<tr>\n<td>2</td>\n<td>5</td>\n<td>9</td>\n<td>1</td>\n<td>8</td>\n<td>8</td>\n<td>1</td>\n</tr>\n<tr>\n<td>3</td>\n<td>7</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>–</td>\n</tr>\n<tr>\n<td>4</td>\n<td>9</td>\n<td>17</td>\n<td>20</td>\n<td>16</td>\n<td>18</td>\n<td>–</td>\n</tr>\n<tr>\n<td>5</td>\n<td>11</td>\n<td>21</td>\n<td>24</td>\n<td>20</td>\n<td>23</td>\n<td>–</td>\n</tr>\n</tbody>\n</table>\n<h2>Поддержка браузерами</h2>\n<p>Селектор <code>:nth-child</code> — один из немногих CSS-селекторов, который почти полностью поддерживается в современных браузерах и абсолютно не поддерживается в IE, даже в IE8. Поэтому когда дело доходит до его использования, и конечный результат сделан по технологии прогрессивного улучшения — вы можете смело использовать его для некоторых оформительских элементов, вроде расцветки строк таблицы. Однако не стоит применять его в более серьезных случаях. Например, полагаться на него в раскладке сайта или удалять правое поле из каждого третьего блока в сетке три на три, чтобы они вошли в ряд.</p>\n<p>Спасением здесь может послужить библиотека <a href="http://jquery.com/">jQuery</a>, которая реализует поддержку всех CSS-селекторов, включая <code>:nth-child</code>, даже в Internet Explorer.</p>\n<h2>Всё равно неясно?</h2>\n<p>Я не большой поклонник фразы <em>я лучше воспринимаю визуальную информацию</em>. И вы, конечно, тоже. Но примеры являются чрезвычайно полезными именно в таких ситуациях. Чтобы облегчить понимание, я сделал <a href="http://css-tricks.com/examples/nth-child-tester/">небольшую тестовую страничку</a>. На ней вы сможете написать свои уравнения и ниже увидеть то, что попадет в выборку.</p>\n<p>Также загляните на страничку <a href="http://css-tricks.com/9657-useful-nth-child-recipies/">полезных рецептов <code>:nth-child</code></a>, там вы сможете найти код для наиболее распространенных случаев.</p>\n<p>Перевод оригинальной статьи «<a href="http://css-tricks.com/5452-how-nth-child-works/">How nth-child Works</a>» <a href="http://snook.ca/about/">Криса Койера</a> (Chris Coyier), опубликованной на сайте «<a href="http://css-tricks.com/">CSS-Tricks</a>».</p>',headings:[{depth:1,value:"Как работает nth-child"},{depth:2,value:"Поддержка браузерами"},{depth:2,value:"Всё равно неясно?"}],frontmatter:{title:"Как работает nth-child"}}},{node:{html:'<h1>Почему у нас нет селектора по родителю</h1>\n<p><a href="http://snook.ca/">Джонатан Снук</a> 20 сентября 2011</p>\n<p>Относительно регулярно я вижу дискуссии о том, должен ли CSS включать селектор по родителю и, пока я не выяснил, как работает движок браузера, сам строил предположения по этому поводу.</p>\n<p>Вкратце: <em>производительность</em>.</p>\n<h2>Как работает CSS</h2>\n<p>В связи с моей работой я делаю много тестов производительности. Для определения «узких мест» мы используем массу приложений. Например, Google Page Speed, который дает рекомендации по улучшению производительности JavaScript и рендеринга. Прежде чем я перейду к рассмотрению этих рекомендаций, нам нужно разобраться как браузеры работают с CSS</p>\n<h2>Стиль элемента применяется в момент его создания</h2>\n<p>Мы часто рассматриваем веб-страницы как полноценные документы, наполненные элементами и содержимым. Между тем, браузеры разработаны так, чтобы обрабатывать документ потоково. Они начинают получать документ с сервера и могут начать его отображать до момента полной загрузки. Каждый узел анализируется и отображается в окне по мере получения.</p>\n<p>Взгляните на этот документ:</p>\n<pre><code>&#x3C;body>\n    &#x3C;div id="content">\n        &#x3C;div class="module intro">\n            &#x3C;p>Lorem Ipsum&#x3C;/p>\n        &#x3C;/div>\n        &#x3C;div class="module">\n            &#x3C;p>Lorem Ipsum&#x3C;/p>\n            &#x3C;p>Lorem Ipsum&#x3C;/p>\n            &#x3C;p>Lorem Ipsum &#x3C;span>Test&#x3C;/span>&#x3C;/p>\n        &#x3C;/div>\n    &#x3C;/div>\n&#x3C;/body>\n</code></pre>\n<p>Браузер начинает сначала и видит элемент <code>&#x3C;body></code>. В этот момент времени считается, что этот узел не имеет дочерних узлов. Ничего более не рассматривается. Браузер определяет соответствующий ему обобщенный набор стилей и применяет его к элементу. Какой шрифт, цвет, интерлиньяж? После того, как это все будет выяснено, элемент отображается на экране.</p>\n<p>Далее браузер видит элемент <code>&#x3C;div></code> со значением атрибута ID <code>content</code>. И снова в этот момент времени браузер считает его пустым. Он не рассматривает другие элементы. Как только браузер рассчитает стиль, элемент отображается на экране. Затем браузер определяет нужно ли перерисовать <code>&#x3C;body></code> — стал ли элемент шире или выше? Я подозреваю, что там есть масса других проверок, но изменение ширины и высоты — самый распространенный способ повлиять на отображение родительского узла.</p>\n<p>Процесс продолжается, пока браузер не достигнет корневого узла документа.</p>\n<p>Вот как выглядит визуализация процессов перерисовки в Firefox:</p>\n<iframe width="510" height="382" src="http://www.youtube.com/embed/ZTnIxIA5KGw" frameborder="0"></iframe>\n<h2>CSS селекторы анализируется справа налево</h2>\n<p>Чтобы определить, применяется ли CSS-правило к определенному элементу, браузер рассматривает селектор справа налево.</p>\n<p>Если у вас есть селектор <code>body div#content p { color: #003366; }</code>, то, когда каждый элемент появляется на странице, браузер проверяет, является ли он параграфом. Если да, он начинает подниматься вверх по DOM и ищет <code>&#x3C;div></code> со значением атрибута ID равным <code>content</code>. Если он его находит, то продолжает подниматься по DOM пока не найдет <code>&#x3C;body></code>.</p>\n<p>Таким образом, читая селектор справа налево, браузер значительно быстрее может определить применяется ли правило к элементу. Чтобы определить, какой из селекторов обладает большей производительностью, нужно выяснить, как много узлов придется рассмотреть, чтобы определить, можно ли применить правило к элементу.</p>\n<h2>Правила</h2>\n<p>Возвращаясь к Page Speed, давайте рассмотрим <a href="http://code.google.com/speed/page-speed/docs/rendering.html#UseEfficientCSSSelectors">несколько его рекомендаций</a>:</p>\n<ul>\n<li>Избегайте селектора по потомку: <code>.content .sidebar</code>;</li>\n<li>Избегайте селектора по дочернему элементу: <code>.content > .sidebar</code> и селектора по следующему элементу: <code>.content + .sidebar</code>.</li>\n</ul>\n<p>Конечно, селекторы по ID — самые быстрые. Проверить применимость селектора <code>#content</code> к рассматриваемому элементу можно очень быстро. Есть у него этот ID или нет? Селекторы по классу практически такие же быстрые, так как нет никаких связанных элементов, которые надо проверять.</p>\n<p>Селекторы по потомкам, такие как <code>.content .sidebar</code> — более ресурсоемкие, так как, чтобы определить надо ли применять правило к <code>.sidebar</code>, браузер должен найти <code>.content</code>. Cелектор по дочернему элементу, например, <code>.content > .sidebar</code>, лучше селектора по потомку, так как браузер должен проверить только один элемент вместо множества.</p>\n<p>К сожалению, селекторы <code>+</code> и <code>></code> не поддерживаются IE6. Так что если его поддержка актуальна для вас, то про них придется забыть. Примечание переводчика.</p>\n<h2>Селектор по тегу и универсальный селектор</h2>\n<p>В рамках рекомендации избегать селекторов по потомку, дочернему или следующему элементам, рекомендуется избегать универсального селектора и селектора по тегу.</p>\n<p>Рассмотрим следующий пример:</p>\n<pre><code>#content * { color: #039; }\n</code></pre>\n<p>Так как в селекторе присутствует ID, то можно подумать, что этот селектор обрабатывается очень быстро. Проблема в том, что браузер обрабатывает селектор справа налево и сперва проверяется универсальный селектор. Для того чтобы браузер мог определить, должен ли цвет текста элемента быть тёмно-синим, надо проверить каждый предок элемента, пока не будет найден предок с атрибутом ID равным <code>content</code> или не будет достигнут корень документа.</p>\n<p>И это должно быть сделано для каждого элемента на странице.</p>\n<p>Теперь, когда мы понимаем, как элемент обрабатывается, как определяется применимость правил к элементу, давайте рассмотрим пример.</p>\n<h2>Почему IE долго не поддерживал <code>:last-child</code></h2>\n<p>Все жаловались: у всех браузеров, кроме IE, есть поддержка <code>:last-child</code> (она появилась только в IE9!) Некоторые могли подумать <q>насколько же сложнее сделать :last-child, если уже реализован :first-child?</q></p>\n<p>Давайте представим, что мы — браузер и мы парсим документ-пример, который я приводил ранее.</p>\n<pre><code>.module > p:first-child { color: red; } /* Первое правило */\n.module > p:last-child { color: blue; } /* Второе правило */\n</code></pre>\n<p>Когда мы рассматриваем внутренности первого <code>&#x3C;div></code>, мы видим, что там есть параграф. Браузер видит что-то вроде этого:</p>\n<pre><code>&#x3C;div class="module">\n    &#x3C;p>Lorem Ipsum&#x3C;/p>\n</code></pre>\n<p>Нужно ли применить первое правило к параграфу? Да, это параграф; да, это первый дочерний узел; и, да, это непосредственный потомок элемента с классом <code>module</code>.</p>\n<p>Нужно ли применить к этому параграфу второе правило? На данный момент это последний элемент. Но мы могли ещё не загрузить все элементы и не можем быть уверены, что он останется последним.</p>\n<p>Вне зависимости от того, как решать эту дилемму, у нас возникает необходимость повторного анализа стилей двух узлов для каждого нового узла, который мы добавляем в DOM. Если я добавлю ещё один параграф следом за первым, мы должны так же повторно перерассчитать стили, которые применяются к предыдущему параграфу.</p>\n<h2>Как на самом деле это делает браузер?</h2>\n<p>Я не мог сказать с абсолютной уверенностью, как браузеры парсят <code>:last-child</code>, так что я создал несколько тестов:</p>\n<ul>\n<li><a href="http://testing.snook.ca/css-1.html">Статическая HTML-страница</a>;</li>\n<li><a href="http://testing.snook.ca/css-1.php">Рендеринг с паузами в одну секунду</a>.</li>\n</ul>\n<p>Первый пример весьма скучен. В любом браузере, включая IE9, всё отображается корректно. Внутри <code>&#x3C;div></code> первый элемент красный, а последний синий. Но посмотрите на второй пример, и вы увидите интересные отличия в поведении браузеров.</p>\n<p>Второй пример приостанавливается перед добавлением каждого параграфа в <code>&#x3C;div></code>.</p>\n<p>В Firefox первый параграф изначально отображается синим. Когда загружается второй параграф, первый становится красным и второй — синим. Когда загружается третий параграф, второй отображается цветом по умолчанию и третий отображается синим. Firefox рассматривает каждый элемент, который был загружен в качестве последнего элемента, пока не будет загружен ещё один.</p>\n<p>В Safari, Chrome и Opera мы увидим другой подход. Первый параграф красный. Второй отображается чёрным. Последний параграф отображается чёрным, пока браузер не получит закрывающий тег <code>&#x3C;/div></code>. В этот момент последний параграф становится синим. Эти браузеры не рассматривают элемент как последний, пока не будет закрыт родительский.</p>\n<p>В Internet Explorer 9 Beta я нашел интересный баг. В то время, как статическая страница отображается корректно, версия с паузами отрабатывает с любопытным побочным эффектом. Первый параграф синий, второй параграф синий и затем — третий. Когда закрывающий тег <code>&#x3C;/div></code> загружен, предпоследний параграф меняет цвет на чёрный. IE9 пытается обрабатывать селектор как Webkit и Opera, но… м-м… не выходит. Надо бы отправить багрепорт в Microsoft.</p>\n<h2>Почему у нас нет селектора по родителю?</h2>\n<p>Уже дано достаточно пояснений, чтобы можно было вернуться к оригинальному вопросу. Проблема не в том, что у нас не может быть селектора по родителю. Проблема в том, что мы столкнемся с проблемами быстродействия, когда дело дойдет до определения того, какие CSS-правила применимы к данному элементу. Если Google Page Speed не рекомендует использование универсальных селекторов, то можно гарантировать, что селектор по родителю будет первым в списке ресурсоемких селекторов, намного опережая все проблемы с производительностью, которые могут быть вызваны использованием универсального селектора.</p>\n<p>Давайте посмотрим почему. Первым делом давайте приведём пример синтаксиса для селектора по родителю.</p>\n<pre><code>div.module:has(span) { color: green; }\n</code></pre>\n<p>Проблема в том, что мы не можем определить применимость правила до тех пор, либо пока мы не найдем соответствия, либо пока все элементы, дочерние по отношению к родителю данного, не будут загружены. Ввиду этого мы должны оценивать правило и все остальные (в случае наличия специфических особенностей), применяющиеся к элементу, для каждого дочернего элемента, который мы загружаем.</p>\n<p>Посмотрите на часть нашего документа:</p>\n<pre><code>&#x3C;div class="module">\n    &#x3C;p>Lorem Ipsum&#x3C;/p>\n    &#x3C;p>Lorem Ipsum&#x3C;/p>\n    &#x3C;p>Lorem Ipsum &#x3C;span>Test&#x3C;/span>&#x3C;/p>\n&#x3C;/div>\n</code></pre>\n<p>Исходя из того, что мы видим, <code>.module</code> будет отображён без использования правила, применяемого селектором по родителю. Когда будет загружен первый элемент <code>&#x3C;p></code>, нужно повторно оценить применимость селектора по родителю к <code>&#x3C;div></code>. Нужно сделать это снова для следующего параграфа. И снова, для следующего. Наконец, когда <code>&#x3C;span></code> загружен, селектор по родителю будет применен к родительскому <code>&#x3C;div></code>, и элемент нужно будет повторно перерисовать.</p>\n<p>И что теперь? Теперь, если изменится любое наследуемое CSS-свойство, каждый потомок должен будет повторно анализироваться и перерисовываться. Ох…</p>\n<h2>Почему проблему можно решить с помощью JavaScript?</h2>\n<p>Это только кажется, что JavaScript решает проблему. В общем случае JavaScript-заплатки (<em>заплатки — polyfills — части кода, обеспечивающие функциональность, которую должен обеспечивать браузер. Примечание переводчика</em>). Или регрессивное усовершенствование (или как там вы, молодежь, это сейчас называете) запускаются только один раз, после полной загрузки DOM.</p>\n<p>Для того чтобы действительно имитировать поведение CSS, любой скрипт, решающий эту проблему, должен запускаться после отображения каждого элемента на странице, чтобы определить, нужно ли применить нашу «заплатку». Помните CSS-expressions в Internet Explorer? Именно по этой причине они вызывали такие проблемы с производительностью.</p>\n<h2>Не невозможно</h2>\n<p>Появится ли когда-нибудь селектор по родителю? Возможно. То, что я опиcал, не невозможно. На самом деле — наоборот. Это значит только то, что нам придётся иметь дело с ухудшением производительности из-за использования этого селектора.</p>\n<p>Перевод оригинальной заметки «<a href="http://snook.ca/archives/html_and_css/css-parent-selectors/">Why we don’t have a parent selector</a>» <a href="http://snook.ca/about/">Джонатана Снука</a> (Jonathan Snook), опубликованной в блоге «<a href="http://snook.ca/">Snook.ca</a>».</p>',headings:[{depth:1,value:"Почему у нас нет селектора по родителю"},{depth:2,value:"Как работает CSS"},{depth:2,value:"Стиль элемента применяется в момент его создания"},{depth:2,value:"CSS селекторы анализируется справа налево"},{depth:2,value:"Правила"},{depth:2,value:"Селектор по тегу и универсальный селектор"},{depth:2,value:"Почему IE долго не поддерживал "},{depth:2,value:"Как на самом деле это делает браузер?"},{depth:2,value:"Почему у нас нет селектора по родителю?"},{depth:2,value:"Почему проблему можно решить с помощью JavaScript?"},{depth:2,value:"Не невозможно"}],frontmatter:{title:"Почему у нас нет селектора по родителю"}}},{node:{html:'<h1>Путь наставника</h1>\n<p><a href="https://twitter.com/psyw">Максим Усачёв</a> 30 июня 2016</p>\n<p>Если звезды фронтенда зажигаются, значит, кто-то их зажигает? Кто? Приоткрываем завесу тайны над темой наставничества в вебе.</p>\n<p>На написание этой статьи я решился неспроста, на это меня подвигли две вещи. Во-первых, история, произошедшая после публикации моей статьи <a href="http://css-live.ru/faq/put-verstalshhika.html">«Путь верстальщика»</a>, из-за которой этот пост уже напрашивался сам по себе — мне давно хотелось подробнее пояснить некоторые важные моменты. А во-вторых, <a href="https://youtu.be/qFeCi6E3e14?t=1345">дебютный доклад</a> <a href="https://twitter.com/ABatickaya">Алёны Батицкой</a> о пользе наставничества, ставший для меня последней каплей и одновременно толчком для написания всего этого.</p>\n<blockquote>\n<p><strong>А.Б.</strong> Хочу сказать, что все, о чем я говорила в докладе и о чем я пишу, что советую в обычной жизни, является моим личным мнением, основанным на опыте в совершенно разных сферах. Предложенные мною «рецепты» не являются истиной в последней инстанции. Вы можете составить свою программу наставничества, выбрать свой путь развития как новичка, так и наставника или использовать мои рекомендации как основу.</p>\n</blockquote>\n<p>Как вы могли догадаться, и моя статья, и доклад Алёны связаны друг с другом, и вскоре вы поймёте, как именно. Единственное — у меня к вам есть просьба. Перед тем как продолжить читать, посмотрите, пожалуйста, сам доклад, так вам будет легче понять, о чем пойдет речь.</p>\n<h3>Откуда ветер дует</h3>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADE0lEQVQoz2NgYGDQ09Pr7OycO2fOjOkg0N/fX1ZWZmFhAZRiY2VlY2NnZ2cDkswYgEFZWfny5cvfvn17//79y5cvnz9//unTpy9fvrx+/TogwB+oX5ybWVuYSY6HgYeDlYUNBTAkJyf///8fqAeo88iRI/v27Xv48OG9e/eAglU1dUbKkl0ZAYWBNhOzAm0UBfi4ODg4EQBk8+rVq0+dOnX16tXHjx+/efPm1atXT5482bNnt6KqelmMz4kFrRv6ym+sm+ShKynCxczDx88LAwwaGhoGBga2trYuLi6enp5OTk5ubm4x0dEiIiJAz2YlRU+qyZ5YmzulpbI40t1ESxmoWUhISBAMGBYuXHjhwgWga7dv375+/XojIyNWVlaghJSkJBcPX0li8JZJldOqM66s7C2N9ZOUkBAFAxEwYFiwYMGVK1fOnDlz6dKlc+fORUdHCwsLy8jIADULiYgYaqnOrc9a2py9urdSQ12Vj19ATExMXFxcAgwYuru7jx8/DtR8+vTpo0ePZmRkAI2Uk5OTlpaWk5UVFBb1dLQuT4tJSk3T1NTS1dHR1dVVVFQEygItYEhNTa2rqzt//jxQM5Csrq4GalZRVlJSVJCRlTM0NJw6dVpHe4e3hYW6qqqxiYmXlxcwCQB1Ao1gqKmpAboc6OATJ04A3d/b2wsUVVJWkVdSsTDS9XJzuXfvTlN9Y4i0tImBvoampq2NjZ2trZKSkoqKCsPkyZN37twJjCqgy4FGAA0yMjI20FSMctErCrGqjrKqirL0sdY00lPR19XR1NS0d3D0CwgEmgKMJgagO/v6+lasWHHy5MkzZ8/u3bvH2NTCy1KjLcY42VWjKkR/U0d6TqijtroKUIOKqpqfg3Wst4uxjpa2jg5DBRiUl5VmZ2WWlZV2dXYCHaatpelqohpoKlWZk1ifn6qhpmpmZm5kbOxmZTbBRW+Oh76vkaaWviFDZWXlsuXLrWwctPSM9Y3NdQ1MDIzMjEwtDEws1NQ145MzPAPCdI3M/YPCrZw8XWzs+twNl/sa+Zgb6xiZAADYEiYzaec15AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41E;&#x442;&#x43A;&#x443;&#x434;&#x430; &#x432;&#x435;&#x442;&#x435;&#x440; &#x434;&#x443;&#x435;&#x442;." title="" src="/static/1-a17649c3919baa7f1b4fc0d6c62cca47-fa387.png" srcset="/static/1-a17649c3919baa7f1b4fc0d6c62cca47-844a8.png 163w,\n/static/1-a17649c3919baa7f1b4fc0d6c62cca47-fe46c.png 325w,\n/static/1-a17649c3919baa7f1b4fc0d6c62cca47-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<blockquote>\n<p><strong>А.Б.</strong> Только придя в разработку, я заметила странную тенденцию. О новичках говорят либо плохо, либо никак. На вопросы новичков смотрят свысока. Придираются к словам, закидывают яйцами за неточные формулировки. И это в лучшем случае! Большинство просто проходят мимо. Исключения, безусловно, встречаются. Но новички в такой обстановке чувствуют себя очень неуверенно, скованно. Они сбиваются в стайки и пытаются научиться хоть чему-то между собой. Понимаете исход? На выходе получается фабрика велосипедов. Я знаю несколько таких историй. А потом вы, опытные разработчики, ругаетесь на невероятные конструкции и страшный код. Подумайте, а могли ли вы этого не допустить? Отсюда и родилась мысль, что в разработке пора начать говорить о наставничестве. Давно прижившееся в других сферах и доказавшее свою эффективность, наставничество шагает по планете. Наше сообщество уже достаточно выросло и окрепло, чтобы начать смотреть вперед на несколько шагов и передавать полученный опыт из уст в уста.</p>\n</blockquote>\n<h2>Мои личные грабли</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADYUlEQVQozwFWA6n8AH8cGHQbFpwmIKcmH7A0LrtBO7tAOsFDPac/OqdDPsdRTMhbVsliXcdlX8ZkX8FaVbEzLZogG5MjHoAcGAB6HRhmHBeeIhuyV1LbxMPUvrzdysni0tHi1tbf1NPd0tLd1NPm3dzm3t7d09PVzczatbSWOzZ5GhWHIRwAgh8bZBcWghgTqmBa0c/OzdDT2+Li2uLi2Nvb1dnYz9bWydHQ2t7f4ePi1dfW1NHQ5NzbllJPeBYRgyIdAIgrH69YMMRoONFvONeWbtKbg750c8Fvat/Avs6sqr2DgOWem9GWk7OMibaGg4lpaWs+PncdGHYfGn8gGwCTNyLNgU23flmaZ0W8e03BYi+BFw+NHwutcmePNTKCFA23KSCnJR2DGhVKDgpEOipINil/JB+KJB+FIh0AiiUaxWw1uWo2w3ZD6ZNb1o1fqXFbnmVTlC4niCskfCQgoS0nqi8ogiAbd008r5yGrZB4hCQejiUgiCMeAIFMQ5J2W6F/X79zQdGeg7ORf6WFccyehJY8MIQ4Lo9BNbiFZ4eHgHxZUrJ/XI+Hc39ORIgeGo0nIokkHwCCiINhb2yBiXzJekXUlnPTnHvUnX35uZaINy2fWEe4hmqMMidnjYyoinaqbFJwQjqPIByNJSCMKSOJIx4AcXRrfYuBip+VpHNPmXVf46uP6q2M9LaVjy4nk0I2kjYrcUJAeYB2qGxWfJaThXZznD8ynG1WgzUriiAcAHB9dYWFbKGUasKHQ659RNifY/y7l/2/mpRPQ44dGYctJ3ORipPOzIWZl30uK5FqWqpsVI01LIcjHogjHgCBhYGpdTjAhj64jU+4hDramTn0sYqpkYYqUm98LjBxLipEY2xwpKuAU1GUGxaNIh2IHhuLIR2KJB+FIR0AnldanmM/zIcqmGkv0pA16Z41voxkrJOEYFlfOD5VNzpKPDE/NjtPTT1QiiUgjScijCciiSQehiEdgiAbAJ1NTqVXQsJ9JtGILOaaM/GkNNCSaNqUd6pHOGAzPWY9SKArJIsqJjdAU102QJQiG4cjHoQhHIAgG30eGQC7U1KzVUrFfCffjjDQhi3PfiyZRy+bMiypNy2+Lia8Lya5MSrCMCeBLi4yP1SILSybLCaRJB6GIBp5HBed7XSA7hG52AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x414;&#x430;&#x439;&#x442;&#x435; &#x43D;&#x430;&#x441;&#x442;&#x430;&#x432;&#x43D;&#x438;&#x43A;&#x430; &#x441;&#x440;&#x43E;&#x447;&#x43D;&#x43E;!" title="" src="/static/2-b0537d0ab12b510afc5eb045cb0682e1-fa387.png" srcset="/static/2-b0537d0ab12b510afc5eb045cb0682e1-844a8.png 163w,\n/static/2-b0537d0ab12b510afc5eb045cb0682e1-fe46c.png 325w,\n/static/2-b0537d0ab12b510afc5eb045cb0682e1-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>В недалёком 2012 году я написал уже упомянутою мной статью под незамысловатым названием <a href="http://css-live.ru/faq/put-verstalshhika.html">«Путь верстальщика»</a>, где я поведал читателям о своем собственном пути в веб-разработке. В целом статья получила множество положительных откликов, и, казалось бы, всё круто, есть профит, но не тут-то было. В один из разделов этой статьи всё-таки закрался червячок, я бы даже сказал, не просто червячок, а такой жирный огромный червь. Это был раздел «Наставник». В этом пункте я описывал, как мне помогали и помогают учителя, и какие плоды приносили занятия с ними.</p>\n<p>Я совершил одну непростительную ошибку, за которую мне до сих пор стыдно. Дело в том, что в то время ещё не было ни таких замечательных обучающих сайтов, как <a href="https://htmlacademy.ru/">«HTML Academy»</a>, ни подобных ресурсов, да и вообще, в Рунете не было столько информации, как сейчас. Поэтому я взял и сдуру послал всех новичков на <a href="https://htmlforum.ru/">htmlforum.ru</a>, сказав им, чтобы они искали себе учителей именно там, как в своё время поступил и я сам.</p>\n<p>После нехилого резонанса статьи тысячи новичков восприняли мой посыл буквально и толпами повалили на форум в поисках веб-сэнсэя. Ежедневно на форуме создавалось по сто одинаковых тем, в которых начинающие разработчики предлагали себя в качестве учеников и просили, чтобы им в срочном порядке выдали наставника. Бедные модераторы уставали, не успевая каждый день удалять и отвечать на множество похожих тем, и продолжалось это, не поверите, <strong>аж несколько лет</strong>, моему коллеге даже пришлось <a href="https://htmlforum.ru/topic/47881-%D0%BA%D0%B0%D0%BA-%D0%BD%D0%B0%D0%B9%D1%82%D0%B8-%D0%BD%D0%B0%D1%81%D1%82%D0%B0%D0%B2%D0%BD%D0%B8%D0%BA%D0%B0%D0%B3%D1%83%D1%80%D1%83-%D1%83%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D1%8F-%D1%81%D1%8D%D0%BD%D1%81%D1%8D%D1%8F-%D0%BF%D0%BE-%D0%B2%D1%91%D1%80%D1%81%D1%82%D0%BA%D0%B5/">создать отдельную тему</a>, дабы усмирить пыл неофитов! А ещё, как назло, всё это совпало с тем, что мне нужно было уйти из веба на полтора года по семейным обстоятельствам, т.е., по сути всё это происходило в моё отсутствие. Вот такой вот непростительный вброс я сделал и наломал дров. Теперь вы понимаете, почему мне до сих пор так стыдно перед нашими модераторами?</p>\n<p>Конечно, мне поступали предложения вообще удалить этот раздел из статьи, но я был решительно против этого, поскольку, во-первых, из песни слов не выкинешь, а во-вторых, я всё-таки рассказывал собственную историю, и мне не хотелось что-то из неё вырезать.</p>\n<h3>Этикет наставничества</h3>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADYUlEQVQozwFWA6n8AE8PElURE1gTE14VFWYWGWkPElouOqqusrSvra2rqby5t8vHxbq7uF01QlgNEWxpao+QkHp8fEUtLk4MDwBSChBvMimTgnmHXlBvGBVqDxNfMT6UnKaXnJ+SlpujqK2epKmJlplVMD1mERVUHiFTHyFQHB9QFhlXEBMAVQkPeUA4mqOkiHFpghsXgBgeYhcfVB8vgTI5jT84i0E4gDg3dys1fR0lhxoeexcbdBUZbxQZaRUZXBIWAFwMEXs7MbS3tZl8dH8YFCIGCR4WEmo4LcZJJtFdH9RfG85XIqg+KoYhJXwZH3YYHW0VGWESFVsPE2IUFwBqDhOJQTazwMGYfHR4FxIAAACZemPTlXLBVRfWbRLbcA6/YA+Hfl2YlZKEfn2EdnaDcHF9amtYUFBDFRYAgRQckDgsm4J2lFxMiRkYSy8o2KeJsY9uyWMZzm4Ky3IOvF8EraJ/29DNwra2wbW0vK6u0L+/h4uLRhYXAJMcIpUeIZwbGpYbGoxDGsqUc7OTeJlkSchbGb15JrmDMa1gD66jhr7CwKSlpK6wr7e5ucrKynmAf1ETFQCUGyGbHySXHCeiRxq6chOzazpxJimbMSq7Ty61bzSvejqrZjSon5LR0tLCwcDBwMDHx8fZ19dyeHhRDQ8AcygpfCcwmTIZu24U6I0cmUgVsxoopzQzfjAwolAkqGQlh0Qwbl1cf4WFg4WFiIeIh4iHk5OTU1RVWhARAGMsLWoyNrJTErBnFMl3GNJ3HLUpKK0qMI0tL7Y0KLZMJqMfJGg2N11HSFNDQ0RDQk5ISEhERDk0NWgXGQB7JSlhOTO/Zg/ihhnRexm5bBrFaxe5ZCXHiHGtMymiPh2kIyugJyuwIyidNDZ0dHJ3NTVqGx1uHiCMGh0AjSIoTj81tGocvncjyHcZWks/R1VTSVdMQ1RcRk5RR1RNOkdSN0hSLURNO05YN1NaPEdQOz9HNkFKbCguAJwiJ0I0Ll9AH0E0KFRCKm1IP2FMVZIpMpgrMpcsM5gpM5orMposMpYtNJQqL5ApMI4nLnBCRWZGSJgdIgCgHSNZPDhUT0g+PD4yNz89SFphX2RrN0fEJivKJizIJyzIJizHJivHJivGJyzDJizIHiSUPD6OQ0SwGiBajjSZbwtJYQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x42D;&#x442;&#x438;&#x43A;&#x435;&#x442; &#x43D;&#x430;&#x441;&#x442;&#x430;&#x432;&#x43D;&#x438;&#x447;&#x435;&#x441;&#x442;&#x432;&#x430;." title="" src="/static/3-bb8b197d9edac6cdb367760ae0a6be5e-fa387.png" srcset="/static/3-bb8b197d9edac6cdb367760ae0a6be5e-844a8.png 163w,\n/static/3-bb8b197d9edac6cdb367760ae0a6be5e-fe46c.png 325w,\n/static/3-bb8b197d9edac6cdb367760ae0a6be5e-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<blockquote>\n<p><strong>А.Б.</strong> После доклада ко мне обратилось несколько человек с просьбой подсказать, что нужно делать, чтобы найти наставника. Всем им я дала примерно одинаковые советы.</p>\n<ol>\n<li>Будьте активны. Явно выражайте интерес к происходящему в мире разработки в целом и в вашем регионе в частности. Посещайте доступные для вас конференции, встречи и митапы.</li>\n<li>Не останавливайтесь в развитии. На то время, пока вы ищите наставника, вы не должны переставать самостоятельно обучаться. Продолжайте совершенствовать свои знания, изучайте новое, набивайте руку на тестовых проектах, пополняйте портфолио. Согласитесь, с наставником будет интереснее обсуждать глобальные вопросы, нежели выравнивание по вертикали.</li>\n<li>Найдите людей, чьей работой вы восхищаетесь. Чаще всего это публичные люди. Они с удовольствием идут на контакт. Последите за их деятельностью, с кем они общаются, кто в их окружении. Расширяйте свой круг виртуальных знакомств. Беря курс на крутых разработчиков, вы и сами для себя ставите высокую планку.</li>\n<li>Спрашивайте в сообществах, чатах, на форумах. Но, пожалуйста, перед тем как написать вопрос, постарайтесь самостоятельно найти решение. Обязательно поищите информацию в англоязычном интернете. И только после того, как вы испробовали на ваш взгляд все возможные варианты, идите задавать вопрос.</li>\n<li>Обратите внимание на того, кто на ваш взгляд дал наиболее развернутый ответ на ваш вопрос. Подумайте, вызывает ли этот человек у вас симпатию. Постарайтесь найти его проекты и изучить их. Если вы поняли, что хотели бы чему-то научиться у этого специалиста, то попросите разрешения написать ему лично в следующий раз.</li>\n<li>Будьте готовы к отказу. У человека может не оказаться свободного времени. Отнеситесь с пониманием и продолжайте свои поиски.</li>\n<li>Не будьте навязчивыми. Уважайте чужое время и пространство. В самом начале личной переписки предложите обговорить удобный для вас обоих формат общения.</li>\n<li>Не обязательно официальное предложение. Иногда общение складывается естественным образом или в таких условиях, где официальное предложение стать наставником будет просто неуместно. Старайтесь перенимать любой опыт, который будет вам доступен. Но я лично считаю, что заданный вопрос о наставничестве будет означать честный и открытый договор между двумя людьми, которые понимают природу взаимоотношений. Так вы скорее всего избежите неловкости и недопонимания.</li>\n<li>Благодарите наставника при любой возможности. Если у вас есть возможность высказать свою благодарность публично, то обязательно сделайте это. Таким образом вы внесете вклад в личный бренд наставника в сообществе. Про личную благодарность я даже напоминать не буду.</li>\n</ol>\n</blockquote>\n<h2>Не было бы счастья, да несчастье помогло</h2>\n<p>На самом деле из этой истории я вынес для себя несколько полезных уроков.</p>\n<h3>Говорите о наставничестве</h3>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAC5ElEQVQoz1VTa08TQRTlR2BCTPQDfjQxGHwGExSrEEDAFAIorxqNVkETQJQUEIlgGl4aIMYIQhGwVeQRWqylLVge0gJtgTatS5ftbmd2drdLkX/gtAao82Eyyb3n3jPn3BvDHhwIIcPgGz8ZCGgIEMuKHBtEEESiPEKiEOQ4LpISPjGHYJy7I0LEAgh2eCGEWDdFmb3Eos+PIOR45N7yGoyGjfV1nudhpEDMv5a8ILgczuV+FecHIUHUOKyXtZNH1KrYkfZzw9VtK/Miyb4pLUs7e7qmtl4Ug1FgANDurufr+Fxc/HJL3U+Skqhr6vRXu03J5do8qfpmjfGLratqvkwykJL8vrk2GPqDIVG0Ob63vzOjMkv56IZnZS39x2DR+O003atT44MDbveCVjNRkqSvSPmWe8XcmrZN2RESMOFIZ5blGdA62dckk+pS0rfNFvs2ObZJaOZMY9qhEAJ29efRSxJtptSUm6krLfP7CYS4MDj8YVF0TEz69ObpwvyehBM9jU33KsrNg4rl9ixDY/JiT5F9RLX4ULb0oNh0Pev73fuBAEQI7dOGLOB5h2pYmXhGcuxot1KZLZcn5l8rqizIK8psfpGl1rR/H/q4WH5rubpE+/gJYKOsgoEA2tuzN7Y4jp80pksRADNW2/mS1AvynDhpxvNnqX2f6qwT03aFbK1BNtf1juF59kBtFku3uztbo/iVJNnS6gKCYF2YVRQmyIsvZufE30mNfdv7kjCbF6oKDU+rSMJHMww67IxngOO8m5tLVmuAC3KIZ2iKmPkw21lqfF2gb8kjbEbaR1k0o6sGI0OSeCj+GxIM9pGk07lus5oA8GPr5ucXNpxrbo83AKCwE3KvrhJeD/ObsBlm2GjaWDq/32+xWFZXTCZDLUWFnejoaNPr9fUNDSRJ0jQ9NK3z+rZCweDA1JTT4wlGJjQmaikYXIKmYdhDvBKiSFGUy+XCpXE0gEUNiwMwQbi/GX8B0dprytUUPFwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x413;&#x43E;&#x432;&#x43E;&#x440;&#x438;&#x442;&#x435; &#x43E; &#x43D;&#x430;&#x441;&#x442;&#x430;&#x432;&#x43D;&#x438;&#x447;&#x435;&#x441;&#x442;&#x432;&#x435;." title="" src="/static/4-3e19f9984f2003011b32ad52a259a802-fa387.png" srcset="/static/4-3e19f9984f2003011b32ad52a259a802-844a8.png 163w,\n/static/4-3e19f9984f2003011b32ad52a259a802-fe46c.png 325w,\n/static/4-3e19f9984f2003011b32ad52a259a802-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Первым делом я осознал, что тема наставничества сама по себе очень тонкая, насущная и волнующая массы. Эта тема всегда будет актуальна и будет постоянно пользоваться спросом. Ведь недаром несколько лет кряду новички мучили модераторов на форуме, а вокруг доклада Алёны поднялся такой ажиотаж, что в Слаке несколько дней не утихали споры о пользе и вреде наставничества.</p>\n<p>Сама тема наставничества крайне живая и полезная, хотя с последним эпитетом многие не согласятся, но об этом мы поговорим чуть позже. Эта тема напомнила мне очень крутой <a href="https://www.youtube.com/watch?v=xPPCzryZK44">доклад Вадима Макишвили «36»</a> — такой же животрепещущий и способный затронуть самые тонкие струны нашей души. Если вы не совсем понимаете, о чём я, то обязательно посмотрите доклад Вадима.</p>\n<p>Но если наставничество — такая важная вещь для сообщества, почему же о ней так мало говорят? Вы часто видели доклады или хотя бы статьи на эту тему? Вот видите, и я не часто. Я считаю, что наш долг — делать веб лучше, а говорить о наставничестве — это как раз и означает делать веб лучше. Не стесняйтесь, пишите статьи, делайте доклады, рассказывайте собственные истории (пусть даже и негативные), делитесь тем, как это происходит в ваших компаниях, да и просто говорите об этом! И тогда, возможно, все больше желающих учить и учиться будет появляться в наших рядах!</p>\n<h3><del>Уважение</del> Наставника ещё надо заслужить</h3>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABgUlEQVQoz2NgwAYYwSQTI5TByMhAAmBlZlQQZrdU5DaV5xbnYyVBJxsLo7EcV4AuX5y5SJSJUKypoJwgK9w5OAFEmp+DyUKZ199EyluLx1mDL95OxkVLiLDjIbI8bAxupspt+UFRLrrxXsZ95eHGGjLgICDkdUawCh8Ho8Rgh5gAhzBvm8xIFzlpcbgUYc3KsqINGT41qe6Ty0Kqkj1YWFiICy6I8bwioYFOSVZihf66Nq72IDczEY4uRrB2JkZNWyH7YCt7S1m3cAa3TGYZNaKiG6iTW1CFRduR2zUqtiA6vjxFNDCVzTiCjY0PKUxxAA5+BUFZa3YpJ2NX/z9rTb8sNzR09pLQiRdT9cMTYCAJZjYeQVkbDnGb0OCYKRXhd2cYX5lunhTmamcfKKabyiWggMvxICEOXilOURMNbav1E9Jzo51m1wZ1F3oG+PuLKblIaEcJyFiCFTJht51P3IBH2lFL3ynEy01Cw1neM1YiupzHPJFfwlJCK0JExRtNPQAh10NOAGer/AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41D;&#x430;&#x441;&#x442;&#x430;&#x432;&#x43D;&#x438;&#x43A;&#x430; &#x435;&#x449;&#x451; &#x43D;&#x430;&#x434;&#x43E; &#x437;&#x430;&#x441;&#x43B;&#x443;&#x436;&#x438;&#x442;&#x44C;." title="" src="/static/5-57324bc7e4f546446875f72e4ede44ef-fa387.png" srcset="/static/5-57324bc7e4f546446875f72e4ede44ef-844a8.png 163w,\n/static/5-57324bc7e4f546446875f72e4ede44ef-fe46c.png 325w,\n/static/5-57324bc7e4f546446875f72e4ede44ef-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Временами, мысленно возвращаясь к своей статье и к этому злосчастному пункту «Наставник», я осуждаю себя за то, что не догадался упомянуть один важный ключевой момент, из-за которого, возможно, высшие силы и наградили меня учителем. Ведь, чтобы меня взяли на поруки, изначально мне пришлось изрядно попотеть.</p>\n<p>Я не просто пришёл на форум, создал пост и получил наставника, как, видимо, подумали многие. Долгое время мне приходилось доказывать, что я чего-то стою, что у меня есть потенциал. Я старался не пропускать ни одну тему на форуме, пытался помогать другим, отписывал тонны комментариев, брался за любые, даже непосильные для меня задачи, пробовал себя то в одном, то в другом деле, я фактически сутками жил на форуме. То есть, я делал <strong>всё</strong>, чтобы меня заметили и захотели обучать. А главное, мне настолько нравилось моё занятие, что в те моменты я даже и не думал о каких-то там наставниках.</p>\n<p>Приведу простой пример — героиня моей статьи Алёна Батицкая. Как человек со стороны, я прекрасно вижу, что представляет из себя эта девушка. Я вижу, что она пишет в Твиттере, как она общается, какие статьи она переводит, она даже выступает с докладами! И я понимаю, что этот человек пойдёт далеко, что она любит то, чем занимается, и с каждым днём эта любовь только крепнет. Она не очередной пассажир. Понимаете, о чем я?</p>\n<p>Я никого не хочу обидеть, но сегодня не так много альтруистов, готовых тратить своё драгоценное время на кого попало. Мне кажется, что всеми своими действиями нужно доказывать своё право на место под солнцем. Нужно давать понять окружающим, что ты можешь, хочешь, а главное, что ты достоин, чтобы тебя заметили. Нужно выказывать свои стремление и желание расти и быть лучше. Другими словами, <strong>наставника нужно заслужить</strong>! Мало просто прийти на тот же форум и потребовать учителя.</p>\n<blockquote>\n<p><strong>А.Б.</strong> Новичку стоит помнить, что наставничество — дело добровольное. При этом довольно трудозатратное. Учитель должен ощутить, что он получит пусть и нематериальную, но выгоду от работы с вами. Что его время не будет потрачено зря. Требовать в этом деле вообще нельзя. Между учеником и учителем должна пробежать искра. Они должны комфортно ощущать друг друга в рамках этих партнерских отношений. Каждый должен с удовольствием отдавать и с благодарностью принимать. Взаимное уважение и стремление сделать друг друга лучше — основа крепких отношений между наставником и подопечным.</p>\n</blockquote>\n<h3>Два лагеря</h3>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACoUlEQVQoz23S7U9ScRQH8B82NRdb60XNrbVVW3O69apX5eqNOfOibYRCYhk2MUgQEFciPgEX7sUnkMGUQIn0giB6udcpykzTVMC0yaarJih31Yu22voTwjWnUNt5+znnu3MOKCPiaVVOxBlEHCJijwP71ywRAK+eQteBbp2GpBYaAv9ihj/OmdkvJhIi/+agh6Tr3wMkdMEQofeEU1qk4eTA4qmYePGr+8tvfjAhsE7BdiwfxrO7I6LZz0VjUQCvZaD/w0n5YDresf7NsfPTufurd36LbyPZzpXCNuu9V8uSuT22N5qNrgLk/zjGnE5w5n8wA9/r8W0+9k6CBQVzeyyN9ZEtyMUiLJK6OrQLtEfDT+AYRCS4/pDSZ1e6xx/6tnmOIM/38ZKTutg8cr6DzFO5S9TwHZ06U7sIkDANWTvG5UnsP+ASkWlvw5apvs0xqhyyN7qJAnj4epPmRqOqUizBhHkMnRigHzKSMg2XEpTIRza4xjYtktCAeHbUsOFC+qUVNrWwWcTz8G81yZ6ck7/JUi0BNETTHeMYRB5UeKNy03iFY1JjUUz0KT69Vu04NZNa2URnneF5pZB3/4rg2WVBH71zDqDhk/jQMwiKZZ+ttls5GNZi6R8wK7EBmc/W1tpUdZdflS+U5Sg6zkj0ydi01NiH22JPbrwc1dYQPrFrRuIJMMk1Nr5U5V+CxgLZ3d6b7abcHlduq+JsywjQb9F0q8eYQeyz8OgLcnyQ1JjdvXbcNEyYMI/BN27ssXRWI1Jmu7RIVgNpa+lqHKCRDCQ1dilJQXiMi0c4eFg65UJmzEa/2ejRM/XSwq6nBc21efK62zp5FryQfqq/voyMQ2QCIqhSP1WCU8nj5RpDoGslU/M2Rxs8DS/QNMtHv32I/wBNKb4xfq7T+QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x414;&#x432;&#x430; &#x43B;&#x430;&#x433;&#x435;&#x440;&#x44F;." title="" src="/static/6-17c3eb8a9fef7101a38d8a8b805a2b8a-fa387.png" srcset="/static/6-17c3eb8a9fef7101a38d8a8b805a2b8a-844a8.png 163w,\n/static/6-17c3eb8a9fef7101a38d8a8b805a2b8a-fe46c.png 325w,\n/static/6-17c3eb8a9fef7101a38d8a8b805a2b8a-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>К сожалению, далеко не все разделяют мнение о пользе наставничества. Здесь люди делятся на два лагеря. Первые одобряют это, а вторые, <strong>которых большинство</strong>, считают, что наставничество — это утопия, путь в никуда, и что веб-сэнсэй может принести только вред. Их мнение сводится к тому, что у них не было никаких наставников, что их никто не учил, и что при этом они всего добились сами, своими силами. Они считают, что если рядом с вами будет человек, который будет тыкать вас в ошибки, искать за вас информацию в интернете и всюду «подтирать» за вами, то вы не сможете стать самостоятельными, не научитесь справляться своими силами, а значит веб-разработка не для вас.</p>\n<p>Поскольку я принадлежу к первому лагерю, поначалу я пытался сопротивляться и отстаивал свою точку зрения. Но позже я осознал, что это лишняя трата времени, и что первые никогда ничего не докажут вторым, и наоборот. Я постарался по-взрослому проанализировать эти вещи и понял следующее. Если обратить внимание не на слова, а на дело, точка зрения несогласных с наставничеством вполне имеет право на жизнь. Во-первых, потому что их большинство, а во-вторых, просто потому, что среди них есть очень толковые ребята, которые на деле доказали, что можно всего добиться самому. У меня у самого куча таких знакомых, например, тот же <em>@s0rr0w</em> из Слака «<a href="http://slack.web-standards.ru/">Веб-стандартов</a>», которого наверняка все знают по его прикольной аватарке и огромному опыту!</p>\n<p>Я пришёл к мнению, что в этом деле не стоит ссориться, ругаться и устраивать драки. Мы не в политике и не на войне, мы делаем общее дело и ходим под одним <del>небом</del> вебом. Вставлять друг другу палки в колёса — не выход. Если начинающий разработчик чувствует, что ему нужен учитель, то зачем его отговаривать от этого, пытаться разубедить? Посоветуйте лучше хорошего коллегу, который занимается наставничеством, или по крайней мере не навязывайте свое отношение. У каждого свой путь, как и свое мнение.</p>\n<blockquote>\n<p><strong>А.Б.</strong> Большая просьба к опытным, старшим разработчикам — реагируйте адекватно на джунов, которые приходят и с порога требуют наставника. Как и во многом другом, в природе наставничества они еще не до конца разобрались. Не злитесь на них, не пытайтесь убедить, что «так бывает только в сказках». Лучше пошутите по-доброму и дайте почитать эту статью. В подобных случаях я всегда советую вспомнить как вы сами были новичками. Ваш негатив очень сильно ранит джунов. Они и так не уверены в себе, понимают, что умеют еще очень немного. Но их неопытность не недостаток. Стремление к знаниям и желание развиваться — их основной козырь. Не ломайте им крылья.</p>\n</blockquote>\n<h2>Почему я должен делиться опытом? Я сам научился всему!</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADYUlEQVQozwFWA6n8AGt0ZJyOYK2eaqiQYr+znNfTw9XSxdHV0tfa1tfa19XY1cnSzZy0poOXi3WIfHyRhXiMgXKGe3CDd219cgBpdmmXimCklGSwl2ra08vKyMnQzszc3NzR1NTP09PQ09LO09Brd3A0NzUqKytHTkl1iX58jH91hXhuf3MAbn5wfXVUe3NTnIJWspJjdmpQl49trrqtmJ+Jo6eQmaKOiqOWNTo2LScjRT84Ih8fQ0xIp6iPsaSKipF/AGx+c3p1V4t8V5aHX5d9VXhdQJNtTYWOfLiWbtGjdLSfeo6onW1xbLGeht7FpoV3Z2d2bamnjbWmiIaHdAB5j4WBe2CIcE6BTzSgQCKvRCKcSyttcmC8mG/bqHa2oHuEl5CUiH6qm4armoSai3mHioKsp420qo6Ch3YAhZuQe39pblg8gzAYrkYlwEsmnkwuXmRSm45vs5p1lpF0YWhlh352lYt8kod5saWWenl4qaKNwryggot8AGp+dGZzYWNZP1ckE5M4HZM3G4dWP2d6aHl6Y4N2W2R6aD5CSmxmaYmIhaCclpCPjlJMUXN8cpGWgWVwYwBaaV5kal9ddWRRNiR5IgmAVT+hk3tteGlwdmR/hGlcbmQwNEdEOzuZl5StratnXlswLDtFVlxZcmJZbmEAWnNlYHZmPl9gKERTVVBOvqaNlpmGWHVoZYF0Y4h4O0dRMzhSQT9JcGtolZKOSkdQMTVNO0JUWnVnYHhoAFhmVVJXSAY8WgBDbwBViz5ebW9jSIB9anFuXWBdSElDRUA9SlpNR2dNN2dQPE5AOT46Qz04QVFTRFdyYwBlRCYtNDUAO2UCTn4BWpQAV5YxTVyjgmOFaEywlHd/YkR+VCuCVy96Ui1ORz5JR0JwTy9wSyhhPyFVTjkAWTgbTzwnPT01EkBcAFGFAGyzB16YNUxVKmqQmI9/fV09gFkzgFo1eVQvWlRLVFlZZEgve1MvcUwra0UlAFExF2A7Gl0yDzEvKABCbQFDawFfngBbnwFOhkMyImlAHW1GJGpDImdBIls5HVs6HmQ+HWA8Hlo5HlU0GgBJKxRRMhhZNhg/LhwAPWIARXEKSW0bUWo/UEpYVD1YVkFWUjxVUTtPTDpPSTZVSjNORTBGPCo+Iw9BNSKg4VupKzwr9wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x43E;&#x447;&#x435;&#x43C;&#x443; &#x44F; &#x434;&#x43E;&#x43B;&#x436;&#x435;&#x43D; &#x434;&#x435;&#x43B;&#x438;&#x442;&#x44C;&#x441;&#x44F; &#x43E;&#x43F;&#x44B;&#x442;&#x43E;&#x43C;? &#x42F; &#x441;&#x430;&#x43C; &#x43D;&#x430;&#x443;&#x447;&#x438;&#x43B;&#x441;&#x44F; &#x432;&#x441;&#x435;&#x43C;&#x443;!" title="" src="/static/7-778e7c2ff04776b30852ff44f0bfa027-fa387.png" srcset="/static/7-778e7c2ff04776b30852ff44f0bfa027-844a8.png 163w,\n/static/7-778e7c2ff04776b30852ff44f0bfa027-fe46c.png 325w,\n/static/7-778e7c2ff04776b30852ff44f0bfa027-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Многие противники наставничества говорили эту фразу. Почему они смогли, а нынешняя молодежь не может?</p>\n<p>Стоит оглядеться и сопоставить количество доступных технологий, скорость развития индустрии, разницу подходов, методологий, принципов. Когда учились вы — было несколько сайтов, пара хороших книг и узкий круг таких же, как вы. Было гораздо меньше информации. Было проще понять, что в каком порядке изучать. Было меньше технологий, которые требовались для работы. Вы получили хорошую основу, начали ее применять, а затем постепенно наращивали багаж знаний.</p>\n<p>Сегодня доступность и количество информации является не только плюсом, но и минусом. Неопытный человек теряется, пытается ухватиться за все подряд и в итоге ничего толком не может освоить. За редким исключением.</p>\n<h2>Наставничество — не работа</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADYUlEQVQozwFWA6n8ABm78Ru78hu78hy78B677h657R+47B288hjD/RrC+hy88RvB+B3A9R688Bu88x278B247Bq78Ca/8lrO9QAnvvIWufEYufEVufMRuvgSvfgMwv8cptVCfI9Ef5U6dIg9anocotAVs+kjtt0Ytugdwv4TufQ4w/Jj0fUAUcr0E7jwELfxHLjmM7DBOJCtRpGodWpcmVw7hXFbjoJst248mVUtiVlFnIQjeXUzX5OhRsHfTMr3Wcz0AFHK9Ry57gK1/EWpnciICKJRHKxUFvZ/KfODMfSDMvl+Kf2CKMdnIptIFdh1H7pUHcFFCXOdjFPT/2XO8gBfzvU5wfECt/sjmrPceSPRbSyzWB/fikniiEjxfSrfhkbXu6bag0bYdDXcjGHFWzDEQBdtjJhL0/+A1fQAc9P2UsjxHMD8EJ3S228l53812HMt5eHcz8C02m4h1oxX2eXu2ZBZ3Ihe2JJwyFcit1Iyi2hNcqm5g9//AIHX9m7S90S/63FxYsSBT7rOx9CFS9eedseQZtd0LMtyM71vOOp+Mu5+L/B+KNFdJbhjSHhjU5Spq4XY9gCD0vV+2P5yrsaPTR+Ujnu98frHonzobRaaXz6iiHZ8XlK3Xif7hjDjfzfXhELNXiXDjXmdmI+BrLuX3PsAldX2fM74jcPceJSdnol1rcnJpLSv8oAxrmAvhVRepWZ1y3M6+HwmrJd0j7Kk2l4ismJKqHlpfrfSod7/AKna+JXS+H/A54etwbqDWrOBXKB7WL6ARuN7Ls9xUd55U/aAK/uAKdqKScuKTb1jDKxULm9ORUtdZpnF4QCo1veo1faQzPlxu/Opji7hbwjTbCOKbkbDdjvIci2maDGcaUKebkmkbk6je0uZjTGDd2dZWlxEQj+IqcAAp9L1p9H0pM/zmsz6o7iZoKqUr7rMmaa0QmZ4SoisRJPGPJC+c5aqRGF1ksr1rdf7ptX7jKGxi6rDqNX5AKjQ+KfR+6fR+6bL8Je33py53G2Mp3WKm2x3fICQnqGpto+drpOmumlxepi21qjS/anS/KfT/qvV/qnR+QCiwuegsMabmZ2fk42yn4++p5OUh3leWVLTwa/hzLjVwq/RvarDrZu9rJ6ikoiUjY2ZpbekuNKhuNWiwOR5K+l5U34v+AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41D;&#x430;&#x441;&#x442;&#x430;&#x432;&#x43D;&#x438;&#x447;&#x435;&#x441;&#x442;&#x432;&#x43E; &#x2014; &#x43D;&#x435; &#x440;&#x430;&#x431;&#x43E;&#x442;&#x430;." title="" src="/static/8-0c49bcd9d290fe0e5a4a2f783837f65b-fa387.png" srcset="/static/8-0c49bcd9d290fe0e5a4a2f783837f65b-844a8.png 163w,\n/static/8-0c49bcd9d290fe0e5a4a2f783837f65b-fe46c.png 325w,\n/static/8-0c49bcd9d290fe0e5a4a2f783837f65b-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Старшие товарищи, не воспринимайте наставничество как обязанность, работу, за которую к тому же не платят. Я, как и моя соавтор, как любой, кто говорит с вами о наставничестве, не пытаемся навязать вам неприятное занятие, которым вы непременно должны заняться. Наставничество — это определенный этап развития вас, как члена сообщества.</p>\n<p>Веб является молодой сферой. Сообщество находится на начальном этапе развития внутренних отношений. По моему личному мнению, пришло время задуматься о подрастающем поколении. Условия изменились, выживать в одиночку все сложнее. В первую очередь, у вас должно появиться желание отдавать безвозмездно. Если в отношениях будут фигурировать деньги или иные материальные блага, то речь будет идти уже о репетиторстве в той или иной форме.</p>\n<p>Вашего времени должно хватать на еще одного человека. При этом не обязательно быть на связи постоянно. Вы можете обговорить с подопечным удобный формат общения. Например, письмо с вопросами раз в неделю, созвон по Скайпу два раза в месяц или общение только в вечернее время в чатах. Никто не ждет от вас жертвенности. Вам должно быть комфортно.</p>\n<p>Если посмотреть на <a href="https://ru.wikipedia.org/wiki/%D0%9F%D0%B8%D1%80%D0%B0%D0%BC%D0%B8%D0%B4%D0%B0_%D0%BF%D0%BE%D1%82%D1%80%D0%B5%D0%B1%D0%BD%D0%BE%D1%81%D1%82%D0%B5%D0%B9_%D0%BF%D0%BE_%D0%9C%D0%B0%D1%81%D0%BB%D0%BE%D1%83">пирамиду Маслоу</a>, то наставничество находится на ее вершине, в пункте «Самоактуализация».</p>\n<p>Наставничество — только одна из сотен возможностей внести свой вклад в сообщество, частью которого вы являетесь.</p>\n<h2>Живые примеры</h2>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAADRElEQVQozxWQ/08adxjHP78ua7rslyVogaN8uzs4OL4pFRERjuO+wd15oHATZSN68qVoUzu1RfGAdrpaq10azVyzWbNkyxohS3R2tsmabE2arEu3ZH/Prsk7eZ5fXs/7/X6A4coYZIiboITFTBmuxE1GyoGIbmwSd+dxV96Ly5pQWDLqKdiWslposyl5FSIhI2HUjwGNtFxlHEjWZp6olnf//OOfN2/+e/XqrSZtf/363/f77381G0cYUgp4FRybdsBZmyVlgkiAIjmPqxTwVbx4qTBVf/Lkm6dPj3q9k3fv/j45eXZ8/P35+dmLl88rtdsozOAuzuMuDvirPnwWcxSA1z2r3fN7KvFoVa/v/+jDDxiSkOWp1dXby8srh4ffnp792vv5py+/mC/ks0QiHvDlBv3XAz7Fh8+9h/3euUFfLRxSEBQp8vHOykJOnlpaWtrb2zs4ODj/7cWz7/bf/vjVUk3JTua8binorw/45v1eBQwGqqMjt6hkhyIWXBH6E/ZmVrm52Wl1e7+cnp51u939/YNapfzD4eOWqk5MZEOhmXh0LRRcGPCVAZVUU9w9Pr0tcrcMIxmQaF6iV9o7j19eXJw/v+h2ew8f7ipKZUNt32mseTx4PFYdF3c4tkMSa4CmWhzTSae32eSiPcKD1D0wPLfYaK3dWT4+Pmq3VVnOaS9QN9RKuRyJDJOJusBvp9i7LNMGdFJlmU4qtckzTV0gD8jVy6FibHRmJFxkmTpNLSQIheWy8+Vaafb6WLTEMut8eotj72quIJloMnSbZTuS8AANfg5Qpi+sZKW9jLQrCjvj4gNBfJQeIutB641ETOS3BP6+VlPzo5IbIEE0tKHx4/z9a9FFYI6gI5UJjeE3RWFL5DeFzNcpT2xSf3katvL0upaRY9paXpJYB7HoKhFvkGSTpdTw6A1gjWLheYHTKqkc22LpDZrb4gKMhA8JqIsnlxm2o7WlyKZGAdiWR2yyAy44kYLVlgG2sT5E9Dg+wxxFTW7HDOyYTdvdIuKXrVDQKTmdJRwrOdFpxC6DPl1C308bDWkLlIEg4ZJu4GPdNbNJgq1TduundotstcjDGOExRYbQUQxOQwYJMvD6fqZPR/4PT24iMrggJMoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x416;&#x438;&#x432;&#x44B;&#x435; &#x43F;&#x440;&#x438;&#x43C;&#x435;&#x440;&#x44B;." title="" src="/static/9-3fc9977f4e5acbe9ac8d62e64d725eba-fa387.png" srcset="/static/9-3fc9977f4e5acbe9ac8d62e64d725eba-844a8.png 163w,\n/static/9-3fc9977f4e5acbe9ac8d62e64d725eba-fe46c.png 325w,\n/static/9-3fc9977f4e5acbe9ac8d62e64d725eba-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>К этому моменту у многих из вас уже наверняка возник вопрос: «Чувак, что ты нам за дичь втираешь уже столько времени, у тебя реальные примеры есть? Кому твоё наставничество вообще помогло, а?». На самом деле примеры есть, и прямо сейчас мы их рассмотрим.</p>\n<p>На наставничестве специализируются целые организации. Например, ребята из <a href="https://htmlacademy.ru/">«HTML Academy»</a> уже давно и довольно успешно обучают молодое поколение веб-разработчиков. Они сосредоточены на фронтенде и могут запросто пройти с вами путь от новичка до профессионала, стоит вам только захотеть. На их сайте есть множество бесплатных уроков, а также платные интенсивы и курсы, на которых как раз можно нанять преподавателя. И <a href="https://htmlacademy.ru/blog/91-online-intensive-html-css">многочисленные положительные отзывы</a> только подтверждают факт того, что наставник — это здорово!</p>\n<p>Есть программы наставничества и у Яндекса, например, <a href="https://academy.yandex.ru/events/frontend/shri_msk-2016/">«ШРИ» (Школа разработки интерфейсов)</a>. Они набирают начинающих фронтенд-разработчиков с любым опытом работы и обучают их всем премудростям вёрстки. Обучение делится на два этапа: первый состоит из курса лекций, а на втором ученикам выпадает возможность поучаствовать в разработке совместного проекта. Занятия проходят в офисах Яндекса, а в качестве наставников выступают сами разработчики Яндекса, которые делают интерфейсы для Поиска, Почты, Карт и других сервисов. Кстати, «ШРИ» проходит в разных городах и абсолютно бесплатно, поэтому у каждого из нас есть шанс туда попасть. Если есть желание, можете почитать <a href="https://habrahabr.ru/company/yandex/blog/189056/">целую увлекательную историю</a> одного из учеников этой школы.</p>\n<p>Но, пожалуй, особое везение — найти личного наставника, готового поддерживать добрым словом и полезным советом несколько лет подряд, на разных этапах профессионального роста. Это явление настолько редкое, что примеры надо еще поискать, но у меня как раз есть несколько.</p>\n<p>По вышеописанному нетрудно догадаться, что я всегда был двумя руками за наставничество. За что бы я ни брался, у меня всегда были учителя. Например, вёрстке меня обучал искусный мастер своего дела <a href="https://htmlforum.ru/profile/4521-klierik/">Алексей Филиппович</a>, JavaScript — упомянутый выше великий и могучий <a href="https://github.com/s0rr0w">s0rr0w</a> (да, не удивляйтесь, <strong>s0rr0w</strong> приветствует оба лагеря, но с нюансами, о которых он поведает в комментариях), ну а сегодня (и уже на протяжении лет шести) моей путеводной звездой является Илья Стрельцын, <a href="https://twitter.com/SelenIT2">@SelenIT2</a> в Твиттере, человек, которому я безмерно благодарен, и который способен дать не только профессиональный, но и жизненный совет.</p>\n<p>Вы можете спросить, мол, и что путного вышло из всего этого наставничества? Да, собственно целый проект — <a href="http://css-live.ru/">css-live.ru</a>, который благодаря наставничеству благополучно живёт и здравствует и по сей день! Чем не доказательство?</p>\n<h3>Полегче, новичок!</h3>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACTUlEQVQoz22SS08TURTH+RquXLggceHCHRsTdyRKXaD4QoGEZ7BNCTGhjaQiNCSGaNVKhVRbiw1lSlstwlhTLNSoVCh2pvN+P/qwU/0OHjG2tfYs7tw5Ob9zz+PfVvrPisViuVz+8deq1SqchmGAsymyrfGnUCjIsgwXiMMwjCRJiqIYmsZwnOd5o1KBvK1hXddFUZQkiWUZnucgi6ZpcHIcLwg8RRI0RUmSCGHNMKQEbyaTiURjz/0vpx0zCIIAKQoCgWMERdOcJEoKTTOQvVZ/W61g4CPR6Kn2E90d7WdPHjOdP6do2k4C9c8PfQzb9hOeg08JliEUVa31Xoeh0dfriOn0cUd/59TFDvPN7hxO5A73kaeW1Qd9a48HY55Rp/kCSZAVw/jTfA3Wv1cMNB4dvtLlctrttwbGh/qzh7nt9xvo4mWXrcc7dz3sHg6t+KCR5rKLQBeKB5/Ti/N2x23LHcvgrH2Sovm9VOxL4Br5Zjy7emN5YVIrwcJKtZnXYVlRku/QqMcZfOFeejg3a5v4hlN7m48yK714ZOyD9yoaXxMlWIHaYtqiLG+F16e6OgPT1tFLpt6+gVjQh7p7+Ldj3MZIMmD5ms3RNNViVWCKoqRTqVdLy8/u3puxTgRDIVjsFvIk4bdmkZEF8xmf674gSaqqtoBBEnmCoFmWYOid9G4+n4e4PMlgOLm7jQa9ruRmHFprFNk/8mQYBhgcx1iWxTBcEOAlEdQG34rxE9ahqkqjwusweOFxKJ7jfmtTPTJdLxwJXoI5NQkb7BcK4JZ9Cv41rAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x414;&#x432;&#x430; &#x43B;&#x430;&#x433;&#x435;&#x440;&#x44F;." title="" src="/static/10-05aacaa511aa0d735d74fc6f16fd8f01-fa387.png" srcset="/static/10-05aacaa511aa0d735d74fc6f16fd8f01-844a8.png 163w,\n/static/10-05aacaa511aa0d735d74fc6f16fd8f01-fe46c.png 325w,\n/static/10-05aacaa511aa0d735d74fc6f16fd8f01-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<blockquote>\n<p><strong>А.Б.</strong> Новичок, не думай, что с нахождением наставника ты решишь все свои проблемы. Не воспринимай это как единственный способ развития. Тебе по-прежнему придется делать все самому. Много читать, практиковаться, пробовать. Разница только в том, что рядом будет человек с опытом, с которым ты сможешь обсудить не до конца понятные тебе вопросы, узнать, верно ли твое решение или это очередной велосипед, просто поговорить на интересные темы. Наставник подскажет тебе, что стоит освоить в первую очередь, а к чему можно вернуться позже. Но он не твой персональный репетитор, не твой домашний учитель, не Гугл. Относись с уважением к его желанию вложить в тебя силы и время. Благодари его за опыт, которым он делится. Благодарность — единственная валюта в этих отношениях. Если ты способен что-то дать в замен — давай, не раздумывая. Наставничество — как дружба, нуждается во внимании обоих.</p>\n</blockquote>\n<h2>Под занавес</h2>\n<p>Несмотря на внушительный объём статьи, тема наставничества была раскрыта далеко не полностью. Я попытался рассказать свою историю, а Алёна дала множество замечательных советов. Но, тем не менее, здесь не хватает ваших историй, связанных с наставничеством, тех, которые произошли лично с вами. Не стесняйтесь, делитесь своими примерами в комментариях, уверен, что они окажутся полезными для сообщества! Либо, если не хотите афишировать, можете написать Алёне на <a href="mailto:batickaya.a@gmail.com">почту</a> или <a href="https://www.facebook.com/ABatickaya">на Фейсбуке</a>.</p>\n<blockquote>\n<p><strong>А.Б.</strong> Пока в русскоязычном интернете нет специализированных площадок, на которых могут встретиться подопечные и наставники. Людям хочется найти друг друга, но иногда для этого нужна общая точка сбора. Я решила, пока возможно, собирать у себя контакты желающих и по возможности сводить учителей и учеников. Для этих целей создана <a href="http://goo.gl/forms/pMC7UVjI4mfWdBU33">небольшая анкета</a>. Если вам интересно найти своего наставника или подопечного — обязательно заполните ее. Это эксперимент, попытка собрать некую общую базу желающих. Я буду вручную отслеживать ответы и высылать контакты. Также на днях <a href="https://gitter.im/FrontendTutors/general">в Гиттере собралась рабочая группа</a>, которая планирует создать специализированный русскоязычный портал для этих целей. Присоединяйтесь!</p>\n</blockquote>\n<h2>Благодарности</h2>\n<p>Огромное спасибо моему соавтору <a href="https://twitter.com/ABatickaya">Алёне Батицкой</a> за такую прекрасную поддержку и ценные дополнения к статье. Также нельзя не поблагодарить <a href="http://positivecrash.com/">Анастасию Бакай</a> за потрясающие иллюстрации. И, конечно же, отдельное спасибо всем нашим учителям!</p>\n<blockquote>\n<p><strong>А.Б.</strong> От себя хочу сказать спасибо людям, которые были и остаются рядом на пути моего развития: Вера Жукова, Татьяна Тен, Дмитрий Фитискин и Вадим Макеев. Это далеко не полный список тех, кто нашел в себе силы и желание поделиться своим опытом.</p>\n</blockquote>',headings:[{depth:1,value:"Путь наставника"},{depth:3,value:"Откуда ветер дует"},{depth:2,value:"Мои личные грабли"},{depth:3,value:"Этикет наставничества"},{depth:2,value:"Не было бы счастья, да несчастье помогло"},{depth:3,value:"Говорите о наставничестве"},{depth:3,value:"Уважение"},{depth:3,value:"Два лагеря"},{depth:2,value:"Почему я должен делиться опытом? Я сам научился всему!"},{depth:2,value:"Наставничество — не работа"},{depth:2,value:"Живые примеры"},{depth:3,value:"Полегче, новичок!"},{depth:2,value:"Под занавес"},{depth:2,value:"Благодарности"}],frontmatter:{title:"Путь наставника"}}},{node:{html:'<h1>Прогрессивное улучшение меня расстраивает</h1>\n<p>Перевод «Progressive Enhancement Makes Me Sad» Хейдона Пикеринга.</p>\n<p>Последнее время только и разговоров в защиту прогрессивного улучшения и «универсальных» (изоморфных) приложений. Оказывается, серверный рендеринг улучшает быстродействие, надёжность, совместимость и упрощает парсинг содержимого.</p>\n<p>Я поддерживаю эти аргументы из душевной щедрости.</p>\n<p>Но есть и глубокая озабоченность, связанная с применением прогрессивного улучшения и изоморфизма, о которой стоит поговорить. И похоже только у меня хватит смелости, чтобы пойти против толпы. Не благодарите.</p>\n<h3>1. Это сложно :(</h3>\n<p>Создавать приложения, которые либо рендерят статическое содержимое и потом улучшают его с помощью <em>JavaScript</em>, либо работают как приложения сразу на сервере и клиенте — это очень, очень сложно. Типа <em>очень</em>.</p>\n<p>Нет, конечно, это значит, что больше пользователей получит доступ к содержимому быстрее и надёжнее — с этим я не спорю. Но кто сказал, что вообще <em>будут</em> какие-то пользователи? Или какое-то <em>содержимое</em>, если уж на то пошло. Половина проектов, над которыми я работаю, уходят в стол из-за реорганизаций компании. В чём смысл тратить всё это дополнительное время на сложности прогрессивного улучшения? Да не глупите.</p>\n<p>Но это даже не самая главная проблема. Главная проблема в том, что моя идентичность построена вокруг интеллектуальной компетенции. Это значит, что, когда встречаюсь с интеллектуальной сложностью, я довольно быстро теряю эту самую компетенцию.</p>\n<p>Поэтому, прежде чем приступать к архитектуре универсального приложения, спросите себя: «Правда ли мне нужно, чтобы кто-то в страшном когнитивном диссонансе взбесился на меня?»</p>\n<p>Думаю нет. <em>(Это будто бы звучит как угроза, гы-гы. Сорьки, лол.)</em></p>\n<h3>2. Мне это не нужно</h3>\n<p>Прогрессивное улучшение делает жизнь пользователей легче в некоторых ситуациях, вроде медленных сетей, слабых устройств и т.п. — это правда. Не поймите меня неправильно, я двумя руками за то, чтобы создавать приложения для пользователей, но не забыли ли мы о ком-то ещё? Раз уж я создал чёртово приложение, разве у меня нет права голоса в том, как оно создано?</p>\n<p>Конечные пользователи — это такое неизвестное множество, и мы мало что можем с этим сделать. С другой стороны, я уже знаю много чего о <em>себе</em> потому, что я — <em>это я</em>. Мне стоит пользоваться всеми преимуществами такой инсайдерской информации.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*yV_qZBOF9830yr8CbtHIzQ.png" alt="Целевой рынок или «верхушка колокола»"><em>Целевой рынок или «верхушка колокола»</em></p>\n<p>И что же я знаю о себе? Ну, для начала, у меня вполне неплохое окружение: оптика, 16 Гб оперативки. А ещё я не выношу работы с прогрессивным улучшением, <strong>фу, гадость</strong>. (См. пункт №1).</p>\n<p>Хотя больше всего я люблю делать новые фичи. Чем меньше времени мне придётся потратить на стабильную архитектуру (скукота), тем больше времени останется на создание фич. Знаете, как говорят: <strong>больше фич — лучше экспириенс!</strong> Все в выигрыше.</p>\n<h3>3. Это провоцирует плохое поведение</h3>\n<p>И если мы лезем вон из кожи (а это действительно заставляет вас лезть из кожи) чтобы убедиться, что содержимое дойдёт слабеньких устройств с крошечными лимитами трафика на дерьмовеньких сетях, мы просто даём аудитории отговорку, чтобы не обновляться.</p>\n<p>Я хочу, чтобы ты был лучше, насколько это возможно!</p>\n<p>Ну и поезда. То есть у вас проблемы с тем, чтобы загрузить срендеренную на клиенте блокирующе-зависимую от скриптов страничку по <em>2G</em> потому, что вы в поезде? Решение прямо у вас под носом: <strong>хватит ездить на поезде.</strong> Либо найдите себе комнату в центре города рядом с работой, либо спите под столом. Я так и сделал, почему вы не сможете?</p>\n<p>Ну правда, примите уже ответственность.</p>\n<h3>4. Кругом только веб-приложения</h3>\n<p>Веб изначально был рождён для публикации и распространения текстов в целях приобретения и утверждения знания. К счастью, эти тёмные и примитивные годы остались позади нас и мы перешли к лучшим вещам, вроде создания приложений, которые смотрят на фотографии собак и пытаются определить их возраст.</p>\n<p>Нет никакого «документа» в основе приложения, которое определяет возраст вашей собаки. Ну, то есть, как бы он вообще выглядел? Картинка чьей-то собаки с подписью «Я не знаю сколько мне лет, извините» под ней? Это убого. Я бы скорее предпочёл не увидеть вообще ничего, если уж начистоту.</p>\n<p>Нет, если вы не хотите знать, что думает ваш браузер о возрасте вашей собаки, пожалуйста — выключите <em>JavaScript</em> или прокатитесь на поезде (см. пункт №3). Вы всё равно не заслуживаете знать, сколько лет вашей собаке.</p>\n<p>Но потом не приходите ко мне в слезах, когда кто-нибудь рядом спросит сколько лет вашей собаке, и вам придётся сказать «Я не знаю, где-то между 5 и 8, наверное» вместо «Я не знал, но кто-то запостил это довольно забавное веб-приложение на Фейсбуке. Давайте покажу. Минутку. Вот оно. Секунду. Извините. Сейчас. А, ладно, проехали».</p>\n<p><em>Перевод «<a href="http://www.heydonworks.com/article/progressive-enhancement-makes-me-sad">Progressive Enhancement Makes Me Sad</a>» Хейдона Пикеринга, в ответ на «<a href="http://jamesknelson.com/universal-react-youre-doing-it-wrong/">Universal React: You’re doing it wrong</a>». Опубликовано с разрешения автора. Перевод и редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</em></p>',headings:[{depth:1,value:"Прогрессивное улучшение меня расстраивает"},{depth:3,value:"1. Это сложно :("},{depth:3,value:"2. Мне это не нужно"},{depth:3,value:"3. Это провоцирует плохое поведение"},{depth:3,value:"4. Кругом только веб-приложения"}],frontmatter:{title:"Прогрессивное улучшение меня расстраивает"}}},{node:{html:'<h1>Метрики загрузки страницы</h1>\n<p>Что все они означают?</p>\n<p><img src="https://cdn-images-1.medium.com/max/2218/1*APIpb-0RXtZ9sN2aJQgqFQ.png"></p>\n<p>Измерение производительности загрузки страницы — это сложная задача. Чтобы сделать её проще, <a href="https://medium.com/google-developers">инженеры компании *Google</a>* вместе с сообществом работают над прогрессивными веб-метриками, или ПВМ.</p>\n<p>Что такое ПВМ и зачем они нужны? Для начала, давайте сделаем небольшой экскурс в историю браузерных метрик. Некоторое время назад мы имели всего две точки (события) для измерения производительности:</p>\n<ol>\n<li>\n<p>DOMContentLoaded срабатывает, когда страница загрузилась, но скрипты только начали выполняться.</p>\n</li>\n<li>\n<p>Событие load срабатывает, когда страница полностью загрузилась и пользователь может полностью с ней взаимодействовать.</p>\n</li>\n</ol>\n<p>Если взглянуть на <a href="https://chromedevtools.github.io/timeline-viewer/?loadTimelineFromURL=drive://0ByCYpYcHF12_YjBGUTlJR2gzcHc">трейс сайта *Reddit</a>* (<em>Chrome DevTools</em> помогает нам, помечая эти точки синей и красной линиями), мы можем увидеть почему эти метрики не так полезны, как хотелось бы.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2152/1*VTyhl1PZdQxqAdCW3eXXMg.png" alt="Трейс сайта *Reddit*."><em>Трейс сайта *Reddit</em>.*</p>\n<blockquote>\n<p>Сегодня мы видим, что window.onload не отражает восприятие пользователя, как это было когда-то. <a href="https://www.stevesouders.com/blog/2013/05/13/moving-beyond-window-onload/">Стивен Саудерс</a></p>\n</blockquote>\n<p>Конечно. Так же понятны и недостатки DOMContentLoaded во время парсинга и компиляции <em>JavaScript</em>: выполнение этих операций для больших скриптов может занять достаточно много времени. Например, на мобильных устройствах. Упомянутый выше трейс был замерян в условиях эмуляции <em>3G</em> и показал разницу 10 секунд между DOMContentLoaded и load.</p>\n<p>С другой стороны, load сработал очень поздно, чтобы можно было проанализировать узкие места в производительности загрузки страницы. И главный вопрос: как пользователи <em>воспринимают</em> загрузку страницы** **с момента старта до полной загрузки?</p>\n<p>Почему это восприятие так важно? Читайте подробнее <a href="https://developers.google.com/web/updates/2017/06/user-centric-performance-metrics">в статье разработчиков *Chrome</a>*, где ещё раз подчеркивается проблема load.</p>\n<p>Рассмотрим график: ось <em>X</em> показывает время загрузки, ось <em>Y</em> — количество пользователей, которые ожидали какое-то время. Далеко не для всех пользователей загрузка страницы происходит меньше, чем за 2 секунды.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2800/1*gw7eB5MF4SDAk1TGHSUlkg.png"></p>\n<p>Если вернуться к нашему трейсу, то событие load, которое заняло 17 секунд, ничего нам не говорит о том, как пользователь воспринял загрузку страницы. Что он видел все эти 17 секунд: пустую страницу, частично загруженную? Был ли загруженный контент заблокирован, так что пользователь не мог поставить курсор в поле или прокрутить страницу?</p>\n<p>Имея ответы на эти вопросы вы можете:</p>\n<ol>\n<li>\n<p>Улучшить ощущения от работы сайта;</p>\n</li>\n<li>\n<p>Привлечь больше пользователей к вашему приложению;</p>\n</li>\n<li>\n<p>Увеличить выгоду для владельца продукта (пользователи, заказчики, деньги).</p>\n</li>\n</ol>\n<p>Поэтому ребята из команды <em>Chrome</em> попробовали прочитать мысли пользователей и предугадать какие же вопросы они себе задают во время загрузки страницы:</p>\n<ol>\n<li>\n<p>**Что происходит? **Произошла ли навигация успешно;</p>\n</li>\n<li>\n<p>**Это то, что мне нужно? **Отрендерилась ли страница, достаточно ли там контента, с которым можно взаимодействовать;</p>\n</li>\n<li>\n<p>**Уже можно пользоваться? **Можно ли, наконец, взаимодействовать со страницей или она всё ещё занята;</p>\n</li>\n<li>\n<p>**Это восхитительно? **Испытывал ли пользователь негативный опыт зависания скролла, анимация, медленных шрифтов.</p>\n</li>\n</ol>\n<p>Если события DOMContentLoaded и load не могут ответить на эти вопросы, то кто может?</p>\n<h2>Прогрессивные веб-метрики</h2>\n<p>ПВМ — список метрик, цель которых помочь разработчикам определять узкие места в производительности загрузки страницы. В отличие от событий DOMContentLoaded и load, ПВМ предоставляют разработчикам более детальную информацию.</p>\n<p>Давайте начнем разбираться с каждой из метрик на примере трейса <em>Reddit</em>, который мы упоминали выше.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2856/1*-zjNpHphoKaaZJgG7omu2w.png"></p>\n<h2>Первая отрисовка</h2>\n<p><em>First Paint (FP)</em></p>\n<p>Я немного слукавил, говоря что у нас есть только две метрики. <em>Chrome DevTools</em> также предоставляют ещё одну метрку — первая отрисовка. Это момент когда страница только начала отрисовываться. Говоря другими словами — это время, когда пользователь видит пустую страницу впервые. Подробнее читайте <a href="https://github.com/w3c/paint-timing">в спецификации</a>.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*QtXNkY2vUWEj5NvZbiRtOg.png" alt="Первая отрисовка сайта [MSN](https://www.msn.com/)."><em>Первая отрисовка сайта <a href="https://www.msn.com/">MSN</a>.</em></p>\n<p>Чтобы понять, как это работает, можно взглянуть на графический слой (<em>GraphicsLayer</em>) в <em>Chromium</em>.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*rzyN24hIkj74TpJj93qsVg.png" alt="Упрощённый графический слой."><em>Упрощённый графический слой.</em></p>\n<p>Событие первой отрисовки срабатывает, когда только начался отрисовываться графический слой, но не картинки, <em>SVG</em> или <em>Canvas</em>. Эта метрика давала хоть какую-то информацию и её использовали сполна. Когда она ещё не была стандартизирована, использовались разные техники:</p>\n<ul>\n<li>\n<p>Привязывался requestAnimationFrame;</p>\n</li>\n<li>\n<p>Отлавливались загруженные <em>CSS</em>-ресурсы;</p>\n</li>\n<li>\n<p>Даже использовались события DOMContentLoaded и load.</p>\n</li>\n</ul>\n<p>Но несмотря на все усилия, она имеет низкое значение. Картинки, <em>SVG</em> или <em>Canvas</em> могут быть отрисованы задолго после срабатывания первой отрисовки под влиянием большого размера страницы, <em>CSS-</em> или <em>JS-</em>ресурсов.</p>\n<p>Первая отрисовка не считается частью ПВМ, но понимание процесса работы графического слоя поможет в дальнейшем разобраться с остальными метриками. Итак, другие метрики были нужны, чтобы отдавать информации об отрисовке контента.</p>\n<h2>Первая отрисовка контента</h2>\n<p><em>First Contentful Paint (FCP)</em></p>\n<p>Это время, когда пользователь видит что-то полезное, отрисованное на странице. То, что отличается от пустой страницы. Это может быть всё, что угодно: первая отрисовка текста, первая отрисовка <em>SVG</em> или первая отрисовка <em>Canvas</em>.</p>\n<p>В результате пользователь может задать вопрос: что происходит?** *<em>Начала ли страница загружаться после того, как я ввел адрес в строке браузера и нажал *Enter</em>?</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*UduDmCWTDefC6CHubA-lTQ.png" alt="Первая отрисовка и первая полезная отрисовка."><em>Первая отрисовка и первая полезная отрисовка.</em></p>\n<p>В <em>Chromium</em> первая отрисовка контента срабатывает во время реальной отрисовки картинок, текста (кроме того, что ждёт загрузки шрифтов) или <em>Canvas</em>. В результате разница между первой отрисовкой и первой отрисовкой контента может занимать от миллисекунд до секунд. Потому иметь метрику которая отображает реальную отрисовку контента очень важно, <a href="https://docs.google.com/document/d/1kKGZO3qlBBVOSZTf-T8BOMETzk3bY15SC-jsMJWv4IE/edit#">см. спецификацию</a>.</p>\n<h3>Чем она важна для разработчиков?</h3>\n<p>Если первая отрисовка контента занимает очень много времени то:</p>\n<ul>\n<li>\n<p>Возможно, есть проблемы на уровне соединения;</p>\n</li>\n<li>\n<p>Ресурсы (например, сама HTML-страница) очень тяжелые и чтобы их доставить нужно время.</p>\n</li>\n</ul>\n<p>Чтобы уменьшить влияние этих факторов, читайте <em>«<a href="https://hpbn.co/">High Performance Browser Networking</a>»</em> Ильи Григорика о сетевой производительности.</p>\n<h2>Первая значимая отрисовка</h2>\n<p><em>First Meaningful Paint (FMP)</em></p>\n<p>Это время, когда весь главный контент появился на странице. В результате пользователь может оценить: это то, что мне нужно?</p>\n<p><img src="https://cdn-images-1.medium.com/max/2622/1*835Kq5Mzw87L8XRoXXyKIw.png" alt="Первая отрисовка, первая отрисовка контента, первая значимая отрисовка."><em>Первая отрисовка, первая отрисовка контента, первая значимая отрисовка.</em></p>\n<p>Что считается главным контентом? Когда показаны:</p>\n<ul>\n<li>\n<p>Шапка и текст блога;</p>\n</li>\n<li>\n<p>Содержимое для поисковиков;</p>\n</li>\n<li>\n<p>Критичные для интернет-магазинов картинки.</p>\n</li>\n</ul>\n<p>Не считаются главным контентом:</p>\n<ul>\n<li>\n<p>Спиннер или что-то подобное;</p>\n</li>\n<li>\n<p>Невидимый текст или <em>FOUC</em>;</p>\n</li>\n<li>\n<p>Только навигация.</p>\n</li>\n</ul>\n<p>Первая значимая отрисовка — это отрисовка, которая следует за большим изменением раскладки. В реализации <em>Chromium</em>, отрисовка рассчитывается с использованием <a href="https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/core/layout/LayoutAnalyzer.h&#x26;sq=package:chromium&#x26;type=cs">*LayoutAnalyzer</a>*, который запоминает все изменения раскладки и находит время того изменения, которое повлияло больше остальных. Это и будет первая значимая отрисовка, <a href="https://docs.google.com/document/d/1BR94tJdZLsin5poeet0XoTW60M0SjvOJQttKT-JK8HI/edit">см. спецификацию</a>.</p>\n<h3><strong>Чем она важна для разработчиков</strong>?</h3>\n<p>Если главный контент не был отрисован долгое время, значит очень много ресурсов (картинки, стили, шрифты, скрипты) имеют высокий приоритет загрузки и в результате блокируют первую значимую отрисовку</p>\n<p>Мне бы не хотелось копировать сюда все возможные техники, как этого можно избежать, потому вот вам ссылки:</p>\n<ul>\n<li>\n<p><a href="https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf">Preload, Prefetch And Priorities in Chrome</a>, <a href="undefined">Addy Osmani</a></p>\n</li>\n<li>\n<p><a href="https://css-tricks.com/the-critical-request/">Critical Request</a>, <a href="undefined">Ben Schwarz</a></p>\n</li>\n<li>\n<p><a href="https://medium.com/@fox/talk-the-state-of-the-web-3e12f8e413b3">The State of the Web</a>, <a href="undefined">Karolina Szczur</a></p>\n</li>\n<li>\n<p><a href="https://youtu.be/6m_E-mC0y3Y">Practical Performance</a>, <a href="undefined">Paul Irish</a> и <a href="undefined">Sam Saccone</a></p>\n</li>\n</ul>\n<h2>Визуально готов</h2>\n<p><em>Visually Ready</em></p>\n<p>Метрика разрешает сказать что страничка выглядит «почти» загруженной, но браузер еще не закончил выполнять скрипты.</p>\n<h2>Задержка ввода</h2>\n<p><em>Estimated Input Latency</em></p>\n<p>Эта метрика определяет как плавно приложение реагирует на ввод пользователя. Но прежде чем рассказывать детали хотелось бы обратить внимание на терминологию.</p>\n<h3><strong>Длинные задачи</strong></h3>\n<p>Под капотом браузер оборачивает пользовательский ввод в интерфейсные задачи и складывает в очередь главного потока. Помимо этого, браузер должен парсить, компилировать. выполнять скрипты на странице (задачи приложения). Если время для каждой задачи приложения занимает много времени то интерфейсные задачи могут быть заблокированы пока не будет завершена задача приложения. Как результат страница может отвечать на пользовательский ввод с задержкой и быть «непривлекательной».</p>\n<p>Говоря простыми словами, длинные задачи** **— те, для которых парсинг, компиляция или выполнение скриптов занимает больше чем 50 миллисекунд, <a href="https://w3c.github.io/longtasks/">см. спецификацию</a>.</p>\n<p><em>API</em> для длинных задач реализован в <em>Chrome</em> и используется для расчета занятости главного потока.</p>\n<p><img src="https://cdn-images-1.medium.com/max/2170/1*gfsd1xrSI0-uvO1kEPWbDw.png"></p>\n<p>Возвращаясь к задержке ввода: пользователи ожидают, что страница будет реагировать без задержек, но если главный поток занят обработкой каждой длинной задачи, то станет заметно замедление реакции на ввод. Ощущения от работы с приложением довольно важны, и чтобы избавиться от таких проблем, я рекомендую прочитать <em>«<a href="https://developers.google.com/web/fundamentals/performance/rail">Measure Performance with the RAIL Model</a>»</em>.</p>\n<h2>Первое взаимодействие</h2>\n<p><em>First Interactive</em></p>\n<p><strong>Уже можно пользоваться?</strong> Да, именно этот вопрос задает пользователь когда видит визуально готовую страницу и хочет с ней взаимодействовать. Первое взаимодействие считается случившимся если удовлетворены все условия:</p>\n<ul>\n<li>\n<p>Произошла первая значимая отрисовка;</p>\n</li>\n<li>\n<p>Сработал <a href="https://developer.mozilla.org/ru/docs/Web/Events/DOMContentLoaded">DOMContentLoaded</a>;</p>\n</li>\n<li>\n<p>Страница визуально готова на 85%.</p>\n</li>\n</ul>\n<p>Метрика первого взаимодействия разделена на две метрики:</p>\n<ol>\n<li>\n<p>Время до первого взаимодействия (TTFI)</p>\n</li>\n<li>\n<p>Время до первого последовательного взаимодействия (TTCI)</p>\n</li>\n</ol>\n<p><a href="https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/edit">См. спецификацию</a>. Причины этого разделения:</p>\n<ul>\n<li>\n<p>Чтобы определить минимальное взаимодействие, когда интерфейс отвечает неплохо но возможные небольшие задержки;</p>\n</li>\n<li>\n<p>Когда приложение или страница полностью интерактивны и строго отвечает условиям <a href="https://developers.google.com/web/fundamentals/performance/rail">*RAIL</a>*.</p>\n</li>\n</ul>\n<h2>Первое последовательное взаимодействие</h2>\n<p><em>Time to First Consistently Interactive (TTCI)</em></p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*PjsJKmbhL-bjzO9IsOUWsg.png"></p>\n<p>Используя реверсивный анализ, который подразумевает анализ трейса с конца, находится период, когда загрузка ресурсов неактивна на протяжении 5 секунд и в этот период отсутствуют длинные задачи. Такой период называется тихое окно <em>(quiet window). *Время после тихого окна</em> <em>и перед первой, с конца,</em> <em>длинной задачей будет временем до *первого последовательного взаимодействия</em>.</p>\n<h2>Время до первого взаимодействия</h2>\n<p><em>Time to First Interactive (TTFI)</em></p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*6hOtyvMGRnvuhBd9Z4jvyg.png"></p>\n<p>Определение этой метрики отличается от первого последовательного взаимодействия. Трейс анализируется со старта и до конца. После того, как произошла первая значимая отрисовка, находят тихое окно в 3 секунды. Этого достаточно, чтобы сказать, что страница интерактивна. Но в трейсе могут присутствовать одинокие задачи во время или после тихого окна.</p>\n<p>Одинокие задачи выполняются далеко после первой значимой отрисовки и изолированы периодом выполнения в 250 мс <em>(envelope size)</em> и одну секунду тишины до и после этого периода. Иногда одинокие задачи, время которых занимает больше 250 мс, могут сильно влиять на быстродействие страницы. Например:</p>\n<iframe src="https://medium.com/media/7b7d3ea0f81cea265117430ad6dbd13c" frameborder=0></iframe>\n<h3><strong>Чем полезны эти метрики?</strong></h3>\n<p>Они полезны когда главный поток между метриками визуально готов и* *первое взаимодействие занимает достаточно долго:</p>\n<p><img src="https://cdn-images-1.medium.com/max/2000/1*OXoC5qJELBO7ONNRTv2HbQ.png"></p>\n<p>Это одно из сложных узких мест которе приходится исправлять. Для каждого случая оно индивидуально, потому я рекомендую почитать <a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/">руководства Google об этом</a>, чтобы понимать как избежать таких проблем.</p>\n<h2>Визуально готово</h2>\n<p><em>Visually Complete</em></p>\n<p>Метрика* *визуальной готовности рассчитывается с помощью скриншотов на странице и сравнивает скриншоты состояний с применением <a href="https://sites.google.com/a/webpagetest.org/docs/using-webpagetest/metrics/speed-index">алгоритма индекса скорости</a>.</p>\n<p>Бывают случаи, когда метрику визуальной готовности измерить сложно, например если на странице есть «карусели» и другие подвижные элементы. Индекс скорости представляет медиану результатов метрик визуальной готовности. Чем меньше полученное значение тем лучше.</p>\n<p>Визуально готово на 100% — это финальная точка, когда мы можем сказать, доволен пользователь процессом загрузки или нет.</p>\n<h2>Выводы</h2>\n<p>Это были не все ПВМ, только самые важные из них. Ссылки на материалы, приведённые выше, могут вам пригодиться для более подробного изучения метри. Но ещё хотелось бы поделиться инструментами, которые помогут получить эти метрики:</p>\n<ul>\n<li>\n<p><a href="https://www.webpagetest.org/about">Web Pagetest</a></p>\n</li>\n<li>\n<p><a href="https://github.com/GoogleChrome/lighthouse/">Lighthouse</a></p>\n</li>\n<li>\n<p><a href="https://github.com/paulirish/pwmetrics">Pwmetrics</a></p>\n</li>\n<li>\n<p><a href="https://calibreapp.com/">Calibre</a></p>\n</li>\n<li>\n<p><a href="https://chromedevtools.github.io/timeline-viewer/">DevTools Timeline Viewer</a></p>\n</li>\n</ul>\n<p>Если вы хотите делать замеры вручную, то это возможно с <a href="https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver">API PerformanceObserver</a>. Небольшой пример из спецификации:</p>\n<pre><code>**const** observer = **new** PerformanceObserver(list => {\n  list\n    .getEntries()\n    *// Get the values we are interested in*\n    .map(({ name, entryType, startTime, duration }) => {\n      **const** obj = {\n        "Duration": duration,\n        "Entry Type": entryType,\n        "Name": name,\n        "Start Time": startTime,\n      };\n      **return** JSON.stringify(obj, null, 2);\n    })\n    *// Display them to the console*\n    .forEach(console.log);\n  *// maybe disconnect after processing the events.*\n  observer.disconnect();\n});\n*// retrieve buffered events and subscribe to new events*\n*// for Resource-Timing and User-Timing*\nobserver.observe({\n  entryTypes: ["resource", "mark", "measure"],\n  buffered: true\n});\n</code></pre>\n<p><em>Автор <a href="https://medium.com/@denar90">Артём Денисов</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</em></p>',headings:[{depth:1,value:"Метрики загрузки страницы"},{depth:2,value:"Прогрессивные веб-метрики"},{depth:2,value:"Первая отрисовка"},{depth:2,value:"Первая отрисовка контента"},{depth:3,value:"Чем она важна для разработчиков?"},{depth:2,value:"Первая значимая отрисовка"},{depth:3,value:"Чем она важна для разработчиков"},{depth:2,value:"Визуально готов"},{depth:2,value:"Задержка ввода"},{depth:3,value:"Длинные задачи"},{depth:2,value:"Первое взаимодействие"},{depth:2,value:"Первое последовательное взаимодействие"},{depth:2,value:"Время до первого взаимодействия"},{depth:3,value:"Чем полезны эти метрики?"},{depth:2,value:"Визуально готово"},{depth:2,value:"Выводы"}],frontmatter:{title:"Метрики загрузки страницы"}}},{node:{html:'<h1>Наша бессмысленная погоня за семантической ценностью</h1>\n<p><a href="http://nimbupani.com">Дивья Маньян</a> 9 августа 2012</p>\n<blockquote>\n<p>Мета-утопия — это мир достоверных метаданных. Когда же отравителю становится выгодно отравить колодец, то мета-воды становятся крайне токсичными очень быстро.\n<a href="http://www.well.com/~doctorow/metacrap.htm">Кори Доктороу</a></p>\n</blockquote>\n<p>Позвольте мне описать одну ситуацию:</p>\n<ol>\n<li>Вы разрабатываете сайт.</li>\n<li>И думаете: «Так. Надо бы добавить элемент».</li>\n<li>Потом думаете: «Нет. Добавление <code>&#x3C;div></code> вызывает у меня чувство вины. Каша из дивов — это ужасно, я же про это знаю».</li>\n<li>Потом: «Ну, нужно что-то ещё использовать. Например, сюда может подойти элемент <code>&#x3C;aside></code>».</li>\n<li>Погуглив три раза и прочитав пять статей, вы приходите к выводу, что в данном случае использовать <code>&#x3C;aside></code> семантически неправильно.</li>\n<li>Вы останавливаетесь на <code>&#x3C;article></code>, потому что по крайней мере это не <code>&#x3C;div></code>.</li>\n<li>Только что вы выкинули в помойку 40 минут, ничего не прибавив к вашему коду.</li>\n</ol>\n<h2>Это просто полный отстой</h2>\n<p>Эта тема поднимается уже не в первый раз. В 2003 году Энди Бадд написал статью <a href="http://www.andybudd.com/archives/2004/05/semantic_coding/">о выборе между семантической чистотой и семантическим реализмом</a>.</p>\n<p>Если ваша главная проблема с HTML5 — выяснить какая <a href="http://www.impressivewebs.com/aside-vs-blockquote-html5/">разница между <code>&#x3C;aside></code> и <code>&#x3C;blockquote></code></a> или, скажем, <a href="http://twitter.theinfo.org/29661575610630145">как правильно разметить адрес</a> — знаете, вы используете HTML5 не для того, для чего он предназначен.</p>\n<p>Разметка структурирует содержимое, но выбор элементов имеет гораздо меньшее значение, чем нас в течение долгого времени приучали думать. Давайте пройдемся по ряду причин.</p>\n<h3>Веб больше не состоит из структурированного содержимого</h3>\n<p>В золотые времена веба страницы замысливались как хранилища информации и смыслового содержимого — и ничего больше. Сейчас в вебе есть содержимое, но его смысл — производная от действий пользователей с этим содержимым.</p>\n<p>XML, RDFA, Dublin Core и другие структурированные спецификации применимы для очень важных сценариев использования, но в число этих сценариев <a href="http://www.alexa.com/topsites">не входит большинство взаимодействий</a> внутри веба. Чёрт побери, нет ни одного сайта, на котором действительно существовала бы та идеальная семантическая разметка, которую требуют эти спецификации. Об этом гораздо лучше, чем я, пишет <a href="http://web.archive.org/web/20060428021228/http://diveintomark.org/archives/2002/12/30/the_tag_soup_of_a_new_generation">Марк Пилгрим</a>.</p>\n<p>Если у вас есть содержимое, которое требует семантической чистоты: библиотечный каталог, документ с оглавлением, онлайн-книга (то есть всё, для чего имеет смысл семантическая чистота) — тогда, разумеется, верстайте его так, оно соответствовало алгоритму разметки HTML5 и спорьте сколько угодно о том, какой элемент должен быть <code>&#x3C;article></code>, а какой — <code>&#x3C;section></code>. Нет ни одного инструмента, с помощью которого пользователь мог бы напрямую, благодаря этому алгоритму, построить оглавление документа. Ни в одном браузере таких инструментов тоже нет.</p>\n<h3>Это делает содержимое доступным?</h3>\n<p>Если причина, по которой вы используете семантическую разметку — доступность для людей с нарушениями восприятия, поймите, пожалуйста, что в действительности доступность и семантическая разметка очень слабо коррелируют друг с другом по причине массового неправильного использования HTML-разметки в вебе. Я бы сослалась на пост Марка Пилгрима об этом, но он недоступен, так что <a href="http://krijnhoetmer.nl/irc-logs/whatwg/20090604#l-877">придется вот так</a>.</p>\n<p>Теги <code>&#x3C;b></code>, <code>&#x3C;strong></code>, <code>&#x3C;i></code> и <code>&#x3C;em></code> совершенно эквивалентны тегу <code>&#x3C;span></code> <a href="http://www.w3.org/TR/2011/WD-html-aapi-20110414/">с точки зрения спецификации</a>. И некоторые теги HTML5 — тоже.</p>\n<p>Как написано в <a href="http://www.html5accessibility.com/">HTML5 Accessibility</a>, практически каждый новый элемент HTML5 дает специальным возможностям для пользователей ровно столько же семантической информации, сколько элемент <code>&#x3C;div></code>. Так что если вы думаете, что использование элементов HTML5 сделает ваш сайт более доступным для людей с нарушениями зрения, подумайте ещё раз. Сколько дополнительной информации содержат теги <code>&#x3C;figure></code> и <code>&#x3C;figcaption></code>? <a href="http://www.paciellogroup.com/blog/2011/08/html5-accessibility-chops-the-figure-and-figcaption-elements/">Нисколько</a>.</p>\n<p>Недавний <a href="http://html5doctor.com/time-and-data-element/">спор (или, скорее, разгромный пост) об элементе <code>&#x3C;time></code></a> — ещё одно доказательство недолговечности семантического значения, которое связывается с тем или иным элементом.</p>\n<h3>Это облегчает поиск по содержимому?</h3>\n<p>Если великая цель, для достижения которой вы используете семантическую разметку — SEO, что ж, знайте, что большинство поисковых систем не станут доверять странице больше из-за её разметки. Единственное, что рекомендуется в <a href="http://www.google.com/support/webmasters/bin/answer.py?hl=en&#x26;answer=35291">руководстве Google по поисковой оптимизации</a> — использовать релевантные заголовки и ссылки (другие поисковые системы работают точно так же). Будете ли вы использовать элементы HTML5 или <code>&#x3C;strong></code> и <code>&#x3C;span></code> — это никак не повлияет на восприятие вашей страницы поисковыми системами.</p>\n<p>Есть другой способ предоставлять поисковым системам больше данных — использовать <a href="http://schema.org/">микроданные</a> (microdata и Schema.org <em>— прим. редактора</em>). Это никак не повлияет на положение вашей страницы в поисковой выдаче, но это <a href="http://www.google.com/support/webmasters/bin/answer.py?answer=1211158">добавит полезную информацию к результатам поиска</a> в том случае, если поисковая система посчитала ваш сайт подходящим.</p>\n<h3>Это делает содержимое портируемым?</h3>\n<p>Ещё одно широко разрекламированное преимущество семантического веба — портируемость данных. Предполагается, что все устройства должны чудесным образом понимать семантическую разметку, которая везде используется, и без всяких усилий извлекать оттуда информацию. Арье Грегор <a href="https://plus.google.com/105458233028934590147/posts/Q2Wnvy1ysBD">разоблачает этот миф</a>:</p>\n<blockquote>\n<p>… Ману Спорни сказал, что ребята, занимающиеся семантическим вебом, по результатам исследований заключили, что внешние данные (out-of-band data) сложнее держать синхронизированными с содержимым. Могу сказать, что в случае MediaWiki это не так… Единственные сценарии, которые я могу придумать для использования RDFa или микроданных вместо отдельного RDF — это либо если у вас нет достаточно хороших инструментов для генерации страниц, либо если вы хотите, чтобы метаданные обрабатывались специфическими, заранее известными клиентами, которые поддерживают только встроенные метаданные (например, поисковые системы, поддерживающие спецификацию Schema.org и т.п.). Если страница всё равно обрабатывается скриптом, и если автор скрипта имеет доступ к инструментам на стороне сервера, которые могут извлечь метаданные в отдельный RDF-поток, тогда в обычном случае опубликовать отдельный поток должно быть так же просто, как и встроенный. И это сохраняет довольно большой объём данных, который передается просто так при каждой загрузке страницы.</p>\n</blockquote>\n<h2>Что же теперь делать?</h2>\n<ol>\n<li>Никакого вреда от использования элементов <code>&#x3C;div></code> не будет, вы можете спокойно продолжить использовать их вместо <code>&#x3C;section></code> и <code>&#x3C;article></code>. Мне представляется, что мы должны использовать новые элементы для того, чтобы сделать разметку более читаемой, а не для того, чтобы добиться внутреннего семантического соответствия правилам разметки самим по себе. Если вы хотите использовать HTML5-элементы <code>&#x3C;section></code> и <code>&#x3C;article></code>, чтобы улучшить какую-нибудь текстовую документацию для того, кто действительно её впоследствии прочитает — пожалуйста, делайте это.</li>\n<li>Уже сейчас существуют иструменты, которые пользуются элементами <code>&#x3C;nav></code>, <code>&#x3C;header></code> и <code>&#x3C;footer></code>. <a href="http://www.accessibleculture.org/research/html5-aria-2011/">NVDA делает заключение о предполагаемой семантике документа</a> с помощью этих элементов. Эти элементы просто понять и просто использовать.</li>\n<li>Стандарт ARIA <a href="http://www.html5accessibility.com/tests/landmarks.html">достаточно хорошо поддерживается</a> программами, читающими с экрана, но <a href="http://www.accessibleculture.org/articles/2011/04/html5-aria-2011/">будьте осторожны</a> при их использовании с элементами HTML5.</li>\n<li>В HTML5 масса <a href="http://platform.html5.org/">новых возможностей</a>. Мне кажется, что мы должны изучать их, использовать и высказывать своё мнение, чтобы сделать эти возможности более функциональными и стабильными. Да, большинство этих возможностей предполагают, что вы понимаете JavaScript, пишете на нём и применяете те функции, которые помогают пользователям более полно взаимодействовать с вашим сайтом. Если эта задача кажется вам слишком сложной, <a href="http://www.highercomputingforeveryone.com/">учитесь писать код</a>, <a href="http://yuilibrary.com/theater/douglas-crockford/crockford-tjpl/">особенно на JavaScript</a>.</li>\n</ol>\n<h3>Что вы думаете?</h3>\n<p>Эта статья является авторским мнением и может не соответствовать мнению редакции. Согласны ли вы с автором? Расскажите об этом в комментариях. Если вы готовы высказаться самостоятельно, написав возражение — свяжитесь с нами.</p>\n<p>Перевод оригинальной записи «<a href="http://coding.smashingmagazine.com/2011/11/11/our-pointless-pursuit-of-semantic-value/">Our Pointless Pursuit Of Semantic Value</a>» Дивьи Маньян (Divya Manian), опубликованной на сайте <a href="http://www.smashingmagazine.com">Smashing Magazine</a>. Переведено и опубликовано с разрешения журнала и автора.</p>\n<p>Перевод выполнил <a href="http://www.facebook.com/vlad.andersen">Влад Андерсен</a>.</p>',headings:[{depth:1,value:"Наша бессмысленная погоня за семантической ценностью"},{depth:2,value:"Это просто полный отстой"},{depth:3,value:"Веб больше не состоит из структурированного содержимого"},{depth:3,value:"Это делает содержимое доступным?"},{depth:3,value:"Это облегчает поиск по содержимому?"},{depth:3,value:"Это делает содержимое портируемым?"},{depth:2,value:"Что же теперь делать?"},{depth:3,value:"Что вы думаете?"}],frontmatter:{title:"Наша бессмысленная погоня за семантической ценностью"}}},{node:{html:'<h1>Префикс или постхак</h1>\n<p><a href="http://meyerweb.com/">Эрик Мейер</a> 19 августа 2010</p>\n<p>В то время, как поддержка CSS в браузерах улучшается с каждым днём — включая впечатляющие успехи команды разработчиков IE9 — всё больше и больше авторов увлекаются CSS3. По этой причине им приходится сталкиваться с <em>браузерными префиксами</em> — свойствами вида <code>-*-</code>, вроде <code>-moz-border-radius</code>, <code>-webkit-animation</code> и так далее.</p>\n<p>И конечно же, по поводу этих префиксов слышится ворчание. Звучат призывы совсем отказаться от них или объединить все специфичные браузерные префиксы в один вида <code>-beta-</code>. Главная причина всего этого шума — никто, на самом деле, не хочет писать одно и то же свойство четыре или пять раз подряд только для того, чтобы, скажем, скруглить уголки.</p>\n<p>Даже если это ворчание и можно понять, оно всё равно несправедливо. На самом деле, мы должны благодарить производителей браузеров за использование префиксов и безусловно поощрять их развитие. Более того, я уверен, что префиксы должны стать основой процесса развития стандарта CSS. И я говорю это не от большой любви к повторению правил, а, напротив — от большого желания видеть последовательное развитие CSS. Я верю, что префиксы на самом деле могут ускорить развитие и совершенствование CSS.</p>\n<h2>Вспоминая ужасы</h2>\n<p>Для понимания того, почему браузерные префиксы в принципе существуют, очень поучительно будет вспомнить историю с <a href="http://www.w3.org/TR/CSS2/box.html">блочной моделью</a>, которая чуть не убила CSS на пороге второго тысячелетия. Противоречивые реализации блочной модели в браузерах привели тогда к серьёзному кризису. Для того, чтобы обезопасить себя от такой ситуации в будущем, мы должны придумать новый механизм на основе существующих возможностей языка и изобрести <em>принципиально новый</em> тип хаков.</p>\n<p>Для наших самых маленьких читателей, пропустивших всё веселье, — история произошла следующая: среди первых браузеров, поддерживающих CSS, Netscape внедрил блочную модель, найденную в CSS-спецификации. Это означало, что свойства <code>width</code> и <code>height</code> соотносились с шириной и высотой границ содержимого блока. А Internet Explorer внедрил интуитивную блочную модель, в которой свойства <code>width</code> и <code>height</code> обозначали размеры по внешней границе блока.</p>\n<p>Какая бы из реализаций ни казалась удачнее, факт оставался фактом — в тот момент на рынке существовало два браузера принципиально несовместимых друг с другом, и у каждого из них была большая пользовательская база. Дело было в конце 90-х, когда мы боролись как проклятые, чтобы вырваться из трясины предупреждений «этот сайт лучше всего отображается в…», и обычной была ситуация, когда одна и та же вёрстка отлично работала в одном браузере, но напрочь разваливалась в другом.</p>\n<p>Суть проблемы состояла в том, что каждый из браузеров не мог изменить своего поведения до зеркального соответствия другому. Представим на секунду, что команда разработчиков IE решает изменить поддержку CSS для большего соответствия спецификации. Подобный поступок привёл бы к тому, что десятки или даже сотни тысяч сайтов, работавших в IE, не просто где-то там сломаются, а буквально развалятся на части в определённых версиях браузера. И пока всё сообщество веб-стандартистов будет рукоплескать этому поступку, весь остальной мир откажется от браузера по причине полной его бесполезности. И даже если Рабочая группа CSS (<a href="http://www.w3.org/Style/CSS/members.php3">CSS Working Group</a>) решит изменить спецификацию для соответствия поведению IE, то Netscape столкнётся ровно с теми же трудностями.</p>\n<p>Таким образом и был придуман механизм переключения <code>&#x3C;DOCTYPE></code>. Вся эта история со «стандартным» (standards mode) и «хитрым» (quirks mode) режимами выросла как раз из этой ситуации. Механизм переключения <code>&#x3C;DOCTYPE></code> решал многие проблемы, но его появление спровоцировали именно сложности с блочной моделью. Вдумайтесь: из-за того, что два браузера вели себя по-разному, сегодняшние браузеры вынуждены поддерживать два основных режима обработки страниц и выбирать нужный на основании SGML-декларации, в которой <em>вообще ничего</em> не сказано про обработку страниц.</p>\n<p>Более того, все CSS-хаки первой волны были посвящены именно этой проблеме. Название классического представителя хаков той поры говорит само за себя: «<a href="http://tantek.com/CSS/Examples/boxmodelhack.html">хак для блочной модели</a>» (The Box Model Hack). Фактически, сам хак был основан на ошибке в синтаксической обработке значения свойства <code>voice-family</code>, но почему-то никто ни разу не назвал его «voice-family-хак».</p>\n<p>Самое смешное, что это был не единственный случай, в котором непоследовательность внедрения спецификации привела к проблемам. Спустя некоторое время после появления механизма переключения <code>&#x3C;DOCTYPE></code>, спасшего CSS, команда разработчиков IE внедрила некоторые CSS-свойства позиционирования. Одним из внедрённых свойств было <code>clip</code>. Наученные горьким опытом шумихи с блочной моделью, инженеры Microsoft с большим вниманием отнеслись к спецификации и сделали всё в точности так, как там было сказано.</p>\n<p>Вскоре после публичного релиза браузера, Рабочая группа CSS серьёзно поменяла принцип работы свойства <code>clip</code>. Синтаксис выглядел точно так же, однако приводил совсем к другим результатам.</p>\n<p>В очередной раз спецификация вошла в противоречие с публично доступным браузером — или, если хотите, наоборот. Окончательным решением стало возвращение к прежнему поведению и полный отказ от нового. Фактически, это свойство стало бесполезным для элементов с непредсказуемой высотой и шириной — т.е. для всех незамещаемых элементов в нормальном потоке, вроде элементов <code>&#x3C;div></code> и <code>&#x3C;p></code>. Подробнее о типах элементов (replaced, non-replaced) можно прочитать в <a href="http://www.w3.org/TR/CSS2/visudet.html">документации W3C</a>. Несмотря на то, что были предложены и другие варианты решения, они так и не были реализованы, и свойство <code>clip</code> утратило часть своей полезности.</p>\n<h2>Представим себе другой исход</h2>\n<p>Предположим, что вместо внедрения свойства <code>clip</code> разработчики IE внедрили бы свойство <code>-ms-clip</code>. В этом случае было бы не так сложно справиться с последующим изменением поведения в спецификации. Из-за того, что префикс обозначает для свойства статус «в разработке», в дальнейшем производителю браузера будет гораздо проще пересмотреть работу свойства. Таким образом, разработчики IE могли бы поменять поведение свойства <code>-ms-clip</code>, в следующем релизе и объяснить разработчикам, что они обновили экспериментальное свойство для соответствия спецификации.</p>\n<p>И даже если бы они решили, что сделать это невозможно, вся опасность «неправильного» внедрения была бы изолирована в рамках префиксной версии свойства. Другие производители браузеров могли бы внедрить новую версию свойства <code>clip</code> (со своим префиксом) и это никак бы не повлияло на то, что сделали разработчики IE. Один производитель никак не смог бы навредить своими действиями спецификации и другим производителям.</p>\n<p>В этом состоит польза префиксов: это способ показать, что свойство находится «в разработке» и не обязательно будет вести себя так же в будущих релизах; это решение для разработчиков, которым необходимо внести изменения в работу свойства; это защита от неудачной или преждевременной реализации, которая вполне может случиться при первом внедрении. Префиксы придают столь необходимую гибкость процессу развития CSS.</p>\n<p>Мы конечно можем заявить: «Когда браузер неправ по отношению к спецификации, то он должен изменить реализацию, даже если это сломает вёрстку сайтов». Благодаря предупреждению о рабочем статусе свойства, которое подразумевают префиксы, сделать это становится гораздо проще. Без использования префиксов это крайне сложно или, зачастую, просто невозможно. Microsoft так и не изменила способ расчёта <code>width</code> и <code>height</code> для устаревших сайтов — вместо этого она использовала объявление <code>&#x3C;DOCTYPE></code> для включения другого поведения для новых (теоретически, более совместимых со стандартами) сайтов. Это был очень полезный и необходимый трюк, но один из тех, что срабатывают только один раз.</p>\n<h2>И даже сейчас мы страдаем</h2>\n<p>И если вы думаете, что все эти глупости стали частью истории, вот вам два примера несовместимости, существующие <em>прямо сейчас</em>:</p>\n<p>Браузеры на движках Mozilla и Webkit обрабатывают размытие для свойства <code>box-shadow</code> по-разному, и ни одна из реализаций полностью не соответствует спецификации. И пока я пишу эти строки, длинные и жаркие дебаты кипят в рассылке www-style. По меньшей мере одной, а, возможно, и обеим реализациям размытия тени придётся измениться для достижения совместимости. То же самое справедливо и для реализаций Opera и Microsoft.</p>\n<p>Браузеры на движках Mozilla и Webkit поддерживают градиенты, используя <strong>категорически</strong> разный синтаксис для достижения простых результатов. А теперь представьте ситуацию, в которой производители браузеров внедрили бы градиенты без префиксов. В ней мы имеем три варианта:</p>\n<ol>\n<li>Выбрать, какой браузер получит градиенты, а какой нет;</li>\n<li>использовать CSS-хаки или фильтрацию браузеров для выдачи разных стилей разным браузерам;</li>\n<li>полностью отказаться от использования градиентов.</li>\n</ol>\n<p>И мы имеем здесь <em>целых три</em> варианта только потому, что градиенты, реализованные в этих браузерах, имеют очень разный синтаксис, что открывает дорогу для первого варианта. В случае, когда обе реализации имели бы схожий синтаксис значения, но различную реализацию — как в истории со свойством <code>clip</code> — у нас были бы только два последних варианта: хакать и фильтровать для выдачи разных стилей, либо просто отказаться от этой затеи.</p>\n<p>Мы уже вдоволь находились по этим граблям за всю историю развития CSS. Нет смысла наступать на них ещё раз, если первая дюжина попыток закончилась плохо.</p>\n<h2>Пре-фикс или пост-хак</h2>\n<p>Но настолько ли хороши префиксы? В конце концов, было же сказано, что префиксы — это всего лишь новые CSS-хаки. Как сказал Аарон Густавсон в <a href="http://www.alistapart.com/articles/stop-forking-with-css3/">недавней статье</a>, это:</p>\n<pre><code>-moz-border-radius: 10px 5px;\n-webkit-border-top-left-radius: 10px;\n-webkit-border-top-right-radius: 5px;\n-webkit-border-bottom-right-radius: 10px;\n-webkit-border-bottom-left-radius: 5px;\nborder-radius: 10px 5px;\n</code></pre>\n<p>…слишком напоминает вот эту историю:</p>\n<pre><code>padding: 10px;\nwidth: 200px;\nw\\idth: 180px;\nheight: 200px;\nheigh\\t: 180px;\n</code></pre>\n<p>С точки зрения чрезмерного повторения и раздражения — да, они более чем похожи. Но, с другой стороны, они принципиально различаются: префиксы дают нам контроль над судьбой наших хаков. В прошлом нам приходилось выискивать кучу ошибок парсера только для того, чтобы заставить противоречивые реализации работать одинаково, как только мы выясняли, что они работают противоречиво. Таким образом, мы реагировали на имеющуюся проблему. Использование префиксов — это упреждающий подход.</p>\n<p>Более того, префиксы — это временный хак. Со временем, когда реализация свойств станет более совместимой, браузеры просто откажутся от префиксов. И тогда авторы смогут писать всего одну строку вместо шести с чем-то для свойства <code>border-radius</code>. Без префиксов мы будем вынуждены ждать очередных сомнительных реализаций и год от года поддерживать их при помощи хаков.</p>\n<p>Поэтому создание единого префикса, вроде <code>-beta-</code> или <code>-w3c-</code> — это, по меньшей мере, полшага назад. Это, конечно, позволит производителям помечать свойства префиксом «в разработке» и делать в дальнейшем необходимые изменения, но, к сожалению, полностью закроет для авторов возможность исключать поддержку или просто отдавать различные значения каждому отдельному браузеру, в случае очередной сомнительной реализации. С точки зрения авторов, единый префикс ничем не лучше, чем полный отказ от них.</p>\n<p>Иногда мне кажется, что так же история обстоит и с методами предварительной обработки кода для работы с префиксами — серверными (при помощи <a href="http://lesscss.org/">LESS</a>) или клиентскими (куча JS-фреймворков). Использование этих инструментов позволяет просто писать правило <code>border-radius</code> и поручать им разворачивание этой строки в список необходимых правил с префиксами. С одной стороны, это уменьшает количество необходимого кода и повышает его чистоту и понятность. С другой стороны, этот подход мало чем отличается от ситуации с единым префиксом или вообще без них — всего одна неудачная реализация, и ваша вёрстка развалится.</p>\n<p>Преимущество этого способа состоит в том, что если что-то пойдёт не так, то любой автор сможет вернуться, отключить препроцессинг и написать все префиксы вручную. Или сами препроцессоры кода могут обновиться для решения проблемы. В любом случае, это некоторый перебор сложности для авторов, хотя и не такой большой.</p>\n<p>Обратная сторона этого способа более философская, но не менее важная: пряча свойства с префиксами за обработчиком, авторы могут забыть о том, что используют экспериментальные свойства, которые могут измениться. Неосознанно они могут начать думать, что используют что-то устоявшееся и стабильное, хотя это может быть совсем не так.</p>\n<h2>Делаем префиксы действительно важными</h2>\n<p>Я настолько твёрдо уверен, что префиксы — это хорошая вещь, что готов перейти к следующему логическому заключению: префиксы должны занять центральное место в развитии стандартов. Они должны быть <em>обязательными</em> для только что реализованных свойств, и должны стать механизмом, декларирующим совместимость.</p>\n<p>Вот что я имею в виду: предположим, что кто-то изобрёл новое свойство под названием <code>text-curl</code>. Тотчас же трое производителей реализуют его. Каждый из них будет <em>обязан</em> добавить префикс к своей реализации. Таким образом, получается следующая картина:</p>\n<pre><code>h1 {\n    -webkit-text-curl: minor;\n    -moz-text-curl: minor;\n    -o-text-curl: minor;\n    text-curl: minor;\n}\n</code></pre>\n<p>Со временем производители совершенствуют свои реализации в ответ на сообщения об ошибках и уточнения от Рабочей группы CSS. В какой-то момент Рабочая группа решает, что две из трёх реализаций вполне совместимы со спецификацией. Тогда две эти реализации начинают поддерживать оригинальное свойство. Третья — нет.</p>\n<p>В этот момент авторы могут решить упростить свои стили до следующих:</p>\n<pre><code>h1 {\n    -webkit-text-curl: minor;\n    text-curl: minor;\n}\n</code></pre>\n<p>В отличие от ситуации с хаками, которые только разрастаются со временем, мы просто отбрасываем ненужное. В итоге, всё, что остаётся — это одна строчка с <code>text-curl</code>.</p>\n<p>И что же происходит, когда дебютирует очередная реализация? В первом своём релизе она также использует префикс, вне зависимости от количества уже существующих удачных реализаций. Значит, нам придётся вернуться к нашему CSS и поменять его следующим образом:</p>\n<pre><code>h1 {\n    -ms-text-curl: minor;\n    text-curl: minor;\n}\n</code></pre>\n<p>Как только Рабочая группа сочтёт реализацию свойства <code>-ms-text-curl</code> полной, префикс сможет быть отброшен в следующей версии IE. После чего CSS снова может быть уменьшен до единственной беспрефиксной строчки. И снова — количество хаков только уменьшается со временем.</p>\n<p>Конечно, каждый из производителей продолжит поддерживать свойства с префиксами, так что даже если мы и не удалим эти правила, каждый из поддерживаемых браузеров распознает и использует свойство без префикса, если конечно оно будет следовать после правила с префиксом. Для любого браузера, который внедрил свойство с префиксом и не позаботился о том, чтобы привести его в беспрефиксное состояние, это свойство по-прежнему будет работать. Даже если CSS-код останется нетронутым, он всё равно продолжит функционировать.</p>\n<p>Вернёмся к тому моменту, когда Рабочая группа называет две реализации полностью совместимыми и даёт им право избавиться от префиксов. Эта ситуация приводит к двум результатам. Во-первых, как я уже говорил, это говорит о том, что свойство имеет достаточный уровень совместимости, и это позволяет развивать процесс стандартизации дальше.</p>\n<p>Но, с другой стороны, — что, вероятно, более важно, — это заставляет производителей и Рабочую группу сотрудничать в разработке тестов, необходимых для определения условий совместимости. В дальнейшем, эти тесты могут помочь остальным производителям достичь статуса совместимости гораздо раньше. Они могут выпустить версию с префиксом в одной публичной бете и отказаться от префикса буквально в следующем же бета-релизе.</p>\n<p>Это полностью меняет существующий сейчас порядок вещей. Так уж пошло, что когда CSS-модуль достигает статуса возможной рекомендации (CR), производители начинают отказываться от префиксов для свойств из этого модуля. Но такая ситуация снова приводит к возможности появления некачественных реализаций и новых хаков для решения возникших проблем.</p>\n<p>Как предлагалось выше, модулю должно быть позволено достигнуть статуса возможной рекомендации только в случае, когда все его свойства имеют, как минимум, две реализации без префиксов, работающие в реальных условиях. Любые подобные свойства, появившиеся после этого, должны иметь префикс, от которого они смогут избавиться, только доказав на практике полную совместимость с уже существующими реализациями без префикса. Вместо того чтобы внушать сомнения, свойства с отброшенными префиксами могут стать гарантами стабильности, вместе с уже давно известными свойствами.</p>\n<h2>Заключение</h2>\n<p>Если история развития веб-стандартов и научила нас чему-то, то скорее тому, что хаки будут необходимы всегда. Подставляя хаки при помощи префиксов и используя их в процессе стандартизации, мы действительно можем справиться с потенциальными проблемами и ускорить разработку CSS.</p>\n<p>И когда в следующий раз вы начнёте ворчать по поводу указания одних и тех же правил четыре раза, по одному на каждый из браузеров, вспомните, что это временная проблема. Это немного напоминает вакцинацию — укол побаливает, это правда, но всё не настолько плохо по сравнению с болезнью, которую он предотвращает. И в нашем случае вы вакцинируетесь от многолетней возни с хаками, от фильтрации браузеров, и от других скверных вещей. Мы уже однажды пережили эту эпидемию. При должном использовании префиксы позволят надолго сдержать очередную вспышку этой напасти.</p>\n<p>Перевод оригинальной статьи «<a href="http://www.alistapart.com/articles/prefix-or-posthack/">Prefix or Posthack</a>» <a href="http://meyerweb.com/">Эрика Мейера</a> (Eric Meyer), опубликованной на сайте <a href="http://www.alistapart.com/">A List Apart</a>.</p>',headings:[{depth:1,value:"Префикс или постхак"},{depth:2,value:"Вспоминая ужасы"},{depth:2,value:"Представим себе другой исход"},{depth:2,value:"И даже сейчас мы страдаем"},{depth:2,value:"Пре-фикс или пост-хак"},{depth:2,value:"Делаем префиксы действительно важными"},{depth:2,value:"Заключение"}],frontmatter:{title:"Префикс или постхак"}}},{node:{html:'<h1>Обещание бургерной вечеринки</h1>\n<p>Перевод статьи «The Promise of a Burger Party» Марико Косаки.</p>\n<p><em>Я написала этот пост как альтернативное введение в JavaScript-промисы. Я набросала его в своем блокноте во время чтения многочисленных статей на эту тему. Если вам нужно более глубокое руководство, в конце статьи есть список для дальнейшего изучения.</em></p>\n<p>Пару недель назад я участвовала в обсуждении кое-какой функциональности на JavaScript. Она должна была работать асинхронно с использованием внешних данных. Я сказала: <em>«ладно, давайте используем fetch()… тогда в коде это… эм-м…» *И пока я молчала, пытаясь вспомнить *API Fetch</em>, мой собеседник сказал: «<em>он возвращает промис»</em>. Я впала в ступор и ответила: «<em>честно говоря, я не очень понимаю, что это значит…»</em></p>\n<p>Я множество раз писала код на основе промисов, но в этот раз части почему-то не сложились в единую картину. Я поняла, что в действительности так и не разобралась с ними.</p>\n<iframe src="https://medium.com/media/6843ee4f347528b7d397ac9dfab79a85" frameborder=0></iframe>\n<p>Если вы читаете меня <a href="https://twitter.com/kosamari">в Twitter</a>, то знаете, что я учусь на визуальных примерах: беру <a href="https://twitter.com/kosamari/status/807303762188574720">объекты реального мира</a> как метафоры для сложных концепций в коде и изображаю их в виде <a href="https://twitter.com/kosamari/status/806941856777011200">рисунков</a>. Это позволяет мне совладать с двойным уровнем абстракции: языком программирования и английского как неродного языка. В общем, мне пришлось рисовать и в этот раз.</p>\n<p><img src="https://cdn-images-1.medium.com/max/5464/1*3U8UF-FdRnWK3RE44NGKyg.png"></p>\n<p>А вот пример кода, с которым мы будем иметь дело в этой истории.</p>\n<pre><code>*// Асинхронная операция*\nfunction cookBurger (type) { ... }  \n\n*// Обычная операция*\nfunction makeMilkshake (type) { ... }\n\n*// Функция оформления заказа, возвращает промис\n*function order (type) {   \n   return new Promise(function(resolve, reject) {\n      var burger = cookBurger(type)\n      burger.ready = function (err, burger) {\n         if (err) {\n            return reject(Error(\'Error while cooking\'))\n         }\n         return resolve(burger)\n      }\n   })\n}\n\norder(\'JakeBurger\')\n   .then( burger => {\n      const milkshake = makeMilkshake(\'vanila\')\n      return { burger: burger, shake: milkshake }\n   })\n   .then( foodItems => {\n      console.log(\'BURGER PARTY !\', foodItems)\n   })\n   .catch( err => {\n     console.log(err)   \n   })\n</code></pre>\n<h3>Устроим бургерную вечеринку!</h3>\n<p>Добро пожаловать в парк Промис-Сквер, место встречи всех любителей бургеров — кафе «ДжейкШак». Бургеры ДжейкШака очень популярны в окру́ге, но в кафе мало кассовых аппаратов, и очередь из посетителей никогда не убывает. Несмотря на это, на кухне хватает рук, чтобы принимать множество заказов одновременно.</p>\n<p><em>Если вы не в курсе: <a href="http://www.foodsmackdown.com/2011/08/shake-shack-new-york-madison-square-park/">кафе ShakeShak в парке Мэдисон-Сквер</a> — это место в Нью-Йорке. Кафе действительно отличное, но туда всегда длинная очередь .</em></p>\n<h2>Пообещать сделать</h2>\n<p>Чтобы принимать заказы максимально быстро, ДжейкШак использует систему сигнальных брелков. После оплаты заказа на кассе, сотрудник кафе выдает посетителю поднос и такой брелок.</p>\n<p><img src="https://cdn-images-1.medium.com/max/5464/1*Gh5Pv0ujTuikxGZMeANfCg.png"></p>\n<p>Поднос — это промис*, *обещание ДжейкШака преподнести вам вкуснейший бургер, как только тот будет готов, а брелок — индикатор состояния вашего заказа. Брелок молчит? — значит заказ <strong>в процессе</strong> и лучшие повара трудятся над вашим бургером. Брелок загорелся красным и гудит? — значит заказ <strong>приготовлен</strong>.</p>\n<p>Но есть небольшой нюанс: «приготовлен» — не значит «готов». Это значит, что работа поваров над заказом завершена, и они хотят, чтобы вы подошли и забрали его. Вы как клиент, вероятно, хотите просто получить свой бургер, но, в некоторых случаях, предпочтёте уйти. Дело ваше.</p>\n<p>Давайте посмотрим, как это работает в коде. Когда вы вызываете функцию order (делаете заказ), она возвращает promise (выдает поднос и брелок как обещание выполнить заказ). Возвращённое значение (бургер) должен появиться на подносе, когда будет исполнен промис (данное вам обещание) и сработал колбэк. Подробнее об этом в следующем разделе!</p>\n<p><img src="https://cdn-images-1.medium.com/max/5464/1*-h3389QFwG0TG01piaFQjg.png"></p>\n<h2>Добавьте обработчики промисов</h2>\n<p>Ой, кажется брелок загудел. Пойдемте за стойку попросим заказ. На этом этапе возможны два сценария развития событий.</p>\n<p><img src="https://cdn-images-1.medium.com/max/5464/1*EvC0N4I6l5WWH7CM9f0THg.png"></p>\n<p><strong>1. Заказ исполнен</strong></p>\n<p>Ура-а! Ваш заказ готов, сотрудник кафе выносит свежий ароматный бургер. Обещание приготовить отличный бургер можно считать выполненным.</p>\n<p><strong>2. Заказ отклонен</strong></p>\n<p>Похоже, на кухне закончились котлеты. Обещание приготовить бургер выполнено не будет, оно отменяется. Не забудьте потребовать назад ваши деньги!</p>\n<p>Посмотрим, как мы можем подготовиться к этим двум ситуациям в нашем коде.</p>\n<p><img src="https://cdn-images-1.medium.com/max/5464/1*XbbU9ZKSkEXPgkvFmULtIA.png"></p>\n<p><em>Метод .then() принимает вторым аргументом функцию. Эта функция является обработчиком для reject. Но для простоты в своем примере я буду использовать для обработки ошибок только .catch(). Если вы хотите узнать подробнее о разнице, вам может пригодиться <a href="https://developers.google.com/web/fundamentals/getting-started/primers/promises#error_handling">эта статья</a>.</em></p>\n<h2>Связываем промисы</h2>\n<p>Скажем, ваш заказ был успешно выполнен, но тут вы вспоминаете, что для фееричной бургерной вечеринки вам не хватает молочного коктейля… и вы идете в очередь «С» (специальная очередь за напитками, <a href="http://midtownlunch.com/2010/08/02/midtown-times-square-shake-shack-finally-add-a-c-line/">существует в ShakeShack на самом деле</a>, чтобы справиться с наплывом посетителей). При заказе коктейля кассир вручает вам другой поднос и еще один брелок. Так как напитки готовятся быстро, кассир сам выдает заказ, и не нужно ждать, когда загудит брелок (он уже гудит!).</p>\n<p><img src="https://cdn-images-1.medium.com/max/5464/1*WgzhaiCXhXQjrL04woAaEg.png"></p>\n<p>Посмотрим, как это работает в коде. Чтобы соединить промисы в цепочку, достаточно всего лишь добавить еще один then(), он всегда возвращает промис. Просто запомните: каждый .then() возвращает поднос и брелок, а текущее возвращаемое значение передается аргументом в коллбэк.</p>\n<p><img src="https://cdn-images-1.medium.com/max/5464/1*JogpJI8YjDS7kkhTGgdcaQ.png"></p>\n<p>Теперь, когда у вас есть бургер и молочный коктейль, вы готовы к БУРГЕРНОЙ ВЕЧЕРИНКЕ 🎉!</p>\n<h2>Другие трюки для вечеринок!</h2>\n<p>У промисов есть и другие методы, которые позволяют делать классные трюки.</p>\n<p>Promise.all() создает промис, принимающий массив промисов (<em>items</em>). Он исполняется, когда исполнены все элементы массива, каждый из которых тоже промис. Представим это так: вы заказали для друзей пять бургеров, но не хотите все пять раз бегать к стойке. Достаточно сделать это один раз, когда все бургеры будут готовы. Promise.all() в этом случае — отличное решение.</p>\n<p>Promise.race() похож на Promise.all(), но исполнится или будет отклонен, как только будет исполнен или отклонен один из элементов массива промисов. Своего рода принцип «хватай и беги». Скажем, вы очень голодны и заказали бургер, чизбургер и хотдог одновременно, но заберёте только то, что быстрее приготовят. Обратите внимание, в этом случае, если на кухне закончились котлеты для бургеров, и отказ по бургеру вернется первым, то и все прочие заказы будут отменены.</p>\n<p>Помимо этого, в JavaScript-промисах есть много других вещей для изучения. Ниже ссылки на материалы, которые я для этого рекомендую:</p>\n<ul>\n<li>\n<p><a href="https://github.com/mattdesl/promise-cookbook/blob/master/README.md">promise-cookbook</a> — на английском, также доступна версия на китайском;</p>\n</li>\n<li>\n<p><a href="https://developers.google.com/web/fundamentals/getting-started/primers/promises">JavaScript Promises: an Introduction</a> — на английском;</p>\n</li>\n<li>\n<p><a href="http://azu.github.io/promises-book/">JavaScript Promiseの本</a> — на японском, китайском и корейском языках.</p>\n</li>\n</ul>\n<p>Спасибо Джейку Арчибальду и Нолану Лоусону за вычитку статьи и ценные советы, а также Крису Уитли за найденную в коде ошибку.</p>\n<p><em>Перевод «<a href="http://kosamari.com/notes/the-promise-of-a-burger-party">The Promise of a Burger Party</a>» Марико Косаки. Перевод <a href="https://medium.com/@vlad_poe">Владислава Почепцова</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>. Опубликовано под лицензией <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.</em></p>',headings:[{depth:1,value:"Обещание бургерной вечеринки"},{depth:3,value:"Устроим бургерную вечеринку!"},{depth:2,value:"Пообещать сделать"},{depth:2,value:"Добавьте обработчики промисов"},{depth:2,value:"Связываем промисы"},{depth:2,value:"Другие трюки для вечеринок!"}],frontmatter:{title:"Обещание бургерной вечеринки"}}},{node:{html:"<h1>Промисы на примерах из жизни</h1>\n<p>Поговорим о промисах простыми словами</p>\n<p><em>Перевод «<a href=\"https://codeburst.io/javascript-promises-explained-with-simple-real-life-analogies-dd6908092138\">JavaScript: Promises explained with simple real life analogies</a>» Шрути Капур.</em></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/11402/1*ycoN6Jf7xaaSnAi0S9TYmQ.jpeg\" alt=\"Ай промис, фото [Бена Уайта](https://unsplash.com/photos/tX4-tYibILg).\"><em>Ай промис, фото <a href=\"https://unsplash.com/photos/tX4-tYibILg\">Бена Уайта</a>.</em></p>\n<h2>Промисы простыми словами</h2>\n<p>Представьте это как разговор между двумя людьми:</p>\n<blockquote>\n<p><strong>Алекс</strong>: Эй, мистер Промис! Можешь сбегать в магазин и принести мне itemA для блюда, которое мы приготовим сегодня вечером?\n<strong>Промис</strong>: Отличная мысль!\n<strong>Алекс</strong>: Пока ты бегаешь, я подготовлю itemB (асинхронная операция). Только обязательно скажи, нашел ли ты itemA (возвращаемое промисом значение).\n<strong>Промис: **А если тебя не будет дома, когда я вернусь?\n**Алекс: **Тогда отправь мне смску, что ты вернулся и принесitem для меня (успешный колбэк). Если ты не найдешь, позвони мне немедленно (неуспешный колбэк).\n**Промис:</strong> Отлично! Увидимся позже!</p>\n</blockquote>\n<p>Проще говоря, объект promise—это данные, возвращаемые асинхронной функцией. Это может бытьresolve, если функция прошла успешно или reject, если функция вернула ошибку.</p>\n<h2>Определение</h2>\n<p>Промис — это объект, представляющий окончательное завершение или сбой асинхронной операции. По сути, промис — это возвращаемый объект, к которому прикрепляется колбэк, вместо его передачи в функцию.</p>\n<h2>Промис в JS</h2>\n<p>Давайте сначала поговорим о <em>JavaScript</em> и его параллелизме. <em>JavaScript</em> является однопоточным. Всё происходит в той последовательности, в которой написано, но асинхронные операции происходят в порядке их завершения.</p>\n<p>Что, по вашему мнению, выведется в консоль в следующем примере?</p>\n<pre><code>console.log('1');\nsetTimeout(function(){ console.log('2'); }, 3000);\n\nconsole.log('3');\nsetTimeout(function(){ console.log('4'); }, 1000);\n</code></pre>\n<p>Результатом будет 1 3 4 2. Вы можете задаться вопросом, почему 4 встречается раньше чем 2. Причина в том, что, несмотря на то, что строка с 2 описана раньше, она начала выполняться только после 3000 мс, поэтому 4 выводится до 2.</p>\n<p>В типичном веб-приложении может выполняться множество асинхронных операций, таких как загрузка изображений, получение данных из <em>JSON</em>, обращение к <em>API</em> и других.</p>\n<p>Теперь рассмотрим, как создать промис в <em>JavaScript</em>:</p>\n<pre><code>var promise = new Promise(function(resolve, reject) {\n  // Делаем, что-то, возможно асинхронное, тогда…\n\n  if (/* Всё прошло отлично */) {\n    resolve('Сработало!');\n  }\n  else {\n    reject(Error('Сломалось'));\n  }\n});\n</code></pre>\n<p>Конструктор Promise принимает один аргумент: колбэк с двумя параметрами — resolve и reject. Этот промис может быть использован следующим образом:</p>\n<pre><code>promise.then(function(result) {\n  console.log('Промис сработал');\n}, function(err) {\n  console.log('Что-то сломалось');\n});\n</code></pre>\n<p>Если промис прошёл успешно, будет выполнен resolve, и консоль выведет Промис сработал, в противном случае выведется Что-то сломалось. Это состояние до получения resolveили reject называется состоянием ожидания, pending. Таким образом, есть три состояния промиса:</p>\n<ol>\n<li>\n<p>Ожидание ответа: pending</p>\n</li>\n<li>\n<p>Успешное выполнение: resolve</p>\n</li>\n<li>\n<p>Выход ошибкой: reject</p>\n</li>\n</ol>\n<p><img src=\"https://cdn-images-1.medium.com/max/8576/1*FX8c_5NxTkNo7NyEkWsjSQ.jpeg\" alt=\"Промис успешно выполнился, [фото Скотта Вебба](https://www.pexels.com/photo/man-couple-love-people-136402/).\"><em>Промис успешно выполнился, <a href=\"https://www.pexels.com/photo/man-couple-love-people-136402/\">фото Скотта Вебба</a>.</em></p>\n<h2>Пример</h2>\n<p>Чтобы полностью понять концепцию промисов, создадим приложение, которое загрузит изображение. Если изображение загружено, оно будет отображено, иначе будет выводится ошибка.</p>\n<p>Сначала создадим promise с XMLHttpRequest:</p>\n<pre><code>const loadImage = url => {\n  return new Promise(function(resolve, reject) {\n    // Открываем новый XHR\n    var request = new XMLHttpRequest();\n    request.open('GET', url);\n\n    // После загрузки запроса\n    // проверяем, был ли он успешным\n    request.onload = function() {\n      if (request.status === 200) {\n        // Если успешный, то резолвим промис\n        resolve(request.response);\n      } else {\n        // Если нет, то реджектим промис\n        reject(Error(\n          'Произошла ошибка. Код ошибки:' + request.statusText\n        ));\n      }\n    };\n\n    request.send();\n  });\n};\n</code></pre>\n<p>Теперь, когда изображение успешно загружено, promise вернет resolve с ответом от <em>XHR</em>. Давайте используем этот promise, вызвав функцию loadImage.</p>\n<pre><code>const embedImage = url => {\n  loadImage(url).then(function(result) {\n      const img = new Image();\n      var imageURL = window.URL.createObjectURL(result);\n      img.src = imageURL;\n      document.querySelector('body').appendChild(img);\n    },\n    function(err) {\n      console.log(err);\n    });\n}\n</code></pre>\n<p>Мы сделали это! Неплохо, да?</p>\n<p>А теперь сделай несколько промисов сам! Давай :)</p>\n<h3>Дополнительные материалы</h3>\n<p>Вот некоторые статьи, которые показались мне очень полезным в процессе обучения:</p>\n<ol>\n<li>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises\">Статья про промисы на MDN</a></p>\n</li>\n<li>\n<p><a href=\"http://https//developers.google.com/web/fundamentals/primers/promises\">Введение на Google Developers</a></p>\n</li>\n<li>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#Run-to-completion\">Про concurrency model на MDN</a></p>\n</li>\n</ol>",headings:[{depth:1,value:"Промисы на примерах из жизни"},{depth:2,value:"Промисы простыми словами"},{depth:2,value:"Определение"},{depth:2,value:"Промис в JS"},{depth:2,value:"Пример"},{depth:3,value:"Дополнительные материалы"}],frontmatter:{title:"Промисы на примерах из жизни"}}},{node:{html:"<h1>Реализуем пуш-уведомления на фронтенде и бэкенде</h1>\n<p>Перевод «Implementing push notifications on the front-end and back-end» Майкла Шарналя.</p>\n<p>В предыдущей <a href=\"https://justmarkup.com/log/2017/02/introducing-iss-observer-com/\">статье</a> об <a href=\"https://iss-observer.com/\">*iss-observer.com</a>* я обещал рассказать о технической стороне реализации пуш-уведомлений. Изначально я планировал сконцентрироваться на проблемах, с которыми пришлось иметь дело в процессе работы над <a href=\"https://iss-observer.com/\">*iss-observer.com</a>*. Теперь я думаю, будет полезнее посвятить материал базовым вопросам, и уточнять детали, где это необходимо. Обращаю ваше внимание, что фронтенд частично опирается на <a href=\"https://developers.google.com/web/fundamentals/getting-started/codelabs/push-notifications/?hl=en\">этот урок</a>.</p>\n<p><em>Если вы хотите углубиться в исходный код, то смотрите в <a href=\"https://github.com/justmarkup/demos/tree/gh-pages/push-notifications\">GitHub-репозиторий</a> и на <a href=\"https://push-notifications-vwursywdxa.now.sh\">пример</a>, демонстрирующий его работу.</em></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*8KWLqCaGqDIe0KRNFOycsA.jpeg\"></p>\n<h2>Фронтенд</h2>\n<p>Начнем с клиентской части. Первое, что нужно сделать — убедиться, что браузер поддерживает пуш-уведомления. Если да, загружаем наш <em>JavaScript</em>.</p>\n<pre><code>if ('serviceWorker' in navigator &#x26;&#x26; 'PushManager' in window) {\n  var s = document.createElement('script');\n  s.src = '/script/push.js';\n  s.async = true;\n  document.head.appendChild(s);\n}\n</code></pre>\n<p>Прежде чем писать код, выполним ряд требований. Нам потребуются <em>Application Server Keys (VAPID Key)</em>. Получаем их <a href=\"https://web-push-codelab.appspot.com\">здесь</a>, либо с помощью библиотеки <em>web-push</em>. Кстати, она нам еще потребуется для бэкенд-части. Устанавливаем библиотеку: npm install -g web-push, генерируем ключи: web-push generate-vapid-keys. В независимости от способа в результате у вас должны быть <strong>закрытый ключ*</strong> (private key)* и <strong>открытый ключ*</strong> (public key)*. Сохраните их в надежном месте.</p>\n<p><em>До появления спецификации Application server key/VAPID первые браузеры (Chrome, Opera) реализовали функциональность пуш-уведомлений с помощью <a href=\"https://developers.google.com/cloud-messaging/\">Google Cloud Messaging</a>. Все современные браузеры, за исключением <a href=\"https://github.com/web-push-libs/web-push#browser-support\">Samsung Internet</a>, поддерживают VAPID. Поэтому в этой статье я не буду касаться GCM. Как добавить поддержку для Samsung Internet и старых версий Chrome и Opera — читайте <a href=\"https://web-push-book.gauntface.com/chapter-06/01-non-standards-browsers/\">здесь</a>.</em></p>\n<p>Посмотрим на <em>push.js</em>. Здесь мы регистрируем сервис-воркер и подписываемся на уведомления:</p>\n<pre><code>'use strict';\n\nconst appServerKey = 'BHLCrsFGJQIVgg-XNp8F59C8UFF49GAVxvYMvyCURim3nMYI5TMdsOcrh-yJM7KbtZ3psi5FhfvaJbU_11jwtPY';\n\nconst pushWrapper = document.querySelector('.push-wrapper');\nconst pushButton = document.querySelector('.push-button');\n\nlet hasSubscription = false;\nlet serviceWorkerRegistration = null;\nlet subscriptionData = false;\n\nfunction urlB64ToUint8Array(base64String) {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/\\-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i &#x3C; rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nfunction updatePushButton() {\n  pushWrapper.classList.remove('hidden');\n  \n  if (hasSubscription) {\n    pushButton.textContent = `Disable Push Notifications`;\n  } else {\n    pushButton.textContent = `Enable Push Notifications`;\n  }\n}\n\nfunction subscribeUser() {\n  serviceWorkerRegistration.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey: urlB64ToUint8Array(appServerKey)\n  })\n  .then(function(subscription) {\n\n    fetch('/push/subscribe',{\n      method: 'POST',\n      headers: {\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(subscription)\n    })\n    .then(function(response) {\n      return response;\n    })\n    .then(function(text) {\n      console.log('User is subscribed.');\n      hasSubscription = true;\n\n      updatePushButton();\n    })\n    .catch(function(error) {\n      hasSubscription = false;\n      console.error('error fetching subscribe', error);\n    });\n    \n  })\n  .catch(function(err) {\n    console.log('Failed to subscribe the user: ', err);\n  });\n}\n\nfunction unsubscribeUser() {\n  serviceWorkerRegistration.pushManager.getSubscription()\n  .then(function(subscription) {\n    if (subscription) {\n      subscriptionData = {\n        endpoint: subscription.endpoint\n      };\n      \n      fetch('/push/unsubscribe',{\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(subscriptionData)\n      })\n      .then(function(response) {\n        return response;\n      })\n      .then(function(text) {\n        hasSubscription = false;\n\n        updatePushButton();\n      })\n      .catch(function(error) {\n        hasSubscription = true;\n        console.error('error fetching subscribe', error);\n      });\n\n      hasSubscription = false;\n\n      updatePushButton();\n      return subscription.unsubscribe();\n    }\n  });\n}\n\nfunction initPush() {\n\n  pushButton.addEventListener('click', function() {\n    if (hasSubscription) {\n      unsubscribeUser();\n    } else {\n      subscribeUser();\n    }\n  });\n\n  // Set the initial subscription value\n  serviceWorkerRegistration.pushManager.getSubscription()\n  .then(function(subscription) {\n    hasSubscription = !(subscription === null);\n\n    updatePushButton();\n  });\n}\n\nnavigator.serviceWorker.register('sw.js')\n.then(function(sw) {\n  serviceWorkerRegistration = sw;\n  initPush();\n})\n.catch(function(error) {\n  console.error('Service Worker Error', error);\n});\n</code></pre>\n<p>В первую очередь создаем константу addServiceKey: ей присваиваем значение с открытым ключ <em>VAPID</em> (о нем мы говорили выше). Также создаем несколько элементов и переменных. Записываем функцию urlB64ToUint8Array(): она понадобится для конвертации ключа из <em>base64</em> в <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\">*Uint8Array</a>*.</p>\n<p>Затем декларируем функцию updatePushButton(). Мы будем вызывать её каждый раз при изменении статуса уведомлений, чтобы обновить отвечающие за него элементы интерфейса.</p>\n<p>Далее видим функцию регистрации подписки subscribeUser(). Как вы наверно заметили, в начале скрипта была объявлена переменная let serviceWorkerRegistration. Она содержит результат <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration\">регистрации сервис-воркера</a>: посмотрите в конец файла, мы записываем его в переменную в момент регистрации.</p>\n<pre><code>serviceWorkerRegistration.pushManager.subscribe({\n  userVisibleOnly: true,\n  applicationServerKey: urlB64ToUint8Array(appServerKey)\n})\n</code></pre>\n<p>Метод subscribe() возвращает промис, а в качестве аргумента принимает объект с двумя свойствами:</p>\n<ul>\n<li>\n<p>userVisibilityOnly: булево значение. Параметр сообщает, что подписка будет использоваться только для сообщений, эффект которых виден для пользователя. Устанавливаем значение true.</p>\n</li>\n<li>\n<p>applicationServiceKey: номер открытого ключа, он используется сервером для отправки уведомлений. Так как ключ должен быть в формате <em>UInt8Attay</em>, используем уже знакомую нам функцию.</p>\n<p>.then(function(subscription) {\nfetch('/push/subscribe',{\nmethod: \"POST\",\nheaders: {\n'Content-Type': 'application/json'\n},\nbody: JSON.stringify(subscription)\n})</p>\n</li>\n</ul>\n<p>Теперь отправляем данные подписки на сервер. Смело используем <em>Fetch API</em>, так как все браузеры, которые поддерживают пуш-уведомления, поддерживают и <em>Fetch</em>. После получения ответа выводим результат — завершена ли подписка успешно.</p>\n<p>Этот этап прекрасно подходит для уточнения нужных параметров у пользователя. Например, на <a href=\"https://iss-observer.com\">*iss-observer.com</a>* он может выбрать время получения уведомлений (утро и/или вечер). Я также отправляю на сервер данные о стране, регионе и городе, по которому пользователь хочет получать уведомления; данные сохраняются и могут потребоваться при отправке уведомлений.</p>\n<p>После этого, создаем функцию отписки unsubscribeUser(). Используем метод getSubscription() объекта PushManager, с его помощью получаем детали подписки, которые отправляем на сервер (снова <em>Fetch API</em>). На этот раз, чтобы удалить её базы.</p>\n<p>Записываем функцию initPush(). В ней — событие для кнопки <em>pushButton,</em> которое вызывает функцию подписки или отписки в зависимости от текущего состояния. После, не забываем обновить это состояние. Использованный в примере код можно найти на <a href=\"https://github.com/justmarkup/demos/blob/gh-pages/push-notifications/public/script/push.js\">*GitHub</a>*.</p>\n<p>Последний шаг — регистрация сервис-воркера.</p>\n<h2>Сервис-воркер</h2>\n<p>В этой части мы разберем два необходимых для реализации пуш-уведомлений события: push и notificationonclick.</p>\n<pre><code>self.addEventListener('push', function(event) {\n  let notificationData = {};\n  \n  try {\n    notificationData = event.data.json();\n  } catch (e) {\n    notificationData = {\n      title: 'Default title',\n      body: 'Default message',\n      icon: '/default-icon.png'\n    };\n  }\n  \n  event.waitUntil(\n    self.registration.showNotification(notificationData.title, {\n      body: notificationData.body,\n      icon: notificationData.icon\n    })\n  );\n});\n</code></pre>\n<p>Начнем с push. Проверяем содержимое объекта notificationData (свойства title, body и icon), и, если не находим их, присваиваем дефолтные значения. После вызываем метод showNotification, он покажет уведомление пользователю.</p>\n<p><em>В дополнение к трём перечисленным свойствам могут использоваться и другие, например, badge, tag, vibrate. На момент написания этой статьи (февраль 2017) многие из них поддерживались только некоторыми браузерами. title, body и icon, доступных во всех браузерах, поэтому ограничимся ими.</em></p>\n<pre><code>self.addEventListener('notificationclick', function(event) {\n\n// close the notification\n  event.notification.close();\n\n// see if the current is open and if it is focus it\n  // otherwise open new tab\n  event.waitUntil(\n    self.clients.matchAll().then(function(clientList) {\n      \n      if (clientList.length > 0) {\n        return clientList[0].focus();\n      }\n      \n      return self.clients.openWindow('/');\n    })\n  );\n});\n</code></pre>\n<p>Событие notificationOnClick срабатывает в момент клика по уведомлению. Сначала закрываем уведомление. Затем проверяем, открыт ли наш сайт в текущей вкладке браузера, если нет, то открываем его с помощью openWindow().</p>\n<h2>Бэкенд</h2>\n<p>Переходим к серверной части, в которой мы используем <a href=\"https://github.com/web-push-libs/web-push\">*web-push library</a><em>. В нашем случае это реализация библиотеки для *Node.js</em>, но версии для <em>PHP</em>, <em>Java</em> и <em>C#</em> также доступны.</p>\n<p><em>Я предполагаю, что у вас есть базовые знания Node.js и опыт использования Express. В ином случае, я рекомендую вам ознакомиться с ними прежде чем продолжить.</em></p>\n<p>Итак, в первую очередь:</p>\n<ul>\n<li>\n<p>устанавливаем библиотеку командой npm install web-push --save,</p>\n</li>\n<li>\n<p>получаем доступ к ней с помощью require: const webPush = require('web-push');</p>\n<p>webPush.setVapidDetails(\n'<a href=\"mailto:hallo@justmarkup.com&#x27;\">hallo@justmarkup.com'</a>,\n'YOUR<em>PUBLIC</em>VAPID<em>KEY', // process.env.VAPID</em>PUBLIC<em>KEY,\n'YOUR</em>PRIVATE<em>VAPID</em>KEY', // process.env.VAPID<em>PRIVATE</em>KEY\n);</p>\n</li>\n</ul>\n<p>Теперь передаем данные <em>VAPID</em>. Помимо сгенерированной в начале пары ключей, нужно указать адрес электронной почты (с префиксом mailto:) либо <em>URL</em> сайта. Контактные данные могут потребоваться сервису для связи с вами. Обратите внимание на комментарии: я предпочел сохранить ключи в переменную окружения. Вы можете поступить так же или выбрать свой метод, но главное помните, **закрытый ключ **должен быть всегда защищен от обращений извне. Собственно поэтому он так и назван.</p>\n<p>Переходим к функции подписки:</p>\n<pre><code>app.post('/push/subscribe', function (req, res) {\n\nconst subscription = {\n    endpoint: req.body.endpoint,\n    keys: {\n      p256dh: req.body.keys.p256dh,\n      auth: req.body.keys.auth\n    }\n  };\n  \n  const payload = JSON.stringify({\n    title: 'Welcome',\n    body: 'Thank you for enabling push notifications',\n    icon: '/android-chrome-192x192.png'\n  });\n\nconst options = {\n    TTL: 3600 // 1sec * 60 * 60 = 1h\n  };\n\nwebPush.sendNotification(\n    subscription, \n    payload,\n    options\n    ).then(function() {\n      console.log('Send welcome push notification');\n      res.status(200).send('subscribe');\n      return;\n    }).catch(err => {\n      console.error('Unable to send welcome push notification', err );\n      res.status(500).send('subscription not possible');\n      return;\n  });\n\n})\n</code></pre>\n<p>В функции отправки подписки на сервер, получаем доступ к объекту subscription. В нем — значение endpoint и ключи доступа. Здесь я не буду останавливаться на вопросах работы с базой данных. Для примера укажу только, что для демо использована <a href=\"https://github.com/justmarkup/demos/blob/gh-pages/push-notifications/controllers/push.js#L19\">*Mongo DB</a>*.</p>\n<p><em>Прим. переводчика: endpoint — это уникальный URI, создаваемый для каждого пользователя индивидуально в соответствии <a href=\"https://random-push-service.com/some-kind-ofunique-id-1234/v2/\">с паттерном</a>: p256dh — открытый ключ, auth — закрытый ключ.</em></p>\n<p>Затем получаем наше первое уведомление — то, которое приветствует подписавшегося пользователя. Метод sendNotification() принимает три аргумента:</p>\n<ul>\n<li>\n<p>данные подписки, получаемые от браузера;</p>\n</li>\n<li>\n<p>информацию для пользователя (заголовок, сообщение, иконка — свойства title, body, icon соответственно);</p>\n</li>\n<li>\n<p>объект options, <a href=\"https://github.com/web-push-libs/web-push#sendnotificationpushsubscription-payload-options\">см. подробнее</a>.</p>\n</li>\n</ul>\n<p><em>TTL (Time To Live) — срок жизни уведомления —по умолчанию четыре недели. Это значит, что оно будет ожидать появления пользователя онлайн в течение этого срока. Например, если вы отправили уведомление пользователю в оффлайне, и он подключится к сети только через две недели, сообщение все равно будет доставлено. В моем случае разумно изменить TTL на более короткий срок.</em></p>\n<pre><code>app.post('/push/unsubscribe', function (req, res) {\n  // remove from database\n  Push.findOneAndRemove({endpoint: endpoint}, function (err,data) {\n    if (err) { \n      console.error('error with unsubscribe', error);\n      res.status(500).send('unsubscription not possible'); \n    }\n    console.log('unsubscribed');\n    res.status(200).send('unsubscribe');\n  });\n})\n</code></pre>\n<p>Если пользователь отменяет подписку, удаляем информацию о ней из базы.</p>\n<h2>Дополнительно</h2>\n<p>Вероятно, каждый из вас столкнется со своим случаем применения пуш-уведомлений, и просто скопировать код не получится. Однако я надеюсь, что этот урок поможет вам реализовать искомую функциональность как на стороне клиента, так и на стороне сервера.</p>\n<p><a href=\"https://push-notifications-vwursywdxa.now.sh\">Демо проекта</a>, исходный код опубликован на <a href=\"https://github.com/justmarkup/demos/tree/gh-pages/push-notifications\">GitHub</a>.</p>\n<p>Для более глубокого погружения в тему рекомендую бесплатную книгу <a href=\"https://web-push-book.gauntface.com\">Web Push Book</a> и примеры на <a href=\"https://serviceworke.rs/\">servicewore.rs</a>.</p>\n<p>Если вам есть что спросить, или есть что добавить, пишите в <a href=\"https://twitter.com/justmarkup\">Twitter</a> или по <a href=\"mailto:hallo@justmarkup.com\">электронной почте</a>.</p>\n<p><em>Перевод «<a href=\"https://justmarkup.com/log/2017/02/implementing-push-notifications/\">Implementing push notifications on the front-end and back-end</a>» Майкла Шарналя. Перевод <a href=\"https://medium.com/@vlad_poe\">Владислава Почепцова</a>, редактура <a href=\"https://medium.com/@pepelsbey\">Вадима Макеева</a>.</em></p>",headings:[{depth:1,value:"Реализуем пуш-уведомления на фронтенде и бэкенде"},{depth:2,value:"Фронтенд"},{depth:2,value:"Сервис-воркер"},{depth:2,value:"Бэкенд"},{depth:2,value:"Дополнительно"}],frontmatter:{title:"Реализуем пуш-уведомления на фронтенде и бэкенде"}}},{node:{html:'<h1>Как создать адаптивную сетку</h1>\n<p>Перевод «<a href="https://zellwk.com/blog/responsive-grid-system/">How to build a responsive grid system</a>» Зела Лью.</p>\n<p>Адаптивная сетка — один из лучших инструментов для создания уникального дизайна. Вы можете настроить всё, что нужно — количество и ширину колонок, отступы и даже контрольные точки, при достижении которых перестраивается раскладка страницы.</p>\n<p>К сожалению, большинство людей даже не пытаются создавать свои сетки из-за того, что им не хватает знаний и уверенности в своих силах.</p>\n<p>В этой статье я хочу помочь вам обрести веру в себя и знания, нужные для создания собственной сетки. Надеюсь, после прочтения статьи вы отложите фреймворки и попробуете создать собственную сетку для следующего проекта.</p>\n<h2>Что входит в сетку?</h2>\n<p>Прежде чем браться за создание сетки, вам нужно сделать три вещи.</p>\n<h3>1. Спроектировать сетку</h3>\n<p>Сколько будет колонок? Они будут одинаковой или разной ширины? Какие у них будут ширина и отступы? Вы сможете правильно просчитать параметры сетки только после того, как ответите на эти вопросы. Чтобы помочь вам, я написал статью о <a href="https://zellwk.com/blog/designing-grids">проектировании сеток</a>. Прочтите её, что бы научиться грамотно проектировать сетки.</p>\n<h3>2. Понять поведение сетки на разных вьюпортах</h3>\n<p>Будете ли вы менять размеры колонок и отступов пропорционально ширине вьюпорта? Или вы будете менять только ширину колонок, оставляя отступы фиксированными? Может вы будете менять количество колонок в определённых контрольных точках?</p>\n<p>На эти вопросы тоже нужно ответить. Это поможет рассчитать ширину колонок и отступов. Я писал об этом в той же <a href="https://zellwk.com/blog/designing-grids/">статье о проектировании сеток</a>, так что обратитесь к ней в случае сомнений.</p>\n<h3>3. Понять, нравится ли вам писать классы в разметке</h3>\n<p>Когда речь заходит о сетках, мир фронтенда делится на два лагеря. Один пишет сеточные классы в разметке (например, такой подход используют Bootstrap и Foundation). Я называю это <em>HTML-сетками</em>. Разметка выглядит так:</p>\n<pre><code>&#x3C;div class="container">\n    &#x3C;div class="row">\n        &#x3C;div class="col-md-9">Content&#x3C;/div>\n        &#x3C;div class="col-md-3">Sidebar&#x3C;/div>\n    &#x3C;/div>\n&#x3C;/div>\n</code></pre>\n<p>Другие создают сетки на CSS. Я называю это <em>CSS-сетками</em>.</p>\n<p>С CSS-сетками разметка получается проще, чем с HTML-сетками. Вам не приходится повторять одни и те же классы, размечая визуально похожие части документа. Также вам не нужно помнить, как называются классы сетки:</p>\n<pre><code>&#x3C;div class="content-sidebar">\n    &#x3C;div class="content">&#x3C;/div>\n    &#x3C;div class="sidebar">&#x3C;/div>\n&#x3C;/div>\n</code></pre>\n<p>С другой стороны, стили в случае с CSS-сетками получаются сложнее. Придётся думать, чтобы добиться простого решения задачи — если только вы ещё не решали её до сих пор.</p>\n<h3>А что выбрал бы я?</h3>\n<p>Как и многие эксперты фронтенда, я выбираю CSS-сетки, хотя и не смею называть себя экспертом. Если вам интересно, я <a href="https://zellwk.com/blog/migrating-from-bootstrap-to-susy/">написал статью</a> о том, почему выбрал CSS-сетки вместо HTML-сеток. Также я <a href="https://zellwk.com/blog/from-html-grids-to-css-grids/">написал статью</a>, которая поможет вам перейти с HTML-сеток на CSS-сетки.</p>\n<p>Так много статей читать... 😢</p>\n<p>В любом случае, вам нужно определиться с тремя вещами, прежде чем создавать свою сетку. Вот они, если кратко:</p>\n<ol>\n<li>Дизайн сетки;</li>\n<li>Как сетка ведёт себя на разных вьюпортах;</li>\n<li>Использовуется CSS- или HTML-сетка.</li>\n</ol>\n<p>Мы можем двигаться дальше, только определившись с этими вещами. В этой статье условия такие:</p>\n<ol>\n<li>Сетка имеет максимальную ширину 1140 пикселей, 12 колонок по 75 пикселей и отступы в 20 пикселей. За подсказкой, откуда брать эти числа, обратитесь <a href="https://zellwk.com/blog/designing-grids/">к этой статье</a>.</li>\n<li>Колонки меняют свой размер пропорционально вьюпорту, а отступы остаются фиксированными. Почему я выбрал такой поведение, объясняется <a href="https://zellwk.com/blog/designing-grids/">в этой статье</a>.</li>\n<li>Я собираюсь создавать CSS-сетку. Почему я их рекомендую <a href="https://zellwk.com/blog/migrating-from-bootstrap-to-susy/">в ещё одной статье</a>.</li>\n</ol>\n<p>Итак, давайте начнём!</p>\n<h2>Создаём сетку</h2>\n<p>Процесс создания сетки состоит из восьми шагов:</p>\n<ol>\n<li>Выбор технологии реализации</li>\n<li>Установка <code>box-sizing: border-box</code>;</li>\n<li>Создание контейнера сетки;</li>\n<li>Расчёт ширины колонок;</li>\n<li>Определение положения отступов;</li>\n<li>Создание отладочной сетки;</li>\n<li>Создание вариаций раскладки;</li>\n<li>Адаптация раскладки.</li>\n</ol>\n<p>Большинство из этих шагов становятся достаточно простыми, как только вы проходите их хотя бы раз. Я объясню всё, что нужно знать для прохождения каждого из них.</p>\n<h2>Шаг 1: выбор технологии</h2>\n<p>Что вы будете использовать для создания сетки — CSS-гриды, флексы или старые добрые флоаты? Решения и детали реализации зависят от выбранной технологии.</p>\n<p>CSS-гриды, безусловно, лучше всего подходят для создания сетки (потому, что гриды 😎). К сожалению, сегодня поддержка гридов оставляет желать лучшего. В каждом браузере они скрыты за флагом, поэтому мы не будем рассматривать гриды в этой статье. Я настоятельно рекомендую ознакомиться <a href="http://gridbyexample.com/">с работой Рейчел Эндрю</a>, если вы хотите узнать о гридах больше.</p>\n<p><em>На момент публикации перевода гриды уже поддерживаются без флагов в Chrome, Firefox и Safari — прим. редактора.</em></p>\n<p>Перейдём к флексам и флоатам. Соображения по их применению схожи, так что можете выбрать то, что вам по душе и двигаться далее. Я буду использовать флоаты, потому что они проще и понятнее новичкам.</p>\n<p>Если вы выбрали флексы, помните об отличиях от флоатов, которые нужно учесть.</p>\n<h2>Шаг 2: установка <code>box-sizing</code></h2>\n<p>Свойство <code>box-sizing</code> задаёт блочную модель, которую браузеры используют для расчёта свойств <code>width</code> и <code>height</code>. Выставляя свойству <code>box-sizing</code> значение <code>border-box</code>, мы сильно упрощаем расчёт размеров колонок и отступов, позже вы поймёте, почему.</p>\n<p>Вот наглядный пример того, как вычисляется <code>width</code> в зависимости от значения свойства <code>box-sizing</code>:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 65.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHYjtJkDiv/xAAZEAACAwEAAAAAAAAAAAAAAAAAAgERMRD/2gAIAQEAAQUCbbkXCuf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGH/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRABAQADAQAAAAAAAAAAAAAAAQARMVEh/9oACAEBAAE/IWiwsZ/c2mQ4QOFq/9oADAMBAAIAAwAAABBv/wD/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEx/9oACAEDAQE/EF17Lrf/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEx/9oACAECAQE/EOGDDL//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMYFRYf/aAAgBAQABPxDPMKxcaSg7GqKrncU2o+1GbTkAFAB8n//Z&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x432;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E; box-sizing &#x438; &#x435;&#x433;&#x43E; &#x432;&#x43B;&#x438;&#x44F;&#x43D;&#x438;&#x435; &#x43D;&#x430; &#x440;&#x430;&#x441;&#x447;&#x451;&#x442; &#x448;&#x438;&#x440;&#x438;&#x43D;&#x44B;." title="" src="/static/1-4549a9e77c36a85de4881f9346f33772-cb685.jpg" srcset="/static/1-4549a9e77c36a85de4881f9346f33772-94a32.jpg 163w,\n/static/1-4549a9e77c36a85de4881f9346f33772-09a61.jpg 325w,\n/static/1-4549a9e77c36a85de4881f9346f33772-cb685.jpg 650w,\n/static/1-4549a9e77c36a85de4881f9346f33772-94afe.jpg 900w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x421;&#x432;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E; <code>box-sizing</code> &#x438; &#x435;&#x433;&#x43E; &#x432;&#x43B;&#x438;&#x44F;&#x43D;&#x438;&#x435; &#x43D;&#x430; &#x440;&#x430;&#x441;&#x447;&#x451;&#x442; &#x448;&#x438;&#x440;&#x438;&#x43D;&#x44B;.</figcaption>\n</figure>\n<p>Обычно я устанавливаю значение <code>border-box</code> для всех элементов на сайте, благодаря чему расчёт ширины и высоты элементов работает последовательно и интуитивно понятно. Вот как я это делаю:</p>\n<pre><code>html {\n    box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n    box-sizing: inherit;\n}\n</code></pre>\n<p>Примечание: если вам нужно более детальное объяснение работы свойства <code>box-sizing</code>, я рекомендую вам <a href="https://zellwk.com/blog/understanding-css-box-sizing/">прочесть эту статью</a>.</p>\n<h2>Шаг 3: создание контейнера сетки</h2>\n<p>У каждой сетки есть контейнер, определяющий её максимальную ширину. Как правило, я называю его <code>.l-wrap</code>. Префикс <code>.l-</code> означает <em>layout</em> (раскладка). Я использую такое именование с тех пор, как изучил <a href="https://smacss.com/">SMACSS</a>, методологию <a href="https://twitter.com/snookca">Джонатана Снука</a>.</p>\n<pre><code>.l-wrap {\n    max-width: 1140px;\n    margin-right: auto;\n    margin-left: auto;\n}\n</code></pre>\n<p>Примечание: для лучшей доступности и адаптивности я настоятельно рекомендую использовать вместо пикселей относительные единицы измерения вроде <code>em</code> или <code>rem</code>. В примерах я использую пиксели, потому что они проще для понимания.</p>\n<h2>Шаг 4: расчёт ширины колонок</h2>\n<p>Помните, что мы используем флоаты для вёрстки колонок и отступов? С флоатами мы можем использовать только пять CSS-свойств для создания колонок и отступов, в случае с флексами, их немного больше.</p>\n<ol>\n<li><code>width</code></li>\n<li><code>margin-right</code></li>\n<li><code>margin-left</code></li>\n<li><code>padding-right</code></li>\n<li><code>padding-left</code></li>\n</ol>\n<p>Если вы помните, при использовании CSS-сеток разметка выглядит примерно так:</p>\n<pre><code>&#x3C;div class="l-wrap">\n    &#x3C;div class="three-col-grid">\n        &#x3C;div class="grid-item">Элемент сетки&#x3C;/div>\n        &#x3C;div class="grid-item">Элемент сетки&#x3C;/div>\n        &#x3C;div class="grid-item">Элемент сетки&#x3C;/div>\n    &#x3C;/div>\n&#x3C;/div>\n</code></pre>\n<p>Из этой разметки понятно, что сетка имеет всего три колонки. Также видно, что для создания отступов нет дополнительных <code>&#x3C;div></code>. Это означает, что:</p>\n<ol>\n<li>Мы создаём колонки с помощью свойства <code>width</code>;</li>\n<li>Мы создаём отступы с помощью свойств <code>margin</code> или <code>padding</code>.</li>\n</ol>\n<p>Думать о колонках и отступах одновременно сложно, поэтому давайте для начала представим, что делаем сетку без отступов.</p>\n<p>Эта сетка будет выглядеть примено так:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 11.686143572621036%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAcUlEQVQI1yXGQQqDMBAFUO9/p8YSk0nXrrowMz9SXNkotqAQHSsU3uJVmrMyH0CJvLOckA0DoJfIhbn8j3HALPKWOEZkcOZpnSpNSW1TnF9uZrPNSX6h1gcl2k39qe9fCscldO3j5W1nzdMQyCXXz/0PgrhociD80b0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x422;&#x440;&#x451;&#x445;&#x43A;&#x43E;&#x43B;&#x43E;&#x43D;&#x43E;&#x447;&#x43D;&#x430;&#x44F; &#x441;&#x435;&#x442;&#x43A;&#x430; &#x431;&#x435;&#x437; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;." title="" src="/static/2-4ade34f7926ea9d1315b900f7b28f93e-ce0d4.png" srcset="/static/2-4ade34f7926ea9d1315b900f7b28f93e-a6060.png 163w,\n/static/2-4ade34f7926ea9d1315b900f7b28f93e-1a895.png 325w,\n/static/2-4ade34f7926ea9d1315b900f7b28f93e-ce0d4.png 650w,\n/static/2-4ade34f7926ea9d1315b900f7b28f93e-63d2a.png 975w,\n/static/2-4ade34f7926ea9d1315b900f7b28f93e-87302.png 1300w,\n/static/2-4ade34f7926ea9d1315b900f7b28f93e-34b20.png 1950w,\n/static/2-4ade34f7926ea9d1315b900f7b28f93e-42b1b.png 2396w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x422;&#x440;&#x451;&#x445;&#x43A;&#x43E;&#x43B;&#x43E;&#x43D;&#x43E;&#x447;&#x43D;&#x430;&#x44F; &#x441;&#x435;&#x442;&#x43A;&#x430; &#x431;&#x435;&#x437; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;.</figcaption>\n</figure>\n<p>А теперь нужно произвести несколько математических вычислений. Мы знаем, что сетка имеет максимальную ширину в 1140 пикселей, значит ширина каждой колонка — 380 пикселей (1140 ÷ 3).</p>\n<pre><code>.three-col-grid .grid-item {\n    width: 380px;\n    float: left;\n}\n</code></pre>\n<p>Пока всё хорошо. Мы сделали сетку, которая отлично работает на вьюпортах больше 1140 пикселей. К сожалению, всё ломается, когда вьюпорт становится меньше.</p>\n<figure>\n    <img src="/3-cc122d4fec04c413111d860eb627344f.gif" alt="&#x421;&#x435;&#x442;&#x43A;&#x430; &#x43B;&#x43E;&#x43C;&#x430;&#x435;&#x442;&#x441;&#x44F;, &#x43A;&#x43E;&#x433;&#x434;&#x430; &#x432;&#x44C;&#x44E;&#x43F;&#x43E;&#x440;&#x442; &#x43C;&#x435;&#x43D;&#x44C;&#x448;&#x435; 1140 &#x43F;&#x438;&#x43A;&#x441;&#x435;&#x43B;&#x435;&#x439;.">\n    <figcaption>&#x421;&#x435;&#x442;&#x43A;&#x430; &#x43B;&#x43E;&#x43C;&#x430;&#x435;&#x442;&#x441;&#x44F;, &#x43A;&#x43E;&#x433;&#x434;&#x430; &#x432;&#x44C;&#x44E;&#x43F;&#x43E;&#x440;&#x442; &#x43C;&#x435;&#x43D;&#x44C;&#x448;&#x435; 1140 &#x43F;&#x438;&#x43A;&#x441;&#x435;&#x43B;&#x435;&#x439;.</figcaption>\n</figure>\n<p>Из-за этого мы не можем использовать пиксели. Нам нужна единица измерения, которая зависит от ширины контейнера: это проценты. Давайте зададим ширину колонок в процентах:</p>\n<pre><code>.three-col-grid .grid-item  {\n    width: 33.33333%;\n    float: left;\n}\n</code></pre>\n<p>Код выше задаёт простую резиновую трёхколоночную сетку без отступов. Колонки меняют свою ширину пропорционально ширине окна браузера.</p>\n<figure>\n    <img src="/4-b19a18ea4e293d71b324a3e321902529.gif" alt="&#x422;&#x440;&#x438; &#x43A;&#x43E;&#x43B;&#x43E;&#x43D;&#x43A;&#x438; &#x431;&#x435;&#x437; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;.">\n    <figcaption>&#x422;&#x440;&#x438; &#x43A;&#x43E;&#x43B;&#x43E;&#x43D;&#x43A;&#x438; &#x431;&#x435;&#x437; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;.</figcaption>\n</figure>\n<p>Прежде чем двигаться дальше, нужно уточнить одну вещь. Когда все дочерние элементы контейнера плавающие (им задано свойство <code>float</code>), высота контейнера обнуляется. Это явление называется <a href="https://css-tricks.com/all-about-floats/">схлопыванием флоатов</a>. Контейнер ведёт себя так, будто в нём нет дочерних элементов:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 540px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 33.7037037037037%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzklEQVQY011Q7Q7CIAz0/d/RX9PooiYuo/RjQL3C4ldTyLV3RxsO/h2t+ePh0+TXa+T57PMcJZq32968XJx5yA8/ZiIX8ZxdNQBE4zaLDhIUOrXu5tyD4pCtKzFn1cSsZqxKIsjMbNu2UxmXfsy6rpYhYGAT0WXRjgU4JeROwbQsAiWGDzMmyDzn08lKIaJilo5HrIDHdNv0fs/TFGOJaimg9PmE5TM5nu3qCCwJTDQqBkDZt4gyJVDyntxaqz1b/4aKCFj737dR/lFoDPMLCTSXZVOvp5MAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x421;&#x445;&#x43B;&#x43E;&#x43F;&#x44B;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x444;&#x43B;&#x43E;&#x430;&#x442;&#x430;." title="" src="/static/5-4ecb4358d4d335d21f2024b010388f1f-30c9a.png" srcset="/static/5-4ecb4358d4d335d21f2024b010388f1f-ae985.png 163w,\n/static/5-4ecb4358d4d335d21f2024b010388f1f-8cae0.png 325w,\n/static/5-4ecb4358d4d335d21f2024b010388f1f-30c9a.png 540w" sizes="(max-width: 540px) 100vw, 540px">\n    </span>\n  </span>\n  \n    <figcaption>&#x421;&#x445;&#x43B;&#x43E;&#x43F;&#x44B;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x444;&#x43B;&#x43E;&#x430;&#x442;&#x430;. &#x418;&#x437;&#x43E;&#x431;&#x440;&#x430;&#x436;&#x435;&#x43D;&#x438;&#x435; &#x441; CSS Tricks.</figcaption>\n</figure>\n<p>Чтобы это исправить, нам нужен клиар-фикс. Он выглядит так:</p>\n<pre><code>.three-col-grid::after {\n    display: table;\n    clear: both;\n    content: \'\';\n}\n</code></pre>\n<p>Если вы используете препроцессор вроде Sass, вы можете сделать примесь, чтобы использовать этот код удобно в разных местах:</p>\n<pre><code>// Клиар-фикс\n@mixin clearfix {\n    &#x26;::after {\n        display: table;\n        clear: both;\n        content: \'\';\n    }\n}\n\n// Использование\n.three-col-grid {\n    @include clearfix;\n}\n</code></pre>\n<p>Мы разобрались с колонками. Следующий шаг — отступы.</p>\n<h2>Шаг 5: определение положения отступов</h2>\n<p>Пока мы только знаем, что их можно реализовать с помощью свойств <code>margin</code> и <code>padding</code>. Но какое из них следует выбрать?</p>\n<p>Сделав несколько попыток, вы быстро поймёте, что есть четыре возможных способа как сделать эти отступы: внешние, <code>margin</code> и внутренние, <code>padding</code>. Отступы могут быть расположены:</p>\n<ol>\n<li>С одной стороны, внешние;</li>\n<li>С одной стороны, внутренние;</li>\n<li>Равномерно с обеих сторон, внешние;</li>\n<li>Равномерно с обеих сторон, внутренние.</li>\n</ol>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 48.102246320681644%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB2UsqkDhf/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAIQETH/2gAIAQEAAQUCYsXJ/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bh//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/Aaf/xAAYEAACAwAAAAAAAAAAAAAAAAABMQAgkf/aAAgBAQAGPwJmM5X/xAAbEAACAQUAAAAAAAAAAAAAAAAAATERICFxsf/aAAgBAQABPyF44DwM9Zt7s//aAAwDAQACAAMAAAAQc9//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EHQsP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxCYV//EABwQAQACAgMBAAAAAAAAAAAAAAEAESFBEDFRYf/aAAgBAQABPxDxYl4vLAO2PsByKY9QWzOzj//Z&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x427;&#x435;&#x442;&#x44B;&#x440;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x44B;&#x445; &#x441;&#x43F;&#x43E;&#x441;&#x43E;&#x431;&#x430; &#x441;&#x43E;&#x437;&#x434;&#x430;&#x442;&#x44C; &#x43A;&#x43E;&#x43B;&#x43E;&#x43D;&#x43A;&#x438; &#x438; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B;." title="" src="/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-ce0d4.png" srcset="/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-a6060.png 163w,\n/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-1a895.png 325w,\n/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-ce0d4.png 650w,\n/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-63d2a.png 975w,\n/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-87302.png 1300w,\n/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-34b20.png 1950w,\n/static/6-c52e3aa3adad8ad071fbba2e90b4b1e5-0fa81.png 2582w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x427;&#x435;&#x442;&#x44B;&#x440;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x44B;&#x445; &#x441;&#x43F;&#x43E;&#x441;&#x43E;&#x431;&#x430; &#x441;&#x43E;&#x437;&#x434;&#x430;&#x442;&#x44C; &#x43A;&#x43E;&#x43B;&#x43E;&#x43D;&#x43A;&#x438; &#x438; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B;.</figcaption>\n</figure>\n<p>Здесь начинаются сложности. Вам нужно по-разному рассчитать ширину колонок в зависимости от используемого метода. Рассмотрим эти методы один за другим и посмотрим на разницу. Не торопитесь, пока читаете.</p>\n<p>Поехали:</p>\n<h3>Метод 1: внешние односторонние отступы</h3>\n<p>Используя этот метод, вы создаете отступы с помощь <code>margin</code>. Этот отступ будет расположен слева или справа от колонки. Вам решать, какую сторону выбрать.</p>\n<p>В рамках этой статьи, давайте предположим, что вы задаете отступы справа. Вот что вы будете делать:</p>\n<pre><code>.grid-item {\n    margin-right: 20px;\n    float: left;\n}\n</code></pre>\n<p>Затем пересчитываете ширину колонки как на картинке:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.85264567983925%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABPUlEQVQY03VQXU/CMBTdr5c4NVH8Bz7wIDFR1GA0PuC2Zo7wpTwYjBNIxthGxyZja7e19RbfAE9vbk/P7blpr8J3ILbAebL6ieMI2FZFEftACpbmMgihSZrFaxolBEhGaJpz0LOCQVMliqLpdOr7vuM448lkuVyC+WqIz5F7ZuInq9e0BtXXsGrhpvX+bHVPzRBKl28LIZhi23aj0Wi1Wpqm6RtkWVYfhseao6LFg9m9M/uqERwZwa05eDQ7qoFPNKfW96W5LEtKKSGkKArgQErGagN8+OJWDHxvtG+MTkVfVPTg2ug1UftAD1XNvehuzLsfhpmNgjX69NAXHs/m3zMf2Ri4PfMmrofsUB/NP7wELu4fmGClYDkElxPmNE3SVSz7wmKF1CHzf8yMcyafIAmA5jmhdHNk/E+Xu/gFYD24KbVU/5gAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x412;&#x43D;&#x435;&#x448;&#x43D;&#x438;&#x435; &#x43E;&#x434;&#x43D;&#x43E;&#x441;&#x442;&#x43E;&#x440;&#x43E;&#x43D;&#x43D;&#x438;&#x435; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B;." title="" src="/static/7-ed4b7ee94e665e5a828cb672e9803c02-ce0d4.png" srcset="/static/7-ed4b7ee94e665e5a828cb672e9803c02-a6060.png 163w,\n/static/7-ed4b7ee94e665e5a828cb672e9803c02-1a895.png 325w,\n/static/7-ed4b7ee94e665e5a828cb672e9803c02-ce0d4.png 650w,\n/static/7-ed4b7ee94e665e5a828cb672e9803c02-63d2a.png 975w,\n/static/7-ed4b7ee94e665e5a828cb672e9803c02-87302.png 1300w,\n/static/7-ed4b7ee94e665e5a828cb672e9803c02-9f4a8.png 1493w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x412;&#x43D;&#x435;&#x448;&#x43D;&#x438;&#x435; &#x43E;&#x434;&#x43D;&#x43E;&#x441;&#x442;&#x43E;&#x440;&#x43E;&#x43D;&#x43D;&#x438;&#x435; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B;.</figcaption>\n</figure>\n<p>Как вы видите на картинке выше, 1440 пикселей — это три колонки и два отступа.</p>\n<p>И тут появляется проблема… Нам нужно, чтобы колонки были описаны в процентах, но в то же время отступы зафиксированы на ширине 20 пикселей. Мы не можем делать вычисления с двумя разными единицами измерения одновременно!</p>\n<p>Это было невозможно раньше, но возможно сейчас.</p>\n<p>Вы можете использовать CSS-функцию <code>calc</code> для сочетания процентов с другими единицами измерения. Она на лету извлекает значение процентов для выполнения вычислений.</p>\n<p>Это значит, что вы можете задать ширину в виде функции, и браузер автоматически рассчитает ее значение:</p>\n<pre><code>.grid-item {\n    width: calc((100% - 20px * 2) / 3);\n}\n</code></pre>\n<p>Это круто.</p>\n<p>После получения ширины колонки, вам нужно удалить последний отступ у крайнего правого элемента сетки. Вот как это можно сделать:</p>\n<pre><code>.grid-item:last-child {\n    margin-right: 0;\n}\n</code></pre>\n<p>Чаще всего, когда вы удаляете последний отступ у крайнего правого элемента, вы также хотите задать ему обтекание по правой стороне для предотвращения ошибок субпикселного округления, из-за которых ваша сетка переносит последний элемент на новую строку. Это происходит только в браузерах, которые округляют пиксели.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 40.40077569489334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABCUlEQVQY042R20vDMBjF+9eLF3A++uKTLyIoQxAEGXVsLyIom1UU6pWla7vmpi3Lcmk9tihaHHj4Ej6SnJNfiFdoF8TFeJo/c/XCFZrruHhb2KqqShTGcnkTuegMo7U+OQzo0S1DszkgT2yOPW2Mtbas9Zn1W1/mQbR6Rg4C2r2hK/5ko08ea7MrS1tr6c18bk5DcXLPL0kO/l4o/AeZFaYxI98YkyQJpZQxhplzjkZKiVAvzfXeaLZ7NeuFshXc4DnntNY4an6oeQ6w9dYwWvdf90epcxbLKBiqf8iL3/XORbJ9Pj2+Y9+rMAsh0jQFYZZlSqkGpG22rpTKCmXxZy1m4CGlIfzz5g9kxcZwKEv7IgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41E;&#x448;&#x438;&#x431;&#x43A;&#x430; &#x441;&#x443;&#x431;&#x43F;&#x438;&#x43A;&#x441;&#x435;&#x43B;&#x43D;&#x43E;&#x433;&#x43E; &#x43E;&#x43A;&#x440;&#x443;&#x433;&#x43B;&#x435;&#x43D;&#x438;&#x44F; &#x43C;&#x43E;&#x436;&#x435;&#x442; &#x441;&#x43B;&#x43E;&#x43C;&#x430;&#x442;&#x44C; &#x441;&#x435;&#x442;&#x43A;&#x443;, &#x432;&#x44B;&#x442;&#x43E;&#x43B;&#x43A;&#x43D;&#x443;&#x432; &#x43F;&#x43E;&#x441;&#x43B;&#x435;&#x434;&#x43D;&#x438;&#x439; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442; &#x43D;&#x430; &#x441;&#x43B;&#x435;&#x434;&#x443;&#x44E;&#x449;&#x443;&#x44E; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x443;." title="" src="/static/8-5cc59bc5c2f1333aa495cc124f0c7a92-ce0d4.png" srcset="/static/8-5cc59bc5c2f1333aa495cc124f0c7a92-a6060.png 163w,\n/static/8-5cc59bc5c2f1333aa495cc124f0c7a92-1a895.png 325w,\n/static/8-5cc59bc5c2f1333aa495cc124f0c7a92-ce0d4.png 650w,\n/static/8-5cc59bc5c2f1333aa495cc124f0c7a92-63d2a.png 975w,\n/static/8-5cc59bc5c2f1333aa495cc124f0c7a92-87302.png 1300w,\n/static/8-5cc59bc5c2f1333aa495cc124f0c7a92-d6fa1.png 1547w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41E;&#x448;&#x438;&#x431;&#x43A;&#x430; &#x441;&#x443;&#x431;&#x43F;&#x438;&#x43A;&#x441;&#x435;&#x43B;&#x43D;&#x43E;&#x433;&#x43E; &#x43E;&#x43A;&#x440;&#x443;&#x433;&#x43B;&#x435;&#x43D;&#x438;&#x44F; &#x43C;&#x43E;&#x436;&#x435;&#x442; &#x441;&#x43B;&#x43E;&#x43C;&#x430;&#x442;&#x44C; &#x441;&#x435;&#x442;&#x43A;&#x443;, &#x432;&#x44B;&#x442;&#x43E;&#x43B;&#x43A;&#x43D;&#x443;&#x432; &#x43F;&#x43E;&#x441;&#x43B;&#x435;&#x434;&#x43D;&#x438;&#x439; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442; &#x43D;&#x430; &#x441;&#x43B;&#x435;&#x434;&#x443;&#x44E;&#x449;&#x443;&#x44E; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x443;.</figcaption>\n</figure>\n<pre><code>​.grid-item:last-child {\n    margin-right: 0;\n    float: right;\n}\n</code></pre>\n<p>Фух. Почти готово. И ещё одна вещь.</p>\n<p>Наш код хорош только в том случае, если сетка содержит лишь одну строку. Но он не справляется, если строк с элементами больше, чем одна 😢</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.439597315436245%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHVtKiQf//EABkQAAMAAwAAAAAAAAAAAAAAAAABAhESIf/aAAgBAQABBQKevGgqP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPwGNf//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwGsf//EABYQAQEBAAAAAAAAAAAAAAAAAAAxEf/aAAgBAQAGPwJtR//EABgQAAMBAQAAAAAAAAAAAAAAAAABEVHR/9oACAEBAAE/IUcKaBVdH//aAAwDAQACAAMAAAAQCB//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAEDAQE/EBzYV//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QXckX/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFh0fD/2gAIAQEAAT8QymLN2wQdjFOO4t1Dzif/2Q==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41A;&#x43E;&#x434; &#x43D;&#x435; &#x441;&#x43F;&#x440;&#x430;&#x432;&#x43B;&#x44F;&#x435;&#x442;&#x441;&#x44F;, &#x435;&#x441;&#x43B;&#x438; &#x441;&#x442;&#x440;&#x43E;&#x43A; &#x431;&#x43E;&#x43B;&#x44C;&#x448;&#x435;, &#x447;&#x435;&#x43C; &#x43E;&#x434;&#x43D;&#x430;." title="" src="/static/9-a05ec093edbab1a0b78f3993c00f50fe-ce0d4.png" srcset="/static/9-a05ec093edbab1a0b78f3993c00f50fe-a6060.png 163w,\n/static/9-a05ec093edbab1a0b78f3993c00f50fe-1a895.png 325w,\n/static/9-a05ec093edbab1a0b78f3993c00f50fe-ce0d4.png 650w,\n/static/9-a05ec093edbab1a0b78f3993c00f50fe-63d2a.png 975w,\n/static/9-a05ec093edbab1a0b78f3993c00f50fe-fbe87.png 1192w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41A;&#x43E;&#x434; &#x43D;&#x435; &#x441;&#x43F;&#x440;&#x430;&#x432;&#x43B;&#x44F;&#x435;&#x442;&#x441;&#x44F;, &#x435;&#x441;&#x43B;&#x438; &#x441;&#x442;&#x440;&#x43E;&#x43A; &#x431;&#x43E;&#x43B;&#x44C;&#x448;&#x435;, &#x447;&#x435;&#x43C; &#x43E;&#x434;&#x43D;&#x430;.</figcaption>\n</figure>\n<p>Нам нужно удалить правый внешний отступ у каждого крайнего правого элемента в каждой строке. Лучший способ это сделать — использовать <code>nth-child</code>:</p>\n<pre><code>/* Для 3-колоночной сетки */\n.grid-item:nth-child(3n+3) {\n    margin-right: 0;\n    float: right;\n}\n</code></pre>\n<p>Это всё, что нужно для создания односторонних внешних отступов. Вот CodePen, чтобы вы сами поиграли:</p>\n<figure>\n    <iframe height="265" src="https://codepen.io/Lesnevskiy/embed/RoZpva/?height=265&theme-id=0&default-tab=css,result&embed-version=2" scrolling="no" title="Односторонняя сетка с использованием внешних отступов" frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>\n    <figcaption>Односторонняя сетка с использованием внешних отступов.</figcaption>\n</figure>\n<p><strong>Примечание:</strong> свойство <code>сalc</code> не работает в IE8 и Opera Mini. Смотрите другие подходы, если вам нужно поддерживать эти браузеры.</p>\n<h3>Метод 2: внутренние односторонние отступы</h3>\n<p>Как и с внешними односторонними отступами, в этом методе требуется разместить отступы на одной из сторон колонки. Предположим, что вы снова выбрали правую сторону.</p>\n<pre><code>.grid-item {\n    padding-right: 20px;\n    float: left;\n}\n</code></pre>\n<p>Затем, вы можете пересчитать ширину колонки как на картинке:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 39.13337846987136%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABRElEQVQY041Q207CQBTsr/OIYoxA+AFe5AfghdggvSwWEUQfvBC0dHsLUGxLt3sr7tbLg9HEyeRkMrtzNrPK4R+gBMe7CO3TH75CKc2yLM9zQogQaSpvJJh7CQlSGqQ4jN/cHYKSmdBBKn0voXvCFcdxut0uAEBVVdM0Hx6fRFh/TaqXbsMMW6PV+e2kbgYNQeB35tdNABsgqA7dG3evQAj7/X6v15vNZh/PCmgvsQwbYQusOiJs+GeGXze8znzSNKFYVB2UYcYYxhghxDkXMVbOwTKuXMCaFp7qdns6Phr6x5qg255aJ5pT04OKCsdOqny3Lz4h9SpC+jLSn9eWvb3z4JUdG4v1aLm996BlR/pirS02foyVPz64OBSM59mBs3IvR8mOU1KecJZnBZP69zBljFAqKohR9iKbzRYTwjiTzpf/Dk5Es9K+LZY0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41E;&#x434;&#x43D;&#x43E;&#x441;&#x442;&#x43E;&#x440;&#x43E;&#x43D;&#x43D;&#x438;&#x435; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B; &#x441; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;&#x43C; &#x432;&#x43D;&#x443;&#x442;&#x440;&#x435;&#x43D;&#x43D;&#x438;&#x445; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;." title="" src="/static/10-a54fc8620cf289fb130747bccc562de6-ce0d4.png" srcset="/static/10-a54fc8620cf289fb130747bccc562de6-a6060.png 163w,\n/static/10-a54fc8620cf289fb130747bccc562de6-1a895.png 325w,\n/static/10-a54fc8620cf289fb130747bccc562de6-ce0d4.png 650w,\n/static/10-a54fc8620cf289fb130747bccc562de6-63d2a.png 975w,\n/static/10-a54fc8620cf289fb130747bccc562de6-87302.png 1300w,\n/static/10-a54fc8620cf289fb130747bccc562de6-26e7a.png 1477w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41E;&#x434;&#x43D;&#x43E;&#x441;&#x442;&#x43E;&#x440;&#x43E;&#x43D;&#x43D;&#x438;&#x435; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B; &#x441; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;&#x43C; &#x432;&#x43D;&#x443;&#x442;&#x440;&#x435;&#x43D;&#x43D;&#x438;&#x445; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;.</figcaption>\n</figure>\n<p>Обратили внимание, что ширина отличается от предыдущего метода? Мы переключили свойство <code>box-sizing</code> в <code>border-box</code>. Теперь <code>width</code> рассчитывается, включая в себя <code>padding</code>.</p>\n<p>В этом случае, две из трёх колонок имеют бо́льшую ширину, чем последняя, что в конечном итоге приводит к причудливым расчётам и делает CSS трудным для понимания.</p>\n<p>Я предлагаю даже не продолжать с этим методом. Всё обернётся действительно страшно. Пробуйте на свой страх и риск.</p>\n<h3>Метод 3: внешние разделённые отступы</h3>\n<p>В этом методе мы разделяем отступы на две части и размещаем по половине с каждой стороны колонки. Код выглядит примерно так:</p>\n<pre><code>.grid-item {\n    margin-right: 10px;\n    margin-left: 10px;\n    float: left;\n}\n</code></pre>\n<p>Затем пересчитываем ширину колонки как на картинке:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 41.47398843930635%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABo0lEQVQoz22S7WvTUBTG89crE6kdA9/Aja5sXwT94gdBGKNNYtu1wbbOUWS2NJguSZO1zSt5+3mTiFPpgYd7z73Pfe695zlSURTkef4PxNJ/UVDyAt9jc++y226pKA/EvGahS+yNgjBJ8eJEIMWPYjzfZxtEeGHM/c4nCHxCsR/UyOtjhS45jsNyucQwDObzucCCjf2Tk94Pmp9NGj2H896MTk/laODy+sri1cBE611wPDB40Tdpqmau3iwgC3RpNpvRarVot9v0+33Wa4etEHyj3vJMMXmq2Jwp37hUZZ4oa5qKwaGyYqR+4rmii/yOg66Zd67nQtDXJcuymE6nDIdDXNetXh7tbF52vwsxiwMhctq95kLu8Fhe0xACDXnFlfyRI1kXucmjjplffr2tBfdVMA42vBvrnIxMjjWbD+M52nTM2Rfx/ZHB27HFzWTA+8kd59qKtmbmk8VKWBPpUune36hrW5BlGb5wNQyCal66n8QRgeeRpQlZ2RGZMMzbEUfhg8v7BKvDSfKnjdI0rcYoirBtu8rLS9K0vkjM898P0X8BUexN0baIm+AAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x420;&#x430;&#x437;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; &#x432;&#x43D;&#x435;&#x448;&#x43D;&#x438;&#x445; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;." title="" src="/static/11-8f45bba8d238b75fed320e4c5baf99e2-ce0d4.png" srcset="/static/11-8f45bba8d238b75fed320e4c5baf99e2-a6060.png 163w,\n/static/11-8f45bba8d238b75fed320e4c5baf99e2-1a895.png 325w,\n/static/11-8f45bba8d238b75fed320e4c5baf99e2-ce0d4.png 650w,\n/static/11-8f45bba8d238b75fed320e4c5baf99e2-63d2a.png 975w,\n/static/11-8f45bba8d238b75fed320e4c5baf99e2-87302.png 1300w,\n/static/11-8f45bba8d238b75fed320e4c5baf99e2-a38ee.png 1384w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x420;&#x430;&#x437;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435; &#x432;&#x43D;&#x435;&#x448;&#x43D;&#x438;&#x445; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x43E;&#x432;.</figcaption>\n</figure>\n<p>Как мы узнали ранее, рассчитать ширину колонки можно с помощью функции <code>calc</code>. В этой ситуации мы отнимаем три отступа от 100%, прежде чем делить ответ на три для получения ширины колонки. Другими словами, ширина колонки будет <code>calc((100% - 20px * 3) / 3)</code>.</p>\n<pre><code>.grid-item {\n    width: calc((100% - 20px * 3) / 3);\n    margin-right: 10px;\n    margin-left: 10px;\n    float: left;\n}\n</code></pre>\n<p>Это всё! Вам не нужно ничего дополнительно делать для сеток с несколькими строками 😉 Вот CodePen, чтобы вы могли поиграть:</p>\n<figure>\n    <iframe height="265" src="https://codepen.io/Lesnevskiy/embed/KNvWYR/?height=265&theme-id=0&default-tab=css,result&embed-version=2" scrolling="no" title="Сетка с внешними разделенными отступами." frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>\n    <figcaption>Сетка с внешними разделенными отступами.</figcaption>\n</figure>\n<h3>Метод 4: внутренние разделённые отступы</h3>\n<p>Этот метод аналогичен предыдущему. Мы делили отступы и размещали их с каждой стороны колонки. На этот раз мы используем <code>padding</code>:</p>\n<pre><code>.grid-item {\n    padding-right: 10px;\n    padding-left: 10px;\n    float: left;\n}\n</code></pre>\n<p>Затем вы рассчитываете ширину колонки так:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 42.15473608098337%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABY0lEQVQY02VRW0/CMBjd71cuDwQDJEaiRLn44BJf5Ilkm+AGnRDRKRGzCGG3kMHWdevazQ5vEU+a9uvJ+U6+nI9L05RSmnwj/YPsiwK4cd3txmWyT+YHXPoPmBAUxewEIfaDYAsRRNHGg14Av/goZpqsWdM0QRAURRFF8V4dwwg21HllYFVluz7SOxO1pjjHQ5vdlxNQB4uabB8NrPZExxRysiy3Wi2e53u9nrEyQoKq8iwvWgXJKvfnDXVYEK2itCqIZkOVywO9KJmHglkHb5j6nOu66/V6sVjEccwmCTCsyLOcYOUlq3T7egqUXGZk5ATzDNyV+jrjDwTrBMyz5t9wdmmFMbp+em8Cs6ma/MOy+/zYGTsXo2V77HS16dV01QTGOTBvXpaYIG4v56yiFEEIfS+hJMaYxtj3tqxioyWEBL7P8k92C9pPm1FMRHfbI4SwJwwj23Ewc6E0YzJzmhklyQduaq71KGeZtQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x412;&#x43D;&#x443;&#x442;&#x440;&#x435;&#x43D;&#x43D;&#x438;&#x435; &#x440;&#x430;&#x437;&#x434;&#x435;&#x43B;&#x451;&#x43D;&#x43D;&#x44B;&#x435; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B;." title="" src="/static/12-9fb42e2878e494ce4c52df11bb013ba1-ce0d4.png" srcset="/static/12-9fb42e2878e494ce4c52df11bb013ba1-a6060.png 163w,\n/static/12-9fb42e2878e494ce4c52df11bb013ba1-1a895.png 325w,\n/static/12-9fb42e2878e494ce4c52df11bb013ba1-ce0d4.png 650w,\n/static/12-9fb42e2878e494ce4c52df11bb013ba1-63d2a.png 975w,\n/static/12-9fb42e2878e494ce4c52df11bb013ba1-87302.png 1300w,\n/static/12-9fb42e2878e494ce4c52df11bb013ba1-4f2bd.png 1383w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x412;&#x43D;&#x443;&#x442;&#x440;&#x435;&#x43D;&#x43D;&#x438;&#x435; &#x440;&#x430;&#x437;&#x434;&#x435;&#x43B;&#x451;&#x43D;&#x43D;&#x44B;&#x435; &#x43E;&#x442;&#x441;&#x442;&#x443;&#x43F;&#x44B;.</figcaption>\n</figure>\n<p>Обратили внимание, что в этом случае гораздо легче делать расчеты? Всё верно: это треть ширины сетки в каждой контрольной точке.</p>\n<pre><code>.grid-item {\n    width: 33.3333%;\n    padding-right: 10px;\n    padding-left: 10px;\n    float: left;\n}\n</code></pre>\n<p>Вот CodePen, чтобы вы могли поиграть:</p>\n<figure>\n    <iframe height="265" src="https://codepen.io/Lesnevskiy/embed/qqXrzB/?height=265&theme-id=0&default-tab=css,result&embed-version=2" scrolling="no" title="Сетка с внутренними разделенными отступами." frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>\n    <figcaption>Сетка с внутренними разделенными отступами.</figcaption>\n</figure>\n<p>Прежде чем мы двинемся дальше, я хочу вас предостеречь, если вы используете разделенный <code>padding</code>. Если вы взглянете на разметку в CodePen, то увидите, что я добавил дополнительный <code>&#x3C;div></code> внутри <code>.grid-item</code>. Этот дополнительный <code>&#x3C;div></code> важен, если компонент содержит фон или рамки.</p>\n<p>Всё потому, что фон отображается в границах <code>padding</code>. Надеюсь, эта картинка поможет вам разобраться, показав связь между <code>background</code> и другими свойствами.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB10Wow0Af/8QAGhABAAMAAwAAAAAAAAAAAAAAAQACAwQQEv/aAAgBAQABBQLS/ipyBYgwzr1//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAECH/2gAIAQIBAT8Bh//EABoQAAICAwAAAAAAAAAAAAAAAAERABAhMTL/2gAIAQEABj8CcAW6yHORX//EABsQAAIDAAMAAAAAAAAAAAAAAAERABAhMVFx/9oACAEBAAE/IQuh6o4nS5oagB0YCig+V//aAAwDAQACAAMAAAAQrC//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QNX//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAECAQE/EBppH//EABkQAQEAAwEAAAAAAAAAAAAAAAERABAhQf/aAAgBAQABPxAkkogZkccKjl17tCFLiAmNIOa//9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x424;&#x43E;&#x43D; &#x43E;&#x442;&#x43E;&#x431;&#x440;&#x430;&#x436;&#x430;&#x435;&#x442;&#x441;&#x44F; &#x43D;&#x430; padding." title="" src="/static/13-7670dea854c7457f9f2b25bbdaaa8a69-cb685.jpg" srcset="/static/13-7670dea854c7457f9f2b25bbdaaa8a69-94a32.jpg 163w,\n/static/13-7670dea854c7457f9f2b25bbdaaa8a69-09a61.jpg 325w,\n/static/13-7670dea854c7457f9f2b25bbdaaa8a69-cb685.jpg 650w,\n/static/13-7670dea854c7457f9f2b25bbdaaa8a69-5213f.jpg 800w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x424;&#x43E;&#x43D; &#x43E;&#x442;&#x43E;&#x431;&#x440;&#x430;&#x436;&#x430;&#x435;&#x442;&#x441;&#x44F; &#x43D;&#x430; `padding`.</figcaption>\n</figure>\n<h2>Что бы использовал я?</h2>\n<p>Когда я начинал делать сетки два года назад, я в основном делал сетки, которые были спроектированы по <a href="https://zellwk.com/blog/designing-grids/#how-big-should-columns-and-gutters-be-">нисходящему подходу</a> и построены на <a href="https://zellwk.com/blog/designing-grids/#how-the-grid-responds-to-different-viewports">гибридной системе</a>. При таком подходе, я использовал процентные значения и для ширины, и для отступов.</p>\n<p>В то время, я любил простоту настроек отступов с одной стороны колонки. Это было проще потому, что я не так хорош в математике. От дополнительных рассчётов <code>отступы ÷ 2</code> я быстро вырубался.</p>\n<p>Я рад, что я пошёл этим путем. Хоть CSS и выглядит более сложным, чем для разделенных отступов, я был вынужден <a href="https://css-tricks.com/examples/nth-child-tester/">изучить</a> селектор <code>nth-child</code>. Я также понял важность написания <a href="https://zellwk.com/blog/how-to-write-mobile-first-css/">CSS сначала для мобильных</a>. Насколько я могу судить, это до сих пор является главным препятствием и для молодых, и для опытных разработчиков.</p>\n<p>Так или иначе, если вы попросите меня выбрать сейчас, я выберу разделенные отступы вместо односторонних, потому что CSS для них более простой. Также, я рекомендую использовать <code>margin</code> вместо <code>padding</code>, потому что разметка получается чище. Но <code>padding</code> легче рассчитать, поэтому я продолжу статью с ним.</p>\n<h2>Шаг 6: создание отладочной сетки</h2>\n<p>Когда вы только начинаете, особенно полезно иметь под рукой контрольную сетку, которая поможет отладить вашу разметку. Это помогает быть уверенным, что вы всё делаете правильно.</p>\n<p>На сегодня, мне известен лишь кривой способ создания отладочной сетки. Нужно создать HTML-разметку и добавить к ней немного CSS. Вот так примерно выглядит HTML:</p>\n<pre><code>&#x3C;div class="fixed-gutter-grid">\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n    &#x3C;div class="column">&#x3C;/div>\n&#x3C;/div>\n</code></pre>\n<p>CSS для отладочной сетки выглядит следующим образом. Я использую разделенные внешние отступы для упрощения разметки отладочной сетки:</p>\n<pre><code>.column {\n    width: calc((100% - 20px * 12) / 12);\n    height: 80px;\n    margin-right: 10px;\n    margin-left: 10px;\n    background: rgba(0, 0, 255, 0.25);\n    float: left;\n}\n</code></pre>\n<figure>\n    <iframe height="265" src="https://codepen.io/Lesnevskiy/embed/RoZVbG/?height=265&theme-id=0&default-tab=css,result&embed-version=2" scrolling="no" title="Отладочная сетка с фиксированными отступами." frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>\n    <figcaption>Отладочная сетка с фиксированными отступами.</figcaption>\n</figure>\n<p><strong>Ремарка:</strong> Сьюзан Мириам и Собрал Робсон работают над <a href="https://github.com/oddbird/susy/issues/609">фоновым SVG изображением отладочной сетки для Susy v3</a>. Это очень захватывающе, так как вы можете использовать простую функцию для создания вашей отладочной сетки!</p>\n<h2>Шаг 7: внесите изменения в раскладку</h2>\n<p>Следующий шаг заключается во внесении изменений в раскладку на основе вашего контента. Именно здесь CSS-сетка засияет во всей красе. Вместо того, чтобы создавать разметку с написанием множества сеточных классов, вы можете создать для нее подходящее имя.</p>\n<p>Для примера допустим, что у вас есть сетка для раскладки, которая используется только для гостевых статей. На десктопе раскладка выглядит примерно так:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 18.89830508474576%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAjUlEQVQI1z2L7RaDIAxDef+ndH4BLdgWp6i/FjZnTwi9JLha617reZ7wetT/HF+8vXV23A0fXdflmNjPfhgmPwemFCMTRBwjJc7BAxJekHZdH0JEAVEIhI5TMcTjOMGx5yyyKITFxPBfgVkS5Vc/AJcsPzEnp6qiuq5vbWO3rLlZEWRWcLCUsj4F4LZtH2B14FuQ0lYEAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; &#x441;&#x435;&#x442;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x440;&#x430;&#x441;&#x43A;&#x43B;&#x430;&#x434;&#x43A;&#x438;, &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x430;&#x44F; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x435;&#x442;&#x441;&#x44F; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x434;&#x43B;&#x44F; &#x433;&#x43E;&#x441;&#x442;&#x435;&#x432;&#x44B;&#x445; &#x441;&#x442;&#x430;&#x442;&#x435;&#x439;." title="" src="/static/14-f511eb3b2d05dd9d6e823d511c66a15b-ce0d4.png" srcset="/static/14-f511eb3b2d05dd9d6e823d511c66a15b-a6060.png 163w,\n/static/14-f511eb3b2d05dd9d6e823d511c66a15b-1a895.png 325w,\n/static/14-f511eb3b2d05dd9d6e823d511c66a15b-ce0d4.png 650w,\n/static/14-f511eb3b2d05dd9d6e823d511c66a15b-63d2a.png 975w,\n/static/14-f511eb3b2d05dd9d6e823d511c66a15b-d1130.png 1180w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x440;&#x438;&#x43C;&#x435;&#x440; &#x441;&#x435;&#x442;&#x43A;&#x438; &#x434;&#x43B;&#x44F; &#x440;&#x430;&#x441;&#x43A;&#x43B;&#x430;&#x434;&#x43A;&#x438;, &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x430;&#x44F; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x443;&#x435;&#x442;&#x441;&#x44F; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x434;&#x43B;&#x44F; &#x433;&#x43E;&#x441;&#x442;&#x435;&#x432;&#x44B;&#x445; &#x441;&#x442;&#x430;&#x442;&#x435;&#x439;.</figcaption>\n</figure>\n<p>Разметка для раскладки этой гостевой статьи может быть такой:</p>\n<pre><code>&#x3C;div class="l-guest-article">\n    &#x3C;div class="l-guest">\n        &#x3C;!-- Профиль гостя --\x3e\n    &#x3C;/div>\n    &#x3C;div class="l-main">\n        &#x3C;!-- Главная статья --\x3e\n    &#x3C;/div>\n    &#x3C;div class="l-sidebar">\n        &#x3C;!-- Боковые виджеты --\x3e\n    &#x3C;/div>\n&#x3C;/div>\n</code></pre>\n<p>Итак, сейчас у нас есть 12 колонок. Ширина одной колонки 8,333% (100 ÷ 12).</p>\n<p>Ширина <code>.l-guest</code> равна двум колонкам. Поэтому вам нужно умножить 8,333% на два. Достаточно просто. Проделайте тоже самое для остальных элементов.</p>\n<p>Здесь я предлагаю использовать препроцессор типа Sass, который позволит вам рассчитывать ширину колонок легче, используя функцию <code>percentage</code>, вместо расчетов вручную:</p>\n<pre><code>.l-guest-article {\n    @include clearfix;\n    .l-guest {\n        // Хм, читается лучше, чем 16.666% :)\n        width: percentage(2/12);\n        padding-left: 10px;\n        padding-right: 10px;\n        float: left;\n    }\n\n    .l-main {\n        width: percentage(7/12);\n        padding-right: 10px;\n        padding-left: 10px;\n        float: left;\n    }\n\n    .l-sidebar {\n        width: percentage(3/12);\n        padding-right: 10px;\n        padding-left: 10px;\n        float: left;\n    }\n}\n</code></pre>\n<figure>\n    <iframe height="265" src="https://codepen.io/Lesnevskiy/embed/QGMvLm/?height=265&theme-id=0&default-tab=css,result&embed-version=2" scrolling="no" title="Сетка с фиксированными отступами для раскладки гостевой статьи." frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>\n    <figcaption>Сетка с фиксированными отступами для раскладки гостевой статьи.</figcaption>\n</figure>\n<p>Должно быть вы заметили, что сейчас часть кода повторяется. Мы можем это исправить, вынеся общие части кода в отдельный селектор <code>.grid-item</code>.</p>\n<pre><code>.grid-item {\n    padding-left: 10px;\n    padding-right: 10px;\n    float: left;\n}\n\n.l-guest-article {\n    .l-guest {\n        width: percentage(2/12);\n    }\n    .l-main {\n        width: percentage(7/12);\n    }\n    .l-sidebar {\n        width: percentage(3/12);\n    }\n}\n</code></pre>\n<p>Ну вот, теперь гораздо лучше 🙂</p>\n<h2>Шаг 8: создание вариаций раскладки</h2>\n<p>Последний шаг — сделать вашу раскладку адаптивной. Давайте предположим, что раскладка нашей гостевой статьи ведет себя следующим образом:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 96.32152588555857%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAACy0lEQVQ4y4VTS0wTURR9CkYNGk0kIWGliZGNcUVI1JUKcaWYaKILY1SCCzXRnSs3ihrRDYQSEEUoUNJUW/5fqSZNsI0UKv1k+v/Of4bO9D9tp/V1GiqgDW9xk3fvPXnnnvMuyP/35HIwsPjKRvArh01x2GQ4qA7TjmKt1AXKYDMwksYb1DzAFytD8xXkAqCR11Ituyu40OGzyNz6mx5ji+dXi0t/C3NPSTXxLziVSoXDYZ7n4/F4LBbLZguwrFiIz3RvTqou1I83149fPaW59MmkLJS2giHA7/eHQiGCIFAUFQRBAhdov1x53jB9umnmXNPc+bNzZ0aRYZgUd6UtSoL1G3ytM96nS4En3/wPZv3zVlQq5beBc9sPzGSklutjIdDmqmx3VLxzgvZgmw6VaOd3fRkOll32kgorq7RRo1Zy2EJZcVbitJtVm5oX+jiG2SDJ0nXr2Ua7lE2lYqmINcHbonHe4Foz+Iz2sAdhnU7GLWTSZV8uOox6dXo50H2sNPyWn9A0VA3UHOqvPTBYUztS52cDm3PlAfSG47hIJAKthp4Xfx9DWOw/LiLaKw7390fax/eWbrdq797X3nm42ErxVGkEkEwmocM4jmMYFo1Gd7iFcYnmCapRw14eYxrHNq5NMgSf2Pz75QUrgt1M9HCfH3QH9sp8MB7pC/jYaKm60+c8XIlcJpcTs7msmBdTGWE9RJpQBmGiCB1DSD6RzkBVMhLvfwTbsnLFwcI0yxJ0WatKCxyLMIxPzvqGaMo17VxQIWqNfWJwVTFkUioRtR31qG3MgJmWWxiVBU8KAoBSOxwODA3RDE8E14wjwPAZWC0fjs827FFV7Rs4ul9x7KCyGoxXDa58qeulwFsveB+s7rDjkQSAO5hOp0VpEyMc4Vl75V59hWHr/WZFp7lbZuntMvd0mXs7TDJzwNZjpF4s420/yU59MJ4U/gBccN0SEgUYNQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="15" title="" src="/static/15-714271681a0ae4caf863cb6a04c3fd12-ce0d4.png" srcset="/static/15-714271681a0ae4caf863cb6a04c3fd12-a6060.png 163w,\n/static/15-714271681a0ae4caf863cb6a04c3fd12-1a895.png 325w,\n/static/15-714271681a0ae4caf863cb6a04c3fd12-ce0d4.png 650w,\n/static/15-714271681a0ae4caf863cb6a04c3fd12-63d2a.png 975w,\n/static/15-714271681a0ae4caf863cb6a04c3fd12-87302.png 1300w,\n/static/15-714271681a0ae4caf863cb6a04c3fd12-fc544.png 1468w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n</figure>\n<p>Разметка нашей гостевой статьи не должна меняться. То, что у нас есть — это самая доступная раскладка из возможных. Так что, изменения должны быть полностью в CSS.</p>\n<p>При написании CSS для нашей адаптивной гостевой раскладки, я настоятельно рекомендую вам писать <a href="https://zellwk.com/blog/mobile-first-css/">CSS сначала для мобильных</a>, потому что это делает ваш код проще и аккуратнее. В первую очередь, мы можем начать писать CSS для мобильной раскладки.</p>\n<p>Вот код:</p>\n<pre><code>.l-guest-article {\n    .l-guest {\n        /* Здесь пусто */\n    }\n    .l-main {\n        margin-top: 20px;\n    }\n    .l-sidebar {\n        margin-top: 20px;\n    }\n}\n</code></pre>\n<p>Нам здесь нечего делать, каждый компонент занимает всю доступную ширину по умолчанию. Однако мы можем добавить верхний отступ к последним двум элементам, чтобы отделить их друг от друга.</p>\n<p>Далее двигаемся к планшетной раскладке.</p>\n<p>Давайте предположим, что для этой раскладки мы установим контрольную точку в 700 пикселей. <code>.l-guest</code> должен занимать 4 из 12 колонок, а <code>.l-main</code> и <code>.l-sidebar</code> по 8 колонок каждый.</p>\n<p>Здесь нам надо удалить свойство <code>margin-top</code> у <code>.l-main</code>, потому что он должен быть на одной линии с <code>.l-guest</code>.</p>\n<p>Также, если мы установим <code>.l-sidebar</code> ширину 8 колонок, он автоматически перейдет во второй ряд — в первом ряду не хватит места. Поскольку он находится во втором ряду, нам тоже нужно добавить внешний отступ слева у <code>.l-sidebar</code>, чтобы протолкнуть его на позицию. В качестве альтернативы, мы можем сделать его обтекаемым справа — я так и сделаю, это не требует лишних расчётов.</p>\n<p>И поскольку мы сделали наши грид-элементы обтекаемыми, грид-контейнер должен включать клиар-фикс, чтобы очистить обтекание у дочерних элементов:</p>\n<pre><code>.l-guest-article {\n    @include clearfix;\n    .l-guest {\n        @media (min-width: 700px) {\n            width: percentage(4/12);\n            float: left;\n        }\n    }\n    .l-main {\n        margin-top: 20px;\n        @media (min-width: 700px) {\n            width: percentage(8/12);\n            margin-top: 0;\n            float: left;\n        }\n    }\n    .l-sidebar {\n        margin-top: 20px;\n        @media (min-width: 700px) {\n            width: percentage(8/12);\n            float: right;\n        }\n    }\n}\n</code></pre>\n<p>Наконец, давайте перейдем к десктопной раскладке.</p>\n<p>Допустим, для этой раскладки мы установим контрольную точку в 1200 пикселей. <code>.l-guest</code> будет занимать 2 из 12 колонок, <code>.l-main</code> — 7 из 12 и <code>.l-sidebar</code> — 3 из 12.</p>\n<p>Для этого мы создаем новое медиавыражение в рамках каждого элемента сетки и изменяем ширину по необходимости. Обратите внимание, что мы также должны удалить верхний отступ у <code>.l-sidebar</code>.</p>\n<pre><code>.l-guest-article {\n    @include clearfix;\n    .l-guest {\n        @media (min-width: 700px) {\n            width: percentage(4/12);\n            float: left;\n        }\n\n        @media (min-width: 1200px) {\n            width: percentage(2/12);\n        }\n    }\n    .l-main {\n        margin-top: 20px;\n        @media (min-width: 700px) {\n            width: percentage(8/12);\n            margin-top: 0;\n            float: left;\n        }\n        @media (min-width: 1200px) {\n            width: percentage(7/12);\n        }\n    }\n    .l-sidebar {\n        margin-top: 20px;\n        @media (min-width: 700px) {\n            width: percentage(8/12);\n            float: right;\n        }\n        @media (min-width: 1200px) {\n            width: percentage(3/12);\n            margin-top: 0;\n        }\n    }\n}\n</code></pre>\n<p>Вот CodePen с финальной раскладкой, которую мы создали:</p>\n<figure>\n    <iframe height="265" src="https://codepen.io/Lesnevskiy/embed/zodwOQ/?height=265&theme-id=0&default-tab=css,result&embed-version=2" scrolling="no" title="Сетка с фиксированными отступами для раскладки гостевой статьи, финальная версия." frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>\n    <figcaption>Сетка с фиксированными отступами для раскладки гостевой статьи, финальная версия.</figcaption>\n</figure>\n<p>О, кстати, вы можете добиться таких же результатов со Susy. Только <a href="https://zellwk.com/blog/susy-gutter-positions/">не забудьте</a> выставить <code>gutter-position</code> в <code>inside-static</code>.</p>\n<h2>Подводя итог</h2>\n<p>Ого. Длинная получилась статья. Я думал, трижды помру, пока писал её. Спасибо, что дочитали до конца. Надеюсь, вы не померли трижды, пока читали! 😛</p>\n<p>Как вы могли заметить, в этой статье шаги для создания адаптивной сетки относительно простые. Большинство путается на шагах 5 (определение положения отступов) и 8 (адаптация раскладки).</p>\n<p>5-й шаг прост, когда вы учитываете все возможные способы, и мы разобрали их вместе. 8-й шаг проходится легче, если у вас достаточно опыта в написании <a href="https://zellwk.com/blog/mobile-first-css/">CSS сначала для мобильных</a>.</p>\n<p>Надеюсь, эта статья дала вам знания для построения вашей собственной адаптивной сетки, и я надеюсь увидеть как вы строите специально созданную сетку для вашего следующего проекта.</p>\n<p>До скорого!</p>\n<p>Перевод <a href="https://www.facebook.com/lesnevskii.igor">Игоря Лесневского</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</p>',headings:[{depth:1,value:"Как создать адаптивную сетку"},{depth:2,value:"Что входит в сетку?"},{depth:3,value:"1. Спроектировать сетку"},{depth:3,value:"2. Понять поведение сетки на разных вьюпортах"},{depth:3,value:"3. Понять, нравится ли вам писать классы в разметке"},{depth:3,value:"А что выбрал бы я?"},{depth:2,value:"Создаём сетку"},{depth:2,value:"Шаг 1: выбор технологии"},{depth:2,value:"Шаг 2: установка "},{depth:2,value:"Шаг 3: создание контейнера сетки"},{depth:2,value:"Шаг 4: расчёт ширины колонок"},{depth:2,value:"Шаг 5: определение положения отступов"},{depth:3,value:"Метод 1: внешние односторонние отступы"},{depth:3,value:"Метод 2: внутренние односторонние отступы"},{depth:3,value:"Метод 3: внешние разделённые отступы"},{depth:3,value:"Метод 4: внутренние разделённые отступы"},{depth:2,value:"Что бы использовал я?"},{depth:2,value:"Шаг 6: создание отладочной сетки"},{depth:2,value:"Шаг 7: внесите изменения в раскладку"},{depth:2,value:"Шаг 8: создание вариаций раскладки"},{depth:2,value:"Подводя итог"}],frontmatter:{title:"Как создать адаптивную сетку"}}},{node:{html:'<h1>Основы адаптивной типографики</h1>\n<p><a href="http://informationarchitects.net">Оливер Райхенштейн</a> 10 сентября 2012</p>\n<p>Когда мы создаём сайты, мы обычно начинаем с определения основных параметров текста. Он диктует нам ширину главной колонки, а остальное выстраивается почти само собой. Так было раньше. До недавнего времени разрешение экрана было более или менее однородным, сегодня же мы имеем дело с разнообразными размерами и разрешениями, и это многое усложняет.</p>\n<p>В пылу перезапуска (сайта компании — <em>прим. переводчика</em>) я написал небольшой пост в блог об адаптивной типографике, фокусируясь исключительно на главном аспекте нашего последнего эксперимента: адаптивных шрифтах. Без знания <a href="http://informationarchitects.net/">истории iA</a> вы упустите некоторые ключевые особенности адаптивной типографики и дизайна нашего нового сайта. Вместо того, чтобы смешивать все наши статьи по этому вопросу, я решил начать с нуля и объяснить, что такое адаптивная типографика шаг за шагом. Это первый шаг.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 69.80392156862744%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABZ0lEQVQoz6WSTUvDQBCG87/F/gY9lvTSi55EjEWk0CRgI6jU0ObYS2MrEdsUk93s926cJC1aQaw67GFnM0/emXfXKv8R1h8YAyGE0dras/wD41wTAvB+yg2ptWZMU2qk/E3bjdou9g287bAS4xwSdHJKfb8R38cwUypVUlpyDglzHHx0XJ1qrZRkjArBv8IgIk0pEZI55pQyVqFoFifOZXzQyubznHFcEMI55UIoDdNYzVBgB8eYUPbq+en9Q6FNjlBOGbm6di+c4WFLnJ2rEhrSCtoyRlZsDSOEOu325DEUWqfx09sshhagVApZDG/ni+fFJCI3Q6ENLLldGzjLMrvTEZ/NNJv49vLqTxVMCOl2uwpM+vFh7f7Ognw6ndq2PRgM7uqIoigMwyAIPM9zXRc2o9FoPB4Pg6Df7/u+3+v14jiuYLAqz3OM8Usdq9UqTdP1et2kSZLACcwFvjRlsFkul0VRAPwO2ychw87Y2VwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="perspective" title="" src="/static/perspective-96a4b62543e6adeb0a400617e18eebc8-fa387.png" srcset="/static/perspective-96a4b62543e6adeb0a400617e18eebc8-844a8.png 163w,\n/static/perspective-96a4b62543e6adeb0a400617e18eebc8-fe46c.png 325w,\n/static/perspective-96a4b62543e6adeb0a400617e18eebc8-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Чтобы избежать создания различных макетов для каждого из возможных размеров экрана, множество веб-дизайнеров взяли на вооружение концепцию адаптивного веб-дизайна. Если в двух словах, то это идея раскладки, которая автоматически подстраивается к параметрам экрана. Для этого есть <a href="http://viljamis.com/blog/2012/adaptive-vs-responsive-whats-the-difference.php">разные способы</a>. Я предпочитаю использовать эти:</p>\n<ol>\n<li>Адаптивная раскладка: последовательное определение нескольких раскладок разной конечной ширины.</li>\n<li>Резиновая раскладка: непрерывная подстройка раскладки к любой возможной ширине.</li>\n</ol>\n<p>Несмотря на то, что оба подхода имеют преимущества и недостатки, нам кажется, что адаптивность с наименьшим числом контрольных точек — это верный путь, так как читаемость гораздо важнее, чем всегда занимающая всю ширину экрана раскладка. Это сложный вопрос со спорными мнениями, но для оптимальной читаемости нужен определённый контроль над текстом, а в этом случае резиновая раскладка создаёт больше проблем, чем решает. Подробнее об этом в следующий раз.</p>\n<p><em>Примечание:</em> Адаптивный дизайн уже включает в себя множество макропараметров типографики (кегль, интерлиньяж, ширина колонки). Таким образом, в большинстве случаев адаптивный дизайн уже содержит адаптивную типографику. То, о чём мы говорили в первом посте об адаптивной типографике на нашем сайте, в основном касалось использования градации шрифтов. Об этом мне бы хотелось поговорить в следующей раз, а сейчас давайте погрузимся в основы адаптивной макротипографики на экране.</p>\n<h2>Выбор гарнитуры</h2>\n<h3>Хороший тон</h3>\n<p>Рано или поздно вам придётся выбрать, какую гарнитуру использовать. Выбор шрифта — это в основном вопрос вкуса, но, так как каждый шрифт имеет свои качества и требования (или ограничения), выбор шрифта приводит ко множеству визуальных и технологических последствий. Веб-шрифты сейчас представлены большим спектром гарнитур, так что поиски подходящей становятся очередной проблемой.</p>\n<p>Чтобы поэкспериментировать с типами шрифтов, для нашего сайта мы разработали свой шрифт. Мы выбрали шрифт с засечками, потому что он подходит нашей манере говорить и подчёркивает нюансы содержимого (или, по крайней мере, нам так кажется). Для <a href="http://www.iawriter.com/">iA Writer</a> мы выбрали моноширинный шрифт. Поскольку главная цель нашей программы — помочь с написанием черновика, мы специально выбрали Nitti — гарнитуру, одновременно строгую и аккуратную. Решение использовать моноширинный шрифт пришло потому, что операционная система первого iPad не применяла кернинг к пропорциональным шрифтам. Вместо использования пропорциональных шрифтов, которые бы плохо отображались на экране, мы решили сразу начать с моноширинного.</p>\n<h3>Шрифт с засечками или без?</h3>\n<p>Обычно выбор стоит между шрифтами с засечками и без. Это сложный вопрос сам по себе, но есть простое правило, которое может помочь: «<a href="http://typotalks.com/berlin/de/blog/2011/05/19/oliver-reichenstein-we-are-the-medium/">Шрифт с засечками — священник, без засечек — хакер</a>». Один не лучше другого, но, по разным причинам, шрифт с засечками имеет более авторитарный оттенок, в то время как шрифт без засечек кажется более демократичным. Заметьте, что это пять тысяч лет истории типографики, пересказанные в двух небрежных строках, так что не воспринимайте их слишком серьёзно.</p>\n<p>Множество людей до сих пор думают, что для экранной типографики задавать вопрос «с засечками или без» бессмысленно. На самом деле, всё не так просто. Вопреки всеобщим убеждениям, оба этих начертания будут хорошо смотреться, <em>если</em> выбрать размер основного текста больше 12 пикселей. Антиква меньше 12 пикселей отрисовываются недостаточно чётко, к тому же на современных мониторах 12 пикселей определённо мало (и это отсылает нас ко второму пункту).</p>\n<h2>Какой размер?</h2>\n<p>Кегль основного текста не зависит от личных предпочтений. Он зависит от дистанции чтения. Так как чаще всего компьютеры расположены дальше, чем книги, метрический размер шрифта на рабочем столе должен быть больше, чем размер шрифта, используемый в печатном аналоге.</p>\n<p>Иллюстрация ниже показывает, что чем дальше ваш текст, тем больше он должен быть. Две чёрные и две красные А имеют одинаковые <em>физические размеры</em>. Но, так как правая пара расположена дальше, <em>воспринимаемый размер</em> меньше. Красная «A» на правой картинке имеет тот же воспринимаемый размер, что и чёрная «A» на левой:</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.49019607843137%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVQoz22TzWsaURDA95L+CQaDZxFPaVRIMRINqQ1Jg7XNKZBbegqSNopBBEFICn7dRDBGmyjUIErqX1BcvKTGrUI227IGbBWSgrGsrh+rRjvNs9tUHNhh3pv57cybNw8b3Mvd3d1gnPR6vc69cBwH9ogXg6/f74P2er27u7uhUMjv94fDYdBOp7Ner/MBD40hjNaXl+TMzEz0Q/Tq6ur8/LxUKmWzWaFQ6HK5YrFY+PjY4/FkMpmRGjG0iMfjc3NzgKFSQbfabY1Gcxg8/JhMxhOJ9fV1nU7XbDYf5h/COI7LZLLPZ2dgd7g2+BsMs6zVfqMoFAcHUSjklUrlPxhZ5XL5yexshiD619c/cfwrTZeLxaeLi5lUiqFptlYLHBwsLT0DcAwM9czPz3/C8QHXuSUp6nvp+hej1b0gvuTY4o9qs/3+6Oj15iYiR2EoHs58chLlz8y1Ws9XVkiSRHE+n89gMPDefzDi1Wp1IBAAo91qoQx6vT6dTjfqbKVy+25/32g0wn632x0Dq1Qqk8lEEMTp6Wkul0skEmKxWKFQTE8/3tl5u7b2amtra/SqENloNORyOSR3OByPJiYmBQKJRKJUKuEWLBbLm+1t8uIin89D2JghqdVqqVSqWCzu7e1tbGzAeMGtVKtVcMHYWK1WiqIYhkEDxycfwjc3N6DBDUNqNpsRBi7UnmAwCJvQEbfbzbIszw/hQqEAyZPJJKSlaRp1tf9X4GG81OunpqZEIhGMHT8qfx5GJBJZXV2F30NL7Hb7yANAyW02G4ZhUqlUMClY0CygOf0NJWrMjbWqiJQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="relative type size" title="" src="/static/relative-type-size-e05697785869d16e99380c8cf365aa30-fa387.png" srcset="/static/relative-type-size-e05697785869d16e99380c8cf365aa30-844a8.png 163w,\n/static/relative-type-size-e05697785869d16e99380c8cf365aa30-fe46c.png 325w,\n/static/relative-type-size-e05697785869d16e99380c8cf365aa30-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Чем дальше вы держите текст, тем меньшим он кажется визуально. Чем дальше вы держите текст, тем больше нужно сделать шрифт, чтобы компенсировать большую дистанцию чтения. Насколько больше — это отдельная наука. Если у вас нет опыта, полезным упражнением будет держать книгу с хорошо напечатанным текстом на комфортной для чтения дистанции и сравнивать её с вашим сайтом.</p>\n<p>Графические дизайнеры без опыта веб-дизайна удивляются, насколько огромен хороший основной текст в вебе по сравнению с печатным аналогом. Напоминаю, он большой, если их сравнивать рядом, а не в перспективе.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAADQklEQVQoz22TX0hTYRTA70oy6kELjMxRlGgvWpkPDQlDbWDmQ1JSuHTLMKW5KP/24J9c5kS3VZYvSpkPtWuWppjRxA2NWumMbhkWFNtgtbxqulVa7t7vdO5HvUQHvnsO95zzu+c751xGc0ITdauzUxgfHwen0wklpSWgVquhsrISqqurIT8/H4wmEzxzOMBqHYLR0SdQX1//i2GY9cw/otPpGCYjI0M+Nja2BCher1c8euwocTgcZIbniSgKxHzZTAwGA0E3EYJBUYq7fefOUkRExFnl/v1HoqOjj8fGxp7GAsIoNSU1Lcpms1Egx3FixsGDxONxU4B0enp6SENDA7UXAgGqm5ubSXZ2NvCzMzA5OQmFhYWQo1JdoMCduxLk1qEhCvT5fCQ3NxfechwsffgI3798gc72djBcvAgiPwPuly/huz9AjJcuQYFaLUJQEDDtZ3VNDSTv23eWAjdv2SIfHBykwABWcOpUAbx4xcGybxp8nxHIdoHh8hWAbz/g/SuO+IMCNF+5GszLPykIC34yvxAQqrDXaWmp6RQYEhIi7+3tpUCCotFosPEj8FdstmEwGY3U/rG4KF0ZjEbjEg5uGU3a0/Ly8uXY7dt3/x1OlMXCLv7JFzMzM0lTUxOCbMRut4O2uJjo9XopUeR5XhQEkZhMJiEhIQH0dXVgNptJVlYWSUpK2ktpOTk58ry8PKGisgLqMOA49rC2tpYolUqI3xFP0g+kg+7MGcBBQGNjI+DUoay8LIgfPrBHoWiQfG9wMLhWhymwr//Bxqqqqk8Y5K+prZn1+/3E5XKRoqIiUasrJixrCbLdd6e7uu/O9fX3zT18NLAwMjrixYrpHp4rKelzezzgnJg4TYGtrdeZjo6bGzEgtOVayyG32w1t7W1Qcf48sPfuAdvdDY+t1hO4Suu411zU1LupTag3aLXaVVI+Xjc+JTXFlZiYuBgZGamXhiKTHOHh4cq4+LhpbAGoVKr5/oGBT2POcX7YbvdaWEsp839ZKT3Wrll7H/Nh67ZtQN/ilcPDwsK+xsTEQGhoKGD/bmDFq6f5mc2o10kxli5W9vzFc9kzx1OZc8Ip++hxMfiHrJB8CoUiWSaTAZ7gbxs5K+K5f7HzAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="relative readability" title="" src="/static/relative-readability-1cada7b376a686445bf4ed7e789a7c27-fa387.png" srcset="/static/relative-readability-1cada7b376a686445bf4ed7e789a7c27-844a8.png 163w,\n/static/relative-readability-1cada7b376a686445bf4ed7e789a7c27-fe46c.png 325w,\n/static/relative-readability-1cada7b376a686445bf4ed7e789a7c27-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Если после увеличения кегля основного текста до соответствия, новый размер поначалу раздражает, не волнуйтесь, это нормально. Однако, привыкнув к нему, вы не захотите возвращаться к «стандартным» малым размерам.</p>\n<p>Мы <a href="http://informationarchitects.net/blog/responsive-typography-the-basics/100E2R">продвигаем эти «перспективно пропорциональные» размеры шрифтов</a> с 2006 года. Первоначально наше утверждение, что Georgia 16px — хороший эталон для основного текста, вызвало много гнева и даже смех, но сейчас это более или менее общий стандарт. С более высокими разрешениями этот стандарт постепенно устаревает. Но об этом чуть позже.</p>\n<h2>Межстрочный интервал и контраст</h2>\n<p>В то время как кегль может быть определён с помощью трюка с перспективой, интерлиньяж требует некоторых корректировок. С увеличением дистанции чтения и появлением размытости пикселей (как мы это называем), будет мудро делать межстрочный интервал экранного текста немного большим, чем у печатного. 140% — это хороший стандарт, но, конечно, это зависит от используемого шрифта.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 63.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACqElEQVQoz11SS08aURSehRv/hDFx7cYm7mRB7MIYnwt35U0DjY0mJhXlqZGS2ECcYYaFaUOMTISBFpGHEGwiQkl0o7SCG0CHEUygYOID5dkekZimXyb3nnvu+ebc75yDxOPxRDyeTqVy2ezFE84BsJ3+Ov3ZwsnJSSKRqFar9RZqtVqz2fzTArK1tRUJh3GjUcDnyxcX5fLF+fkPMpnMBXBuf7Pbd5xOvV6fTqch+oXWJheLRdhmZ2eNOH51dZXJZM7OzkZGRkqlEvghFayRSGR5edlqtZIkqVQqg8E9cDYaDSSbzRaLpfGJccvmZjgccbvdR0dHPC43fX5+H478tlHVve8ukhybmPB5vRRFKRQKLpfbzsxkmEazKZVKURRVq9UikchgMAgEgguGud/YyMsWKquf3J+/8MRiE0GAHK1WOzMz084M5QFLqVKttoCiaz6fTygQ0AxT3nEX19cbu7seknzD4x0cHORyOZvNBvxnRQgoBEsul4MLdJbLZThC/qdnHx+XYrFmvb7jcnE4nIeHB7hyOBwYhrXJNE2DBfXQaDRgVCoVeI9QKMzn83CExsAaCoVYLNbc3ByO4xKJRKfTtclGI76/H+Lz+UNDQ5CczWYPDw/39b2yWCxOp9NB2T0ej2ZpKRAIOBz2yclJyByLxdqaB18Pjo6Nmkymw8NDqAdrYED6TmIw6GWyBZVataJd+ajTohh2fX0NBK/XC2SQVqtVn6rtD/ij0R+FQgEaroAmatRGgrBRVDKZhMGg6QvmMpPLZR8fHyH69vYWQqampt5PT9/c3CDgikajwWAQw1DxW7HX7/+6vW2122FC/xupZ/1msxlBkO7u7p6eHoQgiK6urv7+fmh1KpliLhk6Q8NXyBca/+DlR3d3d729vR0dHZ2dnX8BRDUwOD/22LUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="reading distance" title="" src="/static/reading-distance-e0d3081edbcacbe9548d723d661c9657-fa387.png" srcset="/static/reading-distance-e0d3081edbcacbe9548d723d661c9657-844a8.png 163w,\n/static/reading-distance-e0d3081edbcacbe9548d723d661c9657-fe46c.png 325w,\n/static/reading-distance-e0d3081edbcacbe9548d723d661c9657-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>На сегодняшний день подразумевается, что вы не будете делать контраст слишком слабым (например, серый текст на светло-сером фоне) или слишком резким (как розовое на жёлтом). Так как экранные шрифты были разработаны для отображения чёрного на белом, тёмный фон использовать сложнее, но это возможно, если всё сделать верно. С современными высококонтрастными экранами также лучше выбрать либо тёмно-серый для текста, либо светло-серый для фона вместо жёсткого чёрного на белом. Но это, опять же, не самый главный вопрос.</p>\n<h3>iPhone против iPad</h3>\n<p>Многое из того, что мы узнали об адаптивной типографике, пришло из поиска совершенной типографики для нашего приложения. Проектируя iA Writer для iPad, мы потратили несколько недель на то, чтобы определиться с типографикой. Тогда высокое разрешение iPad было совершенно новым испытанием, и прошло какое-то время, прежде чем мы разобрались как это работает. Когда Apple анонсировала Retina-дисплей для iPhone, а позже и для iPad, всё снова изменилось. Можно написать целую книгу, чтобы объяснить, как мы дошли до канонического вида шрифта iA Writer, но хочется ещё рассказать об общих вопросах, так что перейду к делу.</p>\n<p>Если сравнить текущую версию Writer для iPhone с версией для iPad, можно заметить, что размер шрифта не совпадает.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 112.54901960784314%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsSAAALEgHS3X78AAAEYElEQVQ4y31U60+bZRQv64VSW9hgji5buYjA6GiZgiA1Kn/B/OgW2TQylzGSMUVAGcwZJZsZa+IXIEGNQOI+GJd9kbBBubSlLZRB397b99K+LfTGei8WWiqetrgP2/Tk5Ml5n3N+7/md55znoUilsoWFxYVFECmIXC5fUiiUSpVSpYJVtbwCLqVSubMT339BKCA0JpPKYOQy8zj5BceKuaXlFbXCM/UNb4E2Nr3d1CxqaGicnn4E0Xt7e8+Dq2tqSkrLTpzk8UpKK6uq33izXiA8U1srEAiEgH/3vfdP1wp+u3//ZWAq9fGsZGV1dUEqXZTKlMvLYC8plbOSuRnJHBhT09MCYd34xCREJ5PJvzNyAAbCnq2t6PZ2IBQGDUUigXA4FI5EYrFgJBxPJJ4GAqf4tePjEy/JzGS9ojMYzFarwWQ2GI1Gk/nJumYdQVafrGm0WpfHg9lspeXlYz/9DNHRaPSvtMSzySkLMhmKE26vz+X1RmLRRbm8srrqFJ//2uuV9Q2NaxoEiJgs1sHbt4fEYiBIOp0ut3t3dzcNdm66DEbzhssNDuC0KF+i5OTkUKlwkEcKi9YQbTyRhLhvbn3b0/tVMByxoBjQjMfTnaPoCRKxYk5/EDS4k3wsU7CPHS/gnmAdLeZV1agQvS8aj6X2B+/92PfdIOnzayy4DsWBehqMOlCL3eoJed0BV3Q3IpFJ2EXs/FfzWUdYvAqeGln1xwK7+4k74jt9t752PXWtGzUWmyW+k81sMES2t0ORqD8USqRSUDOVzqAzmYdo9GLucURn2I6ny/vh7lB3T4/DuWE0mxGtzre1lQZXVFZbcZyw2TECFtJgMj2amZmdm5fMzUnm5x0bG7B/Wijs+rJbJHqnuVl0/vxHFz/+xGw2H0yYFWBOB06SmN2OEjaXz+d0uTY9HlihBShBUOm0L3q6f/l14o+HD39/8GBkbAzF8EyfORwTgWMO0oTjBgw1YqiZwPWo1WwjTDjm8vvByy483DvQr1hV291up9er1iIWIgM+RKXD6dtJB26zWVHURpJQA04QwBbDCX8whBI4g5nX13dDJl/CoTCHc0mhxDAsM550BjTZsbkJ5W0AW7cn/ZmxYXJi8Ti4mHmsvv5+mHOwIQCGH82CGbl5qhU1otOtaTSwZgxEo00b6xoEUsGostic/ps3tXq93eGEA9fqDQeZQYR1dffE4sKio5AhN5eZX3CYyWLngv2vQsyN/gGRSNTR0SEWi8vKytRqdRrc0tIyMjLS2trK4XDOnv2gra3typX2tkuffZrRS5cvg93d0wtvSlNTE5/Pn5icvHjhgkajSYPhigaDwbtDQ98PDj53455J9g5JJJLOzk6FQgE2NDGVSlFisdifU1NXr3aQJAm7iUQi+YLAZvYNGB4eHhgYCIVCcKDpzKOjo+3t7cAcPuBn+/8hWRck+PDcueHhkevXP7/WeY1Co9G6urqAMLifvS//g5fLZVwut7Sk9CSv5B8/LMGXEL7FBwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="type size" title="" src="/static/type-size-9d9b3963b76b678f04a26fdda1cf370b-fa387.png" srcset="/static/type-size-9d9b3963b76b678f04a26fdda1cf370b-844a8.png 163w,\n/static/type-size-9d9b3963b76b678f04a26fdda1cf370b-fe46c.png 325w,\n/static/type-size-9d9b3963b76b678f04a26fdda1cf370b-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Почему для iPhone и iPad используется разный кегль? Если вы внимательно прочли объяснение выше, вы уже могли догадаться.</p>\n<ol>\n<li>Поскольку расстояние не всегда одинаковое, обычно вы держите iPad немного дальше. Используете ли вы iPad за столом, кладёте на колени, или держите перед лицом, лёжа в кровати — в каждом случае кофмортное для чтения расстояние будет своим. Это оказалось совершенно новой проблемой, так как расстояния до монитора компьютера и до экрана ноутбука не особо различались. Определяя размер шрифта, оптимальный во всех случаях, мы выбрали максимально дальнее положение для комфортного чтения. Следствием будет непривычно большой, но всё ещё комфортный, размер шрифта для чтения в постели, ну и обычно вы не будете печатать текст в приложении, лёжа в кровати на животе.</li>\n<li>Экрану iPhone доступна гораздо меньшая площадь, из-за чего приходится вносить правки.</li>\n</ol>\n<p>К счастью, iPhone держат ближе к лицу, и вынужденное использование меньшего кегля отлично срабатывает. На среднем расстоянии и iPhone, и iPad имеют схожие по восприятию размеры текста.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 122.94117647058822%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAAEa0lEQVQ4y3WU21MadxTH17741Jh/wAefnKlRQV8am2owmdHYB2easZm2M75o+uRb8yCgVkOrM2mMnUINkSQdCVLHWx0vUVDAdDTViqZWENhlbyzsurIsOnKZMaA9sDGZoc2ZZfmx+/ucy/ecHwhF0RRN8vzB+PjEk6dPhIhAkCTLskyQCYZCe3sei8UyNzc/MzsrCMLZ2dnp6enZuSFMKIT6sbAQGXjwk1Kl5MNhrw8lacqLogCvvHhRLpOXyysuXSobMhgASKfT72CWYwmSSCYSBsOQurPjIHzgQ1GSJH2ojw4EHCsritrauvp6eUXlvXs/5sIYQaMElTw51RueKju/48KCB8MxksYo2usntndcm86tvzY3r15VaDTf58LOvX9wLnD0Oql9/Eip6cI5Zsuz6/TsbvvcO5hn07UDFcUTCUXtte6enlw4GGK8Xk8qnRqCtDvUQiSMYRiKoTjhDzABv98PugmiWCaTqzs6AUilUu9giqZhqxCJ3r/f39HZeQCCQc1UAMP9QZb1oliACYYF4aOS0nalUoLfCo5wPC+ImR4MGR4DHImKuy43tI8K0Eww6PX5DsJCPJkoLZf9T2Q+zLMcB6uHer1SpUqdpvd52C9Ej6LhSISmAyy3rxscLLh4UaGonZmZGRsfczqdUsMR69JS/Y2GDRB0a2vZbt/neSgyGGKh4BDLQc5+HJfL5QiC5OV98OVXX0MArVYrxUfGxsfhxfPFxXgiCRMC0cTDw4goRsSoGI0eHh1BHp/fvFlRWfnx5csNnzXcaGjo7OqSykYmJqcAXrRYhIhIUnSAYaBUkoZ8A8FMCiH3nker061vbPy5vr66tvbH6ur09HQymczCExNSZNCZgLGmKLiAhDVckP+rV38bjc/AEbwE71CUzW6Px+MZGM4DwAsQWRRRHPdTVPZOYiSJw2aGcXk8xhETyQRQgvDhOEFRs3Nz53A28tz8PKjqwVAX6vPguBtD9/yYdN927f5qegbPXT6fC0XB3fOFhVgsJqU9CbDd4YglEpAwy3JQPHSLA2f7PEgGGphMI1AJx3FQEOQPkd7AU1O/Azyo10Of1l6+XLRYF61Wi3Ups7BYlm02UNRs/i0WT/gJAmYulohbrNbj4+MMDAcdyZpCofj2zp1sP/OQc5PWjY2NvX19IPKIeUSpVv/Q23tycpKBwYde/6itrQ3+Mb64dausrKzn7l2d7pefYRS0OmjS4EN9SUkJuLh2/brJZIJFdXX1mwmDL0k6aLBGozGbzTnnDqyvt7empqa6+lObzTY5OWk0GmOxrNrwcbvdMFoQSKVUprMGWb3OGixgEuGuVqsHBgZstmXYD5tFUczAo6OjVVVV7e3tt29/Y7fb/xtW+gmHoaWl5UF/Pzg6hPmNRDJwUVFRaWkpVKJSqXJO3FuTHsIs1tXVDQ8Pe73e+Wy3kE+uXPnwwgWAHQ7H+2DpGPA839zc3N3d3dTUVFxcXFBQgOTn5wPZ2tr6PjKHl8lkkuCFhYX/AhkTYp6faln6AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="type sizes" title="" src="/static/type-sizes-eca40c459d5f9ac58b1e710c7604c2d5-fa387.png" srcset="/static/type-sizes-eca40c459d5f9ac58b1e710c7604c2d5-844a8.png 163w,\n/static/type-sizes-eca40c459d5f9ac58b1e710c7604c2d5-fe46c.png 325w,\n/static/type-sizes-eca40c459d5f9ac58b1e710c7604c2d5-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Так как iPhone держат ближе, то и высоту строки можно делать меньше, что также является предпочтительным для меньшего экрана:</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.49019607843137%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACxklEQVQoz32SyUsbcRTHJ40gzSIidpG2aG6Cf0ZjIbmkh+pBaxeI1V4b8KABtYfgoQkoBS91SbRKE2gatUbQZo/WhRqJWWYyk1myTBYTG5RW0WjfmChCSx9ffr/H7/c+771580POz88nJicRhLe69n1vLx9PsJlMbi+3Dz4om80fHPxa39hsaJDcvnP33v0HMpm8ufmRZW4OQISDJwBGVtfWgYnFk0k2zaYzkCXJppKpdH6/4HJ7BwbffpyZ0esNH8bG3ml1y8vLZXicg3kur4dgosFICBSIhEJEmHOwYDROzi8tfPlqYXOpCI0nsslwFN3Y3LiCJwB2e710iglggRDBkaBdLBDEQwwbs65YTRYTZIFbnCFWt9acLuclPF6GqQQTwtEwgWHRCEpgOEnASicYu9tpNJtwigigwQhFbPl+XIMvKsM3w3hIkgElk2mKjpEUEyXpXO6ny+n5bLawbIZhEjCUYBB1OC7hSb2ed4PvcLpQDN/Z8YfCEQzDwQ+jEVAswa58s4EOD39Duny+QNFxt8dThqenpxHOeArF474+tUAoEomqBAKhQCgUisQ3OUc0MDA4O/vJZrMbTaaRkffzCwtlmKLpru7XUqnUYDBIpQ/r6ura2to6O18pL9TV3f38xcva2lsVFRUajUalUkGd4eFhDj47O4OtUCjASpJkb2+v0WgEv1gswlq6zWazCoWiqalJLpf7fD7VG5XVusTBp6ensNE0fXR0NDo62t/ff3x8DCdwXrywUgDk7enpgefk393lmqUoCOPaXlxclMlkWq1WqVS63e6rstcNWpiamuroeGa320vwyckJYrPZ6uvrGxsb+Xy+Tqf7J3llarX6SUvL9rbP4XD4/X5EIpFIpc3V1dUwBrPZXGr4b6x0CD22tz8dGhqCYjU1NQj8FrFYDGRra+v/y5aGZ7FYxOIqiK+srPwDKYeCr4GWsFgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="distance differences" title="" src="/static/distance-differences-61849f1ec8cd0060bfa7f6565fd4d5c7-fa387.png" srcset="/static/distance-differences-61849f1ec8cd0060bfa7f6565fd4d5c7-844a8.png 163w,\n/static/distance-differences-61849f1ec8cd0060bfa7f6565fd4d5c7-fe46c.png 325w,\n/static/distance-differences-61849f1ec8cd0060bfa7f6565fd4d5c7-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>При проектировании для экрана не всё будет работать в вашу пользу. <em>Дизайн взаимодействия — это прикладная наука: не поиск безупречного вида, а поиск лучшего компромисса.</em> В нашем случае нам пришлось уменьшить межстрочный интервал, а также поля и межсимвольный интервал:</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.49019607843137%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAAC5klEQVQoz1WT2U8TURTGB5KCSjSlLCZsUkJYCm6hpZXWGAGhuDwQnkB9AOENAUkLBEx8Ei2FRNwoMSxG4r/gqyEmRlnFpdp29k5nOtOdFjCB1jMtQUhOJnNv5ne+73z3DhKLRTWXdEnJyJePWX7PgovlXKzACz7BExA8fq8vCOXzh2AJL8Hglpv3aS9fadQ3be/sINFoVK3RIUnI+ueMgGfexfIs57GjOEk5cYLCcMpmx2Bld+AYTgIJHZUq9dXaut3dXRGuVutSjyHvZnL6++pbW1vabt+dnZ1bWHg/N/d2cfGTk3GjGIlhJPQNhiLAl5SWqTWaWCwmwkqVVipFmvQFsvTktBMIgiS3t3c8m5x8PDpqsUzTThYswJOiXcADXFRcXKVSHYEbruWXlsjk8ixJynFo3H2/515n5/jERDjyN7S5BRUIRjbD227eC8qHYd2pk0hLs+JOm765uV7fdOv6jZsNjfra2jqDwUCSDCjHZ6Y83gAoF8qLqpTKfbharU1NRXq75eurL5aWvi4try2vrK2sfltd23j12gKBxZ3TUCDO8d6c3LzzFy7uwyq1ViJBhgy5TuINjpOg4EAJUAORKcv0j59WkmISsdMMx7k92dmnK8+eS8B7qmqtJAUZNuZh9im7w2G12q2/7Q4U/2NDJ5+/5AV/YmB/ILwZ3oGDlGVmKioq/8MpcZihZgiCAnsoRsDxMAxnGjOjqHhIUJB2IBDm3N50WUa5ouIArhGVB/IBxnCCIBknw8KcEKzJZLbZMCfDJZx7faEEXFau2IeVKhEeGSzAHRYHisFHkC2MLcJj5o3vv8AFQdCwyXICbErTRTgaPQQ/HDrDOucpmoYrheMURbOQzZOnJsiJcbkpihFthyKwKT1Q3tuLwxLk0XAez31wsUHGJXoGQBD85vEJCA962WwoRTNwYSCwIzNXKWvS0pCujsIH/V1G48jA4KDBOADV09sHlww04SeBdvDkPf7D8D/+XkqlbhENiAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="compromises" title="" src="/static/compromises-bb51ce3a4a7a5e4fe1b83f752ef546cc-fa387.png" srcset="/static/compromises-bb51ce3a4a7a5e4fe1b83f752ef546cc-844a8.png 163w,\n/static/compromises-bb51ce3a4a7a5e4fe1b83f752ef546cc-fe46c.png 325w,\n/static/compromises-bb51ce3a4a7a5e4fe1b83f752ef546cc-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Поправки были так тонки, что, не зная о них, трудно заметить маленький размер полей. Почему мы и вовсе от них не избавились? Поля — не просто вопрос эстетики, они позволяют тексту дышать и помогают переводить взгляд со строки на строку. Если вам кажется, что всё это смахивает на эзотерику — нет, ведь пока что мы рассказали только про самые основы.</p>\n<h2>Как насчёт настольных компьютеров?</h2>\n<p>Некоторые люди жалуются на большой шрифт в iA Writer для Mac. Аналогично тому, как мы выбрали наибольший минимальный размер шрифта для iPad (который держат на разном расстоянии при чтении), нам пришлось использовать тот же приём для Mac. В то время ориентиром был <nobr>24-дюймовый</nobr> iMac с высоким разрешением, с воспринимаемым размером примерно таким же, как и у других устройств.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.49019607843137%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACy0lEQVQoz12Sa1MSYRTHeaVfo/Er2DsrexGSYzZ+BJtSZxKndMBRFwoN8WWMiansggILKmHlBc0abXKKKW+TMeMFxtYUWBZYLnvhDh1dGrHzzJ5n99n9nfPfc46o+M/iiQRJksEyI8ssQJL+QMDvD/h8Z4lEQkBEhUIBtnQ6PaHXmy0W2/SM1WazWm0WCw6PYCaTyTg5iRkNqAEzGA0juhGdTncFjsXj8wvz+XwOFsuwoCAWjXEsBwZxi/BJoVgo5IrFPHirzcrz/CUcj8ffvpvjeQ4WTdOnp6e/CcLtdv9yuz0ebyhIge5whEpneD7JYBh6BY7FYrP22VQqmeRT0WgU3oG8a1VV1dXXa2tvN9xrFEvuyrrlqTQHPIrpOa4MBsCMm0swHU2nUwoFolINbG7urq9vrH/eWFv78rSzK0JT2VzqfzgSoTEDKsAgm+FYpeq5yWJNJjMkGYpEoCaMUqlkGKZQzKKoniuXHQ6Hh19pOZZlEiwVpAKhUOcz5KVef0ZSXs+x3xf88X275kaNY+4NGfQbjBgU8hIOhULaYS3c5HJZPnkedUgziKFGlk2dnPjC0cT7RWfNrZuP26Vb21s4bgEJlzDLsi2tLTJ5F6Lo60V61Rp1fUO92YxTFH105D04Jj59/eba3iGIP5qhIUSBXOkz9HfgxQDwHU862qUdiFJ5p05stzs4LkkGqCgdPzzwHB16w+GY1TrtcrkAAVAkbDACBEFMTU05nc79/X1/wN+HII2N9wcHNc3ND9ql0oePWswWfGbWvrr6ERoppCxlzmQyo6OvUQwTYoHf2d11zDla29pk3d1j42MwpGKxWK1WC2nz+fw5DFc2m+3p6RGJRB9WVoQ5Bz8+MS6Ty3/u7bEcC82Dk4WFxeXllVwuJ5AlWKvVVlRUSCSSi2rDABdxHK+srGxqair91IUWqLCqv7+uTrK0tCQk/wsgoM1KPg0lnQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="mac ipad iphone" title="" src="/static/mac-ipad-iphone-2ae20e0a6c3eca651359ec09c0473727-fa387.png" srcset="/static/mac-ipad-iphone-2ae20e0a6c3eca651359ec09c0473727-844a8.png 163w,\n/static/mac-ipad-iphone-2ae20e0a6c3eca651359ec09c0473727-fe46c.png 325w,\n/static/mac-ipad-iphone-2ae20e0a6c3eca651359ec09c0473727-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Так как разнообразие компьютеров Mac, на которых работает iA Writer, конечно, мы смогли установить все возможные разрешения. Мы изучили каждую конфигурацию, чтобы быть уверенными, что выбранный размер шрифта — лучший компромисс для большинства машин.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 75.49019607843137%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACpElEQVQoz6WTW2/SYBjH+QTqRzAajZ/A6BdQbzUubokmOm/mrRr12t0uTu+GbFkZtEChEAcr0dEdHQpDhgI7QGEZh3IalNKWAj3gU5hG56X/PGne06/P6X0N/f+QgaIoq9WKgxwOp9OJD2S3220YhqKYxWI1LywgiHlmZsbj8ZyGkfn5g/2DXC5H03Q8Ht/b20+n6TRMMpns4WEmmz3MZPIwStEm02y73QZG07QT2E24BV5QVFWUpFKpVKlWdatUGywry3JPkZVur6+omqygVpTn+b9gDLOxDbbT7cIGwzDFYrFQLDKDvwiiCNbmBVlsdwVxbnauyXHAqKr6K2zEfAILQnXgdqgWz6uaBqYpal/rwwjyP+3ZaDSy9Uan14PThaFbhoGEnYTbitrsOO50EYTL7fF8eG+a9S2RW8HgVvBLuVzR4ek30/XaMXhutVq5fB4MYt6JfQ+srGaPjqKxWCQa/ZFIJHd3U+n0Ub6wHYk8fPQ4kdzT4ampKUEQYST3ehwHSXFQ0oM0HYsnYbHeZJlyuVrTVW80YIXOZm/fGYkn9F3DyxevCNz1kfT7fUv+JRK+pNdH+khwpigqAKUSxFgBO67XFU2LJ5NXr12P7sR0+PXk5I2bt+6OjN4bHRu7/2B8fHxi4snTZ8/jyd2uLFdqtVyhAIXI5/PAy5oGiZy/cDEUCuvw2voagiAOnCAI9+KiF2Q0mqbfvttPpWAb0qhUK7XjGnRhGDZ4PnP23PrGpg7/vmvDBhQYBnPgXtK/sroeCm/DoQBFLQeoT8tUgFrZjnyD6l+6fGVj87MOq38IrhSdoUPhMJz2kX7c5YIeOXDXggVFzBbMZkcxG2aHN+DaCn6VJMnw71uBEKDmzSbH8wIYSIQGSJI4EMw4rsWyzU6n8xPg2/V4zMceHgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="different resolutions" title="" src="/static/different-resolutions-17f8a77d7cba6b1a2b96f3b8ea5682bc-fa387.png" srcset="/static/different-resolutions-17f8a77d7cba6b1a2b96f3b8ea5682bc-844a8.png 163w,\n/static/different-resolutions-17f8a77d7cba6b1a2b96f3b8ea5682bc-fe46c.png 325w,\n/static/different-resolutions-17f8a77d7cba6b1a2b96f3b8ea5682bc-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>Может возникнуть вопрос: «Почему бы просто не позволить пользователю настраивать размер шрифта?» Ну, подбор размера шрифта — не дело вкуса, а вопрос комфортного расстояния для чтения. Так как у большинства сайтов и приложений размер шрифта слишком мал, новые пользователи изначально выберут наиболее привычный размер шрифта, а именно — слишком маленький размер, и никогда не испытают полное удовольствие от использования нашего приложения. Смысл не в том, чтобы насадить всем пользователям определённое видение, а в том, что мы хотим, чтобы iA Writer работал без настроек, и всё что вы будете в нём делать — писать. Это стало открытым секретом его успеха, и отказ от него стал бы отказом от самой сути приложения. (Что нам нужно улучшить, так это доступность использования для людей со слабым зрением).</p>\n<p>Хорошо, почему бы тогда не подстраиваться автоматически под разрешение экрана? Не будет ли это настоящей адаптивной типографикой? Это так, и мы работаем над чем-то похожим. Но сейчас при подстройке к разрешению, нужно правильно выбрать оптический вес, дабы быть уверенным, что шрифт на самом деле работает, как предполагалось с каждым размером и разрешением. С размером шрифта и разрешением оптика шрифта также изменяется. Вот почему у шрифта в iA Writer для Mac, iPad 1/2 и iPad 3 различные градации. Чтобы объяснить всю логику изменений размеров цифровых шрифтов и рассказать, о чём мы думали, создавая новый сайт, требуется чуть больше пространства и времени. Так что ожидайте второй части!</p>\n<h2>Отзывы</h2>\n<p>Несмотря на <a href="http://informationarchitects.net/blog/sweep-the-sleaze/">отсутствие социальных кнопок</a>, у этой статьи множество ретвитов и очень мало критических замечаний, они касаются в основном противостояния резиновой и адаптивной раскладок, об этом я бы хотел поговорить позднее. Я был удивлён, когда Джошуа Портер спросил:</p>\n<blockquote>\n<p><a href="http://twitter.com/iA">@iA</a> Вы увлекли меня вплоть до строчки «дизайн взаимодействия — это прикладная наука». Что вы имели ввиду? <a href="https://twitter.com/bokardo/status/208882881223856129">@bokardo</a></p>\n</blockquote>\n<p>На случай, если и другие люди задались этим вопросом… Полная цитата: «При проектировании для экрана не всё будет работать в вашу пользу. Дизайн взаимодействия — это прикладная наука: не поиск безупречного дизайна, а поиск лучшего компромисса». Обычно я говорю «Веб-дизайн — это прикладная наука: не поиск совершенства, а поиск лучшего компромисса». С термином «веб-дизайн» предложение становится немного яснее, из-за более очевидного технического подтекста. Я использовал «дизайн взаимодействия», потому что я использовал приложение в примерах.</p>\n<p>Это означает, что в то время как графический дизайн даёт вам большую степень графического контроля, веб-дизайн с самого начала заставляет думать о компромиссе между визуальным дизайном и технологией. Для получения оптимального результата потребуется изучить множество различных решений, каждое со своими за и против, и попытаться найти лучший компромисс между всеми неоптимальными решениями.</p>\n<p>На этом этапе в разговор часто вступают графические дизайнеры и пытаются доказать, что и им приходится иметь дело с большим количеством технологий. Конечно, вам приходится. Дизайн в принципе требует технологических знаний. В этом и заключается разница между производством двигателей автомобилей и сайтов, разница между дизайном сайтов и журналов. И дело в степени вовлечённости в разработку.</p>\n<p>Резюмируя — это означает, что в процессе дизайна сайтов и приложений немалая часть нашей работы — это поиск компромиссов и решений с наименьшим количеством недостатков. Это то, что отпугивает многих графических дизайнеров, потому что они привыкли контролировать процесс. Подробнее об этом в великолепной презентации Хой Вин <a href="http://www.slideshare.net/khoiv/control-annotated">о разнице между экранным и графическим дизайном</a> (2007).</p>\n<p>Перевод оригинальной записи «<a href="http://informationarchitects.net/blog/responsive-typography-the-basics/">Responsive Typography: The Basics</a>» Оливера Райхенштайна (Oliver Reichenstein). Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="http://alex.kotomanov.com">Александр Котоманов</a>.</p>',headings:[{depth:1,value:"Основы адаптивной типографики"},{depth:2,value:"Выбор гарнитуры"},{depth:3,value:"Хороший тон"},{depth:3,value:"Шрифт с засечками или без?"},{depth:2,value:"Какой размер?"},{depth:2,value:"Межстрочный интервал и контраст"},{depth:3,value:"iPhone против iPad"},{depth:2,value:"Как насчёт настольных компьютеров?"},{depth:2,value:"Отзывы"}],frontmatter:{title:"Основы адаптивной типографики"}}},{node:{html:'<h1>Элементы small и hr</h1>\n<p><a href="http://oli.jp/">Оли Стадхольм</a> 30 мая 2011</p>\n<p>Не так давно мы писали <a href="/articles/i-b-em-strong-elements/">о презентационных элементах <code>&#x3C;i></code> и <code>&#x3C;b></code></a> из HTML4, возродившихся к новой семантической жизни. Другие два элемента, которые претерпели изменения, чтобы получить значения в HTML5 — это <code>&#x3C;small></code> и <code>&#x3C;hr></code>:</p>\n<ul>\n<li><code>&#x3C;small></code> — использовался раньше для того, чтобы просто сделать текст помельче, теперь же он предназначен для пометок и небольших надписей (<a href="http://dev.w3.org/html5/markup/small.html">W3C:Markup</a>, <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-small-element">WHATWG</a>);</li>\n<li><code>&#x3C;hr></code> — использовался раньше для создания горизонтальных линеек, теперь предназначен для смысловой разбивки на уровне текстовых блоков (<a href="http://dev.w3.org/html5/markup/hr.html">W3C:Markup</a>, <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-hr-element">WHATWG</a>).</li>\n</ul>\n<h2>Элемент <code>&#x3C;small></code></h2>\n<blockquote>\n<p>Элемент <code>&#x3C;small></code> представляет собой так называемые «надписи мелким шрифтом», вроде тех, что используются для предостережений и оговорок в юридических документах.\n<a href="http://dev.w3.org/html5/markup/small.html">Спецификация W3C</a></p>\n</blockquote>\n<p>Теперь <code>&#x3C;small></code> применяется для пометок и является более локальным аналогом элемента <code>&#x3C;aside></code> — для второстепенной информации на странице. Типичным примером будет следующая за основным содержимым юридическая болтовня, вроде заявлений об авторском праве в подвале, отказе от ответственности, или же информации о лицензии. Он также может быть использован для указания авторства. <strong>Не используйте его для содержимого на блочном уровне</strong> (параграфы, списки и т.д.), иначе это будет воспринято как основное содержимое.</p>\n<pre><code>&#x3C;p>\n    Я использую\n    &#x3C;span class="museo">Museo Slab&#x3C;/span>,\n    &#x3C;small class="font-license">\n        шрифт Жоса Буйвенга (exljbris)\n        &#x3C;a href="http://www.exljbris.nl/">www.exljbris.nl&#x3C;/a>\n    &#x3C;/small>\n&#x3C;/p>\n</code></pre>\n<p>Использование <code>&#x3C;small class="font-license"></code> для того, чтобы выполнить требования лицензионного соглашения</p>\n<pre><code>&#x3C;small>\n    &#x3C;a href="http://creativecommons.org/licenses/by-sa/3.0/"\n        rel="license">\n        Creative Commons Attribution Share-alike license\n    &#x3C;/a>\n&#x3C;/small>\n</code></pre>\n<p>Использование <code>&#x3C;small></code> вокруг ссылки на <a href="http://creativecommons.org/choose/">Creative Commons license</a> с <code>rel="license"</code></p>\n<p>Текст внутри <code>&#x3C;small></code> необязательно должен быть меньше, чем окружающий — если же вам нужен именно мелкий текст, то для этого лучше подойдет CSS. Используйте <code>&#x3C;small></code> только на строчном уровне. В конце концов, <code>&#x3C;small></code> не влияет на семантику <code>&#x3C;em></code> или <code>&#x3C;strong></code>.</p>\n<h2>Элемент <code>&#x3C;hr></code></h2>\n<blockquote>\n<p><code>&#x3C;hr></code> служит для смысловой разбивки на уровне блоков текста\n<a href="http://dev.w3.org/html5/markup/hr.html">Спецификация W3C</a></p>\n</blockquote>\n<p>Пообщавшись с <a href="http://ian.hixie.ch/">Яном Хиксоном</a> (редактором HTML5) я понял, что до сих пор неправильно понимал <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/content-models.html#paragraph">модель поведения содержимого</a>. Я узнал, что <code>&#x3C;hr></code> на самом деле означает <q>конец одной секции и начало другой</q> — что семантически равносильно <code>&#x3C;/section>&#x3C;section></code>. Но поскольку элементы вроде <code>&#x3C;section></code> и так указывают на это, получается, что <code>&#x3C;hr></code> больше подходит для смысловой разбивки, вроде смыслового разделения внутри блока текста или отделения одной сцены в романе от другой. В любом случае, вы можете использовать этот элемент везде, где вы используете элемент <code>&#x3C;p></code>. Из-за унылого вида в браузерах по умолчанию, <code>&#x3C;hr></code> не слишком распространён сегодня, однако это не мешает оформить его при помощи CSS в виде красивого вензеля.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 67.45098039215686%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB90lEQVQoz3VSa3OaUBD1/0//QCcaRdEkTTsq+ERFiBJDEhH08vCRECMIGm2TSWum33ouTu2HjjOHZe+yhz13d2OzbVXSUq37pKwzopbqjtjOMCNpTM/KXRlpHK+tXENN3E4u2lqqeZuQ9PT4pbL4JT7/bMVABlPsp66trKxnwGwPGIWwyoiV9TSOqnOO45WRUccXCsniF3fTL4qZm21rMfdNQE2kdkm2S1h5wIDTs89QNgI45/gkaUkQHl+Fp7eGG2H+3oyh+vwdaP61zYMPbf5HG/YQh38AlY3nGJywpLlfZ99r+9T/cZQMYZ1RpqHGJ5vKYnec7O2oNlgAOr2d6H3sfSn4LcP+i0c5ESLZoNlhCd0fr8rOqmwF/HRTtUPeWZcnLxUcnZDGnVVpuq1NNlX4NHldRudieJ3xnzDGWu+k1T8V1LhwA5zAYrztflJQE6270z2wCPWbOBxpkKKjMv0i8u5nlxhSJxoY5mkH/GhRGDzlrYAzngumD5vXHi6JxxnzPCzxufle9nCR38+2M2SxAwP3G75BJ34ROVQ28YsPP+q4i7nkyJKzgxKV7b4Kw0UBOwQxYKI4FgNqK93PuILYT0o6gz3DpRQzKxtpBOvwSRa7QMmQRLyiDpEhby4BDg2DWtrINW0hgCBqjLyiFZQgBMNHw/8ArpVviHmtq2YAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41E;&#x444;&#x43E;&#x440;&#x43C;&#x43B;&#x435;&#x43D;&#x438;&#x435; hr &#x432; &#x432;&#x438;&#x434;&#x435; &#x432;&#x435;&#x43D;&#x437;&#x435;&#x43B;&#x44F;" title="" src="/static/hr-separator-02bad7522fb3bf84c33f063f1ba400a8-fa387.png" srcset="/static/hr-separator-02bad7522fb3bf84c33f063f1ba400a8-844a8.png 163w,\n/static/hr-separator-02bad7522fb3bf84c33f063f1ba400a8-fe46c.png 325w,\n/static/hr-separator-02bad7522fb3bf84c33f063f1ba400a8-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<pre><code>hr {\n    margin: 3em 0;\n    height: 24px;\n    border: 0;\n    background: url(flourish.png) 50% 50% no-repeat;\n}\n</code></pre>\n<p>Оформите <code>&#x3C;hr></code> красиво: уберите рамку, поля и добавьте фоновую картинку.</p>\n<p>IE7 и младше оправдывают свою дурную репутацию, добавляя рамку вокруг изображения, несмотря на наши усилия, <a href="http://blog.neatlysliced.com/2008/03/hr-image-replacement/">но и это можно исправить</a>. Или же вы можете просто скрыть <code>&#x3C;hr></code> в стилях для IE7 и младше. Если переход между частями содержимого очевиден или разделение чисто визуальное, а не смысловое, то вместо <code>&#x3C;hr></code> лучше нарисовать рамку или фоновую картинку на другом элементе.</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 13.725490196078432%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAU0lEQVQI12P4+uEuGvry/vaXd7dBJAjdgTFuY6pkwBR6cOfYo7vHnzw49eD2kaf3Tz2+f/LurcPPHp0BGkRY8+d3EAvvfH57E4hAjHe3v2LoBCIAbZajWYiNVqEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41D;&#x435;&#x43F;&#x43E;&#x434;&#x445;&#x43E;&#x434;&#x44F;&#x449;&#x438;&#x439; &#x441;&#x43B;&#x443;&#x447;&#x430;&#x439; &#x434;&#x43B;&#x44F; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44F; hr &#x43D;&#x430; Cork&#x2019;d." title="" src="/static/corkd-5cf762ce86f4dcf027ee6b3fe51a4e10-fa387.png" srcset="/static/corkd-5cf762ce86f4dcf027ee6b3fe51a4e10-844a8.png 163w,\n/static/corkd-5cf762ce86f4dcf027ee6b3fe51a4e10-fe46c.png 325w,\n/static/corkd-5cf762ce86f4dcf027ee6b3fe51a4e10-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p>На <a href="http://content.corkd.com/">Cork’d</a> используеся декоративная фоновая картинка для заголовков. Но несмотря на обилие линеек, это совсем неподходящий случай для использования <code>&#x3C;hr></code>.</p>\n<h2>В заключение</h2>\n<p>В момент выхода HTML4, презентационные элементы <code>&#x3C;basefont></code>, <code>&#x3C;font></code>, <code>&#x3C;s></code>, <code>&#x3C;strike></code> и <code>&#x3C;u></code> уже были помечены как нежелательные для использования, в пользу применения CSS. HTML5 завершил этот процесс, избавившись от элементов <code>&#x3C;big></code> и <code>&#x3C;tt></code>.</p>\n<p>Остальные презентационные элементы из HTML4 — долго игнорируемые <code>&#x3C;small></code> и <code>&#x3C;hr></code> (<a href="/articles/i-b-em-strong-elements/">наряду с <code>&#x3C;i></code> и <code>&#x3C;b></code></a>) — были пересмотрены в HTML5 с учетом их полезных, медиа-независимых семантических свойств, которые имеют отношение к их типичному использованию. Будете ли <em>вы</em> использовать их? Выскажитесь в комментариях!</p>\n<p>Перевод оригинальной статьи «<a href="http://html5doctor.com/small-hr-element/">The small &#x26; hr elements</a>» <a href="http://oli.jp/">Оли Стадхольма</a> (Oli Studholme), опубликованной на сайте <a href="http://html5doctor.com/">HTML5Doctor.com</a>.</p>',headings:[{depth:1,value:"Элементы small и hr"},{depth:2,value:"Элемент "},{depth:2,value:"Элемент "},{depth:2,value:"В заключение"}],frontmatter:{title:"Элементы small и hr"}}},{node:{html:'<h1>Какой расклад?</h1>\n<p><a href="http://miripiruni.org">Вячеслав Олиянчук</a> 30 августа 2010</p>\n<p>Эта статья посвящается тем, кто задает правильные вопросы.</p>\n<p>В этой статье я постарался рассмотреть все самые распространенные вопросы, сомнения и критику по поводу необходимости создания и внедрения новых механизмов раскладки. Cтатья дополняет и продолжает содержание моего выступления «<a href="/events/wsd-spb-2010/#layout">CSS3: будущее механизмов раскладки</a>». Если вы его не смотрели, то рекомендую ознакомиться.</p>\n<p>Итак, у нас есть три черновика модулей CSS3: <a href="http://www.w3.org/TR/css3-grid/">Grid Positioning Module</a>, <a href="http://www.w3.org/TR/css3-flexbox/">Flexible Box Layout</a>, <a href="http://www.w3.org/TR/css3-layout/">Template Layout</a>. Каждый ценен своей уникальной идеей. Эти идеи <em>специально спроектированы</em> для решения определенного рода задач по раскладкам. Задач, которые в настоящее время решают <em>не предназначенными</em> для этого методами. Отсюда сложности в разработке и поддержке, ограничения и даже побочные эффекты этих методов.</p>\n<h2>Долететь до Луны, используя катапульту</h2>\n<p>Эра CSS-вёрстки, как и эра бурного развития клиентских технологий, длится не так уж и долго. С большой натяжкой — каких-то полтора десятка лет. Сначала все сайты не имели никаких раскладок. Даже графика была редкостью. Затем в веб стали приходить бизнес, индустрия развлечений, СМИ… Требования к представлению информации несоизмеримо выросли.</p>\n<p>Сегодня мы находимся в ситуации, когда CSS не отвечает требованиям гибких, технологичных и надежных раскладок. Именно поэтому создаются новые модули, посвященные созданию сеток, шаблонов, гибких блоков. Параллельно с этим разрабатываются такие модули, как <a href="http://www.w3.org/TR/css3-mediaqueries/">Media Queries</a>, <a href="http://www.w3.org/TR/css3-page/">Paged Media</a> и другие. Всё это способствует расширению возможностей представления информации в разных условиях и на разных устройствах.</p>\n<h2>То, что нельзя прочитать в спецификации</h2>\n<p>Теперь давайте рассмотрим несколько вопросов, возникающих при размышлении о раскладках.</p>\n<h3>Чем не устраивает <code>float</code>?</h3>\n<p>Свойство <code>float</code> способно наделять блоки плавающим поведением. Можно поместить блок слева или справа в контексте других блоков. Недостаточная гибкость <code>float</code> заключается в невозможности поместить блок в контексте других блоков, не прижимая его к краям этого контекста. Такого поведения <a href="http://www.w3.org/TR/css3-grid/#grid-units">можно добиться</a>, используя модуль Grid.</p>\n<h3>Почему бы просто не реализовать <code>display:table</code> во всех браузерах и не забыть про эти многочисленные модули?</h3>\n<p>Я полностью поддерживаю стремление реализовать <code>display:table</code> во всех браузерах. Но это вовсе не означает, что <code>display:table</code> сможет дать нам гибкий и перспективный механизм создания раскладок. Как можно поменять местами две колонки, не меняя HTML-разметки? Или как, например, возможно поместить блок, который будет одновременно находиться в области этих двух колонок, и при этом их содержимое будет его обтекать? Свойство <code>display:table</code> (как и свойства <code>position</code> и <code>float</code>) проектировалось совсем не для создания раскладок.</p>\n<h3>Кто круче: Grid, Flexbox, Template?</h3>\n<p>Очень хороший вопрос: какой из этих трёх модулей лучше, и кто в итоге должен выиграть? На самом деле, сила этих модулей именно в комбинировании возможностей и в совместном их использовании. Эти модули не стоит воспринимать как конкурентов друг другу. Наоборот, в основе каждого лежит идея позволяющая реализовать уникальные вещи. Так, Grid предназначен для создания сетки и привязки к этой сетке; Flexbox реализует особый механизм поведения блоков; Template создает набор слотов и позволяет, управляя ими, строить раскладки.</p>\n<h3>Что за разговор, это же всё очень сырое и потому неинтересное!</h3>\n<p>Это действительно интересный момент. Сырое, согласен. Но почему никого не смущают и, напротив, очень даже интересуют сырые реализации <code>box-shadow</code> и <code>border-radius</code>, а также остальных модных оформительских CSS-свойств. Лично меня очень расстраивает эта возня около вещей, продиктованных модой. Сегодня уголки квадратные, завтра круглые… а послезавтра?</p>\n<p>Если серьезно, то на тенюшках, красивых градиентах, кнопках и декоративных вещах нельзя построить большой и серьезный сайт. Основа сайта — раскладка. Именно поэтому мне непонятно, почему жадная до зрелищ толпа разработчиков и дизайнеров давит на производителей браузеров и повышает приоритет и престиж того же <code>border-radius</code>, а потом с салютом и ночными гуляниями отмечает выпуск новой бета-версии браузера с поддержкой этого свойства.</p>\n<p>Я считаю, что внедрение, например, модуля Grid или Template может принести гораздо больше пользы, сократить тысячи часов однообразного труда и сэкономить бесчисленное количество денег при разработке раскладок для проектов по всему миру. А это очевидное развитие всей отрасли.</p>\n<h3>Mozilla сказала своё слово, разработав и внедрив Flexbox. Чей ход теперь?</h3>\n<p>Справедливости ради нужно сказать, что Flexbox работает не только в Firefox, но и в Safari и в Chrome. А это уже три браузера из большой пятерки. Мой прогноз: в ближайший год IE или Opera введут поддержку этого модуля. Причем я больше склоняюсь в сторону IE. Предпосылки к этому есть — активное обсуждение в рассылке <a href="http://lists.w3.org/Archives/Public/www-style/">www-style</a>, где Рабочая группа CSS (<a href="http://www.w3.org/Style/CSS/members.php3">CSS Working Group</a>) и все желающие обсуждают технические вопросы.</p>\n<h3>Давайте сделаем тег <code>&#x3C;layout></code>?</h3>\n<p>Это совсем провальное намерение. Идеология открытого веба, к которому мы все так стремимся, гласит: отделяй данные от их представления. Таким образом, внедрять экстра-разметку или какие-либо заведомо стилизованные теги — тупиковый путь.</p>\n<p>И главное: <code>&#x3C;layout></code> — это путь в каменный век табличной вёрстки. Подобные методы не оправдали себя в создании гибких раскладок. Вот простой пример: нужно изменять внешний вид страницы и саму раскладку в зависимости от размеров окна браузера. С HTML-разметкой это невозможно. А сейчас для этого существует CSS-модуль <a href="http://www.w3.org/TR/css3-mediaqueries/">Media Queries</a>.</p>\n<h3>Какие преимущества мы получаем?</h3>\n<p>Создавать раскладку при помощи Grid, Flexbox и Template гораздо проще. Следовательно, не нужно оплачивать труд CSS-гуру или самому быть им. Это совсем не означает, что высококвалифицированному специалисту будет нечего делать. Наоборот, он найдет себе применение в решении более интересных задач вёрстки.</p>\n<p>Создавать раскладки можно гораздо быстрее, а значит — можно сократить сроки вёрстки.</p>\n<p>Раскладка на Grid, Flexbox и Template более функциональная и гибкая. Таким образом, внесение изменений будет обходиться дешевле, проще и быстрее.</p>\n<p>Так как раскладкой в CSS будут заведовать определенные специально предназначенные для этого свойства, легко можно будет наладить автоматическую генерацию раскладок. Возможно, именно тогда CSS-фреймворки обретут второе дыхание.</p>\n<h3>Главный вопрос</h3>\n<p>Сейчас не нужно выдумывать ничего нового. Нужно сосредоточить свое внимание на этих спецификациях. Осознать, что уже проделана огромная работа по придумыванию и обсуждению этих идей. Также важно, что именно Рабочая группа CSS занимается этими вопросами. Эти идеи родились в их умах. В умах людей, которые сегодня имеют непосредственное отношение к разработке браузеров. На этом уровне вопросы не решаются мгновенно, но на динамику и приоритет новых механизмов раскладок можно повлиять. К профессиональному сообществу веб-разработчиков производители браузеров, их специалисты по связям с разработчиками, технические специалисты и руководство прислушиваются всегда. Так может, спросим все вместе: «Когда же?»</p>',headings:[{depth:1,value:"Какой расклад?"},{depth:2,value:"Долететь до Луны, используя катапульту"},{depth:2,value:"То, что нельзя прочитать в спецификации"},{depth:3,value:"Чем не устраивает "},{depth:3,value:"Почему бы просто не реализовать "},{depth:3,value:"Кто круче: Grid, Flexbox, Template?"},{depth:3,value:"Что за разговор, это же всё очень сырое и потому неинтересное!"},{depth:3,value:"Mozilla сказала своё слово, разработав и внедрив Flexbox. Чей ход теперь?"},{depth:3,value:"Давайте сделаем тег "},{depth:3,value:"Какие преимущества мы получаем?"},{depth:3,value:"Главный вопрос"}],frontmatter:{title:"Какой расклад?"}}},{node:{html:'<h1>Хватит разрушать веб</h1>\n<p><a href="http://ponyfoo.com">Николас Беваква</a> 23 марта 2015</p>\n<p>2014 год. Ниндзя-рок-звезды веба идут против забытой ныне техники <a href="http://alistapart.com/article/understandingprogressiveenhancement">прогрессивного улучшения</a>. Они отказываются от истоков веба и всего того, за что они когда-то стояли. В этой статье я собираюсь громко заявить о том, как <strong>мы разрушаем веб</strong>; о не всегда явных причинах, почему мы должны перестать это делать, и отчего <em>хорошей идеей будет это прекратить</em>.</p>\n<p><strong>TL;DR</strong> <em>Мы уничтожаем веб. Рендеринг исключительно на клиенте — отстой. Полифилы используются совсем не для того. Отвратительного вида хеш-роутинг ужасен, и мы от этого должны чувствовать себя ужасно. Мы годами говорили друг другу, что прогрессивное улучшение — это замечательно, и мы всё ещё почти ничего для него не делаем!</em></p>\n<p>Скриншот ниже — всего лишь рекламный трюк: попытка захватить технический медиа-мир врасплох. Но тот факт, что <em>мы не уверены</em>, трюк это или решение всерьёз, заставляет меня сжиматься от страха за будущее веба.</p>\n<figure>\n\t\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 152.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAfABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBBAUC/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABYzNcQZQOt0JEHIf/xAAgEAABAwIHAAAAAAAAAAAAAAACAQMSBBEAEBMUIjIz/9oACAEBAAEFAmqpTHcWQq6xUttMSkrvq0pQmWC7BGPDL//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EACIQAAIBAwIHAAAAAAAAAAAAAAABEQIhoRIxECIzQVFhcf/aAAgBAQAGPwKdHcfKNaMl3Eu5dwt8lUeRpV0r6dWj2O8lzfHD/8QAHBABAAMBAQEBAQAAAAAAAAAAAQARMSFBUYGx/9oACAEBAAE/IcEY1YpXdNV2OIEGtQYIotWQnOA/rj+QgKst2VEd3WmK539T5nWns9Qu/kawdn//2gAMAwEAAgADAAAAEHAAPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB8QAQEAAwABBQEAAAAAAAAAAAERACExQVFhcYGRof/aAAgBAQABPxDRbtkR5dfOPHQKDuC79r/MbXIMLPrCsVyWDQ4lfH5lYwmo34PoGe+D4GQ8l7hpFk+wnPzLiSeltt8a+MSqov0tumaARrtz7wXFNrrjOk5c/9k=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x420;&#x435;&#x43A;&#x43B;&#x430;&#x43C;&#x430; Taco Bell." title="" src="/static/tacobell-af715994251e44ec00558f54d531492b-cb685.jpg" srcset="/static/tacobell-af715994251e44ec00558f54d531492b-94a32.jpg 163w,\n/static/tacobell-af715994251e44ec00558f54d531492b-09a61.jpg 325w,\n/static/tacobell-af715994251e44ec00558f54d531492b-cb685.jpg 650w,\n/static/tacobell-af715994251e44ec00558f54d531492b-5213f.jpg 800w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n\t<figcaption>Taco Bell <em>#onlyintheapp</em>&#xA0;&#x2014; &#x434;&#x435;&#x439;&#x441;&#x442;&#x432;&#x438;&#x442;&#x435;&#x43B;&#x44C;&#x43D;&#x43E;&#xA0;&#x43B;&#x438; &#x44D;&#x442;&#x43E; <strong>&#x43B;&#x43E;&#x432;&#x43A;&#x438;&#x439; &#x440;&#x435;&#x43A;&#x43B;&#x430;&#x43C;&#x43D;&#x44B;&#x439; &#x442;&#x440;&#x44E;&#x43A;, &#x447;&#x442;&#x43E;&#x431;&#x44B; &#x441;&#x43F;&#x440;&#x43E;&#x432;&#x43E;&#x446;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x437;&#x430;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x443; &#x43F;&#x440;&#x438;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x44F;, &#x438;&#x43B;&#x438; &#x44D;&#x442;&#x43E; &#x441;&#x438;&#x43C;&#x43F;&#x442;&#x43E;&#x43C; &#x442;&#x43E;&#x433;&#x43E;, &#x447;&#x442;&#x43E; &#x432;&#x435;&#x431; &#x438;&#x441;&#x442;&#x435;&#x43A;&#x430;&#x435;&#x442; &#x43A;&#x440;&#x43E;&#x432;&#x44C;&#x44E;?</strong></figcaption>\n</figure>\n<p><em>Оговорка: эта статья — <strong>не брюзжание об Angular 2.0</strong>. Мысли, озвученные в ней, начали зарождаться у меня давно, до появления Angular 2.0. Так случилось, что объявление планов развития Angular совпало с публикацией этой статьи. И хотя эти новости больше подкрепляют <a href="https://medium.com/este-js-framework/whats-wrong-with-angular-js-97b0a787f903">точку зрения его противников</a>, утверждения, стоящие за этой статьей, являются чем-то большим, чем просто критика изменений в публичном API Angular.</em></p>\n<p>Мне грустно от понимания, что <strong>мы как сообщество подвели веб</strong>. Что вообще случилось с <a href="http://alistapart.com/article/understandingprogressiveenhancement">прогрессивным улучшением</a>? Знаете такое простое правило: <strong>помещайте содержимое на первый план</strong>? Все остальное вторично по отношению к содержимому, правильно? В первую очередь люди хотят увидеть ваше содержимое. Как только оно на месте, возможно, они захотят взаимодействовать с ним. Как бы там ни было, если содержимое не появляется первым, потому что <a href="http://ponyfoo.com/articles/critical-path-performance-optimization">ваша страница слишком медленная</a>, или потому что вы загружаете шрифты синхронно до того, как пользователь может что-нибудь прочитать, или потому что вы решили использовать рендеринг исключительно на клиенте, — тогда, кажется, <strong>людей очень сильно надули</strong>. Верно?_</p>\n<p>Конечно, сейчас интернет-соединения гораздо быстрее. Но у всех ли? Множество людей имеют доступ в сеть через <strong>мобильные соединения, вроде 2G и 3G</strong>, и они ожидают, что ваш сайт будет <em>таким же быстрым, как на десктопе</em>. А этого трудно добиться, когда вы блокируете содержимое загрузкой JavaScript.</p>\n<p>Все чаще и чаще это становится нормой. Пофиг на людей, нам нужны все эти клёвые фреймворки, чтобы делать крутой веб! Подождите, но нам нужны люди. У них есть деньги, информация и всё такое. О, я знаю! Давайте дадим им роутинг на клиенте, даже если они на IE6. Это сделает их счастливыми, верно? Ох, тупой IE6 не поддерживает History API. Ладно, в топку IE6. Что? <a href="http://caniuse.com/#feat=history">IE9 тоже не поддерживает History API</a>? Хорошо, я буду делать все под IE10. Нет, погодите, это плохо, <strong>я использую хеш-роутер</strong> — и тогда обеспечу поддержку все IE, вплоть до IE6! О да, жизнь прекрасна, давайте сделаем наш сайт доступным через адреса типа <code>/#/products/nintendo-game-cube</code> — и сделаем JavaScript обязательным, чтобы наш роутер работал! А ещё давайте рендерить страницы исключительно на стороне клиента. Да, вот <em>это</em> точно сработает!</p>\n<p>Тем временем, мы добавляем тонны дополнительного веса нашим страницам, «уравнивая» браузеры в правах, снижая удобство в современных браузерах, пытаясь улучшить использование сайта в старых. И вот какая проблема в таком подходе. Люди, использующие старые браузеры, <strong>не ожидают самых новых возможностей</strong>. Они довольны тем, что у них есть. Это и есть основная причина, почему они используют старый браузер. Вместо попыток сделать всё удобнее для таких пользователей (и эти попытки чаще всего проваливаются), нужно включать дополнительные возможности, только если они поддерживаются браузером пользователя, — вместо создания хаков для обхода ограничений.</p>\n<p>Люди, использующие старые браузеры, будут более чем довольны вашим сайтом, если вы оставите только ту часть, что рендерится на сервере, поскольку им на самом деле не нужен ваш потрясный-и-необыкновенно-сложный <a href="http://danwebb.net/2011/5/28/it-is-about-the-hashbangs">кошмарно поддерживаемый</a> хеш-роутинг. Но нет, подождите! Хеш-роутинг <a href="http://mtrpcic.net/2011/02/fragment-uris-theyre-not-as-bad-as-you-think-really/">такой распрекрасный</a>, разве нет? Кому нужен этот рендеринг на сервере!</p>\n<p>Ладно, хорошо, давайте примем, что вы согласны со мной. Хеш-роутинг отстой. Он ничего не делает, чтобы помочь современным браузерам <em>(за исключением замедления работы, <a href="https://blog.twitter.com/2012/improving-performance-on-twittercom">это он делает!</a>)</em>, и делает всё, чтобы усложнить разработку и запутать людей, которые пользуются старыми браузерами.</p>\n<h2>Заботимся ли мы на самом деле о вебе так, как говорим об этом?</h2>\n<p>Недавно некто опубликовал на Медиуме статью, озаглавленную «<a href="https://medium.com/este-js-framework/whats-wrong-with-angular-js-97b0a787f903">Что не так с Angular.js</a>». Меня вывело из себя, что, кажется, мы <em>совсем</em> не заботимся о рендеринге на стороне сервера, пока у нас есть возможность разрабатывать приложения на нашем любимом фреймворке. Тогда как каждая из упомянутых проблем Angular была так или иначе опровергнута, проблема рендеринга на стороне сервера осталась практически незамеченной. Как будто никого это не волнует, или же никто не понимает суть претензии.</p>\n<blockquote>\n<p>Без сомнительных хаков — никакого рендеринга на сервере. Никогда. Вам не починить то, что сломано изначально. Пока-пока, <a href="http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/">изоморфные веб-приложения</a>.</p>\n</blockquote>\n<p>Единственное место, где я представляю себе использование фреймворка, основанного исключительно на клиентском рендеринге — это разработка прототипов или внутренних бэкенд-приложений <em>(примерно как мы сейчас используем Bootstrap в основном для внутренних штук)</em>. В таких делах эти безразличные к пользователю фреймворки хороши, потому что они повышают продуктивность без особых затрат, так как люди не страдают в процессе. За исключением редких случаев, когда отсутствие возможности рендеринга на стороне сервера ничему не вредит, допускать это бесспорно нельзя, это слишком <strong>медленно, недопустимо, шаг назад и вообще безответственно</strong>.</p>\n<p>Медленно, потому что люди теперь вынуждены загружать всю вашу разметку, ваш CSS, ваш JavaScript, прежде чем этот JavaScript сможет отрисовать информацию, которую пользователь ожидает в первую очередь. С каких пор мы согласны жертвовать быстродействием ради фреймворков?</p>\n<p>Это шаг назад, поскольку вы должны <strong>доставлять информацию в доступной человеку форме в первую очередь</strong>, а не после того, как каждый блокирующий рендеринг запрос будет исполнен. Это означает, что доступное человеку HTML-представление должно быть отрендерено на сервере и доставлено пользователю, и лишь затем можно добавить вашу прикольную JavaScript-магию поверх него, пока пользователь занят информацией, которую вы ему предоставили.</p>\n<blockquote>\n<p>Держи людей занятыми, или им станет некомфортно.</p>\n</blockquote>\n<p>Это неосмотрительно, потому что мы годами учили друг друга избегать подобных ситуаций — только другими словами. Мы говорили себе о важности отложенной загрузки скриптов при помощи вставки тегов <code>&#x3C;script></code> в самый низ страницы, и, может быть, даже добавляли атрибут <code>async</code>, чтобы они загружались в последнюю очередь. Использование рендеринга на клиенте без поддержки серверной стороны означает, что эти скрипты, которые вы поместили в низ своей страницы, теперь мешают вашим пользователям — потому что загрузка отложена, а без JavaScript нельзя получить содержимое для отображения. Только не начинайте перемещать теги <code>&#x3C;script></code> обратно в <code>&#x3C;head></code>. Просто поймите, насколько далеко идущие негативные последствия имеет рендеринг на клиенте, когда не берется в расчёт возможность серверного рендеринга.</p>\n<p>Но не верьте мне на слово. Тут вот у Твитера есть что сказать. Помните Твитер? Да, <a href="https://blog.twitter.com/2012/improving-performance-on-twittercom">они переключились обратно на распределенный рендеринг в середине 2012 г.</a> и не жалеют об этом.</p>\n<blockquote>\n<p>Глядя на составляющие, из которых складывается <em>[время до первого твита]</em>, мы обнаружили, что только парсинг и исполнение JavaScript вызывают большие провалы в скорости рендеринга. При нашей архитектуре, полностью основанной на клиентском рендеринге, вы не видели ничего, пока JavaScript не был загружен и выполнен. Проблема обостряется ещё сильнее, если у вас не супермощный компьютер или вы пользуетесь старым браузером. Суть в том, что архитектура на клиенте приводит к снижению быстродействия, поскольку бо́льшая часть кода исполняется на компьютере пользователя, а не на нашей стороне.</p>\n<p>Существуют различные методы ускорения JavaScript, но мы хотели сделать всё ещё лучше. Мы полностью исключили исполнение JavaScript из процесса рендеринга. Благодаря рендерингу на стороне сервера и отложенному исполнению любого JavaScript, пока весь этот контент не будет отображён, мы в пять раз снизили время до первого твита.</p>\n</blockquote>\n<p>Мы <a href="https://blog.andyet.com/2014/10/30/optimize-for-change-its-the-only-constant/">заботимся не о тех вещах</a>. Вчера <a href="https://twitter.com/HenrikJoreteg">Хенрик Йортег</a> озвучил несколько справедливых опасений относительно тяжелого будущего AngularJS. Хотя многие из них спорны. Вам могут нравиться эти изменения, вы можете думать, что они к лучшему, но что в действительности вы получите от большого рефакторинга, который вам предстоит? По правде говоря, Angular — блестящий фреймворк в том, что касается продуктивности разработчика, и <strong>он</strong> «спонсируется Гуглом», иными словами, <em>Гугл его поддерживает</em>. Но обратная сторона этого — порог входа в Angular невероятно высок, и вам нечем похвастаться, когда вы вынуждены менять работу.</p>\n<p>Мы делаем всё наоборот. Мы рассматриваем современные браузеры как <em>«статус кво»</em>, и, вполне логично, если какой-то браузер не соответствует <em>«статусу кво»</em>, мы добавляем ему наши клёвые поведенческие полифилы. Таким образом они, <em>как минимум</em>, получают хеш-роутинг!</p>\n<p><strong>Мы заботимся не о тех вещах.</strong></p>\n<h2>Первым должно идти содержимое</h2>\n<p>Что бы нам стоило сделать вместо этого, так это вернуться к истокам. Пустим содержимое по проводам <strong>так быстро, как это возможно</strong> с помощью серверного рендеринга. Затем, <em>как только страница загружена</em> и пользователь видит и может использовать содержимое, добавим дополнительную функциональность на JavaScript. Если вы хотите использовать что-то недоступное устаревшим браузерам (например, History API), в первую очередь <strong>подумайте, стоит ли это вообще делать</strong>. Может быть, вашим пользователям будет лучше без этого. В случае с History API, вероятно, лучше <em>оставить старые браузеры на модели «запрос-ответ»</em>, чем пытаться имитировать History API при помощи хеш-роутинга.</p>\n<p>Тот же принцип применим и к другим аспектам веб-разработки. Нужно дать возможность оставлять комментарии? Используйте <code>&#x3C;form></code> — или AJAX, если доступен JavaScript и как следует поддерживается <code>XMLHttpRequest</code>. Хотите отложить загрузку CSS, чтобы избежать блокировки рендеринга, и использовать встроенный в страницу критический CSS? Прекрасно, но, пожалуйста, используйте тег <code>&#x3C;noscript></code> как запасной вариант для тех, у кого отключен JavaScript. Иначе рискуете поломать стили для них!</p>\n<p>Упоминал ли я одно очевидно кривое свойство хеш-адресации? Когда вы не можете рендерить на сервере, поскольку вам неизвестна хеш-часть запроса? Правильно, Твитер будет вынужден поддерживать специальный рендеринг на клиенте и в обозримом будущем — до тех пор, пока хеш-запросы не перестанут стучаться на их сервера.</p>\n<h2>Прогрессивно улучшать всё на свете!</h2>\n<p>Резюмируя: мы должны перестать изобретать необычайно умные решения для рендеринга на клиенте, которые при этом не дают какой-либо возможности рендеринга на сервере. За исключением <strong>тошнотворных костылей</strong> вроде использования PhantomJS, чтобы рендерить клиентские страницы на сервере. Я уверен, никто не в восторге от <a href="http://jaxenter.com/angular-2-0-112094.html">анонса Angular 2.0</a> — слишком много критических изменений при фактическом отсутствии выгоды. Подождите, вы говорите, тут есть выгода? Я не слышу вас из-за грохота, с которым обваливается поддержка браузеров.</p>\n<p>Полагаю, вот что случается, когда вы не беспокоитесь о прогрессивном улучшении.</p>\n<p>В следующий раз, когда вы начнете какой-нибудь проект, не надо просто <strong>вслепую совать в него AngularJS, Bootstrap и jQuery</strong>, да и дело с концом. Найдите возможность сделать распределяемый рендеринг, используйте React или Taunus, или что-нибудь ещё, что позволит вам не писать одно и то же дважды. Иначе <strong>не делайте рендеринга на клиенте вообще</strong>.</p>\n<p><strong>Стремитесь к простоте. Используйте прогрессивное улучшение.</strong> Делайте это не ради людей, у которых отключен JavaScript. Делайте это не ради людей, которые пользуются старыми браузерами. Делайте это не для того даже, <em>чтобы покончить с прошлым подходом</em>. Сделайте это, потому что вы осознаете важность доставки содержимого первым. Сделайте это, потому что осознаете, что <strong>ваш сайт никогда не должен выглядеть одинаково на каждом устройстве и в каждом браузере</strong>. Сделайте это, потому что сайт станет удобнее. Сделайте это, потому что люди с мобильном интернетом не должны страдать от болезненного пользования кривым вебом.</p>\n<p>Опирайтесь на основы веба, стройте на них, вместо того чтобы всё ухудшать и требовать, чтобы ваши клёвые вебдванольные JavaScript-фреймворки загружались, парсились и исполнялись до того, как вы начнете заниматься рендерингом содержимого, доступного людям.</p>\n<p>Вот чеклист, который вам пригодится:</p>\n<ul>\n<li>HTML первым делом: выдайте людям полноценную разметку сразу, как только возможно</li>\n<li>Отдайте немного CSS, <a href="http://ponyfoo.com/articles/critical-path-performance-optimization">встройте внутрь страницы критически важные стили</a> <em>(кстати, а ведь эта штука тоже пришла из Google!)</em></li>\n<li>Отложите загрузку остального CSS при помощи JavaScript до срабатывания <code>onload</code>, но обеспечьте запасной вариант при помощи <code>&#x3C;noscript></code></li>\n<li>Отложите загрузку картинок со вторых экранов</li>\n<li>Отложите загрузку шрифтов</li>\n<li>Отложите весь JavaScript</li>\n<li><strong>Никогда больше не полагайтесь только на клиентский рендеринг</strong></li>\n<li>Приоритизируйте загрузку содержимого</li>\n<li>Кэшируйте статические ресурсы</li>\n<li>Экспериментируйте с кэшированием динамических ресурсов</li>\n<li>Кэшируйте запросы к базе данных</li>\n<li><strong>Кэшируйте вообще всё</strong></li>\n</ul>\n<p>А также в первую очередь пользуйтесь элементами <code>&#x3C;form></code>, а затем достраивайте сверху всякий AJAX. Нет! Это не для сумасшедших противников JavaScript. Если JavaScript всё ещё грузится, ваш сайт будет бесполезен без элементов <code>&#x3C;form></code>, гарантирующих, что функциональность будет доступной. Некоторые люди вынуждены иметь дело с медленными мобильными соединениями, смиритесь с этим. Например, вы можете <a href="http://www.elijahmanor.com/enhanced-chrome-emulation-tools/">пользоваться Google Chrome, чтобы эмулировать мобильное соединение</a>.</p>\n<p>Не приковывайте себя к всеобъемлющей технологии, которая может просто умереть в ближайшие несколько месяцев и оставить вас на мели. С <a href="http://alistapart.com/article/understandingprogressiveenhancement">прогрессивным улучшением</a> вы никогда не прогадаете. Прогрессивное улучшение означает, что ваш код всегда будет работать, поскольку вы всегда фокусируетесь в первую очередь на предоставлении минимальной доступности, а затем добавляете возможности, функциональность и дополнительное поведение — уже поверх содержимого.</p>\n<p>Пользуйтесь фреймворками, но выбирайте те, что <strong>дружат с прогрессивным улучшением</strong>: такие как <a href="https://github.com/bevacqua/taunus">Taunus</a>, <a href="http://substack.net/shared_rendering_in_node_and_the_browser">hyperspace</a>, <a href="https://github.com/facebook/react">React</a> или Backbone с <a href="https://github.com/rendrjs/rendr">Rendr</a>. Все они так или иначе позволяют вам сделать распределенный рендеринг, и, хотя <a href="https://github.com/rendrjs/rendr">Rendr</a> слегка нескладный, <a href="https://github.com/buildfirst/buildfirst/tree/master/ch07/11_entourage">он работает</a>. Taunus и <code>hyperspace</code> позволяют работать <em>«модульным способом»</em> — они дополнены небольшими модулями, и вы можете извлечь из этого выгоду. React по-своему ужасен, но, по крайней мере, вы можете использовать его для рендеринга на сервере, и как минимум Facebook им <em>пользуется</em>.</p>\n<p>Исследуйте способы разработки более модульных архитектур. Прогрессивное улучшение не подразумевает, что в результате вы получите монолитное приложение. На самом деле совсем наоборот. «Прогрессивность» подразумевает, что вы получите приложение, основанное на принципах веба. Это означает, что по большей части оно будет работать, даже когда выключен JavaScript. Оно может даже потерять некоторые ключевые составляющие своей функциональности, если, скажем, вы забыли добавить запасной вариант в виде <code>&#x3C;form></code> в важные места вашего сайта.</p>\n<p>Но даже это было бы нормально, потому что вы бы поняли значение прогрессивного улучшения, и могли бы добавить этот <code>&#x3C;form></code>, чтобы ваш сайт стал более дружелюбным к старым браузерам и людям с мобильниками. Вы бы научились не рендерить ваше приложение только на клиенте, и вместо этого использовать распределенный рендеринг или только лишь рендеринг на сервере. Вы бы осознали значение таких маленьких трюков, как использование элементов <code>&#x3C;noscript></code> или <a href="http://ponyfoo.com/articles/implementing-opensearch">установки OpenSearch</a>. Вы бы научились уважать веб. Вы бы вернулись на дорогу для тех, кто действительно заботится о вебе.</p>\n<p><strong>Вы бы научились не разрушать веб.</strong></p>\n<p>Перевод оригинальной статьи «<a href="http://ponyfoo.com/articles/stop-breaking-the-web">Stop Breaking the Web</a>» Николаса Беваквы, опубликованной в его блоге <a href="http://ponyfoo.com/">Pony Foo</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a>.</p>',headings:[{depth:1,value:"Хватит разрушать веб"},{depth:2,value:"Заботимся ли мы на самом деле о вебе так, как говорим об этом?"},{depth:2,value:"Первым должно идти содержимое"},{depth:2,value:"Прогрессивно улучшать всё на свете!"}],frontmatter:{title:"Хватит разрушать веб"}}},{node:{html:"<h1>Svable — простая генерация SVG на сервере</h1>\n<p><a href=\"http://svable.com/\">Илья Заяц</a> 13 декабря 2013</p>\n<p><em>Мы начинаем серию статей, в которых вы можете рассказать о своём сервисе или разработке, которые могут быть полезны для фронтенд-разработчиков. Есть о чём рассказать? Пишите нам на <a href=\"mailto:wst@web-standards.ru\">wst@web-standards.ru</a>. Редакция.</em></p>\n<p>Рассказывать про актуальность векторной графики уже нет никакого смысла — количеством различных размеров, разрешений (а теперь еще и плотностей) экранов веб-разработчика не удивишь. А вот вопрос подготовки и создания изображений для всего этого разнообразия набирает актуальность с каждым днем. В этой статье я хочу рассказать не о том, как научить дизайнера использовать Illustrator, а о том, как облегчить жизнь разработчика при работе с SVG.</p>\n<p>В последнее время SVG начинают использовать не только в качестве замены растра для иконок и логотипов начинает, но и для создания сложной графики и динамических диаграмм. За это нужно сказать спасибо множеству отличных JavaScript-библиотек, которые позволяют реализовывать все фантазии дизайнеров быстро и легко: Raphaël, Snap.svg, SVG.js, а также тех, что визуализируют разнообразные данные в любом вообразимом виде: D3, Highcharts, GRaphaël.</p>\n<p>Но я говорил об облегчении жизни разработчиков: в чем она нелегка, если хороших инструментов так много? Проблемы начинаются, когда перед программистами ставится одна из следующих задач:</p>\n<ul>\n<li>отрисовать графики на сервере, чтобы вставить в email-рассылку;</li>\n<li>закэшировать результат, потому что каждая отрисовка очередного сложного изображения «подвешивает» браузер на слабой машине;</li>\n<li>дать пользователю возможность скачать файл в PNG или PDF.</li>\n</ul>\n<p>Очевидно, основное преимущество всех этих библиотек становится их самым большим минусом — они работают только в браузере.</p>\n<p>Решения этой проблемы уж больно прямолинейные — перетащить браузер на сервер. Тут и решения «headless», например, у <a href=\"http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts\">highcharts</a> или <a href=\"http://mir.aculo.us/2013/04/30/embed-canvas-and-svg-charts-in-emails/\">freckle</a>, или попытки перенести <a href=\"https://github.com/dodo/node-raphael\">DOM в Node.js для Raphaël</a>.</p>\n<p>Это работает, но инфраструктура для столь небольших потребностей получается монструозной, сложной и часто медленной.</p>\n<p>Почему же тогда просто не использовать сторонние серверные библиотеки? Ни один программист в мире не захочет поддерживать две реализации одного и того же на двух разных языках. Это ведет к ошибкам, дополнительным сложностям и высокой итоговой стоимости поддержки и разработки новой функциональности.</p>\n<p>Мы все это понимаем, поэтому и создали <a href=\"http://svable.com\" title=\"Svable\">Svable</a>. Это сервис, который позволит вам перенести всю вашу существующую генерацию SVG из браузера на сервер или запускать один и тот же код как на клиенте, так и на сервере.</p>\n<p>Как это реализуется? Система состоит из двух частей: самой платформы и адаптеров. Платформа — это API, который принимает на вход специально сформированный JSON с высокоуровневыми командами, вроде: <code>rect</code>, <code>circle</code>, <code>getBBox</code> и т.д. В ответ вы получаете результирующий SVG, PDF или PNG. Мы конвертируем результат, если вам это нужно.</p>\n<p>Возьмем для примера <a href=\"http://codepen.io/anon/pen/jiHkq\">вот этот SVG</a>. Как видим, это круг с полупрозрачным <code>stroke</code> и белым квадратом, который рисуется ровно по центру этого круга. И все это на фоне белого прямоугольника с закругленными краями. Допустим, нам позарез нужно отрисовать подобное на сервере. Для этого потребуется сформировать POST-запрос на наш сервис со следующим JSON:</p>\n<pre><code>{\n    'paper': {\n    'attrs': [ { 'width': '640' }, { 'height': '480' }],\n    'access_key': 'my_key',\n    'format': 'svg',\n    'children': [\n        {\n        'type': 'rect',\n        'attrs': [\n            { 'x': '0' },\n            { 'y': '0' },\n            { 'width': '640' },\n            { 'height': '480' },\n            { 'rx': '10' },\n            { 'fill': '#fff' }\n        ]},\n        {\n        'type': 'circle',\n        'svable_id': 'main_circle',\n        'attrs': [\n            { 'cx': '320' },\n            { 'cy': '240' },\n            { 'r': '60' },\n            { 'fill': '#223fa3' },\n            { 'stroke': '#000000' },\n            { 'stroke-width': '80' },\n            { 'stroke-opacity': '0.5' }\n        ]},\n        {\n        'type': 'rect',\n        'attrs': [\n            { 'x': 'main_circle.cx - 10' },\n            { 'y': 'main_circle.cy - 10' },\n            { 'fill': '#fff' },\n            { 'width': '20' },\n            { 'height': '20' }\n        ]}\n    ]}\n}\n</code></pre>\n<p>Разберем его по частям: в корневом объекте <code>paper</code> вы описываете размеры вашего полотна, <code>viewBox</code>, а также указываете ваш персональный ключ доступа и растровый формат (по умолчанию в ответ вам придет SVG):</p>\n<pre><code>'paper': {\n    'attrs': [{ 'width': '640' }, { 'height': '480' }],\n    'access_key': 'my_key',\n    'format': 'svg',\n</code></pre>\n<p>В массиве <code>children</code> указываются все объекты, которые попадут на ваш холст. Первым из них идет фоновый прямоугольник. Тут все достаточно просто и почти один в один повторяет формат самого SVG-документа:</p>\n<pre><code>'type': 'rect',\n'attrs': [\n    { 'x': '0' },\n    { 'y': '0' },\n    { 'width': '640' },\n    { 'height': '480' },\n    { 'rx': '10' },\n    { 'fill': '#fff' }\n]\n</code></pre>\n<p>Далее опишем круг. Тут все тоже довольно банально, но есть одно отличие — атрибут <code>svable_id</code>, который позволит вам сослаться конкретно на этот объект в тот момент, когда вам понадобятся любые его параметры:</p>\n<pre><code>'type': 'circle',\n'svable_id': 'main_circle',\n'attrs': [\n    { 'cx': '320' },\n    { 'cy': '240' },\n    { 'r': '60' },\n    { 'fill': '#223fa3' },\n    { 'stroke': '#000000' },\n    { 'stroke-width': '80' },\n    { 'stroke-opacity': '0.5' }\n]\n</code></pre>\n<p>Затем опишем последний квадрат. Напомним, что он должен позиционироваться относительно центра круга. Тут вам и пригодится то, что вы указали в <code>svable_id</code>:</p>\n<pre><code>'type': 'rect',\n'attrs': [\n    { 'x': 'main_circle.cx - 10' },\n    { 'y': 'main_circle.cy - 10' },\n    { 'fill': '#fff' },\n    { 'width': '20' },\n    { 'height': '20' }\n]\n</code></pre>\n<p>Однако обычно никто не рисует SVG на сервере с нуля. Поэтому мы создали адаптеры под популярные JavaScript-библиотеки: уже готов Raphaël, завершаем работу над Snap.svg и D3.</p>\n<p>Адаптеры как раз занимаются тем, что преобразовывают код, написанный для браузерных библиотек в JSON, который понимает наша платформа. В итоге вы легко можете запускать свой код там, где вам сейчас это выгодно, лишь вызовите адаптер в нужный момент.</p>\n<p>Возьмем уже знакомый нам SVG и <a href=\"http://codepen.io/anon/pen/iJext\">отрисуем с помощью Raphaël</a>:</p>\n<pre><code>var paper = Raphael(0, 0, 640, 480);\n    paper\n        .rect(0, 0, 640, 480, 10)\n        .attr({\n            fill: '#fff',\n            stroke: 'none'\n});\nvar circle = paper\n    .circle(320, 240, 60)\n    .attr({\n        fill: '#223fa3',\n        stroke: '#000',\n        'stroke-width': 80,\n        'stroke-opacity': 0.5\n});\npaper\n    .rect(circle.attr('cx') - 10, circle.attr('cy') - 10, 20, 20)\n    .attr({\n        fill: '#fff',\n        stroke: 'none'\n});\n</code></pre>\n<p>А теперь перенесем его на сервер и <a href=\"http://codepen.io/anon/pen/woJgA\">отрисуем с помощью Node.js</a>:</p>\n<pre><code>var Svable = require('svable');\nvar paper = Svable(0, 0, 640, 480, 'raphael');\npaper\n    .rect(0, 0, 640, 480, 10)\n    .attr({\n    fill: '#fff',\n    stroke: 'none'\n});\nvar circle = paper\n    .circle(320, 240, 60)\n    .attr({\n        fill: '#223fa3',\n        stroke: '#000',\n        'stroke-width': 80,\n        'stroke-opacity': 0.5\n});\npaper\n    .rect(circle.attr('cx') - 10, circle.attr('cy') - 10, 20, 20)\n    .attr({\n        fill: '#fff',\n        stroke: 'none'\n});\nconsole.log(paper.burnSync());\n</code></pre>\n<p>Как видите, вся разница лишь в первоначальном вызове объекта и итоговом получении результата.</p>\n<p>В данном случае вызов <code>paper.burnSync()</code> синхронно вернет нам необходимый XML, с которым вы уже можете поступить как захотите. Любители асинхронности могут воспользоваться методом <code>burn</code> — он возвращает промис.</p>\n<p>Таким образом, вы получаете возможность вставить итоговый файл в почтовую рассылку, отдать пользователю на скачивание, сохранить на сервере, чтобы в следующий раз сэкономить как время пользователя, так и деньги на генерации, и все это без дублирования кода и страданий программистов.</p>\n<p>Мы сейчас находимся на финальной стадии разработки, и нам нужны первые клиенты со сложными задачами для пробных интеграций. Мы не только решим их проблемы, но и дадим выгодные условия на время бета-теста. Напишите нам, обсудим конкретно ваш случай: <a href=\"http://svable.com/\">svable.com</a>.</p>\n<p>Редактура <a href=\"http://pepelsbey.net/\">Вадима Макеева</a> и <a href=\"http://engel-t.moikrug.ru/\">Ольги Алексашенко</a>.</p>",headings:[{depth:1,value:"Svable — простая генерация SVG на сервере"}],frontmatter:{title:"Svable — простая генерация SVG на сервере"}}},{node:{html:'<h1>Ценность осмысленности</h1>\n<p><a href="http://cssquirrel.com">Кайл Вимс</a> 9 августа 2012</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 44.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAACLklEQVQozw3P30sTcQAA8Pt/fOjBh/IlKAIrjCQiekjNHJjUVlOyQqQehGJhkDqtURSlohti23RT23bb3Xbf7933e9v3u7vtvNtu7u6azfzVg5BBYH3+gw+zkVris2y67I2pF9e1zojYk6BeqiU4Lq0bZd4YipKOKBzIkYAAU4L0Tdx8k9Jvr+a7bcdgYNkPVD9y3Mh+BBu31tTrwuaLkhWC9LO0NZrfvZN2zkZwJyhNESUt0ySuTcp792JaR8WkTMZu539cAnR5JYxQIaY3AgKvsAmQ44lqBagZgiTKK6+wEqalnEw4nH8n1s4kSZum55nCnltsXDmwBg+N8T+VnqZ8WlCmcM1fMYZP9p7tO9z30koReXBltqizdSvwt9l94tz8RS5UNIEBomgYQOFnagbebm6baHRNac8028pqP07FTNuxLVoU+0gVoIK049QyqyFiHGh66fdRk0HKQrW+QCPjSOIK1R0N+eKwnXXOVemQuOhDBCsqlMC1WOY8XL96fLSKl3xSkdIif7hbZ4IfWjT78g4I5ylRatt1zTc31hqHrZZy31ZNuWJvOUQIdb5/cir8qeX4KN6A/9uotCmZOmYi0Tm354b3bu9DT//TkREuPCDkloJfZ1JrX2SQhSJYnH0pbgwDBNhUUEbpbCKeYZNsct4yZcbjfexyDfS6XH0uV1dXz+xb98TkhHdwZHk5ms3lYvHk2POhj9MPfK8DGMsASlCS0hwMzk/v/6z+A3D/gJs8KC+jAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="comic" title="" src="/static/comic-8a8eff4a06d612676f9e08618cac54ce-ce0d4.png" srcset="/static/comic-8a8eff4a06d612676f9e08618cac54ce-a6060.png 163w,\n/static/comic-8a8eff4a06d612676f9e08618cac54ce-1a895.png 325w,\n/static/comic-8a8eff4a06d612676f9e08618cac54ce-ce0d4.png 650w,\n/static/comic-8a8eff4a06d612676f9e08618cac54ce-d2abd.png 850w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n<p><a href="http://nimbu.in/">Дивья Маньян</a> — умница. Когда дело доходит до веба, можно с полной уверенностью сказать: она, чёрт побери, знает, что делает. Она относится к той категории людей, которые заставляют меня безумно им завидовать из-за их креативности и ума.</p>\n<p>Всё это заставляет меня думать, что в каком-то смысле она нас сегодня троллит.</p>\n<p>«<a href="/articles/pointless-semantic/">Наша бессмысленная погоня за семантической ценностью</a>» — недальновидный текст, из которого следует, что ценность разметки сегодня соотносится только с возможностями браузеров (и других программ, работающих с HTML) — и, таким образом, в жертву приносится завтра. Примерно такую статью я ожидал бы прочитать на рубеже нулевых от разработчика интранет-сайта большой корпорации, в которой сотрудникам разрешается использовать только Internet Explorer 6.</p>\n<p>Когда я начал получать деньги за разработку сайтов, а не разноску пиццы, на меня постоянно стало обрушиваться понимание ценности разработки сайтов, не вписывающихся в ограничения тех браузеров, которые на тот момент имели меньше возможностей, чем конкуренты (а некоторые из них, — один вы, наверное, знаете, с большой синей буквой «E», — были, мягко говоря, несколько устаревшими). Но здесь я занял дальновидную позицию: использовать по максимуму те функции, которые только-только начинают поддерживаться браузерами, и делать в необходимых случаях запасной трюк для тех браузеров, которые эту функцию ещё не поддерживают. Признаться, не вспомню, как мы это называли: <em>грейсфул деградейшн</em> или <em>прогрессив энхансмент</em> (я слышал столько раз эти два термина — что в правильном, что в неправильном смысле, — что они у меня в голове сливаются в одно целое). Сейчас мы называем этот приём «здравым смыслом».</p>\n<p>Вот, например, добавлял ли я когда-нибудь тэги <span>к элементам, у которых должны были быть скругленные уголки, а потом ставил ли фоновые картинки с четырьмя разными уголками на эти элементы, чтобы Гигантский Полоумный Синий Осел соблаговолил-таки отобразить красивые уголки? Да ни за что на свете! Нет, я использовал <code>border-radius</code>, зная в глубине души, что как-нибудь, когда-нибудь каждый браузер поймет, что, когда я писал это, я имел в виду, что хочу, чтобы милые круглые уголки пришли к нему среди ночи, потерлись носом и начали шептать нежности.</span></p>\n<p>Я в курсе, что HTML — это не CSS, и что применимо к одному, необязательно применимо к другому. Я совершенно уверен, что, пожалуй, сейчас этот принцип даже больше применим к HTML, чем ранее был к CSS. За исключением парочки старинных браузеров, которым нужен <a href="http://code.google.com/p/html5shiv/">HTML5 Shiv/Shim</a> для спасения от неполноценности, на способность браузера отобразить элемент никак не повлияет то, используете вы <code>&#x3C;div></code> или <code>&#x3C;header></code>. Значит, нет ничего страшного в том, чтобы использовать семантический элемент заранее, до того времени, пока браузеры смогут извлекать какую-то пользу из его семантического значения.</p>\n<p>Если кратко пересказать все тезисы статьи Дивьи (лучше <a href="/articles/pointless-semantic/">прочитайте её сами</a>, чем доверяйтесь моему пересказу, который в любом случае будет крайне упрощенным), то они состоят в том, что мы не должны забивать себе голову семантикой, потому что:</p>\n<ol>\n<li>Семантика — это сложно</li>\n<li>Современные браузеры, поисковые системы и технологии доступности всё равно её не понимают, так зачем париться</li>\n<li>Провести даже 40 минут, изучая разметку HTML5, — пустая трата времени</li>\n</ol>\n<h2>Семантика — это сложно</h2>\n<p>Дивья ссылается на <a href="http://web.archive.org/web/20060428021228/http://diveintomark.org/archives/2002/12/30/the_tag_soup_of_a_new_generation">запись Марка Пилгрима</a> о сложности семантики. Окей, семантика — это сложно. И что? Ещё вчера я, кажется, был профессионалом, который делает работу за деньги. Это моя работа — знать, какая часть страницы сайта относится к навигации, а какая — к главному содержимому. HTML5, честное слово, не требует от меня так уж много мозговых усилий, чтобы принять решение, какой элемент для чего использовать. Я более чем убежден, что базовые понятия, которые выражают элементы <code>&#x3C;header></code>, <code>&#x3C;footer></code>, <code>&#x3C;nav></code>, <code>&#x3C;time></code>, <code>&#x3C;audio></code>, <code>&#x3C;video></code>, <code>&#x3C;progress></code> и <code>&#x3C;summary></code> вполне доступны для понимания человека, профессионально занимающегося разработкой сайтов. Согласен, разница между <code>&#x3C;article></code> и <code>&#x3C;section></code> довольно тонкая, но в общем и целом я не думаю, что семантика HTML5 — это запутанный инопланетный лабиринт, который пожирает умы психически здоровых людей.</p>\n<h2>Современные браузеры, поисковые системы и технологии доступности всё равно её не понимают, так зачем париться</h2>\n<p>Когда несколько лет назад я разрабатывал сайты, Internet Explorer не понимал <code>border-radius</code>. И, несмотря на это, я использовал его в разработке. И дело не только в том, что сейчас IE понимает (и отображает) эти красивые уголочки, а в том, что многие из этих сайтов все ещё существуют, с тем же кодом, что я написал давным-давно. Если бы из-за ограничений прежних браузеров я не решился бы использовать <code>border-radius</code>, эти сайты выглядели бы сейчас плохо из-за моей недальновидности.</p>\n<p>HTML5 все ещё устаканивается. Некоторые значения, входящие в спецификацию, все ещё не до конца ясны. HTML5 вовсе не «готов» — об этом свидетельствует произвольная и довольно странная попытка Хикси (редактора спецификации HTML5 <em>— прим. редактора</em>) убрать из спецификации элемент <code>&#x3C;time></code>. Значит ли это, что я не должен использовать элементы из спецификации, потому что она ещё не готова? Ничего подобного! Сайты, которые я делаю сейчас, не просто будут висеть в интернете годами, скорее всего, они никогда не увидят редизайна. Поэтому работать, опираясь только на то, что «закончено», было бы медвежьей услугой для моих клиентов: они годами не смогут пользоваться преимуществами новых функций браузеров из-за технической формальности: статуса спецификации или полной браузерной поддержки.</p>\n<p>И технологии доступности, и браузеры, и поисковые системы, все в какой-то момент времени в будущем подтянутся и смогут извлекать смысл из семантики. И когда это произойдет, вы бы хотели, чтобы ваш сайт был готов к этому, или вы предпочли бы потратить время (и деньги) на то, чтобы переписать ваш суп из дивов на что-нибудь несколько более осмысленное? Нет ничего плохого в том, чтобы использовать дивы сейчас (хотя элементы с большей семантической осмысленностью были бы лучше). Но существует большая вероятность, что это поставит ваш сайт в невыгодное положение потом, когда технологии разовьются.</p>\n<p>Говорить, что я не должен использовать семантическую разметку, потому что технологии доступости, браузеры и поисковые системы в данный момент не используют её постоянно — это примерно то же самое, что сказать, что мне не нужно использовать элементы <code>&#x3C;video></code> и <code>&#x3C;audio></code>, потому что некоторые браузеры пока ещё не отображают их в полной мере. Это значит слишком крепко держаться за настоящее и тем самым ограничивать свою будущую выгоду. Сколько CSS-фокусов Дивьи, которые она показывает в презентациях и на конференциях, работают во всех современных браузерах? Подозреваю, что ни один. И разве это значит, что в этом нет смысла, что их не нужно использовать?</p>\n<p>В чём разница между этим и использованием семантической разметки?</p>\n<p>Да ни в чём.</p>\n<h2>Провести даже 40 минут, изучая разметку HTML5, — пустая трата времени</h2>\n<p>От того, что она это сказала, я просто в шоке. Я бы даже сказал, что это оскорбительно. Мы — профессионалы в такой области, которая требует постоянного обучения.</p>\n<p>В конце того же самого поста Дивья предлагает разработчикам учить Javascript. Отличный совет. Учите, любите его. Но как можно говорить о ценности самообразования, если вместе с этим характеризуешь потраченные сорок минут на знакомство со смыслом некоторых элементов HTML5 как впустую потраченное время?</p>\n<p>Бывает, что тот выбор, который мы делаем, готовя разметку, не приводит нас к манне небесной. Лично я стараюсь стремиться к осмысленной семантической разметке вовсе не из-за SEO (которую я лично вообще считаю разводкой в духе гербалайфа) или большей доступности. Я это делаю потому, что в том, чтобы делать что-то единообразно и правильно, есть самостоятельная ценность. В том, чтобы постоянно пытаться повышать уровень своего мастерства, есть смысл, и это достойная цель.</p>\n<p>Нет ничего бессмысленного в том, чтобы стремиться к хорошим стандартам, в том числе — добавляя семантическую ценность к вашему сайту. Даже если в будущем не было бы никакой пользы от профессиональной, должным образом сделанной разметки (а польза будет), всё равно есть самостоятельная ценность в том, чтобы гордиться своей работой и иметь на выходе результат, который получается более элегантным, чем у вашего торопливого, неряшливого конкурента.</p>\n<p>В том, чтобы стремиться к осмысленности, есть смысл.</p>\n<p>Или, как Карл <a href="http://coding.smashingmagazine.com/2011/11/11/our-pointless-pursuit-of-semantic-value/#comment-554266">прокомментировал</a> пост Дивьи:</p>\n<blockquote>\n<p>инжбд, уцсацрйттуцчб — пргьйжед жйюб ирд чузу, ьчуёа футнсечб ихшз ихшзе. вчу цуынербтао путчхепч, пучухао ийоцчжшйч сйлиш теэнсн нийдсн. жа цсйэнжейчй уёхеёучпш н уцсацрйттуцчб. фйьербту.</p>\n</blockquote>\n<p>Перевод оригинальной записи «<a href="http://cssquirrel.com/blog/2011/11/11/the-value-of-meaning/">The Value of Meaning</a>» Кайла Вимса (Kyle Weems). Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="http://www.facebook.com/vlad.andersen">Влад Андерсен</a>.</p>',headings:[{depth:1,value:"Ценность осмысленности"},{depth:2,value:"Семантика — это сложно"},{depth:2,value:"Современные браузеры, поисковые системы и технологии доступности всё равно её не понимают, так зачем париться"},{depth:2,value:"Провести даже 40 минут, изучая разметку HTML5, — пустая трата времени"}],frontmatter:{title:"Ценность осмысленности"}}},{node:{html:'<h1>Разбираемся с vertical-align</h1>\n<p><a href="http://www.impressivewebs.com/">Луис Лазарис</a> 9 марта 2012</p>\n<p>«Опять <code>vertical-align</code> не работает!» — вздохнёт веб-разработчик.</p>\n<p>CSS-свойство <code>vertical-align</code> — одно из тех, которые с виду очень просты, но могут вызвать вопросы у начинающих разработчиков. Я думаю, что даже у многих ветеранов CSS когда-то были проблемы с тем, чтобы его до конца понять.</p>\n<p>В этой статье я постараюсь в понятной форме рассказать про это свойство.</p>\n<h2>Чего оно не делает</h2>\n<p>Распространенное заблуждение о <code>vertical-align</code> состоит в том, что применяясь к одному элементу, оно заставляет все элементы внутри него изменить свою вертикальную позицию. Например, когда элементу задан <code>vertical-align:top</code>, это подразумевает, что его содержимое поднимется к его же верхней границе.</p>\n<p>Вспоминаются времена, когда мы делали раскладки на основе таблиц:</p>\n<pre><code>&#x3C;td valign="top">\n    Что-нибудь…\n&#x3C;/td>\n</code></pre>\n<p>В данном примере с ячейкой таблицы использование свойства <code>valign</code> (в настоящее время <a href="http://www.w3.org/TR/html5/obsolete.html#non-conforming-features">исключенного из HTML5</a>) приведёт к тому, что элементы внутри ячейки прижмутся к её верху. И естественно, когда верстальщики начинают использовать <code>vertical-align</code>, они думают, что получится то же самое, и содержимое элемента выровняется в соответствии со значением свойства.</p>\n<p>Но <code>vertical-align</code> работает не так.</p>\n<h2>Чем оно является на самом деле</h2>\n<p>Использование свойства <code>vertical-align</code> может быть разбито на три простых для понимания правила:</p>\n<ol>\n<li>Оно применяется только к строчным элементам <code>inline</code> или строчным блокам <code>inline-block</code>.</li>\n<li>Оно влияет на выравнивание самого элемента, а не его содержимого (кроме случаев, когда применяется к ячейкам таблицы).</li>\n<li>Когда оно применяется к ячейке таблицы, выравнивание влияет на содержимое ячейки, а не на неё саму.</li>\n</ol>\n<p>Иными словами, следующий код не даст никакого эффекта:</p>\n<pre><code>div {\n    vertical-align: middle; /* эта строка бесполезна */\n}\n</code></pre>\n<p>Почему? Потому что <code>&#x3C;div></code> — это не строчный элемент и даже не строчный блок. Конечно, если вы сделаете его строчным или строчным блоком, то применение <code>vertical-align</code> даст желаемый эффект.</p>\n<p>С другой стороны, при правильном применении (к строчному элементу или строчному блоку), свойство <code>vertical-align</code> заставит текущий элемент выровняться относительно других строчных элементов.</p>\n<p>Выше или ниже расположится элемент, будет зависеть от высоты строчных элементов на этой же строке или от свойства <code>line-height</code>, заданного для неё.</p>\n<h2>Несколько картинок</h2>\n<p>Вот картинка с пояснительным текстом, которая поможет вам понять, что происходит при вертикальном выравнивании строчных элементов:</p>\n\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 510px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 78.43137254901961%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABtUlEQVQoz52TSW/CMBCF/f9/BlxAFAEHisSRM0icWBTCEghrEghLmqRA++EpToV66jtYY3uWN29sdb/fv/4L1e/3x+NxEASu687nc9/3LcvixLZtDMdxttvtbrezNdhaGlEUPYLxJoxgz/MCjc1ms16vl8slq6fB4Wq14mS/37saSZI8gm+326cGyT40Eo3oiTiOz+czbjQozqw/tKFK1sVicblczF2apmKnGtfrNQzD2WyGs/MLqlAoFIvFfD7PBcnwkwpSihNZJ5NJrVZrNBrNZrNer79rqEqlUq1WS6USLRlXWZGj0+l0u93T6cRWuECTApJdvWlQHxloGG3gfzwesdE8l8txhYSSEfR6PTNdBRkIlMtlUhLfarXa7fZoNEJqmoQUJJkWrpQlDJ+ssihxOBxQGG1giHhUFrWwieSKrazT6VQMoEg5HA7xEybkHgwGwpAtrszWqADQNaNNGE3GGjJhuo2fYMIm7x/BeKMq6XmDCMPqPeFryEs0oMcsGMuUkkcmNgXFePk5jCMLfvkotICECIYhHYUaGLDjnEZk7K/BpKQLqlGfSFFYVGBrnjpb8f8Gme2CY00X4doAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="vertical align" title="" src="/static/vertical-align-4ae65d5b8a67c54bf8558bd8d2df1a94-fa387.png" srcset="/static/vertical-align-4ae65d5b8a67c54bf8558bd8d2df1a94-844a8.png 163w,\n/static/vertical-align-4ae65d5b8a67c54bf8558bd8d2df1a94-fe46c.png 325w,\n/static/vertical-align-4ae65d5b8a67c54bf8558bd8d2df1a94-fa387.png 510w" sizes="(max-width: 510px) 100vw, 510px">\n    </span>\n  </span>\n  \n<p><a href="http://jsbin.com/isuvob/1/edit#html,live">А вот пример</a>, в котором есть несколько строчных элементов, один из которых прижат к верху.</p>\n<h2>Ключевые слова</h2>\n<p>Несколько ключевых слов, которые можно задавать в качестве значений для свойства <code>vertical-align</code>:</p>\n<ul>\n<li><code>baseline</code>, значение по умолчанию или «изначальное»</li>\n<li><code>bottom</code></li>\n<li><code>middle</code></li>\n<li><code>sub</code></li>\n<li><code>super</code></li>\n<li><code>text-bottom</code></li>\n<li><code>text-top</code></li>\n<li><code>top</code></li>\n</ul>\n<p>Возможно, многие из них вы не будете использовать, но было бы неплохо знать все имеющиеся варианты. Например, <a href="http://jsbin.com/isuvob/edit#html,live">на демо-странице</a>, из-за того что значение <code>vertical-align</code> для <code>&#x3C;input></code> установлено как <code>top</code>, он выровнен по самому высокому элементу в строке (большой картинке).</p>\n<p>Однако если вы не хотите выравнивать элемент относительно картинок или других строчных элементов, обладающих блочными свойствами, вы можете выбрать значение <code>text-top</code> или <code>text-bottom</code>, тогда элементы будут выравниваться относительно текста в строке.</p>\n<h2>О ключевом слове <code>middle</code></h2>\n<p>К сожалению, правило <code>vertical-align:middle</code> не выровняет строчный элемент по середине самого высокого элемента в строке (как вы, возможно, ожидали). Вместо этого значение <code>middle</code> заставит элемент выровняться по середине высоты гипотетической строчной буквы <strong>«x»</strong> (так же называемой <em>x-height</em>). Потому, мне кажется, что это значение на самом деле должно называться <code>text-middle</code>, чтобы стало понятно, какой будет результат.</p>\n<p>Взгляните <a href="https://jsbin.com/apiqog/edit#html,live">на пример</a>, где я увеличил размер шрифта так, чтобы размер <em>x-height</em> стал гораздо больше. После этого станет понятно, что значение <code>middle</code> не получится использовать очень часто.</p>\n<h2>Числовые значения</h2>\n<p>Возможно, вы не знали о том, что <code>vertical-align</code> принимает числовые и процентные значения. Однако это так, и вот примеры их использования:</p>\n<pre><code>input {\n    vertical-align: 100px;\n}\n\nspan {\n    vertical-align: 50%;\n}\n\nimg {\n    vertical-align: -300px;\n}\n</code></pre>\n<p>Несмотря на то, что вы можете прочитать <a href="http://www.w3.org/TR/CSS21/visudet.html#propdef-vertical-align">в спецификации</a> раздел, описывающий, какие есть ключевые слова и значения, я думаю, гораздо полезней будет самостоятельно <a href="http://jsbin.com/isuvob/edit#html,live">поиграть с ними</a> и сравнить результаты.</p>\n<h2>Заключение</h2>\n<p>Если в одной фразе подводить итог о том, как использовать это традиционно неправильно понимаемое свойство, я бы сказал:</p>\n<p>Свойство <code>vertical-align</code> работает только со строчными элементами или строчными блоками и ячейками таблицы. В случае применения не к ячейкам таблицы, оно действует на сам элемент, а не на его содержимое.</p>\n<p>Перевод оригинальной статьи «<a href="http://www.impressivewebs.com/css-vertical-align/">Understanding CSS’s vertical-align Property</a>» <a href="http://www.impressivewebs.com/about/">Луиса Лазариса</a> (Louis Lazaris), опубликованной на сайте «<a href="http://www.impressivewebs.com/">Impressive Webs</a>».</p>\n<p>Перевод выполнил <a href="http://htmlhero.ru/">Андрей Мотошин</a>.</p>',headings:[{depth:1,value:"Разбираемся с vertical-align"},{depth:2,value:"Чего оно не делает"},{depth:2,value:"Чем оно является на самом деле"},{depth:2,value:"Несколько картинок"},{depth:2,value:"Ключевые слова"},{depth:2,value:"О ключевом слове "},{depth:2,value:"Числовые значения"},{depth:2,value:"Заключение"}],frontmatter:{title:"Разбираемся с vertical-align"}}},{node:{html:'<h1>Паттерны загрузки веб-шрифтов</h1>\n<p><a href="https://www.bramstein.com/">Брэм Штайн</a> 14 июня 2016</p>\n<p><em>Загрузка веб-шрифтов может показаться сложной задачей. Однако, на самом деле, она довольно проста, если вы будете использовать описанные ниже паттерны. Комбинируя их, вы сможете управлять загрузкой веб-шрифтов во всех браузерах.</em></p>\n<p>В этих паттернах используется <a href="https://github.com/bramstein/fontfaceobserver">Font Face Observer</a>, простая и небольшая библиотека загрузки веб-шрифтов. Font Face Observer выбирает наиболее эффективный способ загрузки шрифта, основываясь на его браузерной поддержке, так что мы можем загружать шрифты, не беспокоясь о кроссбраузерности.</p>\n<ol>\n<li><a href="#part-1">Обычная загрузка шрифтов</a></li>\n<li><a href="#part-2">Загрузка группы шрифтов</a></li>\n<li><a href="#part-3">Загрузка шрифтов с таймером</a></li>\n<li><a href="#part-4">Приоритетная загрузка</a></li>\n<li><a href="#part-5">Особое отображение шрифтов</a></li>\n<li><a href="#part-6">Оптимизация для кэширования</a></li>\n</ol>\n<p>Невозможно посоветовать единый паттерн, который идеально подходил бы каждому. Внимательно изучите свой сайт, его аудиторию, и на основании этого выберите тот способ загрузки или их комбинацию, которые подойдут лучше всего.</p>\n<h2>Обычная загрузка шрифтов</h2>\n<p>Font Face Observer даёт вам возможность контролировать загрузку веб-шрифтов через простой интерфейс, основанный на промисах. Не имеет значения, откуда будут загружаться шрифты: вы можете размещать их как у себя, так и подключать через сервисы — <a href="https://www.google.com/fonts">Google Fonts</a>, <a href="https://typekit.com/">Typekit</a>, <a href="https://fonts.com/">Fonts.com</a>, и <a href="http://www.webtype.com/">Webtype</a>.</p>\n<p>Чтобы не перегружать паттерны лишним кодом, будем считать, что вы размещаете веб-шрифты у себя. Это означает, что в ваших CSS-файлах будет одно или несколько объявлений <code>@font-face</code>, в которых указано, какие шрифты нужно загрузить через Font Face Observer. Для краткости мы не будем объявлять каждое из подобных правил в коде, но будем считать, что они есть.</p>\n<pre><code>@font-face {\n    font-family: Output Sans;\n    src: url(output-sans.woff2) format(\'woff2\'),\n         url(output-sans.woff) format(\'woff\');\n}\n</code></pre>\n<p>Рассмотрим самую обычную задачу: вам надо загрузить один или несколько разных шрифтов. Создайте несколько экземпляров <code>FontFaceObserver</code>, по одному на каждый шрифт, и вызовите их метод <code>load</code>.</p>\n<pre><code>var output = new FontFaceObserver(\'Output Sans\');\nvar input = new FontFaceObserver(\'Input Mono\');\n\noutput.load().then(function () {\n    console.log(\'Загружен Output Sans\');\n});\n\ninput.load().then(function () {\n    console.log(\'Загружен Input Mono\');\n});\n</code></pre>\n<p>Этот способ загрузит каждый шрифт независимо от остальных. Это полезно, когда шрифты не связаны друг с другом, и мы ожидаем, что они отрисуются постепенно (т.е. как только загрузятся, так и отрисуются). В отличие от стандартного <a href="https://www.w3.org/TR/css-font-loading/">API загрузки шрифтов</a> вы не передаёте URL шрифтов в Font Face Observer. Для загрузки шрифтов он использует объявления <code>@font-face</code>, уже доступные в CSS. Это позволяет загружать веб-шрифты вручную через JavaScript, предусмотрев постепенную деградацию к обычному CSS.</p>\n<h2>Загрузка групп шрифтов</h2>\n<p>Вы можете загружать несколько шрифтов одновременно, группируя их: вся группа либо загрузится полностью, либо выдаст ошибку. Это полезно использовать, когда загружаемые шрифты принадлежат к одному семейству, и вы не хотите, чтобы группа отрисовывалась, пока не загрузятся все шрифты из неё. Тем самым, браузер не будет отображать стили, пока шрифты представлены не полностью.</p>\n<pre><code>var normal = new FontFaceObserver(\'Output Sans\');\nvar italic = new FontFaceObserver(\'Output Sans\', {\n    style: \'italic\'\n});\n\nPromise.all([\n    normal.load(),\n    italic.load()\n]).then(function () {\n    console.log(\'Загружено семейство Output Sans\');\n});\n</code></pre>\n<p>Вы можете сгруппировать шрифты через <code>Promise.all</code>. Когда промис будет выполнен, мы будем знать, что все шрифты загружены. Если промис отклонён — как минимум один из шрифтов не смог загрузиться.</p>\n<p>Ещё один пример применения группировки шрифтов — уменьшение количества перекомпоновок страницы. Если вы загружаете и отрисовываете веб-шрифты постепенно, браузер будет выполнять перекомпоновку страницы множество раз, так как характеристики начертаний запасного и веб-шрифта различны. Группировка позволит сократить количество перекомпоновок до одной.</p>\n<h2>Загрузка шрифтов с таймером</h2>\n<p>Иногда шрифты загружаются очень долго. Это может стать проблемой, поскольку веб-шрифты отвечают за текст — главную часть контента вашей страницы. Невозможно ждать загрузки шрифтов бесконечно. Мы можем исправить это, добавив таймер к загрузке.</p>\n<p>Следующая вспомогательная функция создаёт таймеры, возвращающие промис, отклоняющийся по срабатыванию таймера.</p>\n<pre><code>function timer(time) {\n    return new Promise(function (resolve, reject) {\n        setTimeout(reject, time);\n    });\n}\n</code></pre>\n<p>С помощью <code>Promise.race</code> мы можем заставить таймер и загрузку шрифта «соревноваться» друг с другом. Например, если загрузка завершилась до того, как сработал таймер, то шрифт победил, промис выполнен. А если раньше сработал таймер, промис отклонён.</p>\n<pre><code>var font = new FontFaceObserver(\'Output Sans\');\n\nPromise.race([\n    timer(1000),\n    font.load()\n]).then(function () {\n    console.log(\'Загружен Output Sans\');\n}).catch(function () {\n    console.log(\'Время на загрузку Output Sans истекло\');\n});\n</code></pre>\n<p>В этом примере время загрузки шрифта ограничено одной секундой. Вместо того, чтобы работать с одним шрифтом, мы также можем назначить таймер целой группе шрифтов. Это позволит просто и эффективно ограничить время их загрузки.</p>\n<h2>Приоритетная загрузка</h2>\n<p>Обычно, для того, чтобы отрисовать первую половину экрана (<em>above the fold</em> — верхняя половина первого экрана сайта, которую надо отобразить максимально быстро, <em>прим. переводчика</em>), нужно лишь несколько шрифтов. Если загружать эти шрифты раньше других, менее важных, мы получим выигрыш в производительности сайта. Это называется приоритетной загрузкой.</p>\n<pre><code>var primary = new FontFaceObserver(\'Primary\');\nvar secondary = new FontFaceObserver(\'Secondary\');\n\nprimary.load().then(function () {\n    console.log(\'Загружен основной шрифт\')\n\n    secondary.load().then(function () {\n        console.log(\'Загружен второстепенный шрифт\')\n    });\n});\n</code></pre>\n<p>При использовании приоритетной загрузки второстепенный шрифт зависит от основного: если не загрузится основной шрифт, то не загрузится и второстепенный. Это может оказаться полезным.</p>\n<p>Например, можно применить приоритетную загрузку так: сначала загрузить небольшой основной шрифт, содержащий ограниченное число символов, а затем полный шрифт с большим количеством символов или стилей. Так как основной шрифт мал, он намного быстрее загрузится и отрисуется. А если основной шрифт не смог загрузиться, то, вполне возможно, не следует запрашивать и второстепенный — скорее всего, он тоже не загрузится.</p>\n<p>Такое использование приоритетной загрузки более подробно описано в статьях Зака Лезермана: <a href="https://www.zachleat.com/web/foft/">Flash of Faux Text</a> и <a href="https://www.zachleat.com/web/web-font-data-uris/">Web Font Anti-Patterns: Data URIs</a>.</p>\n<h2>Особое отображение шрифтов</h2>\n<p>Перед тем как браузер сможет показать веб-шрифт, он должен скачать его по сети. Обычно это занимает какое-то время, и каждый браузер по-разному ведёт себя во время скачивания веб-шрифтов: некоторые из них скрывают текст, а другие сразу же показывают его с помощью запасного шрифта. Обычно это называют <em>мельканием невидимого текста</em> (Flash Of Invisible Text, <em>FOIT</em>) и <em>мельканием текста без стилей</em> (Flash Of Unstyled Text, <em>FOUT</em>).</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 52.9054054054054%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABN0lEQVQoz4WS226DQAxE9/8/DJAqnrlEEFogXArhmlAghZ6slaptHjoPq8Ue2+NZ1KfG7QHu+773ff+uURTF5XLZtk1oXG4/oOI4TtO0aZrz+Qwbal3XrxpSX5blOI4Q3jSIwGw0lOM4QRAcDgfP8+AxlihBPn3fd133dDoxc5qm4/EIkzOKIoLLsijDMGzbtiyLEwbFeZ6bpsnniwYrEEQRjZgRhiEt0Luuq5I2vcam0bYt7ZMkGYYBwexGcJ7nruuu16sYJBao/Tfg0RIJlFHAXSxcNZD68QBZBQlJswY5ukKqqirLMnEbAvWkGEtT4QhNQWLJVgOrYGAmQcxDJ8qJEyQlTwCZFN3vbv+RLY+5P4GZ8iIA5zDlLltM+reY4RQzudBA3f0neZ48PSBWfbso/sm2cn4BDRVu24VPQgIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="FOUT &#x438; FOIT." title="" src="/static/fout-foit-8e129340dcccbb5f76321ea0d40564ea-ce0d4.png" srcset="/static/fout-foit-8e129340dcccbb5f76321ea0d40564ea-a6060.png 163w,\n/static/fout-foit-8e129340dcccbb5f76321ea0d40564ea-1a895.png 325w,\n/static/fout-foit-8e129340dcccbb5f76321ea0d40564ea-ce0d4.png 650w,\n/static/fout-foit-8e129340dcccbb5f76321ea0d40564ea-63d2a.png 975w,\n/static/fout-foit-8e129340dcccbb5f76321ea0d40564ea-87302.png 1300w,\n/static/fout-foit-8e129340dcccbb5f76321ea0d40564ea-6c20f.png 1480w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>FOUT &#x438;&#xA0;FOIT.</figcaption>\n</figure>\n<p>Internet Explorer и Edge используют FOUT и отображают запасные шрифты, пока веб-шрифт не закончит свою загрузку. Все остальные браузеры используют FOIT и прячут текст во время загрузки веб-шрифтов.</p>\n<p>Для управления этим поведением ввели новое CSS-свойство, называемое <code>font-display</code> (<a href="https://tabatkins.github.io/specs/css-font-display/">CSS Font Rendering Controls</a>). К сожалению, оно до сих пор находится в разработке и ещё не поддерживается ни одним браузером (на данный момент оно спрятано за флагом в Chrome и Opera). Однако мы можем реализовать аналогичное поведение во всех браузерах с помощью Font Face Observer.</p>\n<p>Вы можете обмануть браузеры, использующие FOIT, заставив их сразу же отрисовывать текст запасными шрифтами, используя только полностью загруженные шрифты из вашей цепочки. Если шрифт ещё не в цепочке (поскольку он загружается), браузеры не будут пытаться скрыть текст.</p>\n<p>Простейший способ сделать это — устанавливать на элемент <code>&#x3C;html></code> по классу на каждое из трёх состояний загрузки веб-шрифта: сам процесс загрузки, его завершение и ошибку. Класс <code>fonts-loading</code> устанавливается сразу, как начинается загрузка, <code>fonts-loaded</code> — когда шрифт загружен, и <code>fonts-failed</code> — если загрузка не удалась.</p>\n<pre><code>var font = new FontFaceObserver(\'Output Sans\');\nvar html = document.documentElement;\n\nhtml.classList.add(\'fonts-loading\');\n\nfont.load().then(function () {\n    html.classList.remove(\'fonts-loading\');\n    html.classList.add(\'fonts-loaded\');\n}).catch(function () {\n    html.classList.remove(\'fonts-loading\');\n    html.classList.add(\'fonts-failed\');\n});\n</code></pre>\n<p>При помощи этих классов и простого CSS вы можете кроссбраузерно использовать FOUT. Начнём с объявления запасных шрифтов для всех элементов, которым понадобятся веб-шрифты. Когда в <code>&#x3C;html></code> появляется класс <code>fonts-loaded</code>, мы применяем веб-шрифт, изменяя цепочку шрифтов для всех соответствующих элементов. Изменение правила в CSS заставит браузер загрузить веб-шрифт, однако, поскольку к этому моменту он уже будет загружен, перерисовка начнется практически мгновенно.</p>\n<pre><code>body {\n    font-family: Verdana, sans-serif;\n}\n\n.fonts-loaded body {\n    font-family: Output Sans, Verdana, sans-serif;\n}\n</code></pre>\n<p>Такой способ загрузки шрифтов может показаться вам похожим на технику прогрессивного улучшения. Так оно и есть: <em>мелькание текста без стилей</em> (FOUT) соответствует прогрессивному улучшению. Базовый вид в первую очередь отрисовывается запасными шрифтами, а затем улучшается веб-шрифтами.</p>\n<p>Реализация FOIT такая же простая. Когда веб-шрифты начинают загрузку, вы скрываете контент, использующий шрифты, а когда они загружены, вы показываете его снова. Не забывайте и об ошибке загрузки — контент должен быть доступен, даже если шрифты не смогли загрузиться.</p>\n<pre><code>.fonts-loading body {\n    visibility: hidden;\n}\n\n.fonts-loaded body,\n.fonts-failed body {\n    visibility: visible;\n}\n</code></pre>\n<p>Такой способ сокрытия контента кажется вам странным? Хорошо, если так. Этот паттерн следует применять только в очень специфичных случаях. Например, если у вас нет подходящего запасного шрифта, или вы точно знаете, что шрифт был закэширован ранее.</p>\n<h2>Оптимизация для кэширования</h2>\n<p>Все предыдущие паттерны позволяли вам регулировать когда и как загружаются шрифты. Однако, часто мы хотим, чтобы в зависимости от наличия или отсутствия шрифта в кэше сайт вёл себя по-разному. Например, если шрифт закэширован, нет необходимости отрисовывать текст сначала запасным шрифтом. Такого эффекта можно добиться сохранением в Session Storage статуса о том, был ли шрифт закэширован или нет.</p>\n<p>Когда шрифт загружен, мы устанавливаем флаг в Session Storage. Флаг сохраняется на протяжении всей сессии, и с его помощью мы можем определить, находится файл в браузерном кэше или нет.</p>\n<pre><code>var font = new FontFaceObserver(\'Output Sans\');\n\nfont.load().then(function () {\n    sessionStorage.fontsLoaded = true;\n}).catch(function () {\n    sessionStorage.fontsLoaded = false;\n});\n</code></pre>\n<p>Теперь вы можете использовать эту информацию, чтобы изменить стратегию загрузки закэшированных шрифтов. Например, можно включить такой фрагмент JavaScript в элемент <code>&#x3C;head></code> вашей страницы, чтобы сразу же отрисовывать веб-шрифты.</p>\n<pre><code>if (sessionStorage.fontsLoaded) {\n    var html = document.documentElement;\n    html.classList.add(\'fonts-loaded\');\n}\n</code></pre>\n<p>Если вы будете загружать шрифты этим способом, ваши посетители увидят FOUT только при первом посещении сайта, а при всех дальнейших переходах шрифт будет отрисовываться мгновенно. А значит, с одной стороны, вы сохраните выгоды, которые даёт прогрессивное улучшение, а с другой — сделаете сайт удобным, поскольку загрузка страниц будет меньше раздражать при повторных посещениях.</p>\n<p>Перевод оригинальной статьи «<a href="https://www.bramstein.com/writing/web-font-loading-patterns.html">Web Font Loading Patterns</a>» Брэма Штайна. Перевод <a href="https://github.com/aalexeev239">Андрея Алексеева</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a>.</p>',headings:[{depth:1,value:"Паттерны загрузки веб-шрифтов"},{depth:2,value:"Обычная загрузка шрифтов"},{depth:2,value:"Загрузка групп шрифтов"},{depth:2,value:"Загрузка шрифтов с таймером"},{depth:2,value:"Приоритетная загрузка"},{depth:2,value:"Особое отображение шрифтов"},{depth:2,value:"Оптимизация для кэширования"}],frontmatter:{title:"Паттерны загрузки веб-шрифтов"}}},{node:{html:'<h1>Почему Sass?</h1>\n<p><a href="http://simplebits.com">Ден Седерхольм</a> 10 декабря 2013</p>\n<p><em>Перед вами перевод первой главы книги «<a href="http://www.abookapart.com/products/sass-for-web-designers">Sass For Web Designers</a>» Дэна Седерхольма, которая вышла в серии A Book Apart. В числе <a href="/books/">других книг</a>, мы рекомендуем эту для введения в CSS-препроцессоры. Редакция.</em></p>\n<p>Я не хотел верить в Sass. «Я пишу стили руками! Мне не нужна помощь. Я не хочу усложнять мой рабочий процесс! Отстаньте от меня!»</p>\n<p>Так, во всяком случае, я думал. Но на самом деле, Sass, как и другие препроцессоры, может быть могущественным союзником — инструментом, который любой верстальщик может легко использовать в своей ежедневной работе. Мне потребовалось совсем немного времени, чтобы разобраться в нем, и я действительно рад, что сделал это.</p>\n<p>И именно поэтому я захотел написать эту небольшую книгу. Рассказать о том, как я начал использовать Sass, чтобы сделать разработку кода более эффективной, и сохранил при этом рабочий процесс, которому привык следовать на протяжении последних десяти лет. Изначально у меня было много неправильных представлений о Sass, которые удерживали меня от того, чтобы начать им пользоваться. Я беспокоился, что мне придется полностью изменить привычные способы создания и организации стилей. Иногда CSS бывает довольно хрупким, и это объясняет желание разработчиков как-то защитить то, что они делают. Смогу ли я справиться с этим?</p>\n<p>Хм…</p>\n<p>Итак, я здесь, чтобы показать вам, что Sass не нарушит ваш привычный рабочий процесс, и при этом он может облегчить вашу жизнь. В книге я коснусь различных аспектов Sass: как его установить, как использовать; расскажу, как он помог мне в моих собственных проектах. Если повезет, я смогу сделать так, чтобы вы тоже в него поверили.</p>\n<h2>Sass: короткая презентация</h2>\n<p>Вам когда-нибудь надо было изменить в стилях, скажем, цвет, и при этом обнаруживалось, что вы вынуждены найти и заменить его значение во многих местах? Вам хотелось бы , чтобы CSS позволял вам сделать это вот так?</p>\n<pre><code>$brand-color: #fc3;\n\na {\n    color: $brand-color;\n}\n\nnav {\n    background-color: $brand-color;\n}\n</code></pre>\n<p>Что, если бы вы могли изменить значение в одном месте, а оно бы поменялось во всем документе? С Sass это возможно.</p>\n<p>Или как насчет повторяющихся блоков правил, которые используются в разных местах таблицы стилей?</p>\n<pre><code>p {\n    margin-bottom: 20px; \n    font-size: 14px; \n    line-height: 1.5;\n}\n\nfooter {\n    margin-bottom: 20px;\n    font-size: 14px;\n    line-height: 1.5;\n}\n</code></pre>\n<p>Разве не было бы прекрасно собрать эти общие правила в один блок, который можно использовать несколько раз? Повторюсь, блок определяется один раз, но при этом его можно использовать везде, где он вам потребуется.</p>\n<pre><code>@mixin default-type {\n    margin-bottom: 20px;\n    font-size: 14px;\n    line-height: 1.5;\n}\n\np {\n    @include default-type;\n}\n\nfooter {\n    @include default-type;\n}\n</code></pre>\n<p>Всё это тоже Sass! И два этих очень простых примера демонстрируют лишь небольшую часть возможностей Sass, который может сделать разработку стилей более быстрой, легкой и гибкой. Он желанный помощник в мире веб-дизайна, потому что каждый, кто создает сайты, знает, что…</p>\n<h2>CSS сложен</h2>\n<p>Ну правда, изучить CSS не просто. Разобраться, что делает каждое свойство, как работает каскад, какие браузеры что поддерживают, селекторы, режимы совместимости, и т.п. Всё это не просто. Добавьте сюда сложность интерфейсов, которые мы разрабатываем и поддерживаем — погодите, почему мы снова и снова это делаем?! Это паззл, и некоторые из нас наслаждаются его финальной завершенностью.</p>\n<p>Частично проблема в том, что изначально CSS не был предназначен для того, что мы делаем сегодня с его помощью. Конечно, прогресс движется достаточно быстро благодаря стремительному развитию браузеров, внедрению поддержки CSS3 и так далее. Но мы все еще вынуждены полагаться на техники, которые, несмотря на их полезность, являются хаками. Свойство float, например, было создано для того, чтобы просто выравнивать картинки внутри текстового блока. И только. Тем не менее, мы вынуждены использовать это свойство не по назначению, чтобы создавать раскладку для полноценных интерфейсов.</p>\n<p>К тому же, в наших таблицах стилей очень много повторений. Цвета, шрифты, часто используемые группы свойств и т.п. Типичный CSS файл имеет линейную организацию — такой тип кода заставляет «объектно-ориентированного» программиста рвать на себе волосы. (Я не «объектно-ориентированный» программист, но у меня осталось совсем немного волос. Понимайте, как хотите.)</p>\n<p>Поскольку интерфейсы и веб-приложения становятся более сложными, мы ставим с ног на голову изначальное предназначение CSS, чтобы сделать вещи, о которых раньше нельзя было и мечтать. Мы хитрим.</p>\n<p>К счастью, сейчас браузеры внедряют новые возможности CSS гораздо быстрее, чем раньше, добавляются более эффективные и мощные свойства и селекторы, решающие проблемы, которые подбрасывает нам современный веб. Это новые способы раскладки в CSS3, border-radius, box-shadow, продвинутые селекторы, transitions, transforms, animation и многое другое. Это удивительное время. И всё равно в CSS ещё многого не хватает. Есть ещё пробелы, которые предстоит заполнить, и тогда жизнь разработчиков станет гораздо проще.</p>\n<h3>Принцип DRY</h3>\n<p>Если мы заглянем в мир разработки ПО (я предпочитаю именно заглянуть, а не оставаться там), мы сразу заметим, что организация кода, переменные, константы, компоненты и т.п. являются неотъемлемой, ключевой частью работы тех, кто разрабатывает сложные системы.</p>\n<p>Вы, возможно, слышали о принципе «не повторяй себя» (DRY). Придуманный и описанный Дэвидом Томасом (Dave Thomas) и Эндрю Хантом (Andy Hunt) в книге «<a href="http://bkaprt.com/sass/1/">Программист-прагматик</a>» принцип DRY звучит так:</p>\n<blockquote>\n<p>Каждая частица знаний должна быть представлена в системе один раз, ясно и недвусмысленно.</p>\n</blockquote>\n<p>Идея состоит в том, что дублирующийся код может вызвать ошибки и быть <a href="http://bkaprt.com/sass/2/">непонятным для разработчиков</a>. Это же подсказывает и здравый смысл: один раз описать часто используемые паттерны, чтобы затем использовать их в разработке приложения сколько угодно раз. Это более эффективно с точки зрения разработки, и такой код проще поддерживать.</p>\n<p>CSS — это всё что угодно, но только не DRY. Временами он может быть забит под завязку повторяющимися правилами, объявлениями и значениями. Мы всё время пишем одни и те же куски кода для цветов, шрифтов и часто используемых паттернов в наших таблицах стилей. Один взгляд на большой CSS-файл — и программист, привычный к коду, следующему принципу DRY, разрыдается, сначала от недоумения, потом от разочарования.</p>\n<p>«Как, черт возьми, вы это поддерживаете?» — спросит он.</p>\n<p>«Это ты еще не слышал про баги в IE», — ответите вы с некоторой долей самоуничижения.</p>\n<h3>Так почему же так трудно работать с CSS?</h3>\n<p>Почему CSS имеет такие синтаксические ограничения, мы можем попытаться узнать <a href="http://bkaprt.com/sass/3/">из эссе соавтора CSS Берта Боса</a>:</p>\n<blockquote>\n<p>В CSS нет огромного количества мощных возможностей, которые есть в языках программирования: макросов, переменных, символических констант, условий, выражений и т.п. Всё потому, что богатые возможности языка дают продвинутым разработчикам больше свободы, в то время как менее продвинутые пользователи просто запутаются; или, что более вероятно, будут настолько напуганы, что даже не притронутся к CSS. Это баланс. И для CSS он имеет особенное значение.</p>\n</blockquote>\n<p>Архитекторы CSS с самого начала заботились о доступности технологии. Они хотели (совершенно справедливо), чтобы как можно больше людей могли создавать сайты. Они хотели, чтобы CSS был достаточно мощен, чтобы можно было создавать стили для веб-страниц и отделять контент от оформления, и в то же время, был достаточно простым для понимания и использования. Я безусловно уважаю это решение. В то же время, у нас есть задачи, и эти задачи становятся все более сложными, в них больше нюансов и больше требований к поддержке и возможности дальнейшего развития.</p>\n<p>К счастью, есть способы справиться с этим, и один из них — Sass.</p>\n<h2>Что такое Sass</h2>\n<p>Sass — это препроцессор, прослойка между таблицами стилей, которые вы пишете, и css-файлами, которые вы отдаете браузеру. Sass (сокращение от Syntactically Awesome Stylesheets — Синтаксически Потрясающие Таблицы стилей) заполняет те самые пробелы в языке CSS, позволяя вам писать код по принципу DRY, то есть, быстрее, эффективнее и проще в поддержке.</p>\n<p>Краткое описание Sass <a href="http://bkaprt.com/sass/4/">с сайта технологии</a>:</p>\n<blockquote>\n<p>Sass — это метаязык над CSS, который позволяет писать стили прозрачно и структурированно с использованием больших возможностей, чем есть в обычном CSS. Sass предоставляет простой, более элегантный синтаксис CSS, а кроме того, расширяет возможности для разработки легко поддерживаемых таблиц стилей.</p>\n</blockquote>\n<p>Итак, пока обычный CSS все еще не позволяет использовать такие вещи как переменные, примеси (mixins — повторяющиеся блоки стилей) и другие плюшки, Sass дает нам такую возможность, и даже больше — делает возможной «суперфункциональность» в дополнение к обычному CSS. Затем он компилирует ваш код в привычный CSS-файл с помощью командной строки или плагинов для фреймворка.</p>\n<p>Если быть точнее, Sass — это расширение CSS3, и его SCSS-синтаксис («Sassy CSS»), о котором мы будем говорить — надстройка над CSS3. Это означает, что любой валидный CSS-документ также является валидным SCSS-документом. Возможность «быстро вникнуть» — неотъемлемая часть Sass. Начать использовать синтаксис SCSS легко, более того, вы можете начать использовать его в столь малых дозах, как захотите. Что также означает, что преобразование существующих стилей из CSS в SCSS можно производить поэтапно, по мере того, как вы будете больше узнавать Sass.</p>\n<p>Позже, когда вы познакомитесь с Sass поближе, он начнет восприниматься как естественное продолжение CSS, как если бы он заполнил пробелы в существующей спецификации CSS. Именно поэтому, с тех пор, как я начал использовать Sass, я никогда не думал, что это тяжело или трудоемко, он воспринимается просто как CSS. Один раз попробовав, вероятно, вы начнете использовать его постоянно.</p>\n<p>Более того, Sass помогает CSS становиться лучше. Некоторые возможности, которые немыслимы сегодня без препроцессоров, уже сейчас дают авторам CSS живую реализацию и поле для экспериментов. Позже, если это будет иметь смысл, конкретные возможности Sass могут серьезно повлиять на спецификации CSS.</p>\n<h2>Заблуждения о Sass</h2>\n<p>Я уже говорил раньше, что не очень-то хотел попробовать Sass. Отчасти причиной было большое количество заблуждений, которые у меня были до начала его использования. «Должен ли я знать Ruby и быть продвинутым пользователем консоли?» «Придется ли мне полностью изменить способ, которым я сейчас пишу CSS?» «Не станет ли конечный CSS раздутым и нечитаемым?»</p>\n<p>К счастью, ответ на каждый из этих вопросов, конечно, — «нет». Но я вижу, как эти вопросы всплывают каждый раз, когда кто-то упоминает Sass в интернете. Давайте проясним некоторые моменты.</p>\n<h3>Я боюсь командной строки!</h3>\n<p>Едва ли меня можно назвать экспертом по использованию командной строки, но я нахватался каких-то знаний то тут, то там за эти годы. Я не боюсь с помощью консоли перемещаться по файловой системе, использовать Git команды и т.п.</p>\n<p>Тем не менее, я понимаю дизайнеров и фронтенд-разработчиков, не желающих иметь дела с командной строкой. Фобия командной строки действительно существует в некоторых головах. Для Sass использование командной строки сводится к одной команде — и этого достаточно. Более того, существуют приложения и фреймворки, которые избавят вас от необходимости пользоваться командной строкой (я расскажу о них в следующей главе).</p>\n<p>Так что даже если вы избегаете командной строки, это не помешает вам попробовать Sass.</p>\n<h3>Я не хочу менять свои привычки в написании CSS</h3>\n<p>Да, я страдал и от этого заблуждения. Для меня важно, как создаются мои таблицы стилей и как они организованы. Есть целый набор личных скиллов, которые помогают создавать документы. Но помните, что с тех пор, как SCSS стал расширением CSS3, вам не придется менять ваши привычки. Комментирование, отступы — всё ваше форматирование может оставаться неизменными при работе с .scss файлами. Как только я это понял, я смог смело двигаться дальше.</p>\n<h3>Я не хочу менять свои привычки в организации стилей!</h3>\n<p>Sass не решит всех ваших проблем и не исправит ваши вредные привычки. Неэффективные, раздутые таблицы стилей могут остаться такими же неэффективными и раздутыми, если вы используете Sass. Хорошая организация кода и здравый смысл по-прежнему необходимы. На самом деле, Sass может с тем же успехом сделать плохой код ещё хуже. Но когда он используется уместно и разумно, Sass может оказаться отличным подспорьем в разработке сайтов.</p>\n<p>Окей, теперь мы знаем немного больше о том, что нам предстоит. Давайте же получим от этого удовольствие. Я думаю, что возможности Sass вас удивят. В следующей главе мы узнаем, как встроить Sass в рабочий процесс, и как легко его использовать с помощью командной строки или приложения. Давайте займемся Sass-ом!</p>\n<p>Перевод оригинальной статьи «<a href="http://alistapart.com/article/why-sass">Why Sass?</a>» Дэна Седерхольма (Dan Cederholm), опубликованной на сайте <a href="http://alistapart.com/">A List Apart</a>. Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнили: <a href="http://twitter.com/n_snork">Наташа Арефьева</a> и <a href="https://twitter.com/yoksel">Юлия Бухвалова</a>, редактура <a href="http://pepelsbey.net">Вадима Макеева</a> и <a href="http://engel-t.moikrug.ru">Ольги Алексашенко</a>.</p>',headings:[{depth:1,value:"Почему Sass?"},{depth:2,value:"Sass: короткая презентация"},{depth:2,value:"CSS сложен"},{depth:3,value:"Принцип DRY"},{depth:3,value:"Так почему же так трудно работать с CSS?"},{depth:2,value:"Что такое Sass"},{depth:2,value:"Заблуждения о Sass"},{depth:3,value:"Я боюсь командной строки!"},{depth:3,value:"Я не хочу менять свои привычки в написании CSS"},{depth:3,value:"Я не хочу менять свои привычки в организации стилей!"}],frontmatter:{title:"Почему Sass?"}}},{node:{html:'<h1>Простое вертикальное центрирование текста с помощью SVG</h1>\n<p><a href="http://lea.verou.me">Лия Веру</a> 26 марта 2013</p>\n<p>Существует множество способов вертикального выравнивания текста в контейнере произвольных размеров:</p>\n<ul>\n<li>использование <code>display:table</code>;</li>\n<li>Flexbox;</li>\n<li>хаки с использованием <code>display:inline-block</code>;</li>\n<li>оборачивание текста в дополнительный элемент и его абсолютное позиционирование;</li>\n</ul>\n<p>…и, вероятно, множество других, о которых я уже забыла.</p>\n<p>Однако, иногда бывает так, что ни один из них не подходит, и вот — я предлагаю ещё один вариант. Естественно, у него есть свои недостатки, но в некоторых случаях он подойдёт лучше, чем существующие решения.</p>\n<p>Всё это началось, когда я обнаружила в SVG-спецификации свойство <code>text-anchor</code>. Оно определяет, куда ссылаются атрибуты <code>x</code> и <code>y</code> элемента <code>&#x3C;text></code> (см. подробнее <a href="http://www.w3.org/TR/SVG/text.html#TextElementXAttribute" title="x">про x</a> и <a href="http://www.w3.org/TR/SVG/text.html#TextElementYAttribute" title="y">про y</a> в спецификации SVG. — <em>прим. редактора).</em> Волшебство начинается, когда мы задаем в качестве значения <code>middle</code> и атрибуты <code>x</code> и <code>y</code> указывают на центр текста. Так что если задать значения 50%, они будут указывать в центр SVG-контейнера. А если высота и ширина установлены в 100%, текст окажется в центре контейнера, которым может быть любой HTML-элемент!</p>\n<p>Следует учитывать, что центрируется в том числе и базовая линия текста, так что я постаралась найти способ адекватно её сместить. Установка <code>dominant-baseline:middle</code> для элемента <code>&#x3C;text></code> вроде бы решила проблему везде, кроме IE. В результате я просто задала элементу <code>&#x3C;text></code> <code>dy=".3em"</code>, что сработало везде, но может требовать настройки сообразно реальной высоте строки (см. подробнее <a href="http://www.w3.org/TR/SVG/text.html#TextElement">про элемент <code>&#x3C;text></code></a> и <a href="http://www.w3.org/TR/SVG/text.html#TextElementDYAttribute">про атрибут <code>dy</code></a> в спецификации SVG. — <em>прим. редактора).</em></p>\n<p>Кроме того, я вижу у метода следующие недостатки:</p>\n<ul>\n<li>избыточная разметка (а именно, 2 элемента: <code>&#x3C;svg></code> и <code>&#x3C;text></code>);</li>\n<li>если текст занимает больше одной строки, вам придётся разбивать его на строки вручную;</li>\n<li>не получится применить некоторые новомодные CSS-свойства: например, <code>text-shadow</code> в Chrome будет работать, а в Firefox — нет, поскольку формально оно всё ещё не входит в спецификацию SVG;</li>\n<li>вам придётся дублировать цвет текста в свойстве <code>fill</code>, так как SVG не понимает СSS-свойство <code>color</code> (значение цвета из CSS можно получить с помощью <code>fill:currentColor</code> — <em>прим. редактора).</em></li>\n</ul>\n<p>Но есть и некоторые достоинства:</p>\n<ul>\n<li>не нужно трогать родительский контейнер;</li>\n<li>мягкая деградация в браузерах, не поддерживающих SVG;</li>\n<li>абсолютно доступный, не помешает SEO;</li>\n<li>отлично работает в IE9, в отличие от Flexbox;</li>\n<li>можно использовать любые стили для текста, доступные в SVG. Например, <code>stroke</code>!</li>\n</ul>\n<p>Результат показан ниже, посмотреть на код и поиграть с ним <a href="http://dabblet.com/gist/5229803">можно в Даблете</a>.</p>\n<iframe src="http://dabblet.com/gist/5229803" width="510" height="510"></iframe>\n<p>Проверено в последних Chrome, Firefox, IE9+. Несмотря на то, что этот способ не подойдёт для всех случаев, надеюсь, он вам пригодится.</p>\n<p>Перевод оригинальной записи «<a href="http://lea.verou.me/2013/03/easily-center-text-vertically-with-svg/">Easily center text vertically, with SVG!</a>» Лии Веру (Lea Verou). Переведено и опубликовано с разрешения автора.</p>\n<p>Перевод выполнил <a href="http://twitter.com/silentimp">Антон Немцев</a> (SilentImp).</p>',headings:[{depth:1,value:"Простое вертикальное центрирование текста с помощью SVG"}],frontmatter:{title:"Простое вертикальное центрирование текста с помощью SVG"}}},{node:{html:'<h1>Сколько стоит JavaScript?</h1>\n<p>Перевод «<a href="https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e">The Cost Of JavaScript</a>» Эдди Османи.</p>\n<p>По мере того, как мы создаём сайты, всё более и более зависящие от JavaScript, мы иногда теряем производительность. В этой статье я расскажу про соблюдение некоторых правил, которые могут помочь, если вы хотите, чтобы ваш интерактивный сайт быстро загружался на мобильных устройствах.</p>\n<p><strong>TL;DR</strong> Меньше кода = меньше парсить и компилировать + меньше передавать + меньше распаковывать</p>\n<h3>Сеть</h3>\n<p>Когда большинство разработчиков задумываются о стоимости JavaScript, они думают об этом с точки зрения скорости загрузки и выполнения. Отправка большего количества байт JavaScript обходится дороже при медленном подключении пользователя.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 61.625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACKElEQVQoz32SW28SQRTH+SzG+G588dl+AJ78FMQP4IN9skZNTDDxhQYffKi3piRajZpgkRRLYVkoO529X9jpUlhY9kIR9sLOuAtGkxr9J5Ocyfx/58w5Mxnf9588fKyqKiGEYZjdt69lRYb9YeXbYUvRoDl+8/HT00KhCSEmqRRRAidMjPFyucy4sx+5O7dZQCcHhULh2tUrL1/tcJZbPy4xqiR5s7ubmzdvXC992F+xBIgdvvt1FeKMHwT3HmxJopjsWJYtFrcFUQD9wftKmUFnouO+O6g8KxZpQVjDEkJtyK7jTLJMy5ORqfbQwvfDwA+iJewPym14JGqUqgkjiznro+mMYGLbE4QMRR84jv0LtizLDyPnYi6ohm6YYRSxg2Fd0j+3+b1q4+AE1jlRsVJ3Pp/f2LiVzWZzuVwYhimc5JvPF+Zo4i6wMbTDZcQOzeqptFtt7h1S5a5U42TNcROnhozt5y/ubz1q0gzGcQoPTWvkzt2ZH8WxY0+CtLJ5zIuU1v/S4faboMYrPcfFiQjxY+JFBP/ueTS2fD9Ix4fxZJLCcGA2RYmf2Lxlt1j5O830vGkcx4kHSqjW4lLzGk6ApIHLMCdAWYOAA0cURXU072INI10HDPNn2pfhMGJH40ajBZsd2AZdmml0geZO8QruI/28XCJRSP5VmTXHDbpzCjhWN5J3akhyz/FWLRPPm86QQnBM/nttPvmbcGyB8yGt9jTbJX/pJ3kpeRzt3lSJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="1" title="" src="/static/1-94fe659df354c1c4c7d413472b929d76-ce0d4.png" srcset="/static/1-94fe659df354c1c4c7d413472b929d76-a6060.png 163w,\n/static/1-94fe659df354c1c4c7d413472b929d76-1a895.png 325w,\n/static/1-94fe659df354c1c4c7d413472b929d76-ce0d4.png 650w,\n/static/1-94fe659df354c1c4c7d413472b929d76-63d2a.png 975w,\n/static/1-94fe659df354c1c4c7d413472b929d76-87302.png 1300w,\n/static/1-94fe659df354c1c4c7d413472b929d76-34b20.png 1950w,\n/static/1-94fe659df354c1c4c7d413472b929d76-8b003.png 4000w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n</figure>\n<p>Это может быть проблемой даже в развитых странах, так как <em>фактическая</em> скорость соединения пользователя далеко не всегда соответствует максимально возможной в 3G, 4G или Wi-Fi. Вы можете быть подключены к сети Wi-Fi в кафе, но скорость её передачи может не достигать даже 2G.</p>\n<p>Вы можете снизить затраты на JavaScript следующими способами:</p>\n<ul>\n<li>Отправляйте только тот код, который нужен пользователю. Разделение кода может вам в этом помочь.</li>\n<li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/optimize-encoding-and-transfer">Сокращайте код</a> (<a href="https://github.com/mishoo/UglifyJS">uglify</a> для ES5, <a href="https://github.com/babel/minify">babel-minify</a> или <a href="https://www.npmjs.com/package/uglify-es">uglify-es</a> для ES6)</li>\n<li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/optimize-encoding-and-transfer">Сжимайте сильнее</a> (используйте <a href="https://www.smashingmagazine.com/2016/10/next-generation-server-compression-with-brotli/">Brotli</a>, <a href="https://twitter.com/paulcalvano/status/924660429846208514">q11</a>, Zopfli или gzip). Brotli превосходит gzip по степени сжатия. Это помогло CertSimple <a href="https://speakerdeck.com/addyosmani/the-browser-hackers-guide-to-instant-loading?slide=30">сэкономить 17%</a> на размере сжатого JS и LinkedIn <a href="https://engineering.linkedin.com/blog/2017/05/boosting-site-speed-using-brotli-compression">сэкономить 4%</a> на времени загрузки.</li>\n<li>Удаляйте неиспользуемый код. Его можно отследить в <a href="https://developers.google.com/web/updates/2017/04/devtools-release-notes">DevTools во вкладке Coverage</a>. Посмотрите в сторону <a href="https://webpack.js.org/guides/tree-shaking/">tree-shaking</a>, <a href="https://developers.google.com/closure/compiler/">Closure Compiler</a> и других библиотек оптимизации библиотек, вроде <a href="https://github.com/lodash/babel-plugin-lodash">lodash-babel-plugin</a> или <a href="https://iamakulov.com/notes/webpack-front-end-size-caching/#moment-js">ContextReplacementPlugin</a> для Webpack — особенно для таких библиотек, как Moment.js. Используйте babel-preset-env и browserlist, чтобы избежать транспиляции новых возможностей, которые уже доступны в современных браузерах. Продвинутые разработчики уже умеют делать подробный <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">анализ бандлов </a><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">Webpack</a> для избавления от ненужных зависимостей.</li>\n<li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching">Кэшируйте</a> , чтобы избежать лишней нагрузки на сеть. Определите оптимальное время жизни для скриптов (max-age) и используйте токены ETag, чтобы избежать загрузки неизменённых данных. Сервис-воркеры позволят сделать ваше приложение более независимым от сети и дадут доступ к <a href="https://v8project.blogspot.com/2015/07/code-caching.html">кэшированию кода в V8</a>. Узнайте о долгосрочном кэшировании — <a href="https://webpack.js.org/guides/caching/">хэширование имени файла</a>.</li>\n</ul>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABzElEQVQoz5VS2W7UMBSdP+wf8Dl8BS9IfamKWFTxgCpVbEUIKkrpxMnMJJlO9jhO7MRbFmfCzQxS+8rVjWTZPvcszmIagk+vTwrvJa3V7e87z9si5CwtJFWP/bPrNydN+j5JKbJt1/WDMIqiuKKU1c04jotppOj7c55/bLsxCMM0y6F3uyCK8zL9ih9edOIeF8zzt7gohn7Y7/d93w/DvFhMUAOt5diIQXDecC6E7KDgijaZFaqSN4JjXGQ5LstqelKLPdskl8/im1OCse2sbXtlWTbg4awm9PP5hwZXUZy4ng9iYR8IH8GjFj2+m2SotSJlSUhZVYwyZozptGZkpqrrumn4eCgQBLK01gfP03QV4hWVg9ZhFAfBbLttW2PgdPjx8wsheRDGyHaWyEb2ChosJEkCU2bwq9ub6+2uU2q98RibWcCbUjDbXFy8zbIU1rBDKa0oa9vuUTZ8tBaq7YGtICXIA2/QVUXhqOESkgULEG9/7IPso/MZfPru6tuftZTqfon87cPG9VdrN45iM02XvxwPM5znFghGzsb1QB2ECvgZDJPcICPwVqMBxULAe3H4B6SUMDwrKqHne+aQARAeY/vHDOCn6f9X/QVi42UM5G/9jQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="2" title="" src="/static/2-c572913be3c60f27fff70200935e367d-ce0d4.png" srcset="/static/2-c572913be3c60f27fff70200935e367d-a6060.png 163w,\n/static/2-c572913be3c60f27fff70200935e367d-1a895.png 325w,\n/static/2-c572913be3c60f27fff70200935e367d-ce0d4.png 650w,\n/static/2-c572913be3c60f27fff70200935e367d-63d2a.png 975w,\n/static/2-c572913be3c60f27fff70200935e367d-87302.png 1300w,\n/static/2-c572913be3c60f27fff70200935e367d-9cb13.png 1920w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n</figure>\n<h3>Парсинг и компиляция</h3>\n<p>После загрузки, JS-движок тратит уйму времени на парсинг и компиляцию кода. В Chrome DevTools время парсинга и компиляции показаны желтым в панели Perfomance.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 20.603015075376884%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3ElEQVQI1x2I2W6CQAAA+f+P4cE0LYS0SY9Eo6YtVFvEjbAsUISVY8U92INW52EyGYsQ2jXDb1Uww3Hb475T2hwbToVho8zrM2FTN8ii6pRQZYvDNDzRGuRRsA+tGswu0Ab7N//nKYnn6PBKoMuzuz6edbFNM7sETgUXPXKO4Bnjr4YVeEBn3WSJax22Lvy+h7tNGm2CbbB6n5PUG5A7IK9NvAo4n+vHj/UL8J1g8QAiH+UYZlV5EnWytNio9XTF3HwRXJtr/k91M6ETHSdpDGdS6ImPmo2KC0m5+gM7otiSVepLGAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="3" title="" src="/static/3-4761c7535672f2bc211d9119c0a3c228-ce0d4.png" srcset="/static/3-4761c7535672f2bc211d9119c0a3c228-a6060.png 163w,\n/static/3-4761c7535672f2bc211d9119c0a3c228-1a895.png 325w,\n/static/3-4761c7535672f2bc211d9119c0a3c228-ce0d4.png 650w,\n/static/3-4761c7535672f2bc211d9119c0a3c228-63d2a.png 975w,\n/static/3-4761c7535672f2bc211d9119c0a3c228-cb059.png 1194w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n</figure>\n<p>Вкладки Bottom-Up и Call Tree позволят оценить время, затраченное на эти задачи:</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 28.524046434494192%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA4ElEQVQY03XP20rEMBAG4Lz/symrLLLY2klzPnbTdJMepTXojVj8Ln6GH4ZhUPONMQYAJa21GOMycM5LQymNMfb/QL7z0zSN41gy52yMscZIKbXWKaUx533f13Xdtu3zBBHG+zjMyzIvq3Vdg9uWsjgMj5RKECruIZTlnwN/oPr2xODq1Uew4DVAdcHVixVV78AooumVtHUDrVJ6PkFKtNbw4PhdvC6j5wwEx3ddBXFJvVyTGswbodJYexxHeeH4BTVAhDR9fHhxW3InlANMnHVe46GjKeogn99rPE/TcfIFVEBOhfl+LuIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="&#x41F;&#x430;&#x43D;&#x435;&#x43B;&#x44C; Performance &#x432; Chrome DevTools: Bottom-Up." title="" src="/static/4-f8c078d2ee07441ee251353d33d46f6d-ce0d4.png" srcset="/static/4-f8c078d2ee07441ee251353d33d46f6d-a6060.png 163w,\n/static/4-f8c078d2ee07441ee251353d33d46f6d-1a895.png 325w,\n/static/4-f8c078d2ee07441ee251353d33d46f6d-ce0d4.png 650w,\n/static/4-f8c078d2ee07441ee251353d33d46f6d-63d2a.png 975w,\n/static/4-f8c078d2ee07441ee251353d33d46f6d-58c55.png 1206w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>&#x41F;&#x430;&#x43D;&#x435;&#x43B;&#x44C; Performance &#x432; Chrome DevTools: Bottom-Up.</figcaption>\n</figure>\n<p>Но, почему это имеет значение?</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 27.62951334379906%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABBUlEQVQY02NghAAGEGBjZWVmYQEymJiYubl5mMCAm5sbyGVAAoyMIEGQJiAlJibGw8MNFBUSFOTm4QUyWFhYZWXlmJmZWFlZ5eXlgVxkzRwcnEpKyhwcHGAOj4BP/W6fluMBzTsPzTe6sFjt4gLJrSsr52y+Nm39pd6ZnRcWyp5dqH52oSoQnZqven+9Zoq/MNQkZjZOi/ge+8zZDmn9kyvV51TJLKgW7WtLrO5ZWt65pKA8Z1G9zPx6pfn1igsblGZXyy9rlvOy4kPyBtB+FpjXQXw2JmYOJmAosDCxsbAysvACEQMzNyMLHyMzOwM6gOgDBgUTIzMTAxMjAy4AVAhUAFEOAEQfNK97yBSNAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="5" title="" src="/static/5-9a6eb2f78e2a35d3a2a3794218c07540-ce0d4.png" srcset="/static/5-9a6eb2f78e2a35d3a2a3794218c07540-a6060.png 163w,\n/static/5-9a6eb2f78e2a35d3a2a3794218c07540-1a895.png 325w,\n/static/5-9a6eb2f78e2a35d3a2a3794218c07540-ce0d4.png 650w,\n/static/5-9a6eb2f78e2a35d3a2a3794218c07540-63d2a.png 975w,\n/static/5-9a6eb2f78e2a35d3a2a3794218c07540-87302.png 1300w,\n/static/5-9a6eb2f78e2a35d3a2a3794218c07540-34b20.png 1950w,\n/static/5-9a6eb2f78e2a35d3a2a3794218c07540-e42af.png 3822w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n</figure>\n<p>Затраты на парсинг и компиляцию кода могут значительно задержать процесс взаимодействия пользователя с сайтом. Чем больше JavaScript вы отправите, тем больше времени потребуется, чтобы проанализировать и скомпилировать его, а ведь только после этого ваш сайт станет интерактивным.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0ElEQVQoz4WSW28SQRiG+y+MiVoXAXd39jS7c1h2l6WoFRYtTShFaqHSAm3Z1CpWiC0BV1Kj3HijP8Go0Tuv/XF+SGNDTWPyTDKZmeebdw4LsskACVPu3xENciMpqyQlm1SQ1KRmYtuD2RjS4wqOI0OQNETsmQIsQEMWj6u4dzIcjU9rO+3wWffVMGqFh/3BaBCNT6Jxcb1aqm6ubdSfHvUOui/nZNhWpU63f7yzFz7Z7aw9rsPSZufgeBTde7C6vReWN7fAX61sNNr7pWpNYw4oZzKgWDxp8Gu3VUgbQ8ZNSYeQCRXfQvqVRYG6aSeTjUloUVQg44XYLKHRXC4VBC4inLm246dUaism4Uu5w8Gk0z9tdl83X0Qq85BJ52TFYjGV1ite2PCftzKTXrb+yCsEzkqBY2+5fRS9effhy+ev377/rNYa10WsEH4uT49tMp0x6vBC3snnnFTaVgnXKJcMclWI+9mlj8PtX5+2fkyqK/dJQp+GPZf/XBsTMUvoFBCNsxGF2MT1k6ZbDOy3Hf4+ZK2KIyhUuSDPgJKzqgA8u+Vm7gbFh6X15WI5XSh7+bJM0zKmc7EvA54ESgASJsgE6N/S/5dnX2jasTj6Z+o3kfuhYH4c+AAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="6" title="" src="/static/6-c1a0a4f520cbf83deeb713314eca8bf4-ce0d4.png" srcset="/static/6-c1a0a4f520cbf83deeb713314eca8bf4-a6060.png 163w,\n/static/6-c1a0a4f520cbf83deeb713314eca8bf4-1a895.png 325w,\n/static/6-c1a0a4f520cbf83deeb713314eca8bf4-ce0d4.png 650w,\n/static/6-c1a0a4f520cbf83deeb713314eca8bf4-63d2a.png 975w,\n/static/6-c1a0a4f520cbf83deeb713314eca8bf4-87302.png 1300w,\n/static/6-c1a0a4f520cbf83deeb713314eca8bf4-9cb13.png 1920w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n</figure>\n<blockquote>\n<p>Байт за байтом, JavaScript является более ресурсозатратным для браузера, чем изображения или шрифты того же размера.\nТом Дэйл</p>\n</blockquote>\n<p>Помимо JavaScript, существует множество затрат, связанных с обработкой изображений эквивалентного размера (они все еще должны быть декодированы!), однако с большей вероятностью именно (загрузка и выполнение) JavaScript негативно скажется на интерактивности страницы.</p>\n<figure>\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 64.6875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADGklEQVQ4y6WTa0hTYRjHzzlzbmduiuGlCzYpsTKkPkSoQSF2UxJBJcrU8NLHog9WlhZ9MGIYQZ/ChpJiw2I1U7MiKW+bzUszvDR3M9x0Z2c7u7m5Ydve3nfOgj5E0HP4ve9zzvu87/95nnMOhkHjcVmxUSxcCElFsKPwFHQfzSa2YxtGQuIiPsYm2XycwPcTUcQOnIXvIlhEyp5T6TgAYDME40G2QZIhWyEJGzMnGeO2EAIBH63HYr8NCSRC4iFINAFg8EIH6l+f4ADtWT4Al7kAXCEBuA65Cqkjy7OxJN6GiIDL424R5giFaXlp6cdv5yV0Axnnrv0O7xnoJM+DUg6MYYWlDL35Rxe6C5pmpfk39b1nGtyjJQ2ukeIGt7z4lkPb/9LD6F5A5SQUWyEpr7gorayv7a+5Vt1TdaO2r6b+QndZXeNAY9NHtVw5vTJfh/3NkoSFiUdOVu+GbkykPNQKdHh0JARHQ4tMTPopkOmyre3CbIwzjbJYm2krI7La7CIzZRXBe5HLvSpibPR9K009oiiqCm2mJ82xwADiYMYxEE4E2CoQ/SuLZdNSAQABgCwYWIdjKOyHQkGwaT6/rw9OAvWKZnFErbAPzg5bx9RKZtW7yqj0k4xcM0hPfh8LKA3yS5h/zZG7YjJ47ZTWZaMWnZRR7Vy1ad2UacELs3eHhYLBdqhDenyeTtpl7dGYtTKd0SCz0LTMAGejZemVy+d8b/cwp9GrjmFc65lTU1OHlMrxw5+GFFmaufGDAHhT4NpOSCokAfsfq64s5Y0rB0sGZj+Uqubl55YXvmaj56hsi9P8cEo3LvmyONExY1R1fjPNtWspdZdzzVEW3mwymTCtTk/k5h7jFhUVClDzPU7mACwU0Gtm2N11YDUybyMH8vUW7b03E92t76Z7WoY0A08UC8OPP+tG22g3VfJnYsS+jAw2coIhsBdudvt9Xnfghx+EgoHOf6msa7gDx8RiMRcikEgkpFQqjWltbeMpFPJ4s9mczTC2LIax5xhNyxkPmpt5He0d5JxDRUCx8H8bAX8+85RQGSbD3+RPOxzYzeDjSIQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;" alt="170 &#x41A;&#x411; &#x441;&#x436;&#x430;&#x442;&#x43E;&#x433;&#x43E; JS &#x43F;&#x440;&#x43E;&#x442;&#x438;&#x432; &#x431;&#x430;&#x439;&#x442;&#x43E;&#x432; JPEG &#x43D;&#x430; Moto G4 &#x432; &#x43C;&#x435;&#x434;&#x43B;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x441;&#x435;&#x442;&#x438;." title="" src="/static/7-41cec0a712803f864152209448afd52e-ce0d4.png" srcset="/static/7-41cec0a712803f864152209448afd52e-a6060.png 163w,\n/static/7-41cec0a712803f864152209448afd52e-1a895.png 325w,\n/static/7-41cec0a712803f864152209448afd52e-ce0d4.png 650w,\n/static/7-41cec0a712803f864152209448afd52e-63d2a.png 975w,\n/static/7-41cec0a712803f864152209448afd52e-87302.png 1300w,\n/static/7-41cec0a712803f864152209448afd52e-34b20.png 1950w,\n/static/7-41cec0a712803f864152209448afd52e-916d8.png 2560w" sizes="(max-width: 650px) 100vw, 650px">\n    </span>\n  </span>\n  \n    <figcaption>170 &#x41A;&#x411; &#x441;&#x436;&#x430;&#x442;&#x43E;&#x433;&#x43E; JS &#x43F;&#x440;&#x43E;&#x442;&#x438;&#x432; &#x431;&#x430;&#x439;&#x442;&#x43E;&#x432; JPEG &#x43D;&#x430; Moto G4 &#x432; &#x43C;&#x435;&#x434;&#x43B;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x441;&#x435;&#x442;&#x438;.</figcaption>\n</figure>\n<p>Байты JavaScript и изображений имеют разную стоимость. Изображения обычно не блокируют основной поток или не препятствуют взаимодействию интерфейсов при декодировании и растеризации. Однако JS может задерживать взаимодействие с сайтом из-за парсинга, компиляции и выполнения.</p>\n<p>Когда мы говорим о медленном выполнении парсинга и компиляции, не стоит забывать, что мы рассматриваем среднестатистическое мобильное устройство. Однако многие пользователи могут иметь телефоны с медленными ЦП и графическими процессорами, без кэша L2 или L3 и могут быть ограничены памятью.</p>\n<blockquote>\n<p>Возможности сети и устройства не всегда совпадают. Пользователь с удивительно быстрым подключением не обязательно имеет лучший процессор для анализа и исполнения JavaScript, отправленного на его устройство. Это также верно и наоборот: ужасное сетевое подключение, но невероятно быстрый процессор.\nКристофер Бакстер, LinkedIn</p>\n</blockquote>\n<p>При проведении тестов скорости JavaScript, я замерял стоимость парсинга ≈1 МБ обычного (несжатого) JavaScript на медленных и высокопроизводительных устройствах. Среднестатистическое устройство тратит на парсинг и компиляцию кода в 2–5 раз больше времени, чем флагманские устройства.</p>\n<figure>\n    <img src="images/8.png" alt="Время парсинга для 1Мб JS бандла (≈250KB gzip) на настольных и мобильных устройствах различных классов.">\n    <figcaption>Время парсинга для 1Мб JS бандла (≈250KB gzip) на настольных и мобильных устройствах различных классов.</figcaption>\n</figure>\n<p>А что если мы проверим реально существующий сайт, например <a href="http://cnn.com/">CNN</a>?</p>\n<p>iPhone 8 потребуется для этого всего 4 секунды, в то время как для среднего по характеристикам смартфона (в нашем случае, Moto G4), необходимо около 14 секунд. Это существенно повлияет на то, как быстро пользователь сможет полностью взаимодействовать с этим сайтом.</p>\n<figure>\n    <img src="images/9.png" alt="Сравнение производительности чипа A11 Bionic и Snapdragon 617.">\n    <figcaption>Сравнение производительности чипа A11 Bionic и Snapdragon 617.</figcaption>\n</figure>\n<p>Это подчеркивает важность проведения тестов на среднестатистических устройствах, а не только на тех, которые могут быть у вас в кармане. Однако контекст очень важен. Оптимизируйте JS для тех типов подключений и устройств, на которых нацелен ваш продукт.</p>\n<figure>\n    <img src="images/10.png" alt="">\n</figure>\n<p>Аналитика поможет вам определить какой тип мобильных устройств используют посетители вашего сайта. Это позволит вам понять реальные ограничения ЦП и ГП, с которыми они работают.</p>\n<p>А мы точно отправляем слишком много JavaScript? Может я ошибся :)</p>\n<p>Используем <a href="http://httparchive.org/">HTTP Archive</a> (топ 500 000 сайтов) для анализа. Прежде чем стать интерактивными, 50% сайтов тратят более 14 секунд, из которых около 4 уходит на парсинг и компиляцию кода.</p>\n<figure>\n    <img src="images/11.png" alt="">\n</figure>\n<p>Много времени требуется для анализа и обработки JS и других ресурсов, и не удивительно, что пользователям приходится ждать, прежде чем начать взаимодействовать со страницей. Мы определённо можем ускорить этот процесс.</p>\n<p>Удаление некритичного JavaScript с ваших страниц может сократить время передачи, анализа, компиляции и потенциальную нагрузку на память. Это также поможет вашим страницам быстрее стать интерактивными.</p>\n<h3>Время исполнения</h3>\n<p>Это не просто парсинг и компиляция. Исполнение JavaScript (выполнение кода после анализа и компиляции) — одна из операций, которая должна выполняться в основном потоке. Этот процесс так же влияет на то, как скоро пользователь сможет взаимодействовать с сайтом.</p>\n<figure>\n    <img src="images/12.png" alt="">\n</figure>\n<blockquote>\n<p>Если скрипт исполняется более 50 мс, то время до интерактивности задерживается на всё время, необходимое для загрузки, компиляции, и исполнения.\nАлекс Рассел</p>\n</blockquote>\n<p>Для решения этой проблемы JavaScript разбивается на небольшие фрагменты, чтобы избежать блокировки основного потока. Посмотрим, можно ли сократить объем выполняемой работы во время выполнения.</p>\n<h3>Паттерны для уменьшения стоимости JS</h3>\n<p>Существуют подходы, которые могут помочь при медленном парсинге, компиляции и невысокой скорости сетевой передачи. Например разбиение фрагментов на основе маршрутов или <a href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/">PRPL</a>.</p>\n<p>PRPL — это паттерн, основанный на агрессивном разделении и кэшировании кода.</p>\n<figure>\n    <img src="images/13.png" alt="">\n</figure>\n<p>Давайте наглядно посмотрим, насколько это улучшит производительность. Проанализируем время загрузки популярных мобильных сайтов и прогрессивных веб-приложений, используя статистику вызовов V8 в рантайме. Как мы видим, на парсинг (показано оранжевым цветом) браузеры тратят значительную часть времени:</p>\n<figure>\n    <img src="images/14.png" alt="">\n</figure>\n<p>Сайту <a href="https://wego.com">Wego</a>, который использует PRPL, удается поддерживать низкое время синтаксического анализа для своих маршрутов, получая интерактивность очень быстро. Многие из вышеперечисленных сайтов сделали акцент на разбиении кода, чтобы попытаться повысить производительность.</p>\n<h3>Другие факторы</h3>\n<p>JavaScript может влиять на производительность страниц другими способами:</p>\n<ul>\n<li>Память. Выполнение страниц может приостанавливаться для очистки памяти. Когда браузер освобождает память, выполнение JS приостанавливается, и это может происходить довольно часто, что нам не очень-то понравится. Избегайте утечек памяти и частых пауз GC, чтобы уменьшить притормаживания страниц.</li>\n<li>Длительное исполнение JavaScript может блокировать основной поток, из-за чего страницы могут не отвечать на запросы. Разбивка выполнения на мелкие части (с помощью <code>requestAnimationFrame()</code> или <code>requestIdleCallback()</code>) позволяет свести к минимуму такие проблемы.</li>\n</ul>\n<h3>Прогрессивная загрузка</h3>\n<p>Многие сайты оптимизируют видимую часть контента. Для быстрой первоначальной отрисовки, при наличии JS большого размера, разработчики разделяют этот процесс на два этапа: выполняют первоначальный рендер на сервере, а затем подгружают JavaScript.</p>\n<p>Будьте осторожны — это тоже требует ресурсов. Как правило, передается более крупный HTML-ответ, который может ограничить вашу интерактивность. Во-вторых, вы частично лишаете пользователя возможности взаимодействия с интерфейсом, пока JavaScript не подгрузится.</p>\n<p>Прогрессивная загрузка может быть лучшим подходом. Отправляется минимально функциональная страница (состоящая только из HTML, JS и CSS, необходимых для текущего состояния). По мере поступления дополнительных ресурсов, приложение выполняет отложенную загрузку и разблокирует дополнительные возможности.</p>\n<figure>\n    <img src="images/15.png" alt="Progressive Bootstrapping.">\n    <figcaption>\n        <a href="https://twitter.com/aerotwist/status/729712502943174657">\n            Progressive Bootstrapping\n        </a>, иллюстрация Пола Льюиса.\n    </figcaption>\n</figure>\n<p>Загрузка кода должны быть оптимальной. PRPL и прогрессивная загрузка — это паттерны, которые могут помочь в достижении этой цели.</p>\n<h3>Подведём итоги</h3>\n<p>Размер передаваемой информации критически важен для сетей с медленной скоростью. Время парсинга важно для устройств, со слабым ГП. Запомните это.</p>\n<p>Команды разработчиков добиваются успеха устанавливая для себя жёсткие ограничения производительности (бюджет быстродействия), соблюдение которых заключается в минимизации затрат на передачу, парсинг и компиляцию JS-кода. Читайте «<a href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/">Can You Afford It? Real-world Web Performance Budgets</a>» Алекса Рассела для более подробного изучения темы.</p>\n<figure>\n    <img src="images/16.png" alt="Полезно посмотреть, какой объём выделяется для логики приложения.">\n    <figcaption>Полезно посмотреть, какой объём выделяется для логики приложения.</figcaption>\n</figure>\n<p>Если вы создаете сайт, ориентированный на мобильные устройства, сделайте все возможное для тестирования на нужных типах устройств, держите на низком уровне время парсинга и компиляции JavaScript и утвердите бюджет производительности для того, чтобы команда могла следить за оптимизацией JavaScript.</p>\n<h3>Подробнее</h3>\n<iframe width="560" height="315" src="https://www.youtube.com/embed/_srJ7eHS3IM" frameborder="0" allowfullscreen></iframe>\n<ul>\n<li><a href="https://medium.com/reloading/javascript-start-up-performance-69200f43b201">JavaScript Start-up Performance</a></li>\n<li><a href="https://nolanlawson.github.io/frontendday-2016/">Solving the web performance crisis</a> Нолана Лоусон</li>\n<li><a href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/">Can you afford it? Real-world performance budgets</a> Алекса Рассела</li>\n<li><a href="https://twitter.com/kristoferbaxter/status/908144931125858304">Evaluating web frameworks and libraries</a> Кристофера Бакстера</li>\n<li><a href="https://blog.cloudflare.com/results-experimenting-brotli/">Results of experimenting with Brotli</a>, опыт Cloudflare</li>\n<li><a href="https://medium.com/@samccone/performance-futures-bundling-281543d9a0d5">Performance Futures</a>, Сэма Сакконе</li>\n</ul>\n<p>Отдельное спасибо Нолану Лоусону, Кристоферу Бакстеру и Джереми Вагнеру.</p>\n<p>Перевод <a href="https://medium.com/@nzvtrkk">Артура Храброва</a>, редактура <a href="https://medium.com/@pepelsbey">Вадима Макеева</a>.</p>',headings:[{depth:1,value:"Сколько стоит JavaScript?"},{depth:3,value:"Сеть"},{depth:3,value:"Парсинг и компиляция"},{depth:3,value:"Время исполнения"},{depth:3,value:"Паттерны для уменьшения стоимости JS"},{depth:3,value:"Другие факторы"},{depth:3,value:"Прогрессивная загрузка"},{depth:3,value:"Подведём итоги"},{depth:3,value:"Подробнее"}],frontmatter:{title:"Сколько стоит JavaScript?"}}},{node:{html:'<h1>В HTML5 добавлен новый атрибут translate</h1>\n<p><a href="http://people.w3.org/rishida/">Ричард Ишида</a> 30 июля 2012</p>\n<p>В HTML5 недавно <a href="http://dev.w3.org/html5/spec/global-attributes.html#the-translate-attribute">добавился новый атрибут</a> — <code>translate</code>. На трёх <a href="http://multilingualweb.eu/">семинарах MultilingualWeb</a>, которые мы провели за последние два года, идея такого булева флага — «переводить или не переводить» постоянно вызывает довольно большой интерес у локализаторов, создателей текста, и всех тех, кто работает с языковыми технологиями.</p>\n<h2>Как это работает?</h2>\n<p>Обычно либо автор текста, либо среда вывода, которая автоматически формирует текст, ставит этот атрибут в разметку страницы. Кроме того, в ситуации промышленного перевода локализаторы могут добавлять этот атрибут на стадии подготовки перевода, чтобы избежать множества ошибок перевода при большом количестве языков в одном тексте.</p>\n<p>На рендеринге страницы этот атрибут никак не сказывается (впрочем, можно добавить к нему свои стили, если вы найдёте для этого повод). Планируется, что этот атрибут в основном будет полезен для тех инструментов, которые используются в процессе перевода текста — будь это тщательная работа профессиональных переводчиков, быстрые API или облачные сервисы перевода коротких текстовых фрагментов.</p>\n<p>Этот атрибут может быть применён к любому элементу, и может иметь одно из двух значений: <code>yes</code> или <code>no</code>. Если значение — <code>no</code>, инструменты перевода должны предохранять текст внутри элемента от перевода. Этот инструмент может быть автоматической системой перевода (как, например, в онлайн-сервисах Google или Microsoft) или профессиональной системой перевода, которая не будет давать переводчику случайно изменить текст.</p>\n<p>Если установить этот флаг на элемент, то же самое значение будет применено ко всем вложенным элементам и атрибутам этих элементов.</p>\n<p>Для того, чтобы система работала, не нужно использовать <code>translate="yes"</code>. Если на странице нет атрибута <code>translate</code>, система перевода (или переводчик) должна предположить, что перевести нужно весь текст. Вряд ли значение <code>yes</code> будет использоваться широко, хотя оно может быть очень полезно, если вам нужно переопределить значение флага <code>translate</code> на родительском элементе и указать кусочки текста, которые должны быть переведены. Например, вы можете захотеть перевести комментарии на обычном языке в исходном коде, а сам код оставить без перевода.</p>\n<h2>Зачем это нужно?</h2>\n<p>Потребность в этом встречается довольно-таки часто. В спецификации HTML5 есть <a href="http://developers.whatwg.org/elements.html#the-translate-attribute">пример с игрой про пчелу и мёд</a>. Вот похожий, но на этот раз реальный пример из моего опыта работы в Xerox, где документация, которая переводилась на другой язык, относилась к устройству, на котором текст находился прямо на «железе» и поэтому не переводился.</p>\n<pre><code>&#x3C;p>Click the Resume button on the Status Display or the &#x3C;span class="panelmsg" translate="no">CONTINUE&#x3C;/span> button the printer panel.&#x3C;/p>\n</code></pre>\n<p>Оригинальный текст на английском — <em>прим. переводчика.</em></p>\n<pre><code>&#x3C;p>Нажмите кнопку «Продолжить» на дисплее состояния или кнопку\u2028 &#x3C;span class="panelmsg" translate="no">CONTINUE&#x3C;/span> на панели принтера.&#x3C;/p>\n</code></pre>\n<p>Текст при переводе на русский язык — <em>прим. переводчика.</em></p>\n<p>Вот ещё несколько примеров текста из жизни, которым принесет пользу атрибут <code>translate</code>. Отрывок из книги, цитирующий название работы.</p>\n<pre><code>&#x3C;p>The question in the title &#x3C;cite translate="no">How Far Can You Go?&#x3C;/cite> applies to both the undermining of traditional religious belief by radical theology and the undermining of literary convention by the device of “breaking frame”…&#x3C;/p>\n</code></pre>\n<p>Оригинальный текст на английском — <em>прим. переводчика.</em></p>\n<pre><code>&#x3C;p>Вопрос в названии, &#x3C;cite translate="no">How Far Can You Go?&#x3C;/cite>, относится и к отрицательному влиянию радикальной теологии на традиционные религиозные воззрения, и к отрицательному влиянию приема «разрыва рамок» на правила построения литературного произведения…&#x3C;/p>\n</code></pre>\n<p>При переводе на русский язык. На русском языке в таких случаях, впрочем, название работы обычно принято переводить — <em>прим. переводчика.</em></p>\n<p>Следующий пример со страницы о французском хлебе — «хлеб» по-французски «pain».</p>\n<pre><code>&#x3C;p>Welcome to &#x3C;strong translate="no">french pain&#x3C;/strong> on Facebook. Join now to write reviews and connect with &#x3C;strong translate="no">french pain&#x3C;/strong>. Help your friends discover great places to visit by recommending &#x3C;strong translate="no">french pain&#x3C;/strong>.&#x3C;/p>\n</code></pre>\n<p>Оригинальный текст на английском — <em>прим. переводчика.</em></p>\n<pre><code>&#x3C;p>Добро пожаловать на страницу &#x3C;strong translate="no">french pain&#x3C;/strong> на Facebook. Присоединяйтесь, пишите отчеты и свяжитесь с &#x3C;strong translate="no">french pain&#x3C;/strong>. Помогите друзьям узнать отличные новые места, порекомендовав им &#x3C;strong translate="no">french pain&#x3C;/strong>.&#x3C;/p>\n</code></pre>\n<p>При переводе на русский язык. Речь идет о французской компании, которая называется «french pain» — <em>прим. переводчика.</em></p>\n<p>Таким образом, добавив на вашу страницу атрибут <code>translate</code>, вы поможете читателям лучше понять ваш текст, если они читают его через системы автоматического перевода, и значительно сэкономить денежные и временные затраты системам перевода с большим потоком информации на разных языках.</p>\n<h2>Как обстоят дела у Google Translate и Microsoft Translator?</h2>\n<p>Службы перевода Google и Microsoft и ранее предоставляли возможность предохранять текст от перевода посредством добавления разметки, но делали они это (несколькими) разными способами. Будем надеяться, что новый атрибут очень поможет тем, что предоставит стандартный подход.</p>\n<p>И Google, и Microsoft в настоящее время поддерживают синтаксис <code>class="notranslate"</code>, но замена названия класса атрибутом — формальной частью языка — сделает эту функцию гораздо более надежной, особенно в более широких контекстах. Например, инструмент переводчика может всегда считать, что HTML5-атрибут <code>translate</code> значит именно то, что он должен значить. Становится проще портировать эту идею и для других сценариев использования: скажем, для других API перевода или стандартов локализации (например, XLIFF).</p>\n<p>Кстати, онлайн-сервис перевода компании Microsoft (которая, собственно, и предложила флаг <code>translate</code> в HTML5 некоторое время назад) уже поддерживает <code>translate="no"</code>. До сих пор, конечно, это был проприетарный атрибут, и Google не поддерживал его. Однако, буквально вчера утром я совершенно случайно узнал, что Webkit и Chromium только что добавили поддержку атрибута <code>translate</code>, а вчера днем Google добавил поддержку <code>translate="no"</code> к своему сервису онлайн-перевода. <a href="http://www.w3.org/International/tests/html-css/translate/results-online">Вот результаты нескольких тестов</a>, которые я провел этим утром. Ни Microsoft, ни Google пока не поддерживают переопределение <code>translate="yes"</code>. <em>Статья опубликована 22 февраля 2012 года (прим. переводчика)</em></p>\n<p>Во всех этих проприетарных системах, впрочем, есть масса нестандартных способов синтаксически выразить эту же идею (даже если мы говорим только о Google и Microsoft).</p>\n<p>Так, Microsoft поддерживает <code>style="notranslate"</code>. Google не поддерживает этот синтаксис в списке возможных флагов для своего онлайн-сервиса перевода, но зато у них есть варианты, которые недоступны в сервисе Microsoft.</p>\n<p>Например, если у вас есть целая страница, которая не должна переводиться, можете добавить <code>&#x3C;meta name="google" value="notranslate"></code> внутри элемента <code>&#x3C;head></code> вашей страницы, и Google не будет переводить никакой текст на этой странице. А еще они поддерживают <code>&#x3C;meta name="google" content="notranslate"></code>. Конечно, это не должно быть специфично для Google, и единообразный способ делать это, то есть <code>translate="no"</code> для элемента <code>&#x3C;html></code> — гораздо более удачное решение.</p>\n<p>Также непонятно, кстати, и с тем, и с другим сервисом перевода, как делать доступными для перевода вложенные элементы внутри элемента, для которого <code>translate</code> установлено в значении <code>no</code> — а это иногда может понадобиться.</p>\n<p>Как говорилось выше, новый HTML5-атрибут использует простую и стандартную возможность HTML, которая может заменить и упростить все эти различные подходы. И, конечно, это поможет авторам создавать такое текстовое содержимое, настройки локализации которого будут работать и с другими системами.</p>\n<h2>А почему не использовать просто атрибут <code>lang</code>?</h2>\n<p>Конечно, во время дискуссий о том, как правильно реализовать флаг <code>translate</code>, кто-нибудь обязательно должен был предложить именно это, но перегружать текст метками языков — это не решение. Например, языковая метка может указывать, какой орфографический словарь использовать для проверки какого текста. Это не имеет ничего общего с тем, нужно переводить текст или нет. Это разные концепции. Если в документе, где у элемента <code>&#x3C;html></code> указан <code>lang="en"</code>, дальше на странице вы поставите <code>lang="notranslate"</code>, орфография в тексте не будет проверяться, потому что указанный язык уже не английский. Кроме того, стили для <code>lang</code> перестанут работать, голосовые браузеры не будут правильно произносить текст и т.п.</p>\n<h2>Больше, чем просто атрибут <code>translate</code></h2>\n<p>Рекомендация <a href="http://www.w3.org/TR/its/">ITS (Internationalization Tag Set)</a>, сделанная W3C, предлагает использовать флаг возможности автоматического перевода в таком виде, как атрибут <code>translate</code>, только что добавленный к HTML5, но идёт дальше и описывает способ присвоить значение флага каким-либо элементам или наборам разметки по всему документу или в наборе документов. Например, вы можете определить (если так нужно для вашего содержимого), что по умолчанию все элементы <code>&#x3C;p></code> с указанным классом должны иметь флаг <code>translate</code> в значении <code>no</code> в каком-либо конкретном наборе документов.</p>\n<p><em>Накануне публикации перевода был представлен первый <a href="http://www.w3.org/TR/2012/WD-its20-20120731/">рабочий черновик ITS 2.0</a>, следующей версии спецификации — прим. редактора.</em></p>\n<p>Microsoft уже предлагает что-то в этом духе, хотя их подход предоставляет гораздо меньше возможностей, чем рекомендация ITS. Если вы пишете где-либо на странице (или в виджете) <code>&#x3C;meta name="microsoft" content="notranslateclasses myclass1 myclass2"></code>, то эта строчка гарантирует, что все CSS-классы, перечисленные после директивы <code>notranslateclasses</code>, будут вести себя так же, как класс <code>notranslate</code>.</p>\n<p>Кроме того, движки автоматического перевода Microsoft и Google не переводят содержимое элементов <code>&#x3C;code></code>. Впрочем, обратите внимание, что относительно этого у вас особенно нет выбора — нет никаких инструкций относительно того, как переопределить это значение, если вы хотите, чтобы содержимое вашего элемента <code>&#x3C;code></code> всё же было бы переведено.</p>\n<p>Кстати, в ближайших планах W3C есть организаций новой рабочей группы совместно с проектом Европейской Комиссии — MultilingualWeb-LT — чтобы дальше развивать идеи по спецификации ITS и разработать ряд её практических реализаций. Помимо всего прочего, эта группа будет искать новые способы интеграции нового атрибута <code>translate</code> в процессы и стандарты индустрии локализации. Ждите, скоро всё будет!</p>\n<p>Перевод оригинальной записи «<a href="http://rishida.net/blog/?p=831">HTML5 adds new translate attribute</a>» Ричарда Ишиды (Richard Ishida).</p>\n<p>Перевод выполнил <a href="http://www.facebook.com/vlad.andersen">Влад Андерсен</a>.</p>',headings:[{depth:1,value:"В HTML5 добавлен новый атрибут translate"},{depth:2,value:"Как это работает?"},{depth:2,value:"Зачем это нужно?"},{depth:2,value:"Как обстоят дела у Google Translate и Microsoft Translator?"},{depth:2,value:"А почему не использовать просто атрибут "},{depth:2,value:"Больше, чем просто атрибут "}],frontmatter:{title:"В HTML5 добавлен новый атрибут translate"}}}]}}}}}]);
//# sourceMappingURL=component---src-pages-articles-jsx-108f450be88982059d31.js.map