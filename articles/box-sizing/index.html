<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.0.1"/><title data-react-helmet="true"></title><link as="script" rel="preload" href="/component---src-templates-article-jsx-45c82757c31814993ac5.js"/><link as="script" rel="preload" href="/app-d6d0aa46cc7a8319a706.js"/><link as="script" rel="preload" href="/webpack-runtime-49e87d415bc1f49f59fb.js"/><link rel="preload" href="/static/d/895/path---articles-box-sizing-ada-dcd-vnisbrmoL2qDyuyPUr4DDMHeMgA.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="article"><h1 class="article__title">Размеры блоков, или Назад в будущее</h1><div class="article__date">23 января 2013</div><div class="article__content"><h1>Размеры блоков, или Назад в будущее</h1>
<p><a href="http://generatedcontent.org/">Дэвид Стори</a> 23 января 2013</p>
<p>Технологии разработки сайтов меняются в корне. XHTML (Strict — мы так гордились своей работой) уступил место более свободному HTML5. Нарезанные картинки и div-обёртки заменяются гораздо более разумными (и, если повезет, семантичными) средствами HTML и CSS3, такими как <code>border-radius</code>, <code>box-shadow</code> и градиенты. Резиновая раскладка превращается в отзывчивый дизайн на медиа-выражениях. JavaScript — уже не просто игрушка, и занимает положенное место в триумвирате с HTML и CSS. Может быть, мы уже близки к получению реального инструмента разметки с помощью Flexbox. Может быть, даже почтенные единицы <code>em</code> будут забыты, и их заменят более предсказуемые <a href="http://generatedcontent.org/post/11933972962/css3values"><code>rem</code></a>, а также <a href="http://generatedcontent.org/post/21279324555/viewportunits">гибкие единицы <code>vw</code> и <code>vh</code></a>.</p>
<p>Мы стоим на пороге третьей эры Открытого веба (век таблиц и однопиксельных гифов уже не более, чем история), и наши инструменты и процессы развиваются, начиная походить на инструменты обычных программистов — это <a href="http://rmurphey.com/blog/2012/04/12/a-baseline-for-front-end-developers/">скрипты сборки, препроцессоры, линтеры (при некотором приближении, напоминающие компиляторы), автоматическое тестирование и контроль версий</a>.</p>
<p>Но есть кое-что гораздо менее заметное, о чём бы я хотел поговорить сегодня, тоже способное по-своему изменить разработку сайтов. Это <a href="http://www.w3.org/TR/css3-ui/#box-sizing0">CSS-свойство <code>box-sizing</code></a>.</p>
<p>Те из вас, кто помнит тяжелые старые времена, помнит и неправильную блочную модель, которую IE использовал вместо стандартной модели W3C. В этой модели рамка (<code>border</code>) и отступ (<code>padding</code>) считались частью ширины (<code>width</code>) и высоты (<code>height</code>) блока, в то время как в модели W3C отступ и рамка прибавлялись к ширине и высоте при расчёте конечных размеров блока. В модели IE свойство <code>width</code> отражало конечную ширину блока, в то время как в модели W3C оно отражало ширину контентной части блока (то есть части блока, в которой находится непосредственно его содержимое). Чтобы заставить IE играть по правилам, мы должны были использовать <a href="http://tantek.com/CSS/Examples/boxmodelhack.html">хак блочной модели Тантека Челика</a>.</p>
<p>CSS-свойство <code>box-sizing</code> существует уже некоторое время и дает нам возможность переключаться между стандартной блочной моделью <code>box-sizing:content-box</code> и старой блочной моделью IE <code>box-sizing:border-box</code>. Недавний всплеск интереса к использованию этого забытого свойства связан с выходом статьи Пола Айриша <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/">* { <code>box-sizing:border-box</code> } FTW</a>.</p>
<h2>Пора переключиться на border-box?</h2>
<p>Если вы хотите перейти сразу к делу, пожалуйста, <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">поучаствуйте в опросе</a> о <code>box-sizing</code>, а если нет — просто читайте дальше.</p>
<p>Использование <code>border-box</code> по умолчанию никогда не будет включено в стандарт, так как это скажется на отображении слишком большого количества сайтов, но не пришло ли время переключиться на использование его для всех элементов на всех проектах с помощью универсального селектора, как предлагает Пол? Об этом я думал в последнее время.</p>
<p>Если дело касается только моих собственных проектов или проектов с небольшими командами разработчиков, которых я знаю и с которыми могу общаться непосредственно, я думаю, сказал бы — да, это стоит сделать. Но когда речь идет о руководстве для многих разработчиков, проектах с открытым исходным кодом или демо-материалах, доступных для просмотра большому количеству пользователей, с которыми я никогда не общался, я всё ещё сомневаюсь.</p>
<h2>За и против</h2>
<p>Определенно, в лагере профессионалов есть несколько наиболее известных разработчиков. Пол Айриш, несомненно, фанат своего дела. Он подытоживает разочарование от текущей модели:</p>
<blockquote>
<p>Уф. Если я говорю, что ширина блока должна быть 200 пикселей, то блок должен занимать 200 пикселей по ширине, даже если у него есть отступы по 20 пикселей.</p>
</blockquote>
<p><a href="http://blog.joelambert.co.uk/">Джоу Ламберт</a> соглашается с Полом <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/#comment-111776">в комментарии</a>:</p>
<blockquote>
<p>Я большой фанат этой техники, я использовал ее в некоторых мобильных веб-приложениях и все больше использую в веб-проектах.</p>
</blockquote>
<p><a href="http://adactio.com/">Джереми Кит</a> просто <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/#comment-111784">называет её</a> «очень крутой». В то же время, <a href="https://twitter.com/stefsull">Стефани Рюис</a> в удивляется <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/#comment-111772">в комментарии</a>:</p>
<blockquote>
<p>Мы должны лоббировать смену модели W3C. Я постоянно слышу, что разработчики разочарованы.</p>
</blockquote>
<p><a href="http://tjkdesign.com/">Терри Кобленц</a> предупреждает:</p>
<blockquote>
<p>К слову о «неправильной блочной модели», как мы привыкли её называть. Я думаю, проблема в том, что вы не можете управлять контентной областью блока, и любое изменение отступа или рамки окажет на нее влияние. Я понимаю, что людям может быть проще оформлять блоки таким способом, но это не волшебная палочка, и вам придется смириться с другими сложностями«.</p>
</blockquote>
<p><a href="http://weblogs.mozillazine.org/bz/">Борис Збарский</a> из Mozilla <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=243412#c21">говорит</a>:</p>
<blockquote>
<p>Спецификация недостаточно подробно описывает, как это должно работать, чтобы реализовать это при помощи CSS3 Box, вот что я могу сказать.</p>
</blockquote>
<p>В то время как <a href="http://dbaron.org/">Дэвид Барон</a> (тоже представитель Mozilla, а также рабочей группы CSS) заявляет:</p>
<blockquote>
<p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=308801#c31"><code>box-sizing</code> — это слабо проработанное свойство, предназначенное только для обратной совместимости с Quirks Mode</a>.</p>
</blockquote>
<p>Насколько я вижу, «за» и «против» таковы:</p>
<h3>За</h3>
<ul>
<li>Гораздо проще рассчитывать размер элемента. Это тот размер, который я задаю, вне зависимости от того, какую толщину рамки или какой отступ я указываю.</li>
<li>Мы можем указывать ширину блока в процентах для тянущихся макетов, продолжая использовать <code>em</code> или <code>px</code> для указания размеров полей. При использовании традиционной модели нам понадобится свойство <code>calc</code> для решения этой проблемы. Читайте <a href="http://css-tricks.com/box-sizing/">отличный пост Криса Койера</a> о <code>box-sizing</code> с описанием этого случая.</li>
<li>Если вы собаку съели, разрабатывая под IE, то вы уже знаете, как использовать такую модель.</li>
</ul>
<h3>Против</h3>
<ul>
<li>Если вам требуется поддерживать IE7 и ниже, то у вас нет другого варианта, кроме как использовать специальные библиотеки или переводить IE в Quirks Mode (не лучшая идея). Firefox потребует использования префиксов, и вам потребуется префикс <code>-webkit</code>, если вы заботитесь об относительно свежих версиях Webkit. Смотрите <a href="http://caniuse.com/#search=box-sizing">список браузеров, поддерживающих свойство <code>box-sizing</code></a>.</li>
<li>Всё ещё есть баги в поведении Firefox, особенно при работе с <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=308801"><code>min-</code> и <code>max-width/height</code></a> <em>(к счастью, уже исправленные — прим. редактора)</em>.</li>
<li>Вы теряете контроль над размерами контентной области блока, что может привести к непредсказуемым последствиям. Например, что будет, если размер поля равен или больше ширины или высоты блока? (Самые дотошные могут открыть спецификацию и поискать правильный ответ).</li>
<li>Пожалуй, наибольшая проблема для меня — ожидания разработчиков. Если я использую <code>* { box-sizing:border-box; }</code> в коде, который должен использоваться и расширяться другими разработчиками, я уверен, что они с большей вероятностью будут ожидать блочной модели W3C, и их стили будут вести себя не так, как они ожидают. Более того, если речь идет о разработчиках-новичках, то они могут быть вообще незнакомы с моделью IE, что потребует от них изучения дополнительных материалов перед началом работы, даже если они поймут причину такого поведения.</li>
</ul>
<h2>Что вы думаете?</h2>
<p>С учетом всего сказанного и других причин, которые, я уверен, найдутся, — что вы думаете по этому поводу? Если бы вы участвовали в проектах, где другие разработчики будут работать с вашим кодом, вы бы использовали <code>box-sizing:border-box</code>? Я создал <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">опрос</a>, так что вы можете дать мне об этом знать, и после получения результатов я сделаю отчет о том, что выбирают люди.</p>
<p>Через неделю в блоге появилась еще одна запись, уже с результатами оригинального опроса. Мы решили опубликовать перевод записи с результатами здесь же.</p>
<h2>Результаты опроса</h2>
<p>Прошла неделя с того дня, как я создал <a href="http://generatedcontent.org/post/25832131984/box-sizing">опрос об использовании <code>box-sizing:border-box</code></a>. За это время <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">форму</a> заполнили 256 человек. Результаты оказались такими:</p>
<table>
<thead>
<tr>
<th>Используете или будете использовать <code>box-sizing: border-box</code>?</th>
<th>Да</th>
<th>Нет</th>
</tr>
</thead>
<tbody>
<tr>
<td>В текущем личном проекте</td>
<td>71%</td>
<td>29%</td>
</tr>
<tr>
<td>В будущем личном проекте</td>
<td>88%</td>
<td>12%</td>
</tr>
<tr>
<td>В будущем командном проекте</td>
<td>85%</td>
<td>15%</td>
</tr>
<tr>
<td>В будущем «публичном» проекте</td>
<td>60%</td>
<td>40%</td>
</tr>
</tbody>
</table>
<p>В приведённой таблице под «командным проектом» понимается проект, в котором разработчики знакомы с человеком, принимающем решение об использовании модели <code>border-box</code> — например, группа разработчиков в одной компании или группа друзей, с которыми вы близко общаетесь в ходе работы. Под «публичным проектом» понимается проект, в котором разработчиком может быть кто угодно, с кем вы, вероятно, не можете лично согласовать выбор модели — проект с открытым исходным кодом или публичное API.</p>
<p>Хотя это не окончательные результаты голосования, есть признаки того, что разработчики комфортно чувствуют себя при использовании модели <code>border-box</code> (или планируют её использовать) и рады использовать ее в «командных проектах». Меня немного удивило количество разработчиков, уже использующих эту модель. Число разработчиков, предпочитающих применять модель <code>border-box</code> в «публичных проектах» ниже, но все равно на 20% выше, чем число тех, кто не планирует этого делать. Если результаты опроса что-то значат, не удивляйтесь, если встретите все больше проектов, использующих модель, формально считающуюся неправильной.</p>
<p>Хотя разработчики в большинстве своем предпочитают использовать <code>box-sizing:border-box</code>, многие заявили, что будут делать это только при необходимости, не применяя его ко всем элементам с помощью универсального селектора. Многие обратили внимание, что использование может нарушить работу некоторых jQuery-плагинов, и это способно ограничить применимость модели на сайтах, активно использующих jQuery. Другие сообщили, что применяли бы эту модель, если бы она была документирована, как это было с <a href="http://warpspire.com/kss/">KSS-комментариями</a> (это хороший подход при работе в команде или даже в личных проектах, если вам требуется затем поддерживать собственный код).</p>
<p>Я оставлю <a href="https://docs.google.com/spreadsheet/viewform?formkey=dE83R3I0Z29PaldPYm5nalEyU3dsNmc6MQ">опрос открытым</a> в надежде собрать больше ответов. Но поскольку соотношение результатов в <code>box-sizing:border-box;</code> составило 60 к 40 в течение недели, я не жду, что результат значительно изменится.</p>
<p>Вы все еще можете принять участие в опросе. К сожалению, результаты опроса сейчас скрыты. Но это только подогревает наше любопытство. Расскажите: а что вы думаете о возможности выбора блочной модели? Используете box-sizing:border-box; в текущих проектах? Планируете использовать?</p>
<p>Перевод оригинальных записей «<a href="http://generatedcontent.org/post/25832131984/box-sizing">Sizing Boxes (Back to the Future)</a>» и «<a href="http://generatedcontent.org/post/26334712021/box-sizing-results">Box-sizing: border-box; the results are in</a>» Дэвида Стори (David Storey), опубликованных на сайте <a href="http://generatedcontent.org/">Genetated Content</a>. Переведено и опубликовано с разрешения автора.</p>
<p>Перевод выполнил <a href="https://twitter.com/smolnikov">Сергей Смольников</a>.</p></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-article-jsx","jsonName":"articles-box-sizing-ada","path":"/articles/box-sizing/"};window.dataPath="895/path---articles-box-sizing-ada-dcd-vnisbrmoL2qDyuyPUr4DDMHeMgA";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d6d0aa46cc7a8319a706.js"],"component---src-templates-article-list-jsx":["/component---src-templates-article-list-jsx-b2857871934e9a044ec0.js"],"component---src-templates-article-jsx":["/component---src-templates-article-jsx-45c82757c31814993ac5.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx.4282b1e8f5a862472bb9.css","/component---src-pages-404-jsx-51366b521d977380588a.js"],"component---src-pages-articles-jsx":["/component---src-pages-articles-jsx.4282b1e8f5a862472bb9.css","/component---src-pages-articles-jsx-108f450be88982059d31.js"],"component---src-pages-events-jsx":["/component---src-pages-events-jsx.4282b1e8f5a862472bb9.css","/component---src-pages-events-jsx-60d370274f276520b18e.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx.4282b1e8f5a862472bb9.css","/component---src-pages-index-jsx-37c6ff1321838614c8ad.js"]};/*]]>*/</script><script src="/webpack-runtime-49e87d415bc1f49f59fb.js" async=""></script><script src="/app-d6d0aa46cc7a8319a706.js" async=""></script><script src="/component---src-templates-article-jsx-45c82757c31814993ac5.js" async=""></script></body></html>